basePath: https://client.deepspacesync.com/api/v1/
info:
  description: Deep Space API
  title: Deep Space API
  version: 2.0.0
paths:
  /v2/actions/associations:
    get:
      operationId: v2_getAssociations
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get associations for a user
      tags:
      - Actions
      x-min-permissions: isRevitUser
  /v2/addins:
    get:
      description: Get Deep Space Addins (Revit + IFC, Navis)
      operationId: getAddins
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT: []
      summary: Get Addins
      tags:
      - Addins
  /v2/business-entities:
    get:
      description: Returns MySQL link ids and Firestore metadata blocks for the requested
        workspace. FE merges and renders.
      operationId: v2_listBusinessEntitiesGet
      parameters:
      - in: query
        name: workspaceId
        required: true
        type: string
      - default: false
        in: query
        name: skipSql
        required: false
        type: boolean
      responses:
        200:
          description: Combined MySQL + Firestore blocks
          schema:
            properties:
              data:
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: List Business Entities (self, parent, children)
      tags:
      - Business Entities
    post:
      description: Returns MySQL link ids and Firestore metadata blocks for the requested
        workspace. FE merges and renders.
      operationId: v2_listBusinessEntities
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            skipSql:
              default: false
              description: Skip MySQL queries for testing
              type: boolean
            workspaceId:
              description: Workspace identifier (ds_workspace_name)
              type: string
          required:
          - workspaceId
          type: object
      responses:
        200:
          description: Combined MySQL + Firestore blocks
          schema:
            properties:
              data:
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: List Business Entities (self, parent, children)
      tags:
      - Business Entities
  /v2/business-entities/{parentWorkspaceId}/links:
    post:
      description: Creates a pending_review link. Hard-blocks self-link and existing
        approved parent; may return hasOtherPending=true.
      operationId: v2_createBusinessEntityLink
      parameters:
      - in: path
        name: parentWorkspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            childWorkspaceId:
              type: string
          required:
          - childWorkspaceId
          type: object
      responses:
        201:
          description: Draft link created
          schema:
            properties:
              data:
                properties:
                  hasOtherPending:
                    type: boolean
                  linkId:
                    type: integer
                  status:
                    type: string
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Create draft parent-child link (MySQL)
      tags:
      - Business Entities
  /v2/business-entities/{workspaceId}:
    get:
      operationId: v2_getBusinessEntity
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Firestore metadata document
          schema:
            properties:
              data:
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Get Business Entity metadata (Firestore)
      tags:
      - Business Entities
    put:
      operationId: v2_updateBusinessEntity
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            acn:
              type: string
            bank:
              properties:
                accountName:
                  type: string
                accountNumber:
                  type: string
                bsb:
                  type: string
              type: object
            contacts:
              properties:
                apEmail:
                  type: string
              type: object
            displayName:
              type: string
            logoUrl:
              type: string
            notes:
              type: string
          type: object
      responses:
        200:
          description: Saved metadata
          schema:
            type: object
      security:
      - JWT_v2: []
      summary: Update Business Entity metadata (Firestore)
      tags:
      - Business Entities
  /v2/channels/{channelAlias}/badges/{badgeTypeId}:
    get:
      description: Retrieves badges for users in a specified global company.
      operationId: v2_getBadges
      parameters:
      - description: The DS Site channel alias to retrieve badges from
        in: path
        name: channelAlias
        required: true
        type: string
      - description: The ID of the badge type to retrieve
        in: path
        name: badgeTypeId
        required: true
        type: integer
      - description: The ID of the global company to retrieve users from
        in: query
        name: globalCompanyId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  awards:
                    description: List of badge awards
                    items:
                      properties:
                        awardedBy:
                          description: User who awarded the badge
                        awardedOn:
                          description: Date and time when the badge was awarded
                        awardedTo:
                          description: User who received the badge
                      type: object
                    type: array
                  type:
                    properties:
                      id:
                        description: Badge type ID
                      image:
                        description: Image information for the badge type
                      masterVersionId:
                        description: Master version ID of the badge type
                      name:
                        description: Name of the badge type
                    type: object
                type: object
              total:
                description: Total number of badges retrieved
                type: integer
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get badges for users in a global company
      tags:
      - Badges
  /v2/coldstart-investigation:
    get:
      operationId: v2_coldstartRoot
      responses:
        200:
          description: Health check response
      summary: Health check
      tags:
      - Cold Start Investigation
  /v2/coldstart-investigation/client-profile:
    get:
      operationId: v2_coldstartClientProfile
      responses:
        200:
          description: Detailed import timing from inside google.cloud.client
      summary: Get google.cloud.client import profile as plain text
      tags:
      - Cold Start Investigation
  /v2/coldstart-investigation/client-profile/json:
    get:
      operationId: v2_coldstartClientProfileJson
      responses:
        200:
          description: Detailed import timing as JSON
      summary: Get google.cloud.client import profile as JSON
      tags:
      - Cold Start Investigation
  /v2/coldstart-investigation/correspondence-v2:
    get:
      operationId: v2_coldstartCorrV2Profile
      responses:
        200:
          description: Import timing for correspondence_v2-like dependencies
      summary: Simulate correspondence_v2 imports and show timing
      tags:
      - Cold Start Investigation
  /v2/coldstart-investigation/correspondence-v2/json:
    get:
      operationId: v2_coldstartCorrV2ProfileJson
      responses:
        200:
          description: Import timing as JSON
      summary: Simulate correspondence_v2 imports as JSON
      tags:
      - Cold Start Investigation
  /v2/coldstart-investigation/imports:
    get:
      operationId: v2_coldstartImports
      responses:
        200:
          description: Plain text import analysis report
      summary: Get all import times as plain text
      tags:
      - Cold Start Investigation
  /v2/coldstart-investigation/imports/json:
    get:
      operationId: v2_coldstartImportsJson
      responses:
        200:
          description: Full JSON with all tracked imports
      summary: Get all import times as JSON
      tags:
      - Cold Start Investigation
  /v2/coldstart-investigation/init-clients:
    get:
      operationId: v2_coldstartInitClients
      responses:
        200:
          description: Client initialization timing
      summary: Initialize clients and measure connection costs
      tags:
      - Cold Start Investigation
  /v2/coldstart-investigation/init-clients/json:
    get:
      operationId: v2_coldstartInitClientsJson
      responses:
        200:
          description: Client initialization timing as JSON
      summary: Initialize clients as JSON
      tags:
      - Cold Start Investigation
  /v2/coldstart-investigation/test:
    get:
      operationId: v2_coldstartTest
      responses:
        200:
          description: Timing summary with slowest imports
      summary: Test logging and get timing summary
      tags:
      - Cold Start Investigation
  /v2/data-sync/system-table/{reportName}:
    get:
      operationId: v2_syncSystemTableToGithub
      parameters:
      - in: path
        name: reportName
        required: true
        type: string
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Sync data from GCS to GitHub
      tags:
      - Power BI
      x-min-permissions: admin
  /v2/email-inbox/sync-worker:
    post:
      description: Background worker that performs actual email syncing from Gmail/Outlook
      operationId: v2_invoiceEmailSyncWorker
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            sync_type:
              enum:
              - incremental
              - full
              type: string
            workspace_id:
              type: string
          required:
          - workspace_id
          type: object
      responses:
        200:
          description: Sync completed
          schema:
            properties:
              results:
                type: object
              status:
                type: string
              workspace_id:
                type: string
            type: object
        500:
          description: Sync failed
      security:
      - OIDC: []
      summary: Email sync worker (Cloud Tasks)
      tags:
      - InvoiceReconciliation
  /v2/email-inbox/trigger-batch-ai-process-all:
    post:
      description: Process unprocessed emails across ALL workspaces with AI. Called
        by Cloud Scheduler for system-level batch processing. Hard limit of 200 emails
        per run to control costs.
      operationId: v2_triggerInvoiceBatchAiProcessAll
      parameters:
      - default: 50
        description: Maximum emails to process (hard cap at 200)
        in: query
        maximum: 200
        minimum: 1
        name: limit
        required: false
        type: integer
      - default: 8
        description: Number of concurrent workers for batch AI processing
        in: query
        maximum: 20
        minimum: 1
        name: max_workers
        required: false
        type: integer
      responses:
        200:
          description: Batch AI processing completed
          schema:
            properties:
              by_workspace:
                additionalProperties:
                  properties:
                    emails:
                      items:
                        description: Email IDs
                        type: string
                      type: array
                    failed:
                      type: integer
                    successful:
                      type: integer
                  type: object
                description: Per-workspace breakdown of results
                type: object
              message:
                example: Processed 50 emails across 5 workspaces
                type: string
              parameters:
                properties:
                  limit:
                    type: integer
                  max_workers:
                    type: integer
                type: object
              status:
                example: success
                type: string
              totals:
                properties:
                  failed:
                    description: Failed emails
                    type: integer
                  successful:
                    description: Successfully processed emails
                    type: integer
                  total_emails:
                    description: Total emails processed
                    type: integer
                  workspaces_affected:
                    description: Number of workspaces with processed emails
                    type: integer
                type: object
            type: object
        500:
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              message:
                type: string
              status:
                type: string
            type: object
      security:
      - OIDC: []
      summary: Trigger global batch AI processing for all workspaces (Cloud Scheduler)
      tags:
      - InvoiceReconciliation
  /v2/email-inbox/trigger-sync-all:
    post:
      description: Called by Cloud Scheduler every 15 minutes to sync all workspaces
        with connected email accounts
      operationId: v2_triggerInvoiceEmailSyncAll
      responses:
        200:
          description: Sync tasks dispatched
          schema:
            properties:
              dispatched_count:
                type: integer
              dispatched_tasks:
                items:
                  type: object
                type: array
              skipped_count:
                type: integer
              status:
                example: success
                type: string
            type: object
        500:
          description: Internal server error
      security:
      - OIDC: []
      summary: Trigger sync for all workspaces (Cloud Scheduler)
      tags:
      - InvoiceReconciliation
  /v2/files:
    get:
      operationId: v2_v2_getGlobalFiles
      parameters:
      - description: Filter by file category
        in: query
        name: category
        required: false
        type: string
      - description: Filter by file type
        in: query
        name: file_type
        required: false
        type: string
      - description: Filter by related document ID
        in: query
        name: related_document_id
        required: false
        type: string
      - description: Include all versions for each file in response
        in: query
        name: include_versions
        required: false
        type: boolean
      - description: Page number for pagination
        in: query
        name: page
        required: false
        type: integer
      - description: Number of items per page
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successfully returns files
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get global files list
      tags:
      - Get Data
    post:
      operationId: v2_v2_postGlobalFiles
      parameters:
      - description: Action type (signed-urls, process)
        in: query
        name: action
        required: false
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            files:
              description: Array of file objects
              items:
                properties:
                  category:
                    type: string
                  file_size_bytes:
                    type: integer
                  filename:
                    type: string
                  filetype:
                    type: string
                  related_document_id:
                    type: string
                type: object
              type: array
          type: object
      responses:
        200:
          description: Successfully returns signed URLs or creates file metadata
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create global file metadata or get signed URLs
      tags:
      - Upload Data
  /v2/files/general_file_upload:
    post:
      consumes:
      - multipart/form-data
      description: 'Upload a single file directly to Google Cloud Storage and receive
        a permanent public URL.

        This endpoint accepts multipart/form-data with a single file.


        The file will be made publicly accessible and a permanent URL will be returned.

        If the bucket has uniform access control enabled, a signed URL (valid for
        7 days)

        will also be provided as a fallback.


        Use the ''file'' form field for the file upload.

        '
      operationId: v2_v2_postGeneralFileUpload
      parameters:
      - description: The file to upload (single file only)
        format: binary
        in: formData
        name: file
        required: true
        type: string
      - description: File category (documents, images, videos, audio, archives, spreadsheets,
          presentations, cad, other)
        in: formData
        name: category
        required: false
        type: string
      - description: Description of the file
        in: formData
        name: description
        required: false
        type: string
      - description: Comma-separated list of tags
        in: formData
        name: tags
        required: false
        type: string
      responses:
        200:
          description: File uploaded successfully
          schema:
            properties:
              data:
                properties:
                  blob_path:
                    description: Full path to the file in the bucket
                    type: string
                  bucket:
                    description: GCS bucket name where file is stored
                    type: string
                  category:
                    description: Auto-detected or provided file category
                    type: string
                  content_type:
                    description: MIME type of the file
                    type: string
                  file_id:
                    description: Unique file identifier in the system
                    type: string
                  file_size_bytes:
                    description: Size of the file in bytes
                    type: integer
                  file_type:
                    description: File extension
                    type: string
                  is_public:
                    example: true
                    type: boolean
                  original_filename:
                    description: Original name of the uploaded file
                    type: string
                  public_url:
                    description: Permanent public URL to access the file
                    example: https://storage.googleapis.com/bucket-name/path/to/file.pdf
                    type: string
                  signed_url:
                    description: Signed URL (valid for 7 days) as fallback if public
                      access is restricted
                    type: string
                  signed_url_expires_in:
                    example: 7 days
                    type: string
                  stored_filename:
                    description: Stored filename with timestamp prefix
                    type: string
                  success:
                    example: true
                    type: boolean
                type: object
              message:
                example: File uploaded successfully
                type: string
            type: object
        400:
          description: Bad request - no file provided or invalid file
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Upload a single file directly and get permanent public URL
      tags:
      - Upload Data
  /v2/files/{fileId}:
    delete:
      operationId: v2_v2_deleteGlobalFile
      parameters:
      - in: path
        name: fileId
        required: true
        type: string
      responses:
        200:
          description: Successfully deleted file
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete global file
      tags:
      - Upload Data
    get:
      operationId: v2_v2_getGlobalFile
      parameters:
      - in: path
        name: fileId
        required: true
        type: string
      responses:
        200:
          description: Successfully returns file details
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get global file details
      tags:
      - Get Data
    patch:
      operationId: v2_v2_patchGlobalFile
      parameters:
      - in: path
        name: fileId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            category:
              type: string
            description:
              type: string
            display_name:
              type: string
            related_document_id:
              type: string
          type: object
      responses:
        200:
          description: Successfully updated file
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update global file metadata
      tags:
      - Upload Data
  /v2/files/{fileId}/new-version:
    post:
      operationId: v2_v2_postGlobalFileNewVersion
      parameters:
      - in: path
        name: fileId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            change_description:
              description: Description of changes made
              type: string
            file_size_bytes:
              description: Size of the file in bytes
              type: integer
            file_url:
              description: URL of the uploaded file
              type: string
            new_filename:
              description: Filename for the new version
              type: string
          type: object
      responses:
        200:
          description: Successfully uploaded new version
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Upload new version of existing file
      tags:
      - Upload Data
  /v2/files/{fileId}/versions:
    get:
      operationId: v2_v2_getGlobalFileVersions
      parameters:
      - in: path
        name: fileId
        required: true
        type: string
      - description: Page number for pagination
        in: query
        name: page
        required: false
        type: integer
      - description: Number of items per page
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successfully returns file versions
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get file version history
      tags:
      - Get Data
  /v2/global-companies:
    get:
      operationId: v2_getGlobalCompanies
      parameters:
      - in: query
        name: limit
        required: false
        type: number
      - in: query
        name: offset
        required: false
        type: number
      - description: Search query (case insensitive) by company name
        in: query
        name: search
        required: false
        type: string
      - description: Global Company ID
        in: query
        name: globalCompanyId
        required: false
        type: number
      - description: Include shared companies, only works if globalCompanyId is also
          provided
        in: query
        name: includeSharedCompanies
        required: false
        type: boolean
      - description: Include metadata for the global company
        in: query
        name: includeMetadata
        required: false
        type: boolean
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              limit:
                type: number
              message:
                type: string
              offset:
                type: number
              total:
                type: number
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Global Companies
      tags:
      - Global Company Directory
    post:
      operationId: v2_createGlobalCompany
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            abn:
              type: number
            company_type:
              type: string
            industry:
              type: string
            name:
              type: string
            nzbn:
              type: number
            primary_contact_email:
              type: string
            primary_contact_phone:
              type: string
          type: object
      responses:
        200:
          description: Successful response
        400:
          description: Bad Request
        401:
          description: Unauthorized
      security:
      - JWT_v2: []
      summary: Create Global Company
      tags:
      - Global Company Directory
  /v2/global-companies/alldocuments:
    get:
      operationId: v2_getAllDocuments
      parameters:
      - description: Global Company ID (base company to resolve sharing relationships)
        in: query
        name: globalCompanyId
        required: true
        type: number
      - description: Maximum number of documents to return (default 1000)
        in: query
        name: limit
        required: false
        type: number
      - description: Number of documents to skip (default 0)
        in: query
        name: offset
        required: false
        type: number
      - description: Metadata key to search for (default 'expiry_date')
        in: query
        name: metadataKey
        required: false
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    cde_id:
                      type: number
                    company_id:
                      type: number
                    created_at:
                      format: date-time
                      type: string
                    metadata_key:
                      type: string
                    metadata_value:
                      type: string
                    tenant:
                      type: string
                  type: object
                type: array
              limit:
                type: number
              message:
                type: string
              metadata_key_searched:
                type: string
              offset:
                type: number
              schemas_queried:
                type: number
              total:
                type: number
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get All Documents Across Sharing Companies
      tags:
      - Global Company Directory
  /v2/global-companies/allworkers:
    get:
      operationId: v2_getAllWorkers
      parameters:
      - description: Global Company ID (base company to resolve sharing relationships)
        in: query
        name: globalCompanyId
        required: true
        type: number
      - in: query
        name: limit
        required: false
        type: number
      - in: query
        name: offset
        required: false
        type: number
      - description: Include worker metadata using definitions from the provided global
          company
        in: query
        name: includeMetadata
        required: false
        type: boolean
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              limit:
                type: number
              message:
                type: string
              offset:
                type: number
              total:
                type: number
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get All Workers Across Sharing Companies
      tags:
      - Global Company Directory
  /v2/global-companies/batch-verify-tax-ids:
    post:
      description: 'Admin-only endpoint to verify tax IDs (ABN/NZBN) for global companies

        that have not been verified. Useful for companies synced from Xero where

        tax ID verification was skipped. Updates records with verified data including

        organisation name, entity type, and location.

        '
      operationId: v2_batchVerifyTaxIds
      parameters:
      - description: Maximum number of companies to process (useful for testing)
        in: query
        name: limit
        required: false
        type: integer
      - description: If true, only report what would be verified without updating
        in: query
        name: dry_run
        required: false
        type: boolean
      - description: Filter to specific country only
        enum:
        - Australia
        - New Zealand
        in: query
        name: country
        required: false
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              failed:
                description: Number of companies that failed to process
                type: integer
              failed_companies:
                items:
                  properties:
                    country:
                      type: string
                    error:
                      description: Error message
                      type: string
                    id:
                      type: integer
                    name:
                      type: string
                    tax_id:
                      type: string
                  type: object
                type: array
              invalid:
                description: Number of companies with invalid tax IDs
                type: integer
              invalid_companies:
                items:
                  properties:
                    country:
                      type: string
                    error:
                      description: Reason for invalid status
                      type: string
                    id:
                      type: integer
                    name:
                      type: string
                    tax_id:
                      type: string
                  type: object
                type: array
              message:
                description: Status message
                type: string
              verified:
                description: Number of companies successfully verified
                type: integer
              verified_companies:
                items:
                  properties:
                    country:
                      description: Country (Australia or New Zealand)
                      type: string
                    entity_type:
                      description: Entity type code
                      type: string
                    id:
                      description: Global company ID
                      type: integer
                    name:
                      description: Company name
                      type: string
                    organisation_name:
                      description: Official organisation name from registry
                      type: string
                    postcode:
                      description: Postcode
                      type: string
                    state_code:
                      description: State/province code
                      type: string
                    tax_id:
                      description: Company tax ID (ABN/NZBN)
                      type: string
                    trading_name:
                      description: Trading name from registry
                      type: string
                  type: object
                type: array
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden - Requires cs-admin or admin scope
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Batch Verify Tax IDs for Global Companies
      tags:
      - Global Company Directory
  /v2/global-companies/create-missing-workspaces:
    post:
      description: 'Admin-only endpoint to trigger workspace creation for all global
        companies

        that are missing workspaces. Companies must have tax_id_verified=1 and

        main_contact_email set. Messages are queued via Pub/Sub for async processing.

        '
      operationId: v2_createMissingWorkspaces
      parameters:
      - description: Maximum number of companies to process (useful for testing)
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              failed:
                description: Number of companies that failed to queue
                type: integer
              failed_companies:
                items:
                  properties:
                    error:
                      description: Error message
                      type: string
                    id:
                      type: integer
                    name:
                      type: string
                    tax_id:
                      type: string
                  type: object
                type: array
              message:
                description: Status message
                type: string
              queued:
                description: Number of companies queued for workspace creation
                type: integer
              queued_companies:
                items:
                  properties:
                    id:
                      description: Global company ID
                      type: integer
                    name:
                      description: Company name
                      type: string
                    tax_id:
                      description: Company tax ID (ABN/NZBN)
                      type: string
                  type: object
                type: array
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden - Requires cs-admin or ds-admin scope
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Missing Workspaces for Global Companies
      tags:
      - Global Company Directory
  /v2/global-companies/trade-categories:
    get:
      operationId: v2_getAllTradeCategories
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    created_at:
                      description: Timestamp when the trade category was created
                      format: date-time
                      type: string
                    created_by:
                      description: User who created the trade category
                      type: string
                    doc_type:
                      description: Document type identifier
                      type: string
                    id:
                      description: Unique identifier for the trade category
                      type: string
                    is_deleted:
                      description: Soft delete flag
                      type: boolean
                    trade_name:
                      description: Name of the trade category
                      type: string
                    updated_at:
                      description: Timestamp when the trade category was last updated
                      format: date-time
                      type: string
                  type: object
                type: array
              message:
                description: Response message
                type: string
              total:
                description: Total number of trade categories returned
                type: number
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get All Trade Categories
      tags:
      - Global Company Directory
  /v2/global-companies/{globalCompanyId}/cde/{cdeId}/metadata:
    put:
      operationId: v2_updateCdeMetadataViaGlobalCompany
      parameters:
      - description: Global Company ID (must have sharing permissions to target workspace)
        in: path
        name: globalCompanyId
        required: true
        type: number
      - description: CDE document ID to update metadata for
        in: path
        name: cdeId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            metadata_key:
              description: The key of the metadata to update
              type: string
            metadata_value:
              description: The value of the metadata to set
              type: string
            project_id:
              description: Optional project ID (if CDE is project-scoped)
              type: integer
            workspace_id:
              description: Target workspace ID where the CDE document exists
              type: string
          required:
          - workspace_id
          - metadata_key
          - metadata_value
          type: object
      responses:
        200:
          description: Successfully updated CDE metadata
          schema:
            properties:
              data:
                properties:
                  cde_id:
                    type: integer
                  metadata_key:
                    type: string
                  metadata_value:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - Invalid input data
        401:
          description: Unauthorized
        403:
          description: Forbidden - No sharing permissions or invalid CDE
        404:
          description: Not Found - CDE or workspace not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update CDE metadata via global company sharing permissions
      tags:
      - Global Company Directory
  /v2/global-companies/{globalCompanyId}/detailed-users:
    post:
      operationId: v2_bulkDetailedUserInvite
      parameters:
      - description: Global Company ID
        in: path
        name: globalCompanyId
        required: true
        type: number
      - description: Only applies for Admin use - doesn't send invite email to users
        in: query
        name: skipEmail
        required: false
        type: boolean
      - in: body
        name: body
        required: true
        schema:
          properties:
            users:
              items:
                properties:
                  email:
                    description: User's email address (required)
                    format: email
                    type: string
                  extra_details:
                    description: Worker extra details for Firestore (optional)
                    properties:
                      delegation_tier:
                        description: Worker delegation tier
                        type: string
                      employment_type:
                        description: Type of employment
                        type: string
                      job_title:
                        description: Worker's job title
                        type: string
                      labour_rate_id:
                        description: Labour rate identifier (can be empty string)
                        type: string
                      status:
                        description: Worker status (active/inactive)
                        type: boolean
                      tags:
                        description: Array of tags associated with the worker
                        items:
                          type: string
                        type: array
                      trade:
                        description: Worker's trade/profession
                        type: string
                    type: object
                  first_name:
                    description: User's first name (optional)
                    type: string
                  last_name:
                    description: User's last name (optional)
                    type: string
                required:
                - email
                type: object
              maxItems: 50
              type: array
          required:
          - users
          type: object
      responses:
        200:
          description: Successful response with detailed results
          schema:
            properties:
              belong_to_diff_company_users:
                properties:
                  message:
                    type: string
                  users:
                    items:
                      type: object
                    type: array
                type: object
              extra_details_results:
                properties:
                  failed:
                    properties:
                      message:
                        type: string
                      users:
                        items:
                          properties:
                            email:
                              type: string
                            error:
                              type: string
                            kinde_id:
                              type: string
                            message:
                              type: string
                          type: object
                        type: array
                    type: object
                  skipped:
                    properties:
                      message:
                        type: string
                      users:
                        items:
                          properties:
                            email:
                              type: string
                            kinde_id:
                              type: string
                            message:
                              type: string
                          type: object
                        type: array
                    type: object
                  successful:
                    properties:
                      message:
                        type: string
                      users:
                        items:
                          properties:
                            email:
                              type: string
                            kinde_id:
                              type: string
                            message:
                              type: string
                          type: object
                        type: array
                    type: object
                type: object
              invalid_data:
                properties:
                  message:
                    type: string
                  users:
                    items:
                      properties:
                        email:
                          type: string
                        message:
                          type: string
                        status_code:
                          type: integer
                      type: object
                    type: array
                type: object
              successful_users:
                properties:
                  message:
                    type: string
                  users:
                    items:
                      properties:
                        email:
                          type: string
                        first_name:
                          type: string
                        kinde_id:
                          type: string
                        last_name:
                          type: string
                        user_id:
                          type: string
                        username:
                          type: string
                        verified_by_company:
                          type: boolean
                        verified_by_user:
                          type: boolean
                      type: object
                    type: array
                type: object
            type: object
        400:
          description: Bad Request - Validation errors
          schema:
            properties:
              errors:
                items:
                  type: string
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden - User does not have IsPrimaryCompanyAdmin permission
        404:
          description: Not Found - Global company not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Bulk Detailed User Invite (with Worker Extra Details)
      tags:
      - Global Company Directory
  /v2/global-companies/{globalCompanyId}/metadata:
    put:
      operationId: v2_saveGlobalCompanyMetadataValues
      parameters:
      - in: path
        name: globalCompanyId
        required: true
        type: number
      - in: body
        name: body
        required: true
        schema:
          properties:
            metadata_values:
              items:
                properties:
                  metadata_from_global_company_id:
                    description: ID of the company this metadata is from
                    type: number
                  metadata_key:
                    description: Key of the metadata definition
                    type: string
                  metadata_value:
                    description: Value to save for this metadata
                    type: string
                required:
                - metadata_key
                - metadata_value
                - metadata_from_global_company_id
                type: object
              type: array
          required:
          - metadata_values
          type: object
      responses:
        200:
          description: Metadata values saved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    global_metadata_id:
                      type: number
                    metadata_from_id_global_company_directory:
                      type: number
                    metadata_key:
                      type: string
                    metadata_name:
                      type: string
                    metadata_type:
                      type: string
                    metadata_value:
                      type: string
                    shared_metadata_id:
                      type: number
                  type: object
                type: array
              message:
                type: string
            type: object
        400:
          description: Bad Request - Invalid input data
        401:
          description: Unauthorized
        404:
          description: Not Found - No metadata definitions found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Save or replace metadata values for a global company
      tags:
      - Global Company Directory
  /v2/global-companies/{globalCompanyId}/metadata/definitions:
    delete:
      operationId: v2_deleteGlobalCompanyMetadataDefinition
      parameters:
      - in: path
        name: globalCompanyId
        required: true
        type: number
      - in: body
        name: body
        required: true
        schema:
          properties:
            metadata_key:
              description: Key of the metadata definition to delete
              type: string
          required:
          - metadata_key
          type: object
      responses:
        200:
          description: Metadata definition deleted successfully
          schema:
            properties:
              data:
                properties:
                  editable_by:
                    type: string
                  global_metadata_id:
                    type: number
                  max_allowed_values:
                    type: number
                  metadata_enum_json:
                    type: string
                  metadata_key:
                    type: string
                  metadata_name:
                    type: string
                  metadata_type:
                    type: string
                  min_allowed_values:
                    type: number
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - Invalid input data
        401:
          description: Unauthorized
        404:
          description: Not Found - Metadata definition not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete a metadata definition for a global company
      tags:
      - Global Company Directory
    get:
      operationId: v2_getGlobalCompanyMetadataDefinitions
      parameters:
      - in: path
        name: globalCompanyId
        required: true
        type: number
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    editable_by:
                      type: string
                    global_metadata_id:
                      type: number
                    max_allowed_values:
                      type: number
                    metadata_enum_json:
                      type: string
                    metadata_key:
                      type: string
                    metadata_name:
                      type: string
                    metadata_type:
                      enum:
                      - STRING
                      - NUMBER
                      - ENUM
                      type: string
                    min_allowed_values:
                      type: number
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Not Found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get metadata definitions for a global company
      tags:
      - Global Company Directory
    patch:
      operationId: v2_updateGlobalCompanyMetadataDefinition
      parameters:
      - in: path
        name: globalCompanyId
        required: true
        type: number
      - in: body
        name: body
        required: true
        schema:
          properties:
            editable_by:
              description: Who can edit this metadata
              type: string
            max_allowed_values:
              description: Maximum number of values allowed
              type: number
            metadata_enum_json:
              description: JSON string of enum values (required when metadata_type
                is ENUM)
              type: string
            metadata_key:
              description: Key of the metadata definition to update
              type: string
            metadata_name:
              description: Display name for the metadata definition
              type: string
            metadata_type:
              description: Type of metadata value
              enum:
              - STRING
              - NUMBER
              - ENUM
              type: string
            min_allowed_values:
              description: Minimum number of values allowed
              type: number
          required:
          - metadata_key
          type: object
      responses:
        200:
          description: Metadata definition updated successfully
          schema:
            properties:
              data:
                properties:
                  editable_by:
                    type: string
                  global_metadata_id:
                    type: number
                  max_allowed_values:
                    type: number
                  metadata_enum_json:
                    type: string
                  metadata_key:
                    type: string
                  metadata_name:
                    type: string
                  metadata_type:
                    type: string
                  min_allowed_values:
                    type: number
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - Invalid input data
        401:
          description: Unauthorized
        404:
          description: Not Found - Metadata definition not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update a metadata definition for a global company
      tags:
      - Global Company Directory
    post:
      operationId: v2_createGlobalCompanyMetadataDefinition
      parameters:
      - in: path
        name: globalCompanyId
        required: true
        type: number
      - in: body
        name: body
        required: true
        schema:
          properties:
            editable_by:
              default: company_admin
              description: Who can edit this metadata
              type: string
            max_allowed_values:
              description: Maximum number of values allowed
              type: number
            metadata_enum_json:
              description: JSON string of enum values (required when metadata_type
                is ENUM)
              type: string
            metadata_key:
              description: Unique key for the metadata definition
              type: string
            metadata_name:
              description: Display name for the metadata definition
              type: string
            metadata_type:
              description: Type of metadata value
              enum:
              - STRING
              - NUMBER
              - ENUM
              type: string
            min_allowed_values:
              description: Minimum number of values allowed
              type: number
          required:
          - metadata_key
          - metadata_name
          - metadata_type
          type: object
      responses:
        201:
          description: Metadata definition created successfully
          schema:
            properties:
              data:
                properties:
                  editable_by:
                    type: string
                  global_metadata_id:
                    type: number
                  max_allowed_values:
                    type: number
                  metadata_enum_json:
                    type: string
                  metadata_key:
                    type: string
                  metadata_name:
                    type: string
                  metadata_type:
                    type: string
                  min_allowed_values:
                    type: number
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - Invalid input data
        401:
          description: Unauthorized
        409:
          description: Conflict - Metadata key already exists
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create new metadata definition for a global company
      tags:
      - Global Company Directory
  /v2/global-companies/{globalCompanyId}/metadata/hz:
    get:
      operationId: v2_getGlobalCompanyMetadataHz
      parameters:
      - description: Global Company ID
        in: path
        name: globalCompanyId
        required: true
        type: number
      responses:
        200:
          description: Successfully retrieved hz metadata
          schema:
            properties:
              data:
                properties:
                  capabilities:
                    items:
                      properties:
                        capability:
                          type: string
                        capability_id:
                          type: string
                      type: object
                    type: array
                  created_at:
                    type: string
                  engagement:
                    items:
                      properties:
                        date:
                          type: string
                        description:
                          type: string
                        engagement_id:
                          type: string
                        logged_by:
                          type: string
                        notes:
                          type: string
                        type:
                          enum:
                          - phone_call
                          - meeting
                          - email
                          - note
                          type: string
                      type: object
                    type: array
                  global_company_id:
                    type: number
                  global_company_metadata_id:
                    type: string
                  lesson:
                    items:
                      properties:
                        description:
                          type: string
                        improvement_opportunity:
                          type: string
                        lesson_id:
                          type: string
                        project_id:
                          type: number
                        risk_category:
                          enum:
                          - commercial
                          - quality
                          - safety
                          - schedule
                          - technical
                          type: string
                        title:
                          type: string
                        trade:
                          enum:
                          - electrical
                          - mechanical_services
                          - structural_steel
                          - concrete
                          - plumbing
                          type: string
                        type:
                          enum:
                          - positive
                          - negative
                          type: string
                      type: object
                    type: array
                  service_region:
                    items:
                      properties:
                        region:
                          type: string
                        region_id:
                          type: string
                      type: object
                    type: array
                  tags:
                    items:
                      properties:
                        tag:
                          type: string
                        tag_id:
                          type: string
                      type: object
                    type: array
                  tax_id:
                    type: string
                  updated_at:
                    type: string
                  website_url:
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden - User does not have IsPrimaryCompanyAdmin permission
        404:
          description: Not Found - Global company not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get global company hz metadata
      tags:
      - Global Company Directory
    patch:
      operationId: v2_patchGlobalCompanyMetadataHz
      parameters:
      - description: Global Company ID
        in: path
        name: globalCompanyId
        required: true
        type: number
      - in: body
        name: body
        required: true
        schema:
          properties:
            capabilities:
              items:
                properties:
                  capability:
                    type: string
                  capability_id:
                    type: string
                type: object
              type: array
            engagement:
              items:
                properties:
                  date:
                    type: string
                  description:
                    type: string
                  engagement_id:
                    type: string
                  logged_by:
                    type: string
                  notes:
                    type: string
                  type:
                    enum:
                    - phone_call
                    - meeting
                    - email
                    - note
                    type: string
                type: object
              type: array
            lesson:
              items:
                properties:
                  description:
                    type: string
                  improvement_opportunity:
                    type: string
                  lesson_id:
                    type: string
                  project_id:
                    type: number
                  risk_category:
                    enum:
                    - commercial
                    - quality
                    - safety
                    - schedule
                    - technical
                    type: string
                  title:
                    type: string
                  trade:
                    enum:
                    - electrical
                    - mechanical_services
                    - structural_steel
                    - concrete
                    - plumbing
                    type: string
                  type:
                    enum:
                    - positive
                    - negative
                    type: string
                type: object
              type: array
            service_region:
              items:
                properties:
                  region:
                    type: string
                  region_id:
                    type: string
                type: object
              type: array
            tags:
              items:
                properties:
                  tag:
                    type: string
                  tag_id:
                    type: string
                type: object
              type: array
            website_url:
              description: Company website URL
              type: string
          type: object
      responses:
        200:
          description: Successfully updated hz metadata
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - Invalid input data
        401:
          description: Unauthorized
        403:
          description: Forbidden - User does not have IsPrimaryCompanyAdmin permission
        404:
          description: Not Found - Global company hz metadata not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update global company hz metadata
      tags:
      - Global Company Directory
  /v2/global-companies/{globalCompanyId}/metadata/hz/{arrayType}:
    get:
      operationId: v2_getGlobalCompanyMetadataHzArrayItems
      parameters:
      - description: Global Company ID
        in: path
        name: globalCompanyId
        required: true
        type: number
      - description: Type of array to retrieve
        enum:
        - tags
        - capabilities
        - service_region
        - engagement
        - lesson
        in: path
        name: arrayType
        required: true
        type: string
      responses:
        200:
          description: Successfully retrieved array items
          schema:
            properties:
              count:
                type: number
              items:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        400:
          description: Bad Request - Invalid array type
        401:
          description: Unauthorized
        403:
          description: Forbidden - User does not have IsPrimaryCompanyAdmin permission
        404:
          description: Not Found - Global company hz metadata not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get array items from global company hz metadata
      tags:
      - Global Company Directory
    post:
      operationId: v2_createGlobalCompanyMetadataHzArrayItem
      parameters:
      - description: Global Company ID
        in: path
        name: globalCompanyId
        required: true
        type: number
      - description: Type of array to add item to
        enum:
        - tags
        - capabilities
        - service_region
        - engagement
        - lesson
        in: path
        name: arrayType
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          description: Item data to add (varies by array type)
          type: object
      responses:
        201:
          description: Successfully added array item
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - Invalid input data or array type
        401:
          description: Unauthorized
        403:
          description: Forbidden - User does not have IsPrimaryCompanyAdmin permission
        404:
          description: Not Found - Global company hz metadata not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Add new item to global company hz metadata array
      tags:
      - Global Company Directory
  /v2/global-companies/{globalCompanyId}/metadata/hz/{arrayType}/{itemId}:
    delete:
      operationId: v2_deleteGlobalCompanyMetadataHzArrayItem
      parameters:
      - description: Global Company ID
        in: path
        name: globalCompanyId
        required: true
        type: number
      - description: Type of array containing the item
        enum:
        - tags
        - capabilities
        - service_region
        - engagement
        - lesson
        in: path
        name: arrayType
        required: true
        type: string
      - description: ID of the specific item to delete
        in: path
        name: itemId
        required: true
        type: string
      responses:
        200:
          description: Successfully deleted array item
          schema:
            properties:
              message:
                type: string
            type: object
        400:
          description: Bad Request - Invalid array type
        401:
          description: Unauthorized
        403:
          description: Forbidden - User does not have IsPrimaryCompanyAdmin permission
        404:
          description: Not Found - Item or metadata not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete specific item from global company hz metadata array
      tags:
      - Global Company Directory
    get:
      operationId: v2_getGlobalCompanyMetadataHzArrayItem
      parameters:
      - description: Global Company ID
        in: path
        name: globalCompanyId
        required: true
        type: number
      - description: Type of array containing the item
        enum:
        - tags
        - capabilities
        - service_region
        - engagement
        - lesson
        in: path
        name: arrayType
        required: true
        type: string
      - description: ID of the specific item to retrieve
        in: path
        name: itemId
        required: true
        type: string
      responses:
        200:
          description: Successfully retrieved array item
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - Invalid array type
        401:
          description: Unauthorized
        403:
          description: Forbidden - User does not have IsPrimaryCompanyAdmin permission
        404:
          description: Not Found - Item or metadata not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get specific item from global company hz metadata array
      tags:
      - Global Company Directory
    patch:
      operationId: v2_updateGlobalCompanyMetadataHzArrayItem
      parameters:
      - description: Global Company ID
        in: path
        name: globalCompanyId
        required: true
        type: number
      - description: Type of array containing the item
        enum:
        - tags
        - capabilities
        - service_region
        - engagement
        - lesson
        in: path
        name: arrayType
        required: true
        type: string
      - description: ID of the specific item to update
        in: path
        name: itemId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          description: Partial item data to update (varies by array type)
          type: object
      responses:
        200:
          description: Successfully updated array item
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - Invalid input data or array type
        401:
          description: Unauthorized
        403:
          description: Forbidden - User does not have IsPrimaryCompanyAdmin permission
        404:
          description: Not Found - Item or metadata not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update specific item in global company hz metadata array
      tags:
      - Global Company Directory
  /v2/global-companies/{globalCompanyId}/users:
    get:
      operationId: v2_getGlobalCompanyUsers
      parameters:
      - in: path
        name: globalCompanyId
        required: true
        type: number
      - in: query
        name: limit
        required: false
        type: number
      - in: query
        name: offset
        required: false
        type: number
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              limit:
                type: number
              message:
                type: string
              offset:
                type: number
              total:
                type: number
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Users in a Global Company
      tags:
      - Global Company Directory
    post:
      operationId: v2_bulkUserInvite
      parameters:
      - in: path
        name: globalCompanyId
        required: true
        type: number
      - description: Only applies for Admin use - doesn't send invite email to users
        in: query
        name: skipEmail
        required: false
        type: boolean
      - in: body
        name: body
        required: true
        schema:
          properties:
            users:
              items:
                properties:
                  email:
                    type: string
                  first_name:
                    type: string
                  last_name:
                    type: string
                required:
                - email
                type: object
              type: array
          type: object
      responses:
        200:
          description: Successful response
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Bulk User Invite
      tags:
      - Global Company Directory
  /v2/global-companies/{globalCompanyId}/users/{kindeId}:
    get:
      operationId: v2_getGlobalCompanyUserByKindeId
      parameters:
      - in: path
        name: globalCompanyId
        required: true
        type: number
      - description: Kinde ID of the user to retrieve
        in: path
        name: kindeId
        required: true
        type: string
      - description: Include metadata for the user
        in: query
        name: includeMetadata
        required: false
        type: boolean
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  email:
                    type: string
                  first_name:
                    type: string
                  kinde_id:
                    type: string
                  last_name:
                    type: string
                  metadata:
                    items:
                      properties:
                        metadata_key:
                          type: string
                        metadata_value:
                          type: string
                      type: object
                    type: array
                  username:
                    type: string
                  verified_by_company:
                    type: boolean
                  verified_by_user:
                    type: boolean
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: User not found in the specified global company
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get User by Kinde ID in a Global Company
      tags:
      - Global Company Directory
  /v2/global-companies/{globalCompanyId}/vendors/approve:
    post:
      operationId: v2_approveVendorSharing
      parameters:
      - in: path
        name: globalCompanyId
        required: true
        type: number
      - in: body
        name: body
        required: true
        schema:
          properties:
            approval_status:
              enum:
              - APPROVED
              - REJECTED
              type: string
            global_company_id:
              type: number
          required:
          - global_company_id
          - approval_status
          type: object
      responses:
        200:
          description: Successful response
          schema:
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Approve vendor sharing
      tags:
      - Global Company Directory
  /v2/global-companies/{globalCompanyId}/vendors/request:
    delete:
      operationId: v2_removeVendorSharingRequest
      parameters:
      - in: path
        name: globalCompanyId
        required: true
        type: number
      - in: body
        name: body
        required: true
        schema:
          properties:
            global_company_id:
              type: number
          required:
          - global_company_id
          type: object
      responses:
        200:
          description: Successful response
          schema:
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Remove vendor sharing request
      tags:
      - Global Company Directory
    post:
      operationId: v2_requestVendorSharing
      parameters:
      - in: path
        name: globalCompanyId
        required: true
        type: number
      - in: body
        name: body
        required: true
        schema:
          properties:
            global_company_id:
              type: number
            sharing_level:
              enum:
              - FULL
              type: string
          required:
          - global_company_id
          type: object
      responses:
        200:
          description: Successful response
          schema:
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Request vendor sharing
      tags:
      - Global Company Directory
  /v2/hz-document-sections:
    get:
      operationId: v2_listHzDocumentSections
      responses:
        200:
          description: Document sections retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    case_entity_types:
                      description: Entity types that can provide variables for this
                        section (e.g., ['head_contract_claim'])
                      items:
                        type: string
                      type: array
                    category:
                      description: Category name (e.g., Preconstruction, Commercial)
                      type: string
                    created_at:
                      format: date-time
                      type: string
                    id:
                      type: string
                    type:
                      description: Type name (e.g., Tender Documents, Progress Claims)
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
      security:
      - JWT_v2: []
      summary: List all document sections (categories and sections)
      tags:
      - HzDocumentTemplates
    post:
      operationId: v2_createHzDocumentSection
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            case_entity_types:
              description: Entity types that can provide variables for this section
              items:
                type: string
              type: array
            category:
              description: Category name
              type: string
            type:
              description: Type name
              type: string
          required:
          - category
          - type
          type: object
      responses:
        201:
          description: Document section created successfully
          schema:
            properties:
              data:
                properties:
                  case_entity_types:
                    items:
                      type: string
                    type: array
                  category:
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  id:
                    type: string
                  type:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - validation failed
        401:
          description: Unauthorized
      security:
      - JWT_v2: []
      summary: Create a new document section
      tags:
      - HzDocumentTemplates
  /v2/hz-document-sections/{section_id}:
    delete:
      operationId: v2_deleteHzDocumentSection
      parameters:
      - description: Document section ID
        in: path
        name: section_id
        required: true
        type: string
      responses:
        200:
          description: Document section deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Document section not found
      security:
      - JWT_v2: []
      summary: Delete a document section (soft delete)
      tags:
      - HzDocumentTemplates
    get:
      operationId: v2_getHzDocumentSection
      parameters:
      - description: Document section ID
        in: path
        name: section_id
        required: true
        type: string
      responses:
        200:
          description: Document section retrieved successfully
          schema:
            properties:
              data:
                properties:
                  case_entity_types:
                    items:
                      type: string
                    type: array
                  category:
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  id:
                    type: string
                  type:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Document section not found
      security:
      - JWT_v2: []
      summary: Get a specific document section
      tags:
      - HzDocumentTemplates
    put:
      operationId: v2_updateHzDocumentSection
      parameters:
      - description: Document section ID
        in: path
        name: section_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            case_entity_types:
              description: Entity types that can provide variables
              items:
                type: string
              type: array
            category:
              description: Category name
              type: string
            type:
              description: Type name
              type: string
          type: object
      responses:
        200:
          description: Document section updated successfully
          schema:
            properties:
              data:
                properties:
                  case_entity_types:
                    items:
                      type: string
                    type: array
                  category:
                    type: string
                  id:
                    type: string
                  type:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - validation failed
        401:
          description: Unauthorized
        404:
          description: Document section not found
      security:
      - JWT_v2: []
      summary: Update a document section
      tags:
      - HzDocumentTemplates
  /v2/hz-notification-categories:
    get:
      operationId: v2_getHzNotificationCategories
      responses:
        200:
          description: Successfully retrieved notification categories
          schema:
            properties:
              data:
                items:
                  properties:
                    id:
                      type: string
                    types:
                      items:
                        properties:
                          description:
                            type: string
                          id:
                            type: string
                          name:
                            type: string
                        type: object
                      type: array
                  type: object
                type: array
              message:
                type: string
            type: object
      security:
      - JWT_v2: []
      summary: List all notification categories with types
      tags:
      - HzNotifications
  /v2/hz-notification-sender/process:
    post:
      description: 'Processes an email queue item. Triggered by Cloud Tasks. No authentication
        required - Cloud Tasks is a trusted service. Routes to appropriate handler
        based on type: - email: Regular template-based email - email_document: Email
        with PDF attachment from document template - tender_document: Tender-specific
        document processing

        '
      operationId: v2_processHzNotificationEmail
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            queue_id:
              description: The email queue item ID to process
              type: string
            type:
              default: email
              description: 'Type of email processing: ''email'' for regular emails,
                ''email_document'' for emails with PDF attachments, ''tender_document''
                for tender-specific document processing

                '
              enum:
              - email
              - email_document
              - tender_document
              type: string
          required:
          - queue_id
          type: object
      responses:
        200:
          description: Email processed successfully
          schema:
            properties:
              data:
                additionalProperties: true
                description: Processing result data
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - invalid queue_id or type
        500:
          description: Internal server error - processing failed
      summary: Process Email Queue Item
      tags:
      - HzNotificationSenderV2
  /v2/hz-notification-template-variables:
    get:
      operationId: v2_getHzNotificationTemplateVariables
      responses:
        200:
          description: Successfully retrieved template variables
          schema:
            properties:
              data:
                items:
                  properties:
                    id:
                      type: string
                    name:
                      type: string
                    variables:
                      items:
                        properties:
                          field_description:
                            type: string
                          field_name:
                            type: string
                          id:
                            type: string
                        type: object
                      type: array
                  type: object
                type: array
              message:
                type: string
            type: object
      security:
      - JWT_v2: []
      summary: List template variable groups with variables
      tags:
      - HzNotifications
  /v2/hz-notification-variables:
    get:
      description: 'Returns the complete variable catalog with all available template
        variables. This is a static catalog defined in code for type safety and API
        stability. No authentication required - returns static catalog.

        '
      operationId: v2_getHzNotificationVariableCatalog
      responses:
        200:
          description: Variable catalog retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    category:
                      description: Category for grouping
                      enum:
                      - system
                      - claim
                      - contract
                      - project
                      - recipient
                      type: string
                    description:
                      description: Description of what this group contains
                      type: string
                    id:
                      description: Group ID
                      type: string
                    name:
                      description: Display name for the group
                      type: string
                    variables:
                      items:
                        properties:
                          category:
                            enum:
                            - system
                            - claim
                            - contract
                            - project
                            - recipient
                            type: string
                          data_type:
                            enum:
                            - string
                            - number
                            - date
                            - datetime
                            - boolean
                            - currency
                            type: string
                          description:
                            description: What this variable contains
                            type: string
                          example_value:
                            description: Example value for preview
                            type: string
                          format_hint:
                            description: Format hint for display
                            type: string
                          id:
                            description: Variable ID (e.g., 'claim_id')
                            type: string
                          name:
                            description: Display name (e.g., 'Claim ID')
                            type: string
                          source_field:
                            description: Source entity field path
                            type: string
                        type: object
                      type: array
                  type: object
                type: array
              message:
                type: string
              version:
                description: Catalog version for client caching
                type: string
            type: object
        500:
          description: Internal server error
      summary: Get Variable Catalog
      tags:
      - HzNotificationSenderV2
  /v2/hz-notification-variables/{entity_type}:
    get:
      description: 'Returns variable groups relevant to a specific entity type.

        **Integration with Document Templates:** Document sections and templates have
        a `case_entity_types` field that specifies which entity types are applicable.
        When a user selects a template with `case_entity_types: ["head_contract_claim"]`,
        the frontend should call this endpoint to get the available variables for
        that entity type, enabling the user to insert variables into the template
        content.

        '
      operationId: v2_getHzNotificationVariablesForEntityType
      parameters:
      - description: Type of entity (e.g., 'head_contract_claim')
        in: path
        name: entity_type
        required: true
        type: string
      responses:
        200:
          description: Variables for entity type retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    category:
                      enum:
                      - system
                      - claim
                      - contract
                      - project
                      - recipient
                      type: string
                    description:
                      description: Description of what this group contains
                      type: string
                    id:
                      description: Group ID
                      type: string
                    name:
                      description: Display name for the group
                      type: string
                    variables:
                      items:
                        properties:
                          category:
                            type: string
                          data_type:
                            type: string
                          description:
                            type: string
                          example_value:
                            type: string
                          format_hint:
                            type: string
                          id:
                            type: string
                          name:
                            type: string
                          source_field:
                            type: string
                        type: object
                      type: array
                  type: object
                type: array
              message:
                type: string
              version:
                description: Catalog version for client caching
                type: string
            type: object
        500:
          description: Internal server error
      summary: Get Variables for Entity Type
      tags:
      - HzNotificationSenderV2
  /v2/hz-notifications/email/queue/process-single:
    post:
      description: 'Internal endpoint called by Cloud Tasks to process queue items.

        No authentication required as this is called by trusted Cloud Tasks service.

        Supports two types of queue processing:

        - Notification emails (type: "email" or omitted)

        - Tender document emails with PDF attachments (type: "tender_document")

        Workspace ID is extracted from the queue item itself.

        '
      operationId: v2_processHzQueueItemCloudTasks
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            queue_id:
              description: ID of the queue item to process (from hz_email_queue or
                hz_tender_document_email_queue)
              type: string
            type:
              default: email
              description: 'Type of queue item to process:

                - "email": Process notification email queue item (default)

                - "tender_document": Process tender document email with PDF attachment

                '
              enum:
              - email
              - tender_document
              type: string
          required:
          - queue_id
          type: object
      responses:
        200:
          description: Email sent successfully
          schema:
            properties:
              data:
                properties:
                  queue_id:
                    type: string
                  sent_at:
                    type: string
                  status:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Invalid request
          schema:
            properties:
              error:
                type: string
              message:
                type: string
            type: object
        404:
          description: Queue item not found
          schema:
            properties:
              error:
                type: string
              message:
                type: string
            type: object
        500:
          description: Processing failed, Cloud Tasks will retry
          schema:
            properties:
              error:
                type: string
              message:
                type: string
            type: object
      summary: Process queue item - email or tender document (Cloud Tasks only)
      tags:
      - HzNotificationSender
  /v2/hz-tender-documents-available-sections:
    get:
      description: Retrieve the global list of available tender document sections
        from Firestore
      operationId: v2_listHzTenderDocumentsAvailableSections
      responses:
        200:
          description: Available sections retrieved successfully
          schema:
            properties:
              sections:
                items:
                  properties:
                    description:
                      description: Description of what this section contains
                      type: string
                    is_required:
                      description: Whether this section is required in documents
                      type: boolean
                    name:
                      description: Display name of the section
                      type: string
                    section_key:
                      description: Snake_case section identifier (document ID)
                      type: string
                  type: object
                type: array
              total:
                description: Total number of available sections
                type: integer
            type: object
        401:
          description: Unauthorized
      security:
      - JWT_v2: []
      summary: Get all available tender document sections
      tags:
      - HzTenderDocuments
  /v2/jobs/{job_guid}/status:
    get:
      operationId: v2_getJobStatusGlobal
      parameters:
      - in: path
        name: job_guid
        required: true
        type: integer
      responses:
        202:
          description: Returns job status
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get job status
      tags:
      - Jobs
  /v2/jobs/{job_id}:
    post:
      operationId: v2_startJobGlobal
      parameters:
      - in: path
        name: job_id
        required: true
        type: integer
      responses:
        202:
          description: Job started, returns job guid
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Start a new job at global-level
      tags:
      - Jobs
  /v2/link-ds-site-channel/{channelType}:
    post:
      operationId: v2_linkDsSiteChannel
      parameters:
      - in: path
        name: channelType
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            channelAlias:
              description: Alias of the channel to link
              type: string
            channelApiKey:
              description: API key for the channel to link
              type: string
            channelId:
              description: ID of the channel to link
              type: string
            webhookBearerToken:
              description: Bearer token for the webhook to link
              type: string
            workspaceId:
              description: ID of existing DS Platform workspace
              type: string
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Link DS Site Channel
      tags:
      - User Profiles
  /v2/migrations/{migrationId}:
    post:
      operationId: v2_runMigration
      parameters:
      - in: path
        name: migrationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            functiondata:
              description: The data to pass to the migration function (see migration
                documentation)
              type: object
            region:
              description: The region of the workspace
              type: string
            workspace:
              description: The workspace to run the migration on
              type: string
          required:
          - region
          - workspace
          - functiondata
          type: object
      responses:
        207:
          description: Migration ran, see response for details
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Run a schema migration
      tags:
      - Migrations
      x-min-permissions: admin
  /v2/notifications:
    get:
      operationId: v2_getNotifications
      parameters:
      - description: User ID to get notifications for (admin only)
        in: query
        name: user_id
        required: false
        type: string
      - default: 50
        description: Number of notifications to return
        in: query
        name: limit
        required: false
        type: integer
      - default: 0
        description: Number of notifications to skip
        in: query
        name: offset
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    attachments:
                      items:
                        type: string
                      type: array
                    ds_project_id:
                      type: string
                    ds_workspace_name:
                      type: string
                    email:
                      type: boolean
                    global_notification_queue_id:
                      type: integer
                    importance:
                      enum:
                      - notification
                      - warning
                      - alert
                      type: string
                    in_app:
                      type: boolean
                    in_app_read:
                      type: boolean
                    json_fields:
                      type: string
                    notification_template_id:
                      type: string
                    queued_date:
                      format: date-time
                      type: string
                    recipients:
                      properties:
                        bcc:
                          items:
                            type: string
                          type: array
                        cc:
                          items:
                            type: string
                          type: array
                        to:
                          items:
                            type: string
                          type: array
                      type: object
                    scheduled_to_send_date:
                      format: date-time
                      type: string
                    sent_date:
                      format: date-time
                      type: string
                    sent_status:
                      type: string
                    template_description:
                      type: string
                    template_name:
                      type: string
                  type: object
                type: array
              limit:
                type: integer
              message:
                type: string
              offset:
                type: integer
              total:
                type: integer
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get notifications for the authenticated user
      tags:
      - Notifications
    patch:
      operationId: v2_acknowledgeNotifications
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            notification_ids:
              description: Array of notification IDs to mark as read
              items:
                type: integer
              type: array
          required:
          - notification_ids
          type: object
      responses:
        200:
          description: Notifications acknowledged successfully
          schema:
            properties:
              data:
                properties:
                  notification_ids:
                    items:
                      type: integer
                    type: array
                  notifications_acknowledged:
                    type: integer
                  user_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Acknowledge/read notifications for the authenticated user
      tags:
      - Notifications
    post:
      operationId: v2_createNotification
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            attachments:
              description: Array of CDE IDs to attach
              items:
                type: string
              type: array
            email:
              default: true
              description: Whether to send via email
              type: boolean
            importance:
              default: notification
              description: Importance level of the notification
              enum:
              - notification
              - warning
              - alert
              type: string
            inApp:
              default: true
              description: Whether to send in-app notification
              type: boolean
            jsonFields:
              description: JSON fields to populate the template
              type: object
            notificationTemplateId:
              description: ID of the notification template to use
              type: string
            recipients:
              properties:
                bcc:
                  description: Blind carbon copy recipients
                  items:
                    type: string
                  type: array
                cc:
                  description: Carbon copy recipients
                  items:
                    type: string
                  type: array
                to:
                  description: Primary recipients
                  items:
                    type: string
                  type: array
              required:
              - to
              type: object
            scheduledToSendDate:
              description: When to send the notification (optional)
              format: date-time
              type: string
          required:
          - notificationTemplateId
          - recipients
          type: object
      responses:
        201:
          description: Notification created successfully
          schema:
            properties:
              data:
                properties:
                  attachments:
                    type: array
                  ds_project_id:
                    type: string
                  ds_workspace_name:
                    type: string
                  email:
                    type: boolean
                  global_notification_queue_id:
                    type: integer
                  importance:
                    type: string
                  in_app:
                    type: boolean
                  json_fields:
                    type: string
                  notification_template_id:
                    type: string
                  recipients:
                    type: object
                  scheduled_to_send_date:
                    format: date-time
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        403:
          description: Forbidden (admin access required)
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a new notification (admin only)
      tags:
      - Notifications
  /v2/notifications/process:
    post:
      operationId: v2_processNotification
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            global_notification_queue_id:
              description: ID of the notification to process
              type: string
          required:
          - global_notification_queue_id
          type: object
      responses:
        202:
          description: Notification processing started
          schema:
            properties:
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        403:
          description: Forbidden (admin access required)
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Process a queued notification (admin only)
      tags:
      - Notifications
  /v2/notified-users/{kinde_id}/email-accounts:
    get:
      operationId: v2_listEmailAccounts
      parameters:
      - description: User's Kinde ID (use 'me' or 'self' for current user)
        in: path
        name: kinde_id
        required: true
        type: string
      responses:
        200:
          description: Provider connection statuses retrieved successfully
          schema:
            properties:
              google:
                properties:
                  connected_at:
                    example: '2025-01-15T10:30:00Z'
                    format: date-time
                    type: string
                  email:
                    example: user@gmail.com
                    type: string
                  is_connected:
                    example: true
                    type: boolean
                  is_primary:
                    description: Whether this provider is set as primary for sending
                      emails
                    example: false
                    type: boolean
                type: object
              microsoft:
                properties:
                  is_connected:
                    example: false
                    type: boolean
                  is_primary:
                    example: false
                    type: boolean
                type: object
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: List all email provider connection statuses for user
      tags:
      - HzEmailIntegration
  /v2/notified-users/{kinde_id}/email-accounts/auth-url:
    get:
      operationId: v2_getEmailAccountsAuthUrl
      parameters:
      - description: User's Kinde ID (use 'me' or 'self' for current user)
        in: path
        name: kinde_id
        required: true
        type: string
      - description: Email provider name
        enum:
        - google
        - microsoft
        in: query
        name: provider
        required: true
        type: string
      - description: Frontend callback URL where OAuth code will be sent
        in: query
        name: redirect_uri
        required: true
        type: string
      responses:
        200:
          description: Authorization URL generated successfully
          schema:
            properties:
              auth_url:
                example: https://accounts.google.com/o/oauth2/v2/auth?...
                type: string
              provider:
                example: google
                type: string
              state:
                description: CSRF protection state parameter
                example: 978f7077-ad79-4ec2-bc00-5ed2cb6dce5e
                type: string
            type: object
        400:
          description: Bad request - missing or invalid parameters
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get OAuth authorization URL for email provider
      tags:
      - HzEmailIntegration
  /v2/notified-users/{kinde_id}/email-accounts/callback:
    post:
      operationId: v2_emailAccountsCallback
      parameters:
      - description: User's Kinde ID (use 'me' or 'self' for current user)
        in: path
        name: kinde_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            code:
              description: Authorization code from OAuth provider
              example: 4/0AfJoh...
              type: string
            provider:
              enum:
              - google
              - microsoft
              example: google
              type: string
            redirect_uri:
              description: Same redirect URI used in auth URL generation
              example: http://localhost:3000/settings/email-callback
              type: string
            state:
              description: CSRF state parameter (optional, for frontend validation)
              type: string
          required:
          - provider
          - code
          - redirect_uri
          type: object
      responses:
        200:
          description: Email account connected successfully
          schema:
            properties:
              email:
                example: user@gmail.com
                type: string
              is_connected:
                example: true
                type: boolean
              provider:
                example: google
                type: string
              scopes:
                example:
                - gmail.send
                - userinfo.email
                items:
                  type: string
                type: array
            type: object
        400:
          description: Bad request - missing or invalid parameters
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: OAuth callback handler for email provider connection
      tags:
      - HzEmailIntegration
  /v2/notified-users/{kinde_id}/email-accounts/{provider}:
    delete:
      operationId: v2_disconnectEmailAccountProvider
      parameters:
      - description: User's Kinde ID (use 'me' or 'self' for current user)
        in: path
        name: kinde_id
        required: true
        type: string
      - description: Email provider name to disconnect
        enum:
        - google
        - microsoft
        in: path
        name: provider
        required: true
        type: string
      responses:
        200:
          description: Provider disconnected successfully
          schema:
            properties:
              is_connected:
                example: false
                type: boolean
              message:
                example: google account disconnected successfully
                type: string
              provider:
                example: google
                type: string
            type: object
        400:
          description: Bad request - unsupported provider
        401:
          description: Unauthorized
        404:
          description: Provider not found or already disconnected
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Disconnect email provider
      tags:
      - HzEmailIntegration
    get:
      operationId: v2_getEmailAccountProvider
      parameters:
      - description: User's Kinde ID (use 'me' or 'self' for current user)
        in: path
        name: kinde_id
        required: true
        type: string
      - description: Email provider name
        enum:
        - google
        - microsoft
        in: path
        name: provider
        required: true
        type: string
      responses:
        200:
          description: Provider connection status retrieved successfully
          schema:
            properties:
              connected_at:
                example: '2025-01-15T10:30:00Z'
                format: date-time
                type: string
              email:
                example: user@gmail.com
                type: string
              is_connected:
                example: true
                type: boolean
              is_primary:
                description: Whether this provider is set as primary for sending emails
                example: false
                type: boolean
              provider:
                example: google
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Provider not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get specific email provider connection status
      tags:
      - HzEmailIntegration
  /v2/notified-users/{kinde_id}/email-accounts/{provider}/primary:
    patch:
      description: Set the specified provider as the primary email provider for sending
        emails. Only one provider can be primary at a time. Setting a new primary
        automatically unsets the previous primary provider.
      operationId: v2_setPrimaryEmailAccountProvider
      parameters:
      - description: User's Kinde ID (use 'me' or 'self' for current user)
        in: path
        name: kinde_id
        required: true
        type: string
      - description: Email provider name to set as primary
        enum:
        - google
        - microsoft
        in: path
        name: provider
        required: true
        type: string
      responses:
        200:
          description: Provider set as primary successfully
          schema:
            properties:
              email:
                example: user@gmail.com
                type: string
              is_primary:
                example: true
                type: boolean
              message:
                example: google set as primary email provider
                type: string
              provider:
                example: google
                type: string
            type: object
        400:
          description: Bad request - provider not connected or unsupported provider
          schema:
            properties:
              message:
                example: Cannot set google as primary - provider is not connected
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Provider not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Set email provider as primary
      tags:
      - HzEmailIntegration
  /v2/notified-users/{kinde_id}/notifications:
    get:
      operationId: v2_getHzUserNotifications
      parameters:
      - in: path
        name: kinde_id
        required: true
        type: string
      - in: query
        name: page
        type: integer
      - in: query
        name: limit
        type: integer
      - in: query
        name: unread_only
        type: boolean
      - in: query
        name: event
        type: string
      - in: query
        name: channel
        type: string
      - in: query
        name: workspace_id
        type: string
      responses:
        200:
          description: Notifications retrieved successfully
      security:
      - JWT_v2: []
      summary: List user notifications
      tags:
      - HzNotifications
    patch:
      operationId: v2_patchHzUserNotifications
      parameters:
      - in: path
        name: kinde_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            notification_ids:
              items:
                type: string
              type: array
          type: object
      responses:
        200:
          description: Notifications updated successfully
      security:
      - JWT_v2: []
      summary: Bulk mark notifications as read
      tags:
      - HzNotifications
    post:
      operationId: v2_createHzUserNotification
      parameters:
      - in: path
        name: kinde_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Notification created successfully
        400:
          description: Validation failed
      security:
      - JWT_v2: []
      summary: Create user notification
      tags:
      - HzNotifications
  /v2/notified-users/{kinde_id}/notifications/{notification_id}:
    delete:
      operationId: v2_deleteHzUserNotification
      parameters:
      - in: path
        name: kinde_id
        required: true
        type: string
      - in: path
        name: notification_id
        required: true
        type: string
      responses:
        200:
          description: Notification deleted successfully
        404:
          description: Not found
      security:
      - JWT_v2: []
      summary: Delete notification
      tags:
      - HzNotifications
    get:
      operationId: v2_getHzUserNotification
      parameters:
      - in: path
        name: kinde_id
        required: true
        type: string
      - in: path
        name: notification_id
        required: true
        type: string
      responses:
        200:
          description: Notification retrieved successfully
        404:
          description: Not found
      security:
      - JWT_v2: []
      summary: Get notification detail
      tags:
      - HzNotifications
  /v2/notified-users/{kinde_id}/subscriptions:
    get:
      operationId: v2_getHzUserSubscriptions
      parameters:
      - in: path
        name: kinde_id
        required: true
        type: string
      - in: query
        name: page
        type: integer
      - in: query
        name: limit
        type: integer
      - in: query
        name: event
        type: string
      - in: query
        name: channel
        type: string
      responses:
        200:
          description: Subscriptions retrieved successfully
      security:
      - JWT_v2: []
      summary: List user subscriptions
      tags:
      - HzNotifications
    post:
      operationId: v2_createHzUserSubscription
      parameters:
      - in: path
        name: kinde_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Subscription created successfully
        400:
          description: Validation failed
      security:
      - JWT_v2: []
      summary: Create user subscription
      tags:
      - HzNotifications
  /v2/notified-users/{kinde_id}/subscriptions/{subscription_id}:
    delete:
      operationId: v2_deleteHzUserSubscription
      parameters:
      - in: path
        name: kinde_id
        required: true
        type: string
      - in: path
        name: subscription_id
        required: true
        type: string
      responses:
        200:
          description: Subscription deleted successfully
        404:
          description: Not found
      security:
      - JWT_v2: []
      summary: Delete subscription
      tags:
      - HzNotifications
    get:
      operationId: v2_getHzUserSubscription
      parameters:
      - in: path
        name: kinde_id
        required: true
        type: string
      - in: path
        name: subscription_id
        required: true
        type: string
      responses:
        200:
          description: Subscription retrieved successfully
        404:
          description: Not found
      security:
      - JWT_v2: []
      summary: Get subscription detail
      tags:
      - HzNotifications
    patch:
      operationId: v2_updateHzUserSubscription
      parameters:
      - in: path
        name: kinde_id
        required: true
        type: string
      - in: path
        name: subscription_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Subscription updated successfully
        400:
          description: Validation failed
        404:
          description: Not found
      security:
      - JWT_v2: []
      summary: Update subscription
      tags:
      - HzNotifications
  /v2/permissions/registry:
    get:
      description: Returns the versioned permissions registry defining modules, features,
        and permission keys
      operationId: v2_getPermissionsRegistry
      responses:
        200:
          description: Global permissions registry
          schema:
            properties:
              data:
                properties:
                  modules:
                    items:
                      properties:
                        features:
                          items:
                            properties:
                              id:
                                type: string
                              label:
                                type: string
                            type: object
                          type: array
                        id:
                          type: string
                        label:
                          type: string
                      type: object
                    type: array
                  permissions:
                    items:
                      type: string
                    type: array
                  version:
                    type: integer
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Get global permissions registry
      tags:
      - Roles
    patch:
      description: Admin-only. Merges fields into the existing registry
      operationId: v2_updatePermissionsRegistry
      parameters:
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated registry
          schema:
            properties:
              data:
                properties:
                  modules:
                    items:
                      properties:
                        features:
                          items:
                            properties:
                              id:
                                type: string
                              label:
                                type: string
                            type: object
                          type: array
                        id:
                          type: string
                        label:
                          type: string
                      type: object
                    type: array
                  permissions:
                    items:
                      type: string
                    type: array
                  version:
                    type: integer
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Update global permissions registry
      tags:
      - Roles
    post:
      description: Admin-only. Creates or replaces the registry document
      operationId: v2_createPermissionsRegistry
      parameters:
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Saved registry
          schema:
            properties:
              data:
                properties:
                  modules:
                    items:
                      properties:
                        features:
                          items:
                            properties:
                              id:
                                type: string
                              label:
                                type: string
                            type: object
                          type: array
                        id:
                          type: string
                        label:
                          type: string
                      type: object
                    type: array
                  permissions:
                    items:
                      type: string
                    type: array
                  version:
                    type: integer
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Create or replace global permissions registry
      tags:
      - Roles
  /v2/portal/health:
    get:
      description: Check if the Portal API service is healthy.
      operationId: v2_portalApiHealth
      responses:
        200:
          description: OK
      summary: Health check
      tags:
      - PortalApi
  /v2/portal/me/company:
    get:
      description: Get the global company associated with the authenticated user.
      operationId: v2_portalApiMeCompany
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        404:
          description: Company not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get current user's company
      tags:
      - PortalApi
  /v2/portal/me/employees:
    get:
      description: Get employees belonging to the authenticated user's global company.
      operationId: v2_portalApiMeEmployees
      parameters:
      - default: 200
        description: Maximum number of employees to return
        in: query
        maximum: 500
        minimum: 1
        name: limit
        required: false
        type: integer
      - default: 0
        description: Number of employees to skip
        in: query
        minimum: 0
        name: offset
        required: false
        type: integer
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        404:
          description: Company not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get company employees
      tags:
      - PortalApi
  /v2/portal/public/esign/signing-sessions/{token}/submissions:
    post:
      description: Submit signature and generate signed PDF for a public signing token.
      operationId: v2_portalApiPublicEsignSubmitSignature
      parameters:
      - in: path
        name: token
        required: true
        type: string
      responses:
        200:
          description: OK
        400:
          description: Bad Request
        403:
          description: Forbidden
        500:
          description: Internal Server Error
      summary: Submit e-sign signature publicly
      tags:
      - PortalApi
  /v2/portal/public/esign/signing-sessions/{token}/view:
    get:
      description: Validate signing token and return public signing context.
      operationId: v2_portalApiPublicEsignSigningView
      parameters:
      - in: path
        name: token
        required: true
        type: string
      - in: query
        name: password
        required: false
        type: string
      responses:
        200:
          description: OK
        400:
          description: Bad Request
        403:
          description: Forbidden
        500:
          description: Internal Server Error
      summary: Get public e-sign signing view
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/documents:
    post:
      description: Create e-sign source document metadata record in Firestore.
      operationId: v2_portalApiCreateEsignDocument
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: OK
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create e-sign document metadata
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/documents/upload-sessions:
    post:
      description: Create direct-upload signed URL for source document upload.
      operationId: v2_portalApiCreateEsignUploadSession
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: OK
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create e-sign upload session
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/documents/{documentId}:
    get:
      description: Get e-sign source document metadata by ID.
      operationId: v2_portalApiGetEsignDocument
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: documentId
        required: true
        type: string
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        404:
          description: Document not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get e-sign document
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/documents/{documentId}/preview-url:
    get:
      description: Get short-lived signed URL for e-sign source document preview.
      operationId: v2_portalApiGetEsignDocumentPreviewUrl
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: documentId
        required: true
        type: string
      responses:
        200:
          description: OK
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Document not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get e-sign document preview URL
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/documents/{documentId}/reconcile:
    post:
      description: Reconcile source object existence and refresh document status.
      operationId: v2_portalApiReconcileEsignDocument
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: documentId
        required: true
        type: string
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        404:
          description: Document not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Reconcile e-sign document status
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/documents/{documentId}/retry:
    post:
      description: Retry document source validation after upload or processing failure.
      operationId: v2_portalApiRetryEsignDocument
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: documentId
        required: true
        type: string
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        404:
          description: Document not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Retry e-sign document validation
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/documents/{documentId}/upload-complete:
    post:
      description: Confirm source object exists and mark document status ready.
      operationId: v2_portalApiCompleteEsignUpload
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: documentId
        required: true
        type: string
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        404:
          description: Document not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Mark e-sign upload completed
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/signing-requests:
    get:
      description: List signing requests by workspace with optional status filter.
      operationId: v2_portalApiListEsignSigningRequests
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: status
        required: false
        type: string
      - default: 20
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: List e-sign signing requests
      tags:
      - PortalApi
    post:
      description: Create signing request with sign field templates.
      operationId: v2_portalApiCreateEsignSigningRequest
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: OK
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create e-sign signing request
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/signing-requests/{requestId}:
    get:
      description: Get signing request details by request ID.
      operationId: v2_portalApiGetEsignSigningRequest
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: requestId
        required: true
        type: string
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        404:
          description: Signing request not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get e-sign signing request
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/signing-requests/{requestId}/audit-events:
    get:
      description: List e-sign audit events for internal timeline.
      operationId: v2_portalApiListEsignAuditEvents
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: requestId
        required: true
        type: string
      - default: 100
        in: query
        maximum: 200
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        404:
          description: Signing request not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: List e-sign audit events
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/signing-requests/{requestId}/finalize:
    post:
      description: Finalize signing request and ensure result status completed.
      operationId: v2_portalApiFinalizeEsignSigningRequest
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: requestId
        required: true
        type: string
      responses:
        200:
          description: OK
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Finalize e-sign signing request
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/signing-requests/{requestId}/result:
    get:
      description: Get signing result metadata by signing request ID.
      operationId: v2_portalApiGetEsignSigningResult
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: requestId
        required: true
        type: string
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        404:
          description: Signing result not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get e-sign signing result metadata
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/signing-requests/{requestId}/result/download-url:
    get:
      description: Get short-lived signed URL for signed PDF download.
      operationId: v2_portalApiGetEsignResultDownloadUrl
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: requestId
        required: true
        type: string
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        404:
          description: Signing result not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get e-sign signed PDF download URL
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/signing-requests/{requestId}/sessions:
    post:
      description: Create signing session and return one-time signing token.
      operationId: v2_portalApiCreateEsignSigningSession
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: requestId
        required: true
        type: string
      responses:
        200:
          description: OK
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create e-sign signing session
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/signing-sessions/{sessionId}/mark-used:
    post:
      description: Mark an active signing session as used.
      operationId: v2_portalApiMarkEsignSigningSessionUsed
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: sessionId
        required: true
        type: string
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        404:
          description: Signing session not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Mark e-sign signing session used
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/esign/signing-sessions/{sessionId}/revoke:
    post:
      description: Revoke an active signing session.
      operationId: v2_portalApiRevokeEsignSigningSession
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: sessionId
        required: true
        type: string
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        404:
          description: Signing session not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Revoke e-sign signing session
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/projects/{projectId}/rfis:
    get:
      description: Get paginated list of RFIs for a project, filtered to company-relevant
        items.
      operationId: v2_portalApiGetRfis
      parameters:
      - description: Workspace identifier (e.g., ds_xxx)
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - default: 1
        description: Page number (1-indexed)
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Items per page
        in: query
        maximum: 100
        minimum: 1
        name: pageSize
        required: false
        type: integer
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get RFIs for a project
      tags:
      - PortalApi
  /v2/portal/workspaces/{workspaceId}/projects/{projectId}/rfis/{rfiId}:
    get:
      description: Get full RFI submission details with metadata, filtered by company
        access.
      operationId: v2_portalApiGetRfiDetail
      parameters:
      - description: Workspace identifier (e.g., ds_xxx)
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: RFI submission identifier
        in: path
        name: rfiId
        required: true
        type: string
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        403:
          description: Forbidden - user's company has no access to this RFI
        404:
          description: RFI not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get RFI detail
      tags:
      - PortalApi
  /v2/portals/subcontractor-progress-claims:
    get:
      description: 'Return progress claims for a subcontractor within the authenticated
        Horizon workspace/project context.

        Requires `Portals > Subcontractor Portal` view permission in Horizon roles.

        '
      operationId: v2_getSubcontractorPortalProgressClaims
      parameters:
      - description: Workspace identifier that scopes the Horizon Firestore collections
        in: query
        name: workspaceId
        required: true
        type: string
      - description: Optional project identifier used to limit results to a project
          context
        in: query
        name: projectId
        required: false
        type: string
      - description: Global company/vendor identifier for the subcontractor whose
          claims are requested
        in: query
        name: vendorId
        required: true
        type: string
      - description: Horizon permission string supplied by the frontend to validate
          against the role feature
        in: query
        name: requiredPermission
        required: false
        type: string
      - description: Page number used for internal pagination when querying Horizon
          progress claims
        in: query
        name: page
        required: false
        type: integer
      - description: Number of results to request from Horizon progress claims (maximum
          200)
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Filtered list of progress claims matching the subcontractor
            within the workspace context
          schema:
            properties:
              data:
                properties:
                  claims:
                    items:
                      type: object
                    type: array
                  emptyState:
                    properties:
                      isEmpty:
                        type: boolean
                      message:
                        type: string
                    type: object
                  pagination:
                    properties:
                      limit:
                        type: integer
                      page:
                        type: integer
                      total:
                        type: integer
                    type: object
                  projectId:
                    type: string
                  requiredPermission:
                    type: string
                  source:
                    type: string
                  vendorId:
                    type: string
                  workspaceId:
                    type: string
                type: object
              ok:
                type: boolean
            type: object
        400:
          description: Missing required parameters
        403:
          description: Workspace access forbidden or Horizon role lacks Subcontractor
            Portal permission
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List subcontractor portal progress claims
      tags:
      - Portals
  /v2/powerbi-xmla/system-table/{reportName}:
    get:
      operationId: v2_uploadSystemTables
      parameters:
      - in: path
        name: reportName
        required: true
        type: string
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Retrieve system tables from Power BI XMLA
      tags:
      - Power BI
      x-min-permissions: admin
  /v2/regions:
    get:
      description: Returns list of api-supported regions
      operationId: v2_getRegions
      parameters:
      - description: Comma-separated list of fields to include in the response
        in: query
        name: fields
        required: false
        type: string
      responses:
        200:
          description: list of supported regions
      summary: Get supported regions
      tags:
      - Info
  /v2/reports/run:
    post:
      description: Executes a Firestore-stored SQL template with bound parameters
        and returns rows/columns.
      operationId: v2_runReport
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            params:
              description: Named parameters to bind (e.g., workspace_id)
              type: object
            reportId:
              description: ID of the Firestore template document
              type: string
          required:
          - reportId
          type: object
      responses:
        200:
          description: Report data
          schema:
            properties:
              data:
                properties:
                  chart:
                    type: object
                  columns:
                    items:
                      type: string
                    type: array
                  fields:
                    items:
                      type: object
                    type: array
                  meta:
                    properties:
                      durationMs:
                        type: integer
                      jobId:
                        type: string
                      rowCount:
                        type: integer
                    type: object
                  rows:
                    items:
                      type: object
                    type: array
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Run a report template
      tags:
      - Reports
  /v2/roles/sync:
    post:
      description: Updates all roles in specified workspaces with the latest menu-based
        features while preserving existing permissions
      operationId: v2_syncRoles
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            workspaces:
              description: Array of workspace IDs to sync, or ["_ALL_"] to sync all
                workspaces
              items:
                type: string
              type: array
          required:
          - workspaces
          type: object
      responses:
        200:
          description: Sync completed
          schema:
            properties:
              data:
                properties:
                  details:
                    description: Per-workspace sync results
                    items:
                      properties:
                        errors:
                          items:
                            type: object
                          type: array
                        updated:
                          type: integer
                        workspace_id:
                          type: string
                      type: object
                    type: array
                  errors:
                    description: All errors encountered during sync
                    items:
                      type: object
                    type: array
                  updated:
                    description: Total number of roles updated
                    type: integer
                  workspaces_processed:
                    description: List of workspace IDs that were processed
                    items:
                      type: string
                    type: array
                type: object
              ok:
                type: boolean
            type: object
        400:
          description: Invalid request
          schema:
            properties:
              error:
                properties:
                  code:
                    type: integer
                  message:
                    type: string
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Sync roles features with latest menu structure
      tags:
      - Roles
  /v2/secret/{secretName}:
    get:
      operationId: v2_getSecret
      parameters:
      - in: path
        name: secretName
        required: true
        type: string
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get a secret
      tags:
      - Admin
      x-min-permissions: admin
  /v2/users:
    post:
      description: Creates a user if not already exists in Outseta only
      operationId: v2_postOutsetauser
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            email:
              description: The email of the user
              type: string
            name:
              description: The name of the user like First Last
              type: string
          required:
          - email
          - name
          type: object
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create user in Outseta
      tags:
      - Users
      x-min-permissions: admin
  /v2/users/{user_id}/profile:
    get:
      operationId: v2_getUserProfile
      parameters:
      - in: path
        name: userId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get User profile data
      tags:
      - User Profiles
    patch:
      operationId: v2_patchUserProfile
      parameters:
      - in: path
        name: userId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            ds-platform-notifs-enabled:
              type: boolean
            email:
              type: string
            first_name:
              type: string
            global-company-id:
              type: number
            last_name:
              type: string
            password-reset-request:
              type: boolean
            picture:
              type: string
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update user profile data
      tags:
      - User Profiles
  /v2/worker-extra-details:
    delete:
      description: Soft delete worker extra details by kinde_id
      operationId: v2_deleteWorkerExtraDetails
      parameters:
      - description: Worker's Kinde ID to delete
        in: query
        name: kinde_id
        required: true
        type: string
      - description: Optional workspace ID (ignored - API is always global)
        in: query
        name: workspaceId
        type: string
      responses:
        200:
          description: Worker extra details deleted successfully
          schema:
            properties:
              kinde_id:
                type: string
              message:
                type: string
            type: object
        400:
          description: kinde_id not provided or already deleted
        404:
          description: Worker details not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete worker extra details
      tags:
      - WorkerExtraDetails
    get:
      description: Retrieve worker extra details with filtering options. Can retrieve
        specific worker by kinde_id or list multiple workers with filters.
      operationId: v2_getWorkerExtraDetails
      parameters:
      - description: Specific worker's Kinde ID to retrieve
        in: query
        name: kinde_id
        type: string
      - description: Filter by employment type (e.g., Full-time, Part-time, Contract)
        in: query
        name: employment_type
        type: string
      - description: Filter by trade/profession
        in: query
        name: trade
        type: string
      - description: Filter by delegation tier (e.g., Senior, Junior, Manager)
        in: query
        name: delegation_tier
        type: string
      - description: Filter by status (true/false for active/inactive)
        in: query
        name: status
        type: string
      - description: Search query for text-based filtering
        in: query
        name: q
        type: string
      - description: Page number for pagination (default 1)
        in: query
        name: page
        type: string
      - description: Number of items per page (default 50, max 100)
        in: query
        name: limit
        type: string
      - description: Optional workspace ID (ignored - API is always global)
        in: query
        name: workspaceId
        type: string
      responses:
        200:
          description: Successfully retrieved worker extra details
          schema:
            properties:
              limit:
                type: integer
              page:
                type: integer
              source:
                type: string
              total_count:
                type: integer
              worker_details:
                items:
                  properties:
                    created_at:
                      description: Creation timestamp
                      format: date-time
                      type: string
                    created_by_company_id:
                      description: Company ID of user who created this record
                      type: string
                    created_by_user_email:
                      description: Email of user who created this record
                      type: string
                    created_by_user_id:
                      description: ID of user who created this record
                      type: string
                    delegation_tier:
                      description: Worker's delegation tier (e.g., Senior, Junior,
                        Manager)
                      type: string
                    employment_type:
                      description: Type of employment (e.g., Full-time, Part-time,
                        Contract)
                      type: string
                    id:
                      description: Document ID (same as kinde_id)
                      type: string
                    is_deleted:
                      description: Soft delete flag
                      type: boolean
                    job_title:
                      description: Worker's job title/position
                      type: string
                    labour_rate_id:
                      description: Reference to labour rate configuration
                      type: string
                    status:
                      description: Active status of the worker (true = active, false
                        = inactive)
                      type: boolean
                    tags:
                      description: Array of tags/skills associated with the worker
                      items:
                        type: string
                      type: array
                    trade:
                      description: Worker's trade or profession
                      type: string
                    updated_at:
                      description: Last update timestamp
                      format: date-time
                      type: string
                    workspace_id:
                      description: Always 'null' for global worker details
                      type: string
                  type: object
                type: array
            type: object
        404:
          description: Worker details not found (when kinde_id specified)
      security:
      - JWT_v2: []
      summary: Get worker extra details
      tags:
      - WorkerExtraDetails
    patch:
      description: Update existing worker extra details by kinde_id
      operationId: v2_updateWorkerExtraDetails
      parameters:
      - description: Worker's Kinde ID to update
        in: query
        name: kinde_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            delegation_tier:
              description: Worker's delegation tier
              type: string
            employment_type:
              description: Type of employment
              type: string
            job_title:
              description: Worker's job title/position
              type: string
            labour_rate_id:
              description: Reference to labour rate configuration
              type: string
            status:
              description: Active status of the worker
              type: boolean
            tags:
              description: Array of tags/skills associated with the worker
              items:
                type: string
              type: array
            trade:
              description: Worker's trade or profession
              type: string
          type: object
      - description: Optional workspace ID (ignored - API is always global)
        in: query
        name: workspaceId
        type: string
      responses:
        200:
          description: Worker extra details updated successfully
          schema:
            properties:
              kinde_id:
                type: string
              message:
                type: string
            type: object
        400:
          description: Validation failed or kinde_id not provided
        404:
          description: Worker details not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update worker extra details
      tags:
      - WorkerExtraDetails
    post:
      description: Create new worker extra details. Global scope - not tied to any
        workspace.
      operationId: v2_createWorkerExtraDetails
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            delegation_tier:
              description: Worker's delegation tier
              type: string
            employment_type:
              description: Type of employment
              type: string
            job_title:
              description: Worker's job title/position
              type: string
            kinde_id:
              description: Worker's Kinde authentication ID (used as document ID)
              type: string
            labour_rate_id:
              description: Reference to labour rate configuration
              type: string
            status:
              description: Active status of the worker
              type: boolean
            tags:
              description: Array of tags/skills associated with the worker
              items:
                type: string
              type: array
            trade:
              description: Worker's trade or profession
              type: string
          required:
          - kinde_id
          - delegation_tier
          - employment_type
          - labour_rate_id
          - job_title
          - trade
          - tags
          - status
          type: object
      - description: Optional workspace ID (ignored - API is always global)
        in: query
        name: workspaceId
        type: string
      responses:
        201:
          description: Worker extra details created successfully
          schema:
            properties:
              kinde_id:
                type: string
              message:
                type: string
              warnings:
                items:
                  type: string
                type: array
            type: object
        400:
          description: Validation failed or missing required fields
          schema:
            properties:
              errors:
                items:
                  type: string
                type: array
              message:
                type: string
              received_fields:
                items:
                  type: string
                type: array
              required_fields:
                items:
                  type: string
                type: array
            type: object
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create worker extra details
      tags:
      - WorkerExtraDetails
  /v2/workspaces:
    get:
      description: Returns all workspaces and projects a user has access to with optional
        parameters for extra info
      operationId: v2_getWorkspaces
      parameters:
      - description: Includes additional details in response
        in: query
        name: includeDetails
        required: false
        type: boolean
      - description: Includes permissions in response
        in: query
        name: includePermissions
        required: false
        type: boolean
      responses:
        200:
          description: Successful response with a list of workspaces and projects
          schema:
            items:
              properties:
                projects:
                  items:
                    properties:
                      project_name:
                        example: My Project Name
                        type: string
                    type: object
                  type: array
                workspace:
                  description: ds_workspace_name corresponding to dataset name
                  example: ds_12345678_9123_4567_8912_123456789123
                  type: string
                workspace_name:
                  example: My Workspace Name
                  type: string
              type: object
            type: array
        204:
          description: No content to return
        400:
          description: Bad Request due to invalid parameters
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get list of workspaces and associated projects
      tags:
      - Info
    patch:
      consumes:
      - application/json
      description: Updates the ds_app_template_id for a workspace to enable/disable
        Horizon features. Requires cs-admin scope.
      operationId: v2_patchWorkspaceHorizon
      parameters:
      - in: body
        name: body
        required: true
        schema:
          properties:
            horizon_enabled:
              description: Set to true to enable Horizon (ds_app_template_id=30),
                false to disable (NULL)
              example: true
              type: boolean
            workspace_name:
              description: The ds_workspace_name of the workspace to update
              example: ds_12345678_9123_4567_8912_123456789123
              type: string
          required:
          - workspace_name
          - horizon_enabled
          type: object
      responses:
        200:
          description: Workspace updated successfully
          schema:
            properties:
              horizon_enabled:
                example: true
                type: boolean
              message:
                example: Workspace updated
                type: string
            type: object
        400:
          description: Bad Request - missing or invalid parameters
        401:
          description: Unauthorized
        403:
          description: Forbidden - requires cs-admin scope
        404:
          description: Workspace not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update workspace Horizon setting
      tags:
      - Info
  /v2/workspaces/{workspaceId}:
    get:
      description: Returns the details of a workspace
      operationId: v2_getSingleWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get workspace details
      tags:
      - Info
    patch:
      operationId: v2_patchWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        204:
          description: No content to return
        400:
          description: Bad Request due to invalid parameters
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update workspace details such as logo
      tags:
      - Info
  /v2/workspaces/{workspaceId}/actions:
    get:
      operationId: v2_getActionsWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: currentApp
        required: false
        type: string
      - description: When true, fetches all scheduling tasks in a single response
          using backend pagination
        in: query
        name: fetch_all
        required: false
        type: boolean
      - description: When true, allows higher limits (500) for admin dashboards
        in: query
        name: admin
        required: false
        type: boolean
      - description: Number of items per page (default 50, max 200 for users, max
          500 for admin)
        in: query
        maximum: 500
        minimum: 1
        name: limit
        required: false
        type: integer
      - description: Page number for pagination (default 1)
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - description: Filter by action status
        in: query
        name: action_status
        required: false
        type: string
      - description: Filter by action category (e.g. 'Scheduling Task')
        in: query
        name: action_category
        required: false
        type: string
      - description: Filter by assignee
        in: query
        name: assignee_individual
        required: false
        type: string
      - description: Filter by task status
        in: query
        name: task_status
        required: false
        type: string
      - description: Filter by progress type
        in: query
        name: progress_type
        required: false
        type: string
      - description: Filter by trade
        in: query
        name: trade
        required: false
        type: string
      - description: Filter by subcontractor
        in: query
        name: subcontractor
        required: false
        type: string
      - description: Search query string
        in: query
        name: q
        required: false
        type: string
      responses:
        200:
          description: Successfully created new action
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get actions
      tags:
      - Actions
    patch:
      operationId: v2_updateActionWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            action_id:
              description: id of existing action to update
              type: integer
          required:
          - action_id
          type: object
      responses:
        200:
          description: Successfully updated action
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update fields in existing action
      tags:
      - Actions
    post:
      operationId: v2_createActionWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Name of the action
        in: formData
        name: name
        required: true
        type: string
      - description: Description of the action
        in: formData
        name: description
        required: false
        type: string
      - description: Due date of the action, expected format 'yyyy-mm-dd'
        in: formData
        name: dueDate
        required: false
        type: string
      - description: Rating of the action - "Low", "Medium", "High"
        in: formData
        name: rating
        required: false
        type: string
      - description: App that the action was created from
        in: formData
        name: currentApp
        required: false
        type: string
      - description: A JSON string representing a list of attachment objects. Each
          object must contain a `cde_id` property.
        in: formData
        name: attachments
        required: false
        type: string
      responses:
        200:
          description: Successfully created new action
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create new action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/actions/tasks:
    get:
      operationId: v2_getActionTasksByWorkspaceId
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successfully got tasks
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Actions with category = Tasks by workspaceId
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/actions/{actionId}:
    get:
      operationId: v2_getSingleActionWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      responses:
        200:
          description: Successfully got action
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get an action
      tags:
      - Actions
    patch:
      operationId: v2_updateSingleActionWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      - in: formData
        name: body
        required: true
        type: string
      responses:
        200:
          description: Successfully updated action
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update fields in existing action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/actions/{actionId}/associations/{associationIdentifier}:
    get:
      operationId: v2_getActionAssociationWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      - in: path
        name: associationIdentifier
        required: true
        type: string
      - description: The association_source_table_key
        in: query
        name: association_source_table_key
        required: false
        type: string
      - description: The association_row_table_key
        in: query
        name: association_row_table_key
        required: false
        type: string
      - description: The association type
        in: query
        name: association_type
        required: false
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Find an association
      tags:
      - Actions
    post:
      operationId: v2_postActionAssociationWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      - in: path
        name: associationIdentifier
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            association_row_table_key:
              description: The key for association row table
              type: string
            association_source_table_key:
              description: The key for association source table
              type: string
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Add an association to an action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/actions/{actionId}/associations/{associationIdentifier}/{associationId}:
    delete:
      operationId: v2_deleteActionAssociationWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      - in: path
        name: associationIdentifier
        required: true
        type: string
      - description: ID of the association to remove
        in: path
        name: associationId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Remove an existing association
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/actions/{actionId}/attachments:
    get:
      operationId: v2_getActionAttachmentsWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      responses:
        200:
          description: Successfully got attachments
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get attachments for an action
      tags:
      - Actions
    post:
      operationId: v2_postActionAttachmentsWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            attachments:
              description: A list of attachment objects
              items:
                properties:
                  cde_id:
                    description: CDE id corresponding to file
                    type: integer
                required:
                - cde_id
                type: object
              type: array
          required:
          - attachments
          type: object
      responses:
        200:
          description: Successfully got attachments
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Add attachments to action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/actions/{actionId}/comments:
    get:
      operationId: v2_getActionCommentsWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      - in: query
        name: withAttachments
        required: false
        type: boolean
      responses:
        200:
          description: Successfully got comments
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get comments for an action
      tags:
      - Actions
    post:
      operationId: v2_postActionCommentWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            attachments:
              description: A list of attachment objects
              items:
                properties:
                  cde_id:
                    description: CDE id corresponding to file
                    type: integer
                required:
                - cde_id
                type: object
              type: array
            comment:
              description: The comment to add
              type: string
          required:
          - comment
          type: object
      responses:
        200:
          description: Successfully created comment
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create comment for an action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/actions/{actionId}/comments/{commentId}:
    get:
      operationId: v2_getActionCommentWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      - in: path
        name: commentId
        required: true
        type: integer
      - in: query
        name: withAttachments
        required: false
        type: boolean
      responses:
        200:
          description: Successfully got comment
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get comment for an action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/actions/{actionId}/comments/{commentId}/attachments:
    post:
      operationId: v2_postActionCommentAttachmentsWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      - in: path
        name: commentId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            attachments:
              description: A list of attachment objects
              items:
                properties:
                  cde_id:
                    description: CDE id corresponding to file
                    type: integer
                required:
                - cde_id
                type: object
              type: array
          required:
          - attachments
          type: object
      responses:
        200:
          description: Successfully added attachment
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Add attachments to action coment
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/actions/{actionId}/watchers:
    get:
      operationId: v2_getActionWatchersWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      responses:
        200:
          description: Successfully got watchers
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get watchers for an action
      tags:
      - Actions
    post:
      operationId: v2_postActionWatcherWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            watcher:
              description: The email of the watcher
              type: string
          required:
          - watcher
          type: object
      responses:
        200:
          description: Successfully added watcher
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Add watcher to action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/actions/{actionId}/watchers/{watcherId}:
    delete:
      operationId: v2_deleteActionWatcherWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: actionId
        required: true
        type: integer
      - description: email of watcher
        in: path
        name: watcherId
        required: true
        type: string
      responses:
        200:
          description: Successfully removed watcher
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Remove watcher from action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/cde:
    get:
      operationId: v2_getCdeDocsWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by CDE type ID
        in: query
        name: cde_type_id
        required: false
        type: string
      - description: Filter by worker ID for worker-specific documents
        in: query
        name: worker_id
        required: false
        type: string
      - description: Optional filter for CDE status (e.g. active, archived)
        in: query
        name: cde_status
        required: false
        type: string
      responses:
        200:
          description: Successfully returns CDE docs
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get CDE docs
      tags:
      - Get Data
    post:
      operationId: v2_postCdeWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Worker ID for worker-specific document uploads
        in: query
        name: worker_id
        required: false
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_type:
              description: The type of CDE upload
              type: string
            cde_type_id:
              description: The CDE type ID
              type: string
            files:
              description: A list of file objects
              items:
                properties:
                  filename:
                    description: The name of the file
                    type: string
                  filetype:
                    description: The type of the file
                    type: string
                required:
                - filename
                - filetype
                type: object
              type: array
          required:
          - files
          type: object
      responses:
        200:
          description: Successfully returns CDE urls
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get signed urls for cde
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/cde-folders:
    get:
      description: Returns child folders for a parent folder. Omit parentId to list
        root folders.
      operationId: v2_listCdeFolders
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: projectId
        required: false
        type: string
      - in: query
        name: parentId
        required: false
        type: string
      responses:
        200:
          description: Folders list
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: List CDE folders (workspace or project scope)
      tags:
      - CDE Folders
    post:
      operationId: v2_createCdeFolder
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            name:
              type: string
            parent_id:
              type: string
            project_id:
              type: string
          type: object
      responses:
        201:
          description: Folder created
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a CDE folder
      tags:
      - CDE Folders
  /v2/workspaces/{workspaceId}/cde-folders/party-types:
    get:
      description: Returns the list of available party types (client, subcontractor)
        and permission levels (read, write, admin).
      operationId: v2_getCdeFolderPartyTypes
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Party types and permission levels
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get available party types and permission levels
      tags:
      - CDE Folder Permissions
  /v2/workspaces/{workspaceId}/cde-folders/portal-tree:
    get:
      description: 'Returns the folder tree filtered for a specific party''s portal
        view.

        Includes the party''s own portal folder (implicit access) and folders

        with explicit permissions. Ancestor folders are included for navigation

        but marked as non-accessible.

        '
      operationId: v2_getCdeFolderPortalTree
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Type of party (client, subcontractor)
        in: query
        name: partyType
        required: true
        type: string
      - description: ID of the party
        in: query
        name: partyId
        required: true
        type: string
      - description: Name of the party (for portal folder path)
        in: query
        name: partyName
        required: true
        type: string
      - description: Optional project filter
        in: query
        name: projectId
        required: false
        type: string
      responses:
        200:
          description: Filtered folder tree
        400:
          description: Missing required parameters
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get filtered folder tree for party portal
      tags:
      - CDE Folder Permissions
  /v2/workspaces/{workspaceId}/cde-folders/{folderId}:
    delete:
      operationId: v2_deleteCdeFolder
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: folderId
        required: true
        type: string
      responses:
        200:
          description: Folder deleted
        401:
          description: Unauthorized
        404:
          description: Not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete a CDE folder (soft delete)
      tags:
      - CDE Folders
    patch:
      operationId: v2_updateCdeFolder
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: folderId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            name:
              type: string
            parent_id:
              type: string
            project_id:
              type: string
          type: object
      responses:
        200:
          description: Folder updated
        401:
          description: Unauthorized
        404:
          description: Not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update a CDE folder (rename/move)
      tags:
      - CDE Folders
  /v2/workspaces/{workspaceId}/cde-folders/{folderId}/permissions:
    get:
      description: Returns all permissions for a specific folder.
      operationId: v2_listCdeFolderPermissions
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: folderId
        required: true
        type: string
      - in: query
        name: projectId
        required: false
        type: string
      responses:
        200:
          description: List of permissions
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: List folder permissions
      tags:
      - CDE Folder Permissions
    post:
      description: Creates a new permission to share a folder with a party (client
        or subcontractor).
      operationId: v2_shareCdeFolder
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: folderId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            party_id:
              description: ID of the party
              type: string
            party_type:
              description: Type of party (client, subcontractor)
              type: string
            permission_level:
              description: Permission level (read, write, admin). Defaults to read.
              type: string
            project_id:
              description: Optional project association
              type: string
          required:
          - party_type
          - party_id
          type: object
      responses:
        201:
          description: Permission created
        400:
          description: Missing required parameters
        401:
          description: Unauthorized
        409:
          description: Permission already exists
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Share folder with a party
      tags:
      - CDE Folder Permissions
  /v2/workspaces/{workspaceId}/cde-folders/{folderId}/permissions/{permissionId}:
    delete:
      description: Removes (soft deletes) a folder permission.
      operationId: v2_removeCdeFolderPermission
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: folderId
        required: true
        type: string
      - in: path
        name: permissionId
        required: true
        type: string
      responses:
        200:
          description: Permission removed
        401:
          description: Unauthorized
        404:
          description: Permission not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Remove folder permission
      tags:
      - CDE Folder Permissions
    patch:
      description: Updates the permission level for an existing folder permission.
      operationId: v2_updateCdeFolderPermission
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: folderId
        required: true
        type: string
      - in: path
        name: permissionId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            permission_level:
              description: New permission level (read, write, admin)
              type: string
          required:
          - permission_level
          type: object
      responses:
        200:
          description: Permission updated
        400:
          description: Missing required parameters
        401:
          description: Unauthorized
        404:
          description: Permission not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update folder permission
      tags:
      - CDE Folder Permissions
  /v2/workspaces/{workspaceId}/cde-helper/jobs/{jobId}:
    get:
      description: 'Poll this endpoint to check the status of an async job (e.g.,
        from-url download).

        Status values:

        - pending: Job is queued

        - processing: Job is being processed

        - completed: Job finished successfully (result field populated)

        - failed: Job failed (error field populated)

        '
      operationId: v2_getCdeHelperJobStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: jobId
        required: true
        type: string
      responses:
        200:
          description: Job status retrieved
          schema:
            properties:
              data:
                properties:
                  completed_at:
                    description: Job completion timestamp
                    type: string
                  created_at:
                    description: Job creation timestamp
                    type: string
                  error:
                    description: Error message when failed
                    type: string
                  job_id:
                    type: string
                  progress:
                    description: Progress percentage (0-100)
                    maximum: 100
                    minimum: 0
                    type: integer
                  result:
                    description: Job result when completed
                    type: object
                  status:
                    enum:
                    - pending
                    - processing
                    - completed
                    - failed
                    type: string
                type: object
              ok:
                type: boolean
            type: object
        401:
          description: Unauthorized
        404:
          description: Job not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get job status for async operations
      tags:
      - CDE Helper
  /v2/workspaces/{workspaceId}/cde-helper/prepare-upload:
    post:
      description: 'Step 1 of direct upload workflow: Generates a signed URL for direct
        file upload to GCS.

        After calling this endpoint:

        1. PUT your file to the returned signed_url

        2. Call POST /finalize with the upload_id to create folder/placement/CDE records

        '
      operationId: v2_prepareUpload
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            file_actual_name:
              description: Original filename
              type: string
            file_size_bytes:
              description: Optional file size in bytes
              type: integer
            filetype:
              description: MIME type of the file
              type: string
          required:
          - file_actual_name
          - filetype
          type: object
      responses:
        201:
          description: Successfully prepared upload
          schema:
            properties:
              data:
                properties:
                  blob_name:
                    description: GCS blob path
                    type: string
                  expires_at:
                    description: URL expiration timestamp
                    type: string
                  signed_url:
                    description: Pre-signed URL for uploading file
                    type: string
                  upload_id:
                    description: Upload identifier for finalize step
                    type: string
                type: object
              ok:
                type: boolean
            type: object
        400:
          description: Invalid request parameters
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Prepare a file upload by generating a signed URL
      tags:
      - CDE Helper
  /v2/workspaces/{workspaceId}/cde-placements:
    get:
      operationId: v2_listCdePlacements
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: projectId
        required: false
        type: string
      - in: query
        name: folderId
        required: false
        type: string
      responses:
        200:
          description: Placements list
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: List CDE placements for a folder
      tags:
      - CDE Placements
    post:
      operationId: v2_upsertCdePlacement
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cdeSeriesId:
              type: string
            folderId:
              type: string
            projectId:
              type: string
          type: object
      responses:
        200:
          description: Placement upserted
        201:
          description: Placement created
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Upsert a single CDE placement
      tags:
      - CDE Placements
  /v2/workspaces/{workspaceId}/cde-placements/bulk-move:
    post:
      operationId: v2_bulkMoveCdePlacements
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cdeSeriesIds:
              items:
                type: string
              type: array
            projectId:
              type: string
            targetFolderId:
              type: string
          type: object
      responses:
        200:
          description: Bulk move completed
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Bulk move CDE series to a folder
      tags:
      - CDE Placements
  /v2/workspaces/{workspaceId}/cde/process:
    post:
      operationId: v2_processCDEWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            files:
              description: A list of file objects
              items:
                properties:
                  cde_id:
                    description: The CDE ID of the file
                    type: integer
                required:
                - cde_id
                type: object
              type: array
          required:
          - files
          type: object
      responses:
        200:
          description: Successfully processed files
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Process files uploaded to CDE
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/cde/types:
    get:
      operationId: v2_getCDETypes
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successfully returns CDE types
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get workspace-level CDE types
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/cde/v2:
    get:
      description: 'Fetches CDE documents grouped by document_series_id.

        Workspace-level query (no project_id filter).

        '
      operationId: v2_getCdeDocsWorkspaceLevelV2
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by CDE type ID
        in: query
        name: cde_type_id
        required: false
        type: string
      - description: Filter by worker ID
        in: query
        name: worker_id
        required: false
        type: string
      - description: Filter by CDE status (e.g. active, archived)
        in: query
        name: cde_status
        required: false
        type: string
      responses:
        200:
          description: Successfully returns CDE documents
          schema:
            items:
              properties:
                cde_type_id:
                  type: string
                display_file_name:
                  type: string
                document_series_id:
                  type: string
                owner_workspace_id:
                  type: string
                versions:
                  items:
                    properties:
                      cde_id:
                        type: integer
                      cde_link:
                        type: string
                      cde_log_entry_created:
                        type: string
                      cde_log_entry_updated:
                        type: string
                      cde_status:
                        type: string
                      cde_type:
                        type: string
                      cde_type_id:
                        type: string
                      document_series_id:
                        type: string
                      file_name:
                        type: string
                      file_size_bytes:
                        type: integer
                      file_type:
                        type: string
                      is_latest_version:
                        type: boolean
                      metadata:
                        items:
                          properties:
                            metadata_key:
                              type: string
                            metadata_value:
                              type: string
                          type: object
                        type: array
                      uploaded_by:
                        type: string
                      uploaded_by_user_id:
                        type: string
                      version:
                        type: integer
                    type: object
                  type: array
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get workspace-level CDE documents with version grouping
      tags:
      - CDE Documents
    post:
      description: 'Returns signed URLs for uploading files to Cloud Storage and creates
        CDE records.

        Workspace-level upload (no project_id required).

        Supports document versioning via document_series_id.

        '
      operationId: v2_postCdeWorkspaceLevelV2
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_type:
              description: CDE type name
              type: string
            cde_type_id:
              description: CDE type ID
              type: string
            files:
              description: List of files to upload
              items:
                properties:
                  document_series_id:
                    description: 'UUID to group document versions.

                      - Omit or pass null to create a new document (new UUID generated)

                      - Pass existing UUID to add a version to existing document series

                      '
                    type: string
                  file_size_bytes:
                    description: File size in bytes
                    type: integer
                  filename:
                    description: Display filename
                    type: string
                  filetype:
                    description: MIME type of the file
                    type: string
                required:
                - filename
                - filetype
                type: object
              type: array
            uploaded_by:
              description: Override uploaded_by username
              type: string
          required:
          - files
          type: object
      responses:
        200:
          description: Successfully returns signed URLs and CDE records
          schema:
            items:
              properties:
                cde_id:
                  type: integer
                cde_link:
                  type: string
                cde_type_id:
                  type: string
                display_filename:
                  type: string
                document_series_id:
                  type: string
                file_size_bytes:
                  type: integer
                filename:
                  type: string
                filetype:
                  type: string
                signed_url:
                  type: string
                uploaded_by:
                  type: string
                uploaded_by_user_id:
                  type: string
              type: object
            type: array
        400:
          description: Bad request - missing required fields
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get signed URLs for workspace-level CDE upload
      tags:
      - CDE Documents
  /v2/workspaces/{workspaceId}/cde/v2/archive-by-series-id:
    post:
      description: 'Archive all versions of a document at workspace level.

        Sets cde_status to ''archived'' for all versions in the series.

        '
      operationId: v2_archiveBySeriesIdWorkspaceLevel
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            document_series_id:
              description: UUID of the document series to archive
              type: string
          required:
          - document_series_id
          type: object
      responses:
        200:
          description: Successfully archived documents
          schema:
            properties:
              archived_count:
                description: Number of document versions archived
                type: integer
              document_series_id:
                description: UUID of the archived document series
                type: string
              success:
                type: boolean
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Archive document by series ID (workspace-level)
      tags:
      - CDE Documents
  /v2/workspaces/{workspaceId}/cde/v2/by-series:
    get:
      description: 'Fetches CDE documents by a list of document_series_ids at workspace
        level (no project_id).

        Supports lazy loading of documents when navigating folders in Company Documents:

        1. Frontend fetches placements for a folder (gets document_series_ids)

        2. Frontend calls this endpoint with those series_ids to get document details

        Maximum 500 series_ids per request.

        '
      operationId: v2_getCdeDocsBySeriesIdsWorkspaceLevel
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - collectionFormat: multi
        description: 'Document series IDs to fetch.

          Can be passed multiple times (e.g., ?series_id=uuid1&series_id=uuid2).

          Maximum 500 IDs per request.

          '
        in: query
        items:
          type: string
        name: series_id
        required: true
        type: array
      responses:
        200:
          description: Successfully returns CDE documents for the specified series
            IDs
          schema:
            items:
              properties:
                display_file_name:
                  type: string
                document_series_id:
                  description: UUID grouping document versions
                  type: string
                owner_workspace_id:
                  type: string
                versions:
                  description: All versions of this document
                  items:
                    properties:
                      cde_id:
                        type: integer
                      cde_link:
                        type: string
                      cde_log_entry_created:
                        type: string
                      cde_log_entry_updated:
                        type: string
                      cde_status:
                        type: string
                      cde_type:
                        type: string
                      cde_type_id:
                        type: string
                      document_series_id:
                        type: string
                      file_name:
                        type: string
                      file_size_bytes:
                        type: integer
                      file_type:
                        type: string
                      is_latest_version:
                        type: boolean
                      metadata:
                        items:
                          properties:
                            metadata_key:
                              type: string
                            metadata_value:
                              type: string
                          type: object
                        type: array
                      uploaded_by:
                        type: string
                      uploaded_by_user_id:
                        type: string
                      version:
                        description: Version number (1, 2, 3, ...)
                        type: integer
                    type: object
                  type: array
              type: object
            type: array
        400:
          description: Bad request - missing series_id or too many series_ids (max
            500)
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get workspace-level CDE documents by series IDs
      tags:
      - CDE Documents
  /v2/workspaces/{workspaceId}/cde/v2/rename-by-series-id:
    post:
      description: 'Rename all versions of a document at workspace level.

        Updates display_file_name for all versions in the series.

        '
      operationId: v2_renameBySeriesIdWorkspaceLevel
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            document_series_id:
              description: UUID of the document series to rename
              type: string
            new_display_name:
              description: New display name for the document
              type: string
          required:
          - document_series_id
          - new_display_name
          type: object
      responses:
        200:
          description: Successfully renamed documents
          schema:
            properties:
              document_series_id:
                description: UUID of the renamed document series
                type: string
              new_name:
                description: New display name
                type: string
              old_name:
                description: Previous display name
                type: string
              renamed_count:
                description: Number of document versions renamed
                type: integer
              success:
                type: boolean
            type: object
        400:
          description: Bad request - empty display name
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Rename document by series ID (workspace-level)
      tags:
      - CDE Documents
  /v2/workspaces/{workspaceId}/cde/{cdeId}:
    delete:
      description: Invalidates a CDE entry for failed uploads
      operationId: v2_invalidateCdeEntryWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: cdeId
        required: true
        type: integer
      responses:
        200:
          description: Successfully invalidated CDE entry
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Invalidate CDE Entry
      tags:
      - Upload Data
    get:
      operationId: v2_getCdeFileWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: cdeId
        required: true
        type: integer
      responses:
        200:
          description: Successfully returns CDE url
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get signed url to access cde file
      tags:
      - Get Data
  /v2/workspaces/{workspaceId}/cde/{cdeId}/markups:
    get:
      description: Retrieve all markups for a specific CDE document with optional
        filtering and pagination
      operationId: v2_getCdeMarkups
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: CDE document identifier
        in: path
        name: cdeId
        required: true
        type: integer
      - description: Filter by CDE version ID
        in: query
        name: cde_version_id
        required: false
        type: integer
      - description: Filter by author/user ID (for "My Markups")
        in: query
        name: author_kinde_id
        required: false
        type: string
      - description: Filter by PDF page number
        in: query
        minimum: 1
        name: page_number
        required: false
        type: integer
      - description: Filter by markup type (comma-separated list)
        in: query
        name: markup_type
        required: false
        type: string
      - description: Filter by workflow context
        in: query
        name: workflow_context
        required: false
        type: string
      - default: this_version
        description: Version filtering option (this_version, all)
        in: query
        name: version_filter
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 10
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of markups for the CDE document
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get markups for CDE document
      tags:
      - Markup
    post:
      description: Create a new markup on a specific page of a CDE document
      operationId: v2_createCdeMarkup
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: CDE document identifier
        in: path
        name: cdeId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_version_id:
              description: CDE version ID this markup applies to
              type: integer
            geometry:
              description: GeoJSON geometry object
              type: object
            markup_type:
              description: Type of markup shape
              enum:
              - polygon
              - line
              - text
              - rectangle
              - point
              type: string
            pdf_page_number:
              description: Page number within the PDF (1-based)
              minimum: 1
              type: integer
            properties:
              description: Markup properties and metadata
              type: object
            workflow_context:
              default: pdf_review
              description: Workflow context
              type: string
          required:
          - pdf_page_number
          - geometry
          - markup_type
          - properties
          - cde_version_id
          type: object
      responses:
        201:
          description: Markup created successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create markup for CDE document
      tags:
      - Markup
  /v2/workspaces/{workspaceId}/cde/{cdeId}/metadata:
    put:
      operationId: v2_putCdeMetadataWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: cdeId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            metadata_key:
              description: The key of the metadata
              type: string
            metadata_value:
              description: The value of the metadata
              type: string
          required:
          - metadata_key
          - metadata_value
          type: object
      responses:
        200:
          description: Successfully updated CDE metadata
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update CDE metadata
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/cde/{cdeId}/status:
    put:
      operationId: v2_putCdeStatusWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: cdeId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_status:
              description: New CDE status (e.g. active, archived)
              type: string
          required:
          - cde_status
          type: object
      responses:
        200:
          description: Successfully updated CDE status
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update CDE status
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/cde/{cdeId}/type:
    put:
      description: Updates the CDE type for an existing workspace-level document (e.g.,
        promote to registered document)
      operationId: v2_putCdeTypeWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: cdeId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_type_id:
              description: New CDE type ID (must exist in global_cde_types table)
              example: ds-registered-document
              type: string
          required:
          - cde_type_id
          type: object
      responses:
        200:
          description: Successfully updated CDE type
          schema:
            properties:
              data:
                properties:
                  cde_id:
                    type: integer
                  cde_type_id:
                    type: string
                  previous_cde_type_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request (invalid cde_type_id or missing body)
        401:
          description: Unauthorized
        404:
          description: CDE document not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update CDE type (workspace level)
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/clients:
    get:
      description: Retrieve workspace clients with optional search and filtering
      operationId: v2_listWorkspaceClients
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Full-text search across client name, company group, contact person,
          and notes
        in: query
        name: search
        required: false
        type: string
      - description: Filter by client status
        in: query
        name: status
        required: false
        type: string
      - description: Filter by client region
        in: query
        name: region
        required: false
        type: string
      - description: Comma separated list of tags to match (any match)
        in: query
        name: tags
        required: false
        type: string
      - default: false
        description: Include soft deleted clients when true
        in: query
        name: includeDeleted
        required: false
        type: boolean
      - default: 1
        description: Result page to return
        in: query
        name: page
        required: false
        type: integer
      - default: 50
        description: Number of items per page
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Client list
          schema:
            properties:
              clients:
                items:
                  properties:
                    client_id:
                      type: string
                    client_name:
                      type: string
                    company_group:
                      type: string
                    contact_person:
                      type: string
                    created_at:
                      format: date-time
                      type: string
                    created_by:
                      type: string
                    created_by_user_id:
                      type: string
                    deleted_at:
                      format: date-time
                      type: string
                    deleted_by:
                      type: string
                    is_deleted:
                      type: boolean
                    logo_url:
                      type: string
                    notes:
                      type: string
                    project_count:
                      type: integer
                    region:
                      type: string
                    status:
                      type: string
                    tags:
                      items:
                        type: string
                      type: array
                    updated_at:
                      format: date-time
                      type: string
                    updated_by:
                      type: string
                    workspace_id:
                      type: string
                  type: object
                type: array
              limit:
                type: integer
              page:
                type: integer
              total_count:
                type: integer
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List workspace clients
      tags:
      - Workspace Clients
    post:
      description: Create a new workspace client record
      operationId: v2_createWorkspaceClient
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            client_name:
              type: string
            company_group:
              type: string
            contact_person:
              type: string
            logo_url:
              type: string
            notes:
              type: string
            project_count:
              type: integer
            region:
              type: string
            status:
              type: string
            tags:
              items:
                type: string
              type: array
          required:
          - client_name
          type: object
      responses:
        201:
          description: Created client
          schema:
            properties:
              client_id:
                type: string
              client_name:
                type: string
              company_group:
                type: string
              contact_person:
                type: string
              created_at:
                format: date-time
                type: string
              created_by:
                type: string
              created_by_user_id:
                type: string
              is_deleted:
                type: boolean
              logo_url:
                type: string
              notes:
                type: string
              project_count:
                type: integer
              region:
                type: string
              status:
                type: string
              tags:
                items:
                  type: string
                type: array
              updated_at:
                format: date-time
                type: string
              updated_by:
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Validation error
        401:
          description: Unauthorized
        403:
          description: Forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create workspace client
      tags:
      - Workspace Clients
  /v2/workspaces/{workspaceId}/clients/{clientId}:
    delete:
      description: Soft delete a workspace client record
      operationId: v2_deleteWorkspaceClient
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: clientId
        required: true
        type: string
      responses:
        200:
          description: Soft deleted client
          schema:
            properties:
              client_id:
                type: string
              client_name:
                type: string
              deleted_at:
                format: date-time
                type: string
              deleted_by:
                type: string
              is_deleted:
                type: boolean
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Client not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Soft delete workspace client
      tags:
      - Workspace Clients
    patch:
      description: Update fields on an existing workspace client record
      operationId: v2_updateWorkspaceClient
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: clientId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            client_name:
              type: string
            company_group:
              type: string
            contact_person:
              type: string
            logo_url:
              type: string
            notes:
              type: string
            project_count:
              type: integer
            region:
              type: string
            status:
              type: string
            tags:
              items:
                type: string
              type: array
          type: object
      responses:
        200:
          description: Updated client
          schema:
            properties:
              client_id:
                type: string
              client_name:
                type: string
              company_group:
                type: string
              contact_person:
                type: string
              created_at:
                format: date-time
                type: string
              is_deleted:
                type: boolean
              logo_url:
                type: string
              notes:
                type: string
              project_count:
                type: integer
              region:
                type: string
              status:
                type: string
              tags:
                items:
                  type: string
                type: array
              updated_at:
                format: date-time
                type: string
              updated_by:
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Validation error
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Client not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update workspace client
      tags:
      - Workspace Clients
  /v2/workspaces/{workspaceId}/clients/{clientId}/restore:
    post:
      description: Restore a soft deleted workspace client record
      operationId: v2_restoreWorkspaceClient
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: clientId
        required: true
        type: string
      responses:
        200:
          description: Restored client
          schema:
            properties:
              client_id:
                type: string
              client_name:
                type: string
              deleted_at:
                format: date-time
                type: string
              is_deleted:
                type: boolean
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Client not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Restore workspace client
      tags:
      - Workspace Clients
  /v2/workspaces/{workspaceId}/comments:
    delete:
      description: Soft delete a workspace-level comment by ID
      operationId: v2_deleteWorkspaceComment
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: commentId
        required: true
        type: string
      responses:
        200:
          description: Comment successfully deleted
      security:
      - JWT_v2: []
      summary: Delete a workspace-level comment
      tags:
      - Comments
    get:
      description: Retrieve workspace-level comments or a specific comment by ID
      operationId: v2_getWorkspaceComments
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: commentId
        type: string
      - in: query
        name: q
        type: string
      - in: query
        name: page
        type: string
      - in: query
        name: limit
        type: string
      - in: query
        name: relatedDocumentId
        type: string
      - in: query
        name: includeReplies
        type: string
      - in: query
        name: nested
        type: string
      responses:
        200:
          description: Successfully retrieved workspace-level comments
      security:
      - JWT_v2: []
      summary: Get workspace-level comments
      tags:
      - Comments
    patch:
      description: Update a workspace-level comment by ID
      operationId: v2_updateWorkspaceComment
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: commentId
        required: true
        type: string
      - in: body
        name: body
        schema:
          type: object
      responses:
        200:
          description: Comment updated successfully
      security:
      - JWT_v2: []
      summary: Update a workspace-level comment
      tags:
      - Comments
    post:
      description: Create a new workspace-level comment
      operationId: v2_createWorkspaceComment
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        schema:
          type: object
      responses:
        201:
          description: Comment created successfully
      security:
      - JWT_v2: []
      summary: Create a workspace-level comment
      tags:
      - Comments
  /v2/workspaces/{workspaceId}/companies:
    get:
      description: Returns all companies for a workspace
      operationId: v2_getWorkspaceCompanies
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get companies in a workspaces
      tags:
      - Companies
    post:
      consumes:
      - application/json
      description: Creates a new company in a workspace. Requires workspace manager
        permissions
      operationId: v2_postWorkspaceCompanies
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            company_abbreviation:
              description: The abbreviation of the company name
              type: string
            company_name:
              description: The name of the company
              type: string
          required:
          - company_name
          - company_abbreviation
          type: object
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create company in a workspaces
      tags:
      - Companies
  /v2/workspaces/{workspaceId}/companies/{companyId}:
    patch:
      consumes:
      - application/json
      operationId: v2_patchWorkspaceCompanies
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: companyId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            company_abbreviation:
              description: The abbreviation of the company name
              type: string
            company_name:
              description: The name of the company
              type: string
          type: object
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update a company
      tags:
      - Companies
  /v2/workspaces/{workspaceId}/cost/activities:
    get:
      operationId: v2_getCostActivities
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Optional filter by project ID
        in: query
        name: project_id
        required: false
        type: integer
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Activities
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostActivity
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            activity_steps:
              items:
                properties:
                  activity_step_name:
                    type: string
                  activity_step_num:
                    type: integer
                  date:
                    format: date-time
                    type: string
                  status:
                    enum:
                    - not started
                    - in progress
                    - completed
                    - delayed
                    type: string
                required:
                - activity_step_num
                - activity_step_name
                - date
                - status
                type: object
              type: array
            assigned_to:
              type: string
            category:
              enum:
              - materials
              - equipment
              - finishes
              - site works
              type: string
            cost_activity_title:
              type: string
            description:
              type: string
            due_date:
              format: date-time
              type: string
            end_date:
              format: date-time
              type: string
            priority:
              enum:
              - low
              - medium
              - high
              - critical
              type: string
            project_id:
              type: integer
            start_date:
              format: date-time
              type: string
            status:
              enum:
              - planned
              - in progress
              - completed
              - delayed
              type: string
          required:
          - cost_activity_title
          - project_id
          - start_date
          - end_date
          type: object
      responses:
        201:
          description: Activity successfully created
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Activity
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/activities/{activityId}:
    get:
      operationId: v2_getCostActivityById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: activityId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Activity By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostActivityById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: activityId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            activity_steps:
              items:
                properties:
                  activity_step_name:
                    type: string
                  activity_step_num:
                    type: integer
                  date:
                    format: date-time
                    type: string
                  status:
                    enum:
                    - not started
                    - in progress
                    - completed
                    - delayed
                    type: string
                required:
                - activity_step_num
                - activity_step_name
                - date
                - status
                type: object
              type: array
            assigned_to:
              type: string
            category:
              enum:
              - materials
              - equipment
              - finishes
              - site works
              type: string
            cost_activity_title:
              type: string
            description:
              type: string
            due_date:
              format: date-time
              type: string
            end_date:
              format: date-time
              type: string
            priority:
              enum:
              - low
              - medium
              - high
              - critical
              type: string
            project_id:
              type: integer
            start_date:
              format: date-time
              type: string
            status:
              enum:
              - planned
              - in progress
              - completed
              - delayed
              type: string
          type: object
      responses:
        200:
          description: Activity successfully updated
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Activity By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/aggregate:
    post:
      operationId: v2_postCostAggregate
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            project_level:
              description: Endpoints that require project_id
              items:
                properties:
                  endpoint:
                    description: Target endpoint name
                    enum:
                    - budget-items
                    - invoices
                    - orders
                    - variation-requests
                    - approvals
                    - claims
                    - attachments
                    - line-items
                    - contracts
                    - payment-schedules
                    - retentions
                    type: string
                  params:
                    additionalProperties: true
                    description: Parameters for the endpoint
                    properties:
                      method:
                        default: GET
                        type: string
                      project_id:
                        description: Project identifier (required for project-level
                          endpoints)
                        type: integer
                      sub_path:
                        default: ''
                        type: string
                    required:
                    - project_id
                    type: object
                required:
                - endpoint
                type: object
              type: array
            workspace_level:
              description: Endpoints that don't require project_id
              items:
                properties:
                  endpoint:
                    description: Target endpoint name
                    enum:
                    - cost-codes
                    - budget-categories
                    type: string
                  params:
                    additionalProperties: true
                    description: Parameters for the endpoint
                    properties:
                      method:
                        default: GET
                        type: string
                      sub_path:
                        default: ''
                        type: string
                    type: object
                required:
                - endpoint
                type: object
              type: array
          type: object
      responses:
        200:
          description: Successful response with aggregated data
          schema:
            properties:
              project_level:
                additionalProperties:
                  properties:
                    data:
                      description: Response data from the endpoint
                      type: object
                    error:
                      description: Error message if endpoint failed
                      type: string
                    status_code:
                      description: HTTP status code from the endpoint
                      type: integer
                  type: object
                description: Results from project-level endpoints
                type: object
              workspace_level:
                additionalProperties:
                  properties:
                    data:
                      description: Response data from the endpoint
                      type: object
                    error:
                      description: Error message if endpoint failed
                      type: string
                    status_code:
                      description: HTTP status code from the endpoint
                      type: integer
                  type: object
                description: Results from workspace-level endpoints
                type: object
            type: object
        400:
          description: Bad request - invalid request body or parameters
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
          schema:
            properties:
              message:
                type: string
            type: object
        405:
          description: Method not allowed
          schema:
            properties:
              message:
                type: string
            type: object
        500:
          description: Internal Server Error
          schema:
            properties:
              message:
                type: string
            type: object
      security:
      - JWT_v2: []
      summary: Aggregate Cost Data from Multiple Endpoints
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/budget-categories:
    get:
      operationId: v2_getBudgetCategories
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Whether to return budget categories in hierarchical tree structure
        in: query
        name: treeStructure
        required: false
        type: boolean
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    children:
                      description: Child categories (only present when treeStructure=true)
                      type: array
                    cost_budget_category_client_id:
                      description: User-friendly identifier for budget category
                      type: string
                    cost_budget_category_id:
                      description: Internal identifier for budget category
                      type: integer
                    cost_budget_category_name:
                      description: Name of budget category
                      type: string
                    created_at:
                      description: Timestamp of creation
                      format: date-time
                      type: string
                    description:
                      description: Description of budget category
                      type: string
                    forecast_line_item_id:
                      description: Associated forecast line item ID
                      type: integer
                    parent_cost_budget_category_id:
                      description: Parent category ID for hierarchical structure
                      type: integer
                    status:
                      description: Status of budget category
                      enum:
                      - active
                      - inactive
                      type: string
                    tag:
                      description: Tag for budget category
                      type: string
                    type:
                      description: Type of budget category
                      type: string
                    updated_at:
                      description: Timestamp of last update
                      format: date-time
                      type: string
                    user_id:
                      description: ID of the user who created the budget category
                      type: string
                    user_name:
                      description: Name of the user who created the budget category
                      type: string
                  type: object
                type: array
              message:
                description: Success message
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Budget Categories
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postBudgetCategory
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_budget_category_client_id:
              description: Client-provided identifier for cost budget category
              type: string
            cost_budget_category_name:
              description: Name of budget category
              type: string
            description:
              description: Description of budget category
              type: string
            forecast_line_item_id:
              description: Associated forecast line item ID
              type: integer
            parent_cost_budget_category_id:
              description: Parent category ID for hierarchical structure
              type: integer
            status:
              description: Status of budget category (defaults to 'active')
              enum:
              - active
              - inactive
              type: string
            tag:
              description: Tag for budget category
              type: string
            type:
              description: Type of budget category
              type: string
          required:
          - cost_budget_category_client_id
          - cost_budget_category_name
          - type
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              data:
                properties:
                  cost_budget_category_client_id:
                    description: User-friendly identifier for budget category
                    type: string
                  cost_budget_category_id:
                    description: Internal identifier for budget category
                    type: integer
                  cost_budget_category_name:
                    description: Name of budget category
                    type: string
                  created_at:
                    description: Timestamp of creation
                    format: date-time
                    type: string
                  description:
                    description: Description of budget category
                    type: string
                  forecast_line_item_id:
                    description: Associated forecast line item ID
                    type: integer
                  parent_cost_budget_category_id:
                    description: Parent category ID for hierarchical structure
                    type: integer
                  status:
                    description: Status of budget category
                    enum:
                    - active
                    - inactive
                    type: string
                  tag:
                    description: Tag for budget category
                    type: string
                  type:
                    description: Type of budget category
                    type: string
                  updated_at:
                    description: Timestamp of last update
                    format: date-time
                    type: string
                  user_id:
                    description: ID of the user who created the budget category
                    type: string
                  user_name:
                    description: Name of the user who created the budget category
                    type: string
                type: object
              message:
                description: Success message
                type: string
              updated_objects:
                description: List of updated objects (empty for create operations)
                type: array
            type: object
        400:
          description: Bad Request - Invalid input data
          schema:
            properties:
              message:
                description: Error message describing the validation failure
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Budget Category
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/budget-categories/{budgetCategoryId}:
    get:
      operationId: v2_getBudgetCategoryById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: budgetCategoryId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  cost_budget_category_client_id:
                    description: User-friendly identifier for budget category
                    type: string
                  cost_budget_category_id:
                    description: Internal identifier for budget category
                    type: integer
                  cost_budget_category_name:
                    description: Name of budget category
                    type: string
                  created_at:
                    description: Timestamp of creation
                    format: date-time
                    type: string
                  description:
                    description: Description of budget category
                    type: string
                  forecast_line_item_id:
                    description: Associated forecast line item ID
                    type: integer
                  parent_cost_budget_category_id:
                    description: Parent category ID for hierarchical structure
                    type: integer
                  status:
                    description: Status of budget category
                    enum:
                    - active
                    - inactive
                    type: string
                  tag:
                    description: Tag for budget category
                    type: string
                  type:
                    description: Type of budget category
                    type: string
                  updated_at:
                    description: Timestamp of last update
                    format: date-time
                    type: string
                  user_id:
                    description: ID of the user who created the budget category
                    type: string
                  user_name:
                    description: Name of the user who created the budget category
                    type: string
                type: object
              message:
                description: Success message
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Budget category not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Budget Category By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchBudgetCategoryById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: budgetCategoryId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_budget_category_client_id:
              description: Client-provided identifier for cost budget category
              type: string
            cost_budget_category_name:
              description: Name of budget category
              type: string
            description:
              description: Description of budget category
              type: string
            forecast_line_item_id:
              description: Associated forecast line item ID
              type: integer
            parent_cost_budget_category_id:
              description: Parent category ID for hierarchical structure
              type: integer
            status:
              description: Status of budget category
              enum:
              - active
              - inactive
              type: string
            tag:
              description: Tag for budget category
              type: string
            type:
              description: Type of budget category
              type: string
          type: object
      responses:
        200:
          description: Budget category successfully updated
          schema:
            properties:
              data:
                properties:
                  cost_budget_category_client_id:
                    description: Client-provided identifier for cost budget category
                    type: string
                  cost_budget_category_id:
                    description: Internal identifier for budget category
                    type: integer
                  cost_budget_category_name:
                    description: Name of budget category
                    type: string
                  created_at:
                    description: Creation timestamp
                    format: date-time
                    type: string
                  description:
                    description: Description of budget category
                    type: string
                  forecast_line_item_id:
                    description: Associated forecast line item ID
                    type: integer
                  parent_cost_budget_category_id:
                    description: Parent category ID for hierarchical structure
                    type: integer
                  status:
                    description: Status of budget category
                    enum:
                    - active
                    - inactive
                    type: string
                  tag:
                    description: Tag for budget category
                    type: string
                  type:
                    description: Type of budget category
                    type: string
                  updated_at:
                    description: Last update timestamp
                    format: date-time
                    type: string
                  user_id:
                    description: ID of the user who created the budget category
                    type: string
                  user_name:
                    description: Name of the user who created the budget category
                    type: string
                type: object
              message:
                description: Success message
                type: string
              updated_objects:
                description: List of updated objects
                type: array
            type: object
        400:
          description: Bad Request - Invalid input data
          schema:
            properties:
              message:
                description: Error message describing the validation failure
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Budget category not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Budget Category By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/clarifications:
    get:
      operationId: v2_getClarifications
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by tender package ID
        in: query
        name: tender_package_id
        required: false
        type: string
      - description: Page number for pagination (default 1)
        in: query
        name: page
        required: false
        type: integer
      - description: Number of items per page (default 50, max 1000)
        in: query
        name: limit
        required: false
        type: integer
      - description: Search query for subject and description
        in: query
        name: q
        required: false
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              count:
                type: integer
              items:
                items:
                  properties:
                    clarification_id:
                      type: string
                    comments_count:
                      type: integer
                    created_at:
                      format: date-time
                      type: string
                    date_submitted:
                      format: date-time
                      type: string
                    description:
                      type: string
                    files_count:
                      type: integer
                    response_date:
                      format: date-time
                      type: string
                    response_message:
                      type: string
                    subject:
                      type: string
                    tender_package_id:
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                  type: object
                type: array
              limit:
                type: integer
              message:
                type: string
              page:
                type: integer
              total_count:
                type: integer
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Clarifications
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_createClarification
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            date_submitted:
              description: Date when clarification was submitted
              format: date-time
              type: string
            description:
              description: Detailed description of the clarification
              type: string
            subject:
              description: Subject of the clarification
              type: string
            tender_package_id:
              description: ID of the related tender package
              type: string
          required:
          - subject
          - tender_package_id
          - description
          - date_submitted
          type: object
      responses:
        201:
          description: Clarification created successfully
          schema:
            properties:
              data:
                properties:
                  clarification_id:
                    type: string
                  comments:
                    items:
                      type: object
                    type: array
                  comments_count:
                    type: integer
                  created_at:
                    format: date-time
                    type: string
                  date_submitted:
                    format: date-time
                    type: string
                  description:
                    type: string
                  files:
                    items:
                      type: object
                    type: array
                  files_count:
                    type: integer
                  response_date:
                    format: date-time
                    type: string
                  response_message:
                    type: string
                  subject:
                    type: string
                  tender_package_id:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Clarification
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/clarifications/{clarificationId}:
    delete:
      operationId: v2_deleteClarificationById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: clarificationId
        required: true
        type: string
      responses:
        200:
          description: Clarification deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Clarification not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Clarification By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getClarificationById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: clarificationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  clarification_id:
                    type: string
                  comments:
                    items:
                      properties:
                        comment_by:
                          type: string
                        comment_text:
                          type: string
                        comment_user_id:
                          type: string
                        date:
                          format: date-time
                          type: string
                        id:
                          type: string
                        related_document_id:
                          type: string
                        related_document_type:
                          type: string
                        reply_level:
                          type: integer
                      type: object
                    type: array
                  comments_count:
                    type: integer
                  created_at:
                    format: date-time
                    type: string
                  date_submitted:
                    format: date-time
                    type: string
                  description:
                    type: string
                  files:
                    items:
                      properties:
                        category:
                          type: string
                        created_at:
                          format: date-time
                          type: string
                        description:
                          type: string
                        display_name:
                          type: string
                        file_size:
                          type: integer
                        file_type:
                          type: string
                        file_url:
                          type: string
                        id:
                          type: string
                        related_document_id:
                          type: string
                        updated_at:
                          format: date-time
                          type: string
                        uploaded_by:
                          type: string
                      type: object
                    type: array
                  files_count:
                    type: integer
                  response_date:
                    format: date-time
                    type: string
                  response_message:
                    type: string
                  subject:
                    type: string
                  tender_package_id:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Clarification not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Clarification By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_updateClarificationById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: clarificationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          description: Only response_date and response_message can be updated
          properties:
            response_date:
              description: Date when response was provided
              format: date-time
              type: string
            response_message:
              description: Response message to the clarification
              type: string
          type: object
      responses:
        200:
          description: Clarification updated successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Clarification not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Clarification By Id (Response Only)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/contracts:
    get:
      operationId: v2_getCostContractsWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Page number for pagination (default 1)
        in: query
        name: page
        required: false
        type: integer
      - description: Number of items per page (default 50)
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                award_date:
                  type: string
                claim_cycle_type:
                  description: Claim cycle type
                  type: string
                contract_currency:
                  type: string
                contract_date:
                  description: Contract date
                  type: string
                contract_identifier:
                  type: string
                contract_risk:
                  type: string
                contract_status:
                  type: string
                contract_template_set:
                  description: Contract template set
                  type: string
                contract_type:
                  type: string
                contract_value:
                  type: string
                cost_contract_name:
                  type: string
                cost_contract_num:
                  type: string
                cost_contract_scope_of_work:
                  type: string
                created_at:
                  type: string
                created_by_user_id:
                  type: string
                dlp_end:
                  type: string
                dlp_setting:
                  description: DLP setting configuration
                  type: object
                gst:
                  description: GST percentage
                  type: number
                head_contract_type:
                  description: Head contract type (Lump Sum, GMP, Cost Plus, Construction
                    Management, Schedule of Rates, Other)
                  type: string
                internal_reference:
                  description: Internal reference identifier
                  type: string
                issuing_company_id:
                  type: string
                opportunity_tender_reference:
                  description: Opportunity/tender reference
                  type: string
                payment_term:
                  description: Payment term in days
                  type: integer
                pc_date:
                  type: string
                project_id:
                  type: string
                receiving_company_id:
                  type: string
                reference_date:
                  description: Reference date (day of month)
                  type: integer
                region:
                  description: Region associated with the contract
                  type: string
                retention_cap_value:
                  type: string
                retention_setting:
                  description: Retention setting configuration
                  type: object
                scope_of_work:
                  description: Detailed scope of work
                  type: string
                sector:
                  description: Sector of the contract
                  type: string
                signed_contract_pack:
                  description: Signed contract pack CDE file ID
                  type: integer
                sov_structure:
                  description: SOV structure type
                  type: string
                sovs:
                  description: Schedule of Values array
                  type: array
                start_date:
                  type: string
                trade:
                  type: string
                updated_at:
                  type: string
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Contracts (Workspace Level)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/cost-codes:
    get:
      operationId: v2_getCostCodes
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Page number for pagination
        in: query
        name: page
        type: integer
      - description: Number of items per page
        in: query
        name: limit
        type: integer
      - description: Whether to return cost codes in hierarchical tree structure
        in: query
        name: treeStructure
        type: string
      - description: Include archived cost codes in results (default false)
        in: query
        name: includeArchived
        type: boolean
      - description: Filter by lifecycle status. Use "all" to include all statuses.
        enum:
        - active
        - archived
        - locked
        - all
        in: query
        name: lifecycleStatus
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    cost_code_description:
                      description: Description of cost code
                    cost_code_identifier:
                      description: User-friendly identifier for cost code
                    cost_code_name:
                      description: Name of cost code
                    cost_code_num:
                      description: Internal identifier for cost code
                    lifecycle_changed_at:
                      description: Timestamp of last lifecycle change
                      format: date-time
                      type: string
                    lifecycle_changed_by:
                      description: User ID who made the last lifecycle change
                      type: string
                    lifecycle_reason:
                      description: Reason for the last lifecycle change
                      type: string
                    lifecycle_status:
                      description: Lifecycle state of the cost code
                      enum:
                      - active
                      - archived
                      - locked
                      type: string
                    parent_cost_code_num:
                      description: ID of parent cost code
                    project_id:
                      description: Project ID (optional, only for project-scoped cost
                        codes)
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Codes
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostCodes
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          items:
            properties:
              cost_budget_category_id:
                description: Budget category ID this cost code belongs to
                type: string
              cost_code_client_id:
                description: User-provided cost code ID
                type: string
              cost_code_description:
                description: Description of cost code
                type: string
              cost_code_name:
                description: Name of cost code
                type: string
              cost_code_original_value:
                description: Original budget value for this cost code
                type: number
              parent_cost_code_num:
                description: ID of parent cost code
                type: string
            required:
            - costCodeId
            type: object
          type: object
      responses:
        200:
          description: Objects successfully updated
          schema:
            properties:
              data:
                items:
                  properties:
                    cost_code_description:
                      description: Description of cost code
                    cost_code_identifier:
                      description: User-friendly identifier for cost code
                    cost_code_name:
                      description: Name of cost code
                    cost_code_num:
                      description: Internal identifier for cost code
                    parent_cost_code_num:
                      description: ID of parent cost code
                  type: object
                type: array
              message:
                description: Success message
              updated_count:
                description: Number of cost codes updated
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Cost Code
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostCode
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_budget_category_id:
              description: Budget category ID this cost code belongs to
              type: string
            cost_code_client_id:
              description: User-provided cost code ID
              type: string
            cost_code_description:
              description: Description of cost code
              type: string
            cost_code_name:
              description: Name of cost code
              type: string
            cost_code_original_value:
              description: Original budget value for this cost code
              type: number
            parent_cost_code_num:
              description: ID of parent cost code
              type: string
          required:
          - cost_code_name
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              data:
                properties:
                  cost_code_description:
                    description: Description of cost code
                  cost_code_identifier:
                    description: User-friendly identifier for cost code
                  cost_code_name:
                    description: Name of cost code
                  cost_code_num:
                    description: Internal identifier for cost code
                  parent_cost_code_num:
                    description: ID of parent cost code
                  project_id:
                    description: Project ID (optional, only for project-scoped cost
                      codes)
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Cost Code
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/cost-codes/import:
    post:
      operationId: v2_postCostCodesImport
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_codes:
              items:
                properties:
                  client_id:
                    description: User-provided unique identifier for cost code (used
                      for hierarchy)
                    type: string
                  cost_budget_category_id:
                    description: Budget category ID this cost code belongs to
                    type: string
                  cost_code_description:
                    description: Description of cost code
                    type: string
                  cost_code_name:
                    description: Name of cost code
                    type: string
                  cost_code_original_value:
                    description: Original budget value for this cost code
                    type: number
                  parent_client_id:
                    description: client_id of parent cost code (empty string for root
                      nodes)
                    type: string
                  project_id:
                    description: Project ID (optional, only for project-scoped cost
                      codes)
                    type: integer
                required:
                - cost_code_name
                - client_id
                type: object
              type: array
          required:
          - cost_codes
          type: object
      responses:
        201:
          description: Cost codes successfully created
          schema:
            properties:
              data:
                items:
                  properties:
                    cost_code_client_id:
                      description: User-provided cost code ID
                    cost_code_description:
                      description: Description of cost code
                    cost_code_identifier:
                      description: User-friendly identifier for cost code
                    cost_code_name:
                      description: Name of cost code
                    cost_code_num:
                      description: Internal identifier for cost code
                    parent_cost_code_num:
                      description: ID of parent cost code
                    project_id:
                      description: Project ID (optional, only for project-scoped cost
                        codes)
                  type: object
                type: array
              message:
                example: Batch cost codes created successfully
                type: string
            type: object
        400:
          description: Bad Request - validation error or circular dependency
          schema:
            properties:
              client_id:
                description: ID of problematic cost code (if applicable)
                type: string
              message:
                type: string
              unresolved_client_ids:
                description: List of client_ids that couldn't be resolved due to missing
                  parents
                items:
                  type: string
                type: array
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Batch Import Cost Codes
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/cost-codes/{costCodeId}:
    get:
      operationId: v2_getCostCodeById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: costCodeId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  cost_code_description:
                    description: Description of cost code
                  cost_code_identifier:
                    description: User-friendly identifier for cost code
                  cost_code_name:
                    description: Name of cost code
                  cost_code_num:
                    description: Internal identifier for cost code
                  parent_cost_code_num:
                    description: ID of parent cost code
                  project_id:
                    description: Project ID (optional, only for project-scoped cost
                      codes)
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Code By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostCodeById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: costCodeId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_budget_category_id:
              description: Budget category ID this cost code belongs to
              type: string
            cost_code_client_id:
              description: User-provided cost code ID
              type: string
            cost_code_description:
              description: Description of cost code
              type: string
            cost_code_name:
              description: Name of cost code
              type: string
            cost_code_original_value:
              description: Original budget value for this cost code
              type: number
            parent_cost_code_num:
              description: ID of parent cost code
              type: string
          type: object
      responses:
        200:
          description: Object successfully edited
          schema:
            properties:
              data:
                properties:
                  cost_code_description:
                    description: Description of cost code
                  cost_code_identifier:
                    description: User-friendly identifier for cost code
                  cost_code_name:
                    description: Name of cost code
                  cost_code_num:
                    description: Internal identifier for cost code
                  parent_cost_code_num:
                    description: ID of parent cost code
                  project_id:
                    description: Project ID (optional, only for project-scoped cost
                      codes)
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Cost Code By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/cost-codes/{costCodeId}/archive:
    post:
      description: 'Archive a cost code to retire it from active use while preserving
        history.

        Archived cost codes cannot be selected for new budgets, POs, claims, or invoices,

        but remain visible in historical data and reports.

        '
      operationId: v2_archiveCostCode
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: costCodeId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            email:
              description: Optional email of person archiving (for audit trail)
              type: string
            name:
              description: Optional name of person archiving (for audit trail)
              type: string
            reason:
              description: Reason for archiving (required for audit trail)
              type: string
          required:
          - reason
          type: object
      responses:
        200:
          description: Cost code archived successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - missing reason or invalid state
        401:
          description: Unauthorized
        403:
          description: Forbidden - cost code is locked
        404:
          description: Cost code not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Archive Cost Code
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isAdmin
  /v2/workspaces/{workspaceId}/cost/cost-codes/{costCodeId}/history:
    get:
      description: 'Get the complete lifecycle change history for a cost code.

        Returns all archive, restore, lock, and unlock actions in reverse chronological
        order.


        IMPORTANT: This is an IMMUTABLE audit trail.

        - Records can only be added, never modified or deleted

        - No DELETE or PATCH endpoints exist for this resource

        - Ensures finance-grade audit integrity

        '
      operationId: v2_getCostCodeLifecycleHistory
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: costCodeId
        required: true
        type: string
      - description: Maximum number of history entries to return (default 10000)
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Lifecycle history fetched successfully
          schema:
            properties:
              count:
                type: integer
              data:
                items:
                  properties:
                    action:
                      description: Type of lifecycle action
                      enum:
                      - archive
                      - restore
                      - lock
                      - unlock
                      type: string
                    changed_by_email:
                      type: string
                    changed_by_name:
                      type: string
                    changed_by_user_id:
                      type: string
                    id:
                      description: History entry ID
                      type: string
                    new_status:
                      description: Status after the change
                      type: string
                    previous_status:
                      description: Status before the change
                      type: string
                    reason:
                      type: string
                    timestamp:
                      format: date-time
                      type: string
                  type: object
                type: array
              message:
                type: string
            type: object
        400:
          description: Bad Request - missing cost code ID
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Code Lifecycle History
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/cost-codes/{costCodeId}/lock:
    post:
      description: 'Lock a cost code to protect GL integrity (e.g., for month-end
        close).

        Locked cost codes cannot be edited. Requires Finance role.

        '
      operationId: v2_lockCostCode
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: costCodeId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            email:
              description: Optional email of person locking (for audit trail)
              type: string
            name:
              description: Optional name of person locking (for audit trail)
              type: string
            reason:
              description: Reason for locking (required for audit trail)
              type: string
          required:
          - reason
          type: object
      responses:
        200:
          description: Cost code locked successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - missing reason or invalid state
        401:
          description: Unauthorized
        404:
          description: Cost code not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Lock Cost Code
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isFinance
  /v2/workspaces/{workspaceId}/cost/cost-codes/{costCodeId}/restore:
    post:
      description: Restore an archived cost code back to active status.
      operationId: v2_restoreCostCode
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: costCodeId
        required: true
        type: string
      - in: body
        name: body
        required: false
        schema:
          properties:
            email:
              description: Optional email of person restoring (for audit trail)
              type: string
            name:
              description: Optional name of person restoring (for audit trail)
              type: string
          type: object
      responses:
        200:
          description: Cost code restored successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - cost code is not archived
        401:
          description: Unauthorized
        404:
          description: Cost code not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Restore Archived Cost Code
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isAdmin
  /v2/workspaces/{workspaceId}/cost/cost-codes/{costCodeId}/unlock:
    post:
      description: 'Unlock a locked cost code. Requires Finance role and reason capture
        for audit.

        '
      operationId: v2_unlockCostCode
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: costCodeId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            email:
              description: Optional email of person unlocking (for audit trail)
              type: string
            name:
              description: Optional name of person unlocking (for audit trail)
              type: string
            reason:
              description: Reason for unlocking (required for audit trail)
              type: string
          required:
          - reason
          type: object
      responses:
        200:
          description: Cost code unlocked successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - missing reason or cost code is not locked
        401:
          description: Unauthorized
        404:
          description: Cost code not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Unlock Cost Code
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isFinance
  /v2/workspaces/{workspaceId}/cost/cost-types:
    get:
      operationId: v2_getCostTypes
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Get specific cost type by ID
        in: query
        name: costTypeId
        type: string
      - description: Page number for pagination
        in: query
        name: page
        type: integer
      - description: Number of items per page
        in: query
        name: limit
        type: integer
      - description: Search query for name field
        in: query
        name: q
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Cost type not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Types
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostType
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: ID of cost type to update
        in: query
        name: costTypeId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            included_in:
              description: Array of cost code IDs
              items:
                type: string
              type: array
            name:
              description: Name of cost type
              type: string
          type: object
      responses:
        200:
          description: Cost type updated successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Validation error
        401:
          description: Unauthorized
        404:
          description: Cost type not found
        409:
          description: Duplicate name
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Cost Type
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostType
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            included_in:
              description: Array of cost code IDs
              items:
                type: string
              type: array
            name:
              description: Name of cost type
              type: string
          required:
          - name
          type: object
      responses:
        201:
          description: Cost type created successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Validation error
        401:
          description: Unauthorized
        409:
          description: Duplicate name
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Cost Type
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/cost-types/{costTypeId}/cost-codes:
    delete:
      operationId: v2_deleteCostTypeCostCodes
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: costTypeId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_code_nums:
              description: Array of cost code IDs to remove
              items:
                type: string
              type: array
          required:
          - cost_code_nums
          type: object
      responses:
        200:
          description: Cost codes removed successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
              not_found:
                items:
                  type: string
                type: array
              removed:
                items:
                  type: string
                type: array
            type: object
        400:
          description: Validation error
        401:
          description: Unauthorized
        404:
          description: Cost type not found or no codes removed
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Remove Cost Codes from Cost Type
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostTypeCostCode
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: costTypeId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_code_num:
              description: Cost code ID to add
              type: string
          required:
          - cost_code_num
          type: object
      responses:
        200:
          description: Cost code added successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Validation error
        401:
          description: Unauthorized
        404:
          description: Cost type or cost code not found
        409:
          description: Cost code already in array
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Add Cost Code to Cost Type
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/delay-notices:
    get:
      operationId: v2_getDelayNotices
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Page number for pagination
        in: query
        name: page
        type: integer
      - description: Number of items per page
        in: query
        name: limit
        type: integer
      - description: Filter by project ID
        in: query
        name: project_id
        type: integer
      - description: Filter by status (issued, draft, acknowledged)
        in: query
        name: status
        type: string
      - description: Filter by work package
        in: query
        name: work_package
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    cause:
                      description: Cause of delay
                      type: string
                    critical_path:
                      description: Whether this affects critical path
                      type: boolean
                    delay_notice_client_id:
                      description: Client-facing delay notice ID
                      type: string
                    delay_notice_name:
                      description: Delay notice name
                      type: string
                    delay_notice_num:
                      description: Delay notice number
                      type: string
                    event_date:
                      description: Event date
                      format: date
                      type: string
                    id:
                      description: Delay notice ID
                      type: string
                    notice_date:
                      description: Notice date
                      format: date
                      type: string
                    project_id:
                      description: Project ID
                      type: integer
                    responsible_party:
                      description: Responsible party
                      type: string
                    status:
                      description: Status (issued, draft, acknowledged)
                      type: string
                    summary:
                      description: Summary of delay notice
                      type: string
                    work_package:
                      description: Work package
                      type: string
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Access denied
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Delay Notices
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_createDelayNotice
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cause:
              description: Cause of delay
              type: string
            contract_reference:
              description: Contract reference
              type: string
            correspondence_reference:
              description: Correspondence reference
              type: string
            critical_path:
              description: Whether this affects critical path
              type: boolean
            delay_notice_client_id:
              description: Client-facing delay notice ID (auto-generated if not provided)
              type: string
            delay_notice_name:
              description: Delay notice name
              type: string
            details:
              description: Detailed description
              type: string
            event_date:
              description: Event date
              format: date
              type: string
            notice_date:
              description: Notice date
              format: date
              type: string
            programme_activity:
              description: Programme activity
              type: string
            project_id:
              description: Project ID
              type: integer
            responsible_party:
              description: Responsible party
              type: string
            sop_reference:
              description: SOP reference
              type: string
            status:
              description: Status of delay notice
              enum:
              - issued
              - draft
              - acknowledged
              type: string
            summary:
              description: Summary of delay notice
              type: string
            work_package:
              description: Work package
              type: string
          required:
          - project_id
          - delay_notice_name
          - work_package
          - event_date
          - summary
          type: object
      responses:
        201:
          description: Delay notice created successfully
          schema:
            properties:
              data:
                properties:
                  delay_notice_client_id:
                    description: Auto-generated client ID
                    type: string
                  delay_notice_name:
                    description: Delay notice name
                    type: string
                  id:
                    description: Delay notice ID
                    type: string
                  project_id:
                    description: Project ID
                    type: integer
                  status:
                    description: Status
                    type: string
                  summary:
                    description: Summary
                    type: string
                  work_package:
                    description: Work package
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - missing required fields
        401:
          description: Unauthorized
        403:
          description: Access denied
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Delay Notice
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/delay-notices/{delayNoticeId}:
    get:
      operationId: v2_getDelayNoticeById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: delayNoticeId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  delay_notice_client_id:
                    description: Client-facing delay notice ID
                    type: string
                  delay_notice_name:
                    description: Delay notice name
                    type: string
                  details:
                    description: Detailed description
                    type: string
                  event_date:
                    description: Event date
                    format: date
                    type: string
                  id:
                    description: Delay notice ID
                    type: string
                  project_id:
                    description: Project ID
                    type: integer
                  status:
                    description: Status
                    type: string
                  summary:
                    description: Summary
                    type: string
                  work_package:
                    description: Work package
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Access denied
        404:
          description: Delay notice not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Delay Notice By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_updateDelayNoticeById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: delayNoticeId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cause:
              description: Cause of delay
              type: string
            contract_reference:
              description: Contract reference
              type: string
            correspondence_reference:
              description: Correspondence reference
              type: string
            critical_path:
              description: Whether this affects critical path
              type: boolean
            delay_notice_client_id:
              description: Client-facing delay notice ID
              type: string
            delay_notice_name:
              description: Delay notice name
              type: string
            details:
              description: Detailed description
              type: string
            event_date:
              description: Event date
              format: date
              type: string
            notice_date:
              description: Notice date
              format: date
              type: string
            programme_activity:
              description: Programme activity
              type: string
            responsible_party:
              description: Responsible party
              type: string
            sop_reference:
              description: SOP reference
              type: string
            status:
              description: Status of delay notice
              enum:
              - issued
              - draft
              - acknowledged
              type: string
            summary:
              description: Summary of delay notice
              type: string
            work_package:
              description: Work package
              type: string
          type: object
      responses:
        200:
          description: Delay notice updated successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - no fields to update
        401:
          description: Unauthorized
        403:
          description: Access denied
        404:
          description: Delay notice not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Delay Notice By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/deliveries:
    get:
      operationId: v2_getDeliveries
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: page
        type: integer
      - in: query
        name: limit
        type: integer
      - in: query
        name: status
        type: string
      - in: query
        name: supplier
        type: string
      - in: query
        name: project_id
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    description:
                      description: Delivery description
                    documents:
                      type: array
                    expected_date:
                      description: Expected delivery date
                    id:
                      description: Delivery ID
                    issues:
                      type: array
                    items:
                      type: array
                    related_files:
                      type: array
                    status:
                      description: Delivery status
                    supplier:
                      description: Supplier name
                    tracking_number:
                      description: Tracking number
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Deliveries
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postDelivery
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_order_num:
              description: Related order number
            delivery_location:
              description: Delivery location
            description:
              description: Delivery description
            expected_date:
              description: Expected delivery date
            project_id:
              description: Project ID
            related_files:
              type: array
            status:
              description: Delivery status
            supplier:
              description: Supplier name
            tracking_number:
              description: Tracking number
          required:
          - supplier
          - description
          - status
          type: object
      responses:
        201:
          description: Delivery successfully created
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Delivery
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/deliveries/files/process:
    post:
      operationId: v2_processDeliveryFiles
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            files:
              items:
                properties:
                  file_id:
                    description: File ID from signed URL response
                type: object
              type: array
          required:
          - files
          type: object
      responses:
        200:
          description: Files processed successfully
          schema:
            properties:
              data:
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Process Uploaded Files
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/deliveries/files/signed-urls:
    post:
      operationId: v2_getDeliveryFileSignedUrls
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            files:
              items:
                properties:
                  collection_type:
                    description: Collection type
                  file_size_bytes:
                    description: File size in bytes
                  filename:
                    description: Original filename
                  filetype:
                    description: File MIME type
                type: object
              type: array
          required:
          - files
          type: object
      responses:
        200:
          description: Signed URLs generated successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    file_id:
                      description: File ID
                    file_url:
                      description: Final file URL
                    signed_url:
                      description: Signed upload URL
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get File Upload Signed URLs
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/deliveries/{deliveryId}:
    delete:
      operationId: v2_deleteDeliveryById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      responses:
        200:
          description: Delivery successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Delivery By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getDeliveryById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Delivery By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchDeliveryById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            actual_date:
              description: Actual delivery date
            delivery_location:
              description: Delivery location
            description:
              description: Delivery description
            expected_date:
              description: Expected delivery date
            related_files:
              type: array
            status:
              description: Delivery status
            supplier:
              description: Supplier name
            tracking_number:
              description: Tracking number
          type: object
      responses:
        200:
          description: Delivery successfully updated
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Delivery By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/deliveries/{deliveryId}/documents:
    get:
      operationId: v2_getDeliveryDocuments
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Delivery Documents
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postDeliveryDocument
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            document_type:
              description: Document type
            related_files:
              type: array
            status:
              description: Document status
            supplier:
              description: Supplier name
          required:
          - document_type
          - status
          type: object
      responses:
        201:
          description: Document successfully created
          schema:
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Delivery Document
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/deliveries/{deliveryId}/issues:
    get:
      operationId: v2_getDeliveryIssues
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Delivery Issues
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postDeliveryIssue
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assigned_to:
              description: Assigned user ID
            cost_issue_client_id:
              description: Issue client ID (auto-generated if not provided)
            cost_order_num:
              description: Related order number
            date_reported:
              description: Date when issue was reported
            description:
              description: Issue description
            priority:
              description: Issue priority
            related_files:
              type: array
            status:
              description: Issue status
            supplier:
              description: Supplier name
          required:
          - description
          - status
          - priority
          type: object
      responses:
        201:
          description: Issue successfully created
          schema:
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Delivery Issue
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/deliveries/{deliveryId}/issues/{issueId}:
    delete:
      operationId: v2_deleteDeliveryIssueById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      - in: path
        name: issueId
        required: true
        type: string
      responses:
        200:
          description: Issue successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Delivery Issue By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getDeliveryIssueById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      - in: path
        name: issueId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  assigned_to:
                    description: Assigned user ID
                  cost_issue_client_id:
                    description: Issue client ID
                  cost_order_num:
                    description: Related order number
                  date_reported:
                    description: Date when issue was reported
                  description:
                    description: Issue description
                  id:
                    description: Issue ID
                  priority:
                    description: Issue priority
                  related_files:
                    type: array
                  status:
                    description: Issue status
                  supplier:
                    description: Supplier name
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Delivery Issue By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchDeliveryIssueById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      - in: path
        name: issueId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assigned_to:
              description: Assigned user ID
            cost_issue_client_id:
              description: Issue client ID
            cost_order_num:
              description: Related order number
            date_reported:
              description: Date when issue was reported
            description:
              description: Issue description
            priority:
              description: Issue priority
            related_files:
              type: array
            status:
              description: Issue status
            supplier:
              description: Supplier name
          type: object
      responses:
        200:
          description: Issue successfully updated
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Delivery Issue By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/deliveries/{deliveryId}/items:
    get:
      operationId: v2_getDeliveryItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Delivery Items
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postDeliveryItem
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            condition:
              description: Item condition
            description:
              description: Item description
            expected_qty:
              description: Expected quantity
            item_name:
              description: Item name
            received_qty:
              description: Received quantity
            status:
              description: Item status
            unit:
              description: Unit of measurement
          required:
          - item_name
          - expected_qty
          - unit
          - status
          type: object
      responses:
        201:
          description: Item successfully created
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Delivery Item
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/deliveries/{deliveryId}/items/{itemId}:
    delete:
      operationId: v2_deleteDeliveryItem
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      - in: path
        name: itemId
        required: true
        type: string
      responses:
        200:
          description: Item successfully deleted
          schema:
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Delivery Item
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchDeliveryItem
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: deliveryId
        required: true
        type: string
      - in: path
        name: itemId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Item successfully updated
          schema:
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Delivery Item
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/head-contract-claims:
    get:
      operationId: v2_getHeadContractClaimsWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Head Contract Claims (Workspace Level)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/head-contract-invoices:
    get:
      operationId: v2_getHeadContractInvoicesWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Head Contract Invoices (Workspace Level)
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/cost/head-contract-payment-schedules:
    get:
      operationId: v2_getHeadContractPaymentSchedulesWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Head Contract Payment Schedules (Workspace Level)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/head-contract-retentions:
    get:
      operationId: v2_getHeadContractRetentionsWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Head Contract Retentions (Workspace Level)
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/cost/head-contract-variations:
    get:
      operationId: v2_getHeadContractVariationsWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Head Contract Variations (Workspace Level)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/subcontract-claims:
    get:
      operationId: v2_getSubcontractClaimsWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Claims (Workspace Level)
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/cost/subcontract-invoices:
    get:
      operationId: v2_getSubcontractInvoicesWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Invoices (Workspace Level)
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/cost/subcontract-payment-schedules:
    get:
      operationId: v2_getSubcontractPaymentSchedulesWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Payment Schedules (Workspace Level)
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/cost/subcontract-retentions:
    get:
      operationId: v2_getSubcontractRetentionsWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Retentions (Workspace Level)
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/cost/subcontract-variations:
    get:
      operationId: v2_getSubcontractVariationsWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Variations (Workspace Level)
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/cost/subcontracts:
    get:
      operationId: v2_getSubcontractsWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontracts (Workspace Level)
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/cost/tender-packages:
    get:
      operationId: v2_getTenderPackages
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by project ID
        in: query
        name: project_id
        required: false
        type: integer
      - enum:
        - mechanical
        - plumbing
        - structural
        - finishes
        - glazing & facade
        - site works & landscaping
        - roofing
        - concrete
        - masonry
        - carpentry
        - flooring
        - other
        in: query
        name: trade_category
        required: false
        type: string
      - enum:
        - open tender
        - selective tender
        - negotiated tender
        - single-stage tender
        - two-stage tender
        in: query
        name: tender_type
        required: false
        type: string
      - enum:
        - lump sum
        - unit price
        - detailed breakdown
        - cost plus
        in: query
        name: bid_form_type
        required: false
        type: string
      - enum:
        - will tender
        - undecided
        - will not tender
        in: query
        name: tender_status
        required: false
        type: string
      - description: Page number for pagination (default 1)
        in: query
        name: page
        required: false
        type: integer
      - description: Number of items per page (default 50, max 1000)
        in: query
        name: limit
        required: false
        type: integer
      - description: Search query for name and description
        in: query
        name: q
        required: false
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              count:
                type: integer
              items:
                items:
                  properties:
                    bid_form_type:
                      type: string
                    clarifications:
                      items:
                        properties:
                          clarification_id:
                            type: string
                          client_info:
                            properties:
                              company_name:
                                type: string
                              global_company_id:
                                type: integer
                              tax_id:
                                type: integer
                            type: object
                          created_at:
                            format: date-time
                            type: string
                          date_submitted:
                            format: date-time
                            type: string
                          description:
                            type: string
                          response_date:
                            format: date-time
                            type: string
                          response_message:
                            type: string
                          subject:
                            type: string
                          updated_at:
                            format: date-time
                            type: string
                        type: object
                      type: array
                    clarifications_count:
                      type: integer
                    created_at:
                      format: date-time
                      type: string
                    description:
                      type: string
                    due_date:
                      format: date
                      type: string
                    estimated_value:
                      type: number
                    files_count:
                      type: integer
                    invited_subcontractors_count:
                      type: integer
                    issue_date:
                      format: date
                      type: string
                    linked_rfis_count:
                      type: integer
                    name:
                      type: string
                    project_id:
                      type: integer
                    tender_package_id:
                      type: string
                    tender_status:
                      type: string
                    tender_type:
                      type: string
                    trade_category:
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                  type: object
                type: array
              limit:
                type: integer
              message:
                type: string
              page:
                type: integer
              total_count:
                type: integer
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Tender Packages
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_createTenderPackage
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            additional_options:
              properties:
                bid_bond_required:
                  type: boolean
                pre_qualification_required:
                  type: boolean
                site_visit_required:
                  type: boolean
                submit_alternative_proposals:
                  type: boolean
              required:
              - submit_alternative_proposals
              - site_visit_required
              - pre_qualification_required
              - bid_bond_required
              type: object
            bid_form_type:
              enum:
              - lump sum
              - unit price
              - detailed breakdown
              - cost plus
              type: string
            description:
              type: string
            document_security:
              properties:
                document_view_only:
                  type: boolean
              required:
              - document_view_only
              type: object
            due_date:
              format: date
              type: string
            estimated_value:
              type: number
            invited_subcontractors:
              items:
                properties:
                  company_name:
                    type: string
                  global_company_id:
                    type: integer
                  response:
                    type: string
                  tax_id:
                    type: integer
                required:
                - global_company_id
                - tax_id
                - company_name
                type: object
              minItems: 1
              type: array
            issue_date:
              format: date
              type: string
            linked_rfis:
              items:
                properties:
                  form_id:
                    type: integer
                  rfi_name:
                    type: string
                required:
                - form_id
                - rfi_name
                type: object
              type: array
            name:
              type: string
            project_id:
              type: integer
            tender_status:
              enum:
              - will tender
              - undecided
              - will not tender
              type: string
            tender_type:
              enum:
              - open tender
              - selective tender
              - negotiated tender
              - single-stage tender
              - two-stage tender
              type: string
            trade_category:
              enum:
              - mechanical
              - plumbing
              - structural
              - finishes
              - glazing & facade
              - site works & landscaping
              - roofing
              - concrete
              - masonry
              - carpentry
              - flooring
              - other
              type: string
          required:
          - name
          - project_id
          - trade_category
          - issue_date
          - due_date
          - estimated_value
          - tender_type
          - bid_form_type
          - additional_options
          - document_security
          - invited_subcontractors
          type: object
      responses:
        201:
          description: Tender package created successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Tender Package
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/tender-packages/enums:
    get:
      operationId: v2_getTenderPackageEnums
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              bid_form_types:
                items:
                  type: string
                type: array
              tender_statuses:
                items:
                  type: string
                type: array
              tender_types:
                items:
                  type: string
                type: array
              trade_categories:
                items:
                  type: string
                type: array
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Tender Package Enums
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/tender-packages/{tenderPackageId}:
    delete:
      operationId: v2_deleteTenderPackageById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: tenderPackageId
        required: true
        type: string
      responses:
        200:
          description: Tender package deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Tender package not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Tender Package By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getTenderPackageById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: tenderPackageId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  additional_options:
                    properties:
                      bid_bond_required:
                        type: boolean
                      pre_qualification_required:
                        type: boolean
                      site_visit_required:
                        type: boolean
                      submit_alternative_proposals:
                        type: boolean
                    type: object
                  bid_form_type:
                    type: string
                  clarifications:
                    items:
                      properties:
                        clarification_id:
                          type: string
                        client_info:
                          properties:
                            company_name:
                              type: string
                            global_company_id:
                              type: integer
                            tax_id:
                              type: integer
                          type: object
                        created_at:
                          format: date-time
                          type: string
                        date_submitted:
                          format: date-time
                          type: string
                        description:
                          type: string
                        response_date:
                          format: date-time
                          type: string
                        response_message:
                          type: string
                        subject:
                          type: string
                        updated_at:
                          format: date-time
                          type: string
                      type: object
                    type: array
                  clarifications_count:
                    type: integer
                  created_at:
                    format: date-time
                    type: string
                  description:
                    type: string
                  document_security:
                    properties:
                      document_view_only:
                        type: boolean
                    type: object
                  due_date:
                    format: date
                    type: string
                  estimated_value:
                    type: number
                  files:
                    items:
                      properties:
                        display_name:
                          type: string
                        file_size:
                          type: integer
                        file_type:
                          type: string
                        file_url:
                          type: string
                        id:
                          type: string
                      type: object
                    type: array
                  files_count:
                    type: integer
                  invited_subcontractors:
                    items:
                      properties:
                        company_name:
                          type: string
                        global_company_id:
                          type: integer
                        response:
                          type: string
                        tax_id:
                          type: integer
                      type: object
                    type: array
                  invited_subcontractors_count:
                    type: integer
                  issue_date:
                    format: date
                    type: string
                  linked_rfis:
                    items:
                      properties:
                        form_id:
                          type: integer
                        rfi_name:
                          type: string
                      type: object
                    type: array
                  linked_rfis_count:
                    type: integer
                  name:
                    type: string
                  project_id:
                    type: integer
                  tender_package_id:
                    type: string
                  tender_status:
                    type: string
                  tender_type:
                    type: string
                  trade_category:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Tender package not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Tender Package By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_updateTenderPackageById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: tenderPackageId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            additional_options:
              properties:
                bid_bond_required:
                  type: boolean
                pre_qualification_required:
                  type: boolean
                site_visit_required:
                  type: boolean
                submit_alternative_proposals:
                  type: boolean
              type: object
            bid_form_type:
              enum:
              - lump sum
              - unit price
              - detailed breakdown
              - cost plus
              type: string
            description:
              type: string
            document_security:
              properties:
                document_view_only:
                  type: boolean
              type: object
            due_date:
              format: date
              type: string
            estimated_value:
              type: number
            invited_subcontractors:
              items:
                properties:
                  company_name:
                    type: string
                  global_company_id:
                    type: integer
                  response:
                    type: string
                  tax_id:
                    type: integer
                type: object
              type: array
            issue_date:
              format: date
              type: string
            linked_rfis:
              items:
                properties:
                  form_id:
                    type: integer
                  rfi_name:
                    type: string
                type: object
              type: array
            name:
              type: string
            project_id:
              type: integer
            tender_status:
              enum:
              - will tender
              - undecided
              - will not tender
              type: string
            tender_type:
              enum:
              - open tender
              - selective tender
              - negotiated tender
              - single-stage tender
              - two-stage tender
              type: string
            trade_category:
              enum:
              - mechanical
              - plumbing
              - structural
              - finishes
              - glazing & facade
              - site works & landscaping
              - roofing
              - concrete
              - masonry
              - carpentry
              - flooring
              - other
              type: string
          type: object
      responses:
        200:
          description: Tender package updated successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Tender package not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Tender Package By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/tender-packages/{tenderPackageId}/subcontractors/{taxId}:
    patch:
      operationId: v2_updateSubcontractorResponse
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: tenderPackageId
        required: true
        type: string
      - description: Tax ID of the subcontractor to update
        in: path
        name: taxId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            response:
              description: Updated response from the subcontractor
              type: string
          required:
          - response
          type: object
      responses:
        200:
          description: Subcontractor response updated successfully
          schema:
            properties:
              data:
                properties:
                  response:
                    type: string
                  tax_id:
                    type: integer
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Tender package or subcontractor not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Subcontractor Response By Tax ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/tenders:
    get:
      operationId: v2_getTendersWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Optional filter by project ID
        in: query
        name: project_id
        required: false
        type: integer
      - enum:
        - commercial
        - residential
        - infrastructure
        - education
        - healthcare
        - industrial
        - retail
        - other
        in: query
        name: type
        required: false
        type: string
      - enum:
        - will_bid
        - undecided
        in: query
        name: bid_status
        required: false
        type: string
      - enum:
        - in_progress
        - submitted
        - cancelled
        in: query
        name: tender_status
        required: false
        type: string
      - enum:
        - open
        - invited
        - shortlisted
        in: query
        name: stage
        required: false
        type: string
      - description: Include related project information
        in: query
        name: includeProjectInfo
        required: false
        type: boolean
      - description: Page number for pagination
        in: query
        name: page
        required: false
        type: integer
      - description: Number of items per page
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              count:
                type: integer
              items:
                items:
                  properties:
                    bid_status:
                      type: string
                    client_contact:
                      description: Denormalized client contact for display
                      type: string
                    client_id:
                      description: Reference to workspace client (Firestore document
                        ID)
                      type: string
                    client_name:
                      description: Denormalized client name for display
                      type: string
                    created_at:
                      format: date-time
                      type: string
                    description:
                      type: string
                    due_date:
                      format: date-time
                      type: string
                    estimator:
                      description: Optional estimator name or identifier
                      type: string
                    id:
                      type: string
                    location:
                      type: string
                    name:
                      type: string
                    project_id:
                      type: integer
                    stage:
                      type: string
                    tags:
                      type: array
                    teams:
                      type: array
                    tender_status:
                      type: string
                    type:
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                    value:
                      type: number
                  type: object
                type: array
              limit:
                type: integer
              page:
                type: integer
              total_count:
                type: integer
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Tenders (Workspace Level)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_createTenderWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            bid_status:
              enum:
              - will_bid
              - undecided
              type: string
            client_contact:
              description: Denormalized client contact for display
              type: string
            client_id:
              description: Reference to workspace client (Firestore document ID, 32-char
                hex string)
              type: string
            client_name:
              description: Denormalized client name for display
              type: string
            description:
              type: string
            due_date:
              format: date-time
              type: string
            estimator:
              description: Optional estimator name or identifier
              type: string
            location:
              type: string
            name:
              type: string
            notes:
              type: string
            probability:
              description: Probability between 0 and 1 (defaults to 0.5)
              type: number
            project_id:
              description: Optional project ID to associate tender with
              type: integer
            project_info:
              type: object
            stage:
              enum:
              - open
              - invited
              - shortlisted
              type: string
            tags:
              items:
                properties:
                  tag_id:
                    type: string
                  tag_name:
                    type: string
                type: object
              type: array
            teams:
              items:
                properties:
                  name:
                    type: string
                  role:
                    type: string
                  user_email:
                    type: string
                  user_id:
                    type: string
                type: object
              type: array
            tender_status:
              enum:
              - in_progress
              - submitted
              - cancelled
              type: string
            type:
              enum:
              - commercial
              - residential
              - infrastructure
              - education
              - healthcare
              - industrial
              - retail
              - other
              type: string
            value:
              type: number
          required:
          - name
          - type
          - bid_status
          - tender_status
          - stage
          type: object
      responses:
        201:
          description: Tender created successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Tender (Workspace Level)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/tenders/enums:
    get:
      operationId: v2_getTenderEnumsWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              bid_statuses:
                type: array
              stages:
                type: array
              tender_statuses:
                type: array
              tender_types:
                type: array
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Tender Enums (Workspace Level)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/tenders/{tenderId}:
    delete:
      operationId: v2_deleteTenderByIdWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: tenderId
        required: true
        type: string
      responses:
        200:
          description: Tender deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Tender not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Tender By Id (Workspace Level)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getTenderByIdWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: tenderId
        required: true
        type: string
      - description: Include related project information
        in: query
        name: includeProjectInfo
        required: false
        type: boolean
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  bid_status:
                    type: string
                  client_contact:
                    description: Denormalized client contact for display
                    type: string
                  client_id:
                    description: Reference to workspace client (Firestore document
                      ID)
                    type: string
                  client_name:
                    description: Denormalized client name for display
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  description:
                    type: string
                  due_date:
                    format: date-time
                    type: string
                  estimator:
                    description: Optional estimator name or identifier
                    type: string
                  id:
                    type: string
                  location:
                    type: string
                  name:
                    type: string
                  notes:
                    type: string
                  project_id:
                    type: integer
                  stage:
                    type: string
                  tags:
                    type: array
                  teams:
                    type: array
                  tender_status:
                    type: string
                  type:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  value:
                    type: number
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Tender not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Tender By Id (Workspace Level)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_updateTenderByIdWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: tenderId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            bid_status:
              enum:
              - will_bid
              - undecided
              type: string
            client_contact:
              description: Denormalized client contact for display
              type: string
            client_id:
              description: Reference to workspace client (Firestore document ID, 32-char
                hex string)
              type: string
            client_name:
              description: Denormalized client name for display
              type: string
            description:
              type: string
            due_date:
              format: date-time
              type: string
            estimator:
              description: Optional estimator name or identifier
              type: string
            location:
              type: string
            name:
              type: string
            notes:
              type: string
            probability:
              type: number
            project_id:
              type: integer
            stage:
              enum:
              - open
              - invited
              - shortlisted
              type: string
            tags:
              type: array
            teams:
              type: array
            tender_status:
              enum:
              - in_progress
              - submitted
              - cancelled
              type: string
            type:
              enum:
              - commercial
              - residential
              - infrastructure
              - education
              - healthcare
              - industrial
              - retail
              - other
              type: string
            value:
              type: number
          type: object
      responses:
        200:
          description: Tender updated successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Tender not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Tender By Id (Workspace Level)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/time-extensions:
    get:
      operationId: v2_getTimeExtensions
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Page number for pagination
        in: query
        name: page
        type: integer
      - description: Number of items per page
        in: query
        name: limit
        type: integer
      - description: Filter by project ID
        in: query
        name: project_id
        type: integer
      - description: Filter by status (submitted, rejected, granted, partially_granted)
        in: query
        name: status
        type: string
      - description: Filter by work package
        in: query
        name: work_package
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    critical_path:
                      description: Whether this affects critical path
                      type: boolean
                    days_assessed:
                      description: Number of days assessed
                      type: number
                    days_claimed:
                      description: Number of days claimed
                      type: number
                    delay_notice_num:
                      description: Related delay notice number
                      type: string
                    event_date:
                      description: Event date
                      format: date
                      type: string
                    id:
                      description: Time extension ID
                      type: string
                    project_id:
                      description: Project ID
                      type: integer
                    status:
                      description: Status (submitted, rejected, granted, partially_granted)
                      type: string
                    summary:
                      description: Summary of time extension
                      type: string
                    time_extension_client_id:
                      description: Client-facing time extension ID
                      type: string
                    time_extension_name:
                      description: Time extension name
                      type: string
                    time_extension_num:
                      description: Time extension number
                      type: string
                    work_package:
                      description: Work package
                      type: string
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Access denied
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Time Extensions
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_createTimeExtension
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assessment_due_date:
              description: Assessment due date
              format: date
              type: string
            cause:
              description: Cause of time extension
              type: string
            claim_date:
              description: Claim date
              format: date
              type: string
            contract_reference:
              description: Contract reference
              type: string
            correspondence_reference:
              description: Correspondence reference
              type: string
            critical_path:
              description: Whether this affects critical path
              type: boolean
            days_assessed:
              description: Number of days assessed
              type: number
            days_claimed:
              description: Number of days claimed
              type: number
            delay_notice_num:
              description: Related delay notice number
              type: string
            details:
              description: Detailed description
              type: string
            determination_due_by:
              description: Determination due by date
              format: date
              type: string
            event_date:
              description: Event date
              format: date
              type: string
            notice_date:
              description: Notice date
              format: date
              type: string
            original_pc_date:
              description: Original PC date
              format: date
              type: string
            programme_activity:
              description: Programme activity
              type: string
            project_id:
              description: Project ID
              type: integer
            proposed_revised_pc_date:
              description: Proposed revised PC date
              format: date
              type: string
            responsible_party:
              description: Responsible party
              type: string
            sop_reference:
              description: SOP reference
              type: string
            status:
              description: Status of time extension
              enum:
              - submitted
              - rejected
              - granted
              - partially_granted
              type: string
            summary:
              description: Summary of time extension
              type: string
            time_extension_client_id:
              description: Client-facing time extension ID (auto-generated if not
                provided)
              type: string
            time_extension_name:
              description: Time extension name
              type: string
            work_package:
              description: Work package
              type: string
          required:
          - project_id
          - work_package
          - event_date
          - days_claimed
          - summary
          type: object
      responses:
        201:
          description: Time extension created successfully
          schema:
            properties:
              data:
                properties:
                  days_claimed:
                    description: Days claimed
                    type: number
                  id:
                    description: Time extension ID
                    type: string
                  project_id:
                    description: Project ID
                    type: integer
                  status:
                    description: Status
                    type: string
                  summary:
                    description: Summary
                    type: string
                  time_extension_client_id:
                    description: Auto-generated client ID
                    type: string
                  time_extension_name:
                    description: Time extension name
                    type: string
                  work_package:
                    description: Work package
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - missing required fields
        401:
          description: Unauthorized
        403:
          description: Access denied
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Time Extension
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/time-extensions/{timeExtensionId}:
    get:
      operationId: v2_getTimeExtensionById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: timeExtensionId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  days_assessed:
                    description: Days assessed
                    type: number
                  days_claimed:
                    description: Days claimed
                    type: number
                  delay_notice_num:
                    description: Related delay notice number
                    type: string
                  details:
                    description: Detailed description
                    type: string
                  event_date:
                    description: Event date
                    format: date
                    type: string
                  id:
                    description: Time extension ID
                    type: string
                  project_id:
                    description: Project ID
                    type: integer
                  status:
                    description: Status
                    type: string
                  summary:
                    description: Summary
                    type: string
                  time_extension_client_id:
                    description: Client-facing time extension ID
                    type: string
                  time_extension_name:
                    description: Time extension name
                    type: string
                  work_package:
                    description: Work package
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Access denied
        404:
          description: Time extension not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Time Extension By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_updateTimeExtensionById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: timeExtensionId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assessment_due_date:
              description: Assessment due date
              format: date
              type: string
            cause:
              description: Cause of time extension
              type: string
            claim_date:
              description: Claim date
              format: date
              type: string
            contract_reference:
              description: Contract reference
              type: string
            correspondence_reference:
              description: Correspondence reference
              type: string
            critical_path:
              description: Whether this affects critical path
              type: boolean
            days_assessed:
              description: Number of days assessed
              type: number
            days_claimed:
              description: Number of days claimed
              type: number
            delay_notice_num:
              description: Related delay notice number
              type: string
            details:
              description: Detailed description
              type: string
            determination_due_by:
              description: Determination due by date
              format: date
              type: string
            event_date:
              description: Event date
              format: date
              type: string
            notice_date:
              description: Notice date
              format: date
              type: string
            original_pc_date:
              description: Original PC date
              format: date
              type: string
            programme_activity:
              description: Programme activity
              type: string
            proposed_revised_pc_date:
              description: Proposed revised PC date
              format: date
              type: string
            responsible_party:
              description: Responsible party
              type: string
            sop_reference:
              description: SOP reference
              type: string
            status:
              description: Status of time extension
              enum:
              - submitted
              - rejected
              - granted
              - partially_granted
              type: string
            summary:
              description: Summary of time extension
              type: string
            time_extension_client_id:
              description: Client-facing time extension ID
              type: string
            time_extension_name:
              description: Time extension name
              type: string
            work_package:
              description: Work package
              type: string
          type: object
      responses:
        200:
          description: Time extension updated successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - no fields to update
        401:
          description: Unauthorized
        403:
          description: Access denied
        404:
          description: Time extension not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Time Extension By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/cost/xero-sync/{syncId}:
    post:
      operationId: v2_postXeroSync
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - enum:
        - contacts
        - head_contract_claims
        - invoices_to_client
        - payments
        - purchase_orders
        - subcontractor_payment_schedules
        in: path
        name: syncId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        400:
          description: Bad request - Invalid sync type or Xero not configured
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Trigger Xero sync for a specific sync type
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/crews:
    delete:
      description: Soft delete crew by crew_id
      operationId: v2_deleteCrew
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Crew ID to delete
        in: query
        name: crew_id
        required: true
        type: string
      responses:
        200:
          description: Crew deleted successfully
          schema:
            properties:
              crew_id:
                type: string
              message:
                type: string
            type: object
        400:
          description: crew_id not provided or already deleted
        404:
          description: Crew not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete crew
      tags:
      - Crews
    get:
      description: Retrieve crews with filtering options. Can retrieve specific crew
        by crew_id or list multiple crews with filters. Workspace-scoped endpoint.
      operationId: v2_getCrews
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Specific crew ID to retrieve
        in: query
        name: crew_id
        type: string
      - description: Filter by crew name
        in: query
        name: name
        type: string
      - description: Filter by trade type
        in: query
        name: trade
        type: string
      - description: Filter by cost code
        in: query
        name: cost_code
        type: string
      - description: Filter by tags
        in: query
        name: tags
        type: string
      - description: Search query for text-based filtering
        in: query
        name: q
        type: string
      - description: Page number for pagination (default 1)
        in: query
        name: page
        type: string
      - description: Number of items per page (default 20, max 100)
        in: query
        name: limit
        type: string
      responses:
        200:
          description: Successfully retrieved crews
          schema:
            properties:
              data:
                items:
                  properties:
                    assigned_projects:
                      description: Array of project IDs
                      items:
                        type: number
                      type: array
                    cost_code:
                      description: Cost code
                      type: string
                    created_at:
                      description: Creation timestamp
                      format: date-time
                      type: string
                    created_by_company_id:
                      description: Company ID of user who created this crew
                      type: string
                    created_by_user_email:
                      description: Email of user who created this crew
                      type: string
                    created_by_user_id:
                      description: ID of user who created this crew
                      type: string
                    description:
                      description: Crew description
                      type: string
                    id:
                      description: Unique crew identifier
                      type: string
                    is_deleted:
                      description: Soft delete flag
                      type: boolean
                    members:
                      description: Array of user IDs
                      items:
                        type: string
                      type: array
                    name:
                      description: Crew name
                      type: string
                    tags:
                      description: Array of tags
                      items:
                        type: string
                      type: array
                    trade:
                      description: Trade type
                      type: string
                    updated_at:
                      description: Last update timestamp
                      format: date-time
                      type: string
                    workspace_id:
                      description: Workspace ID
                      type: string
                  type: object
                type: array
              filters:
                type: object
              message:
                type: string
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  total_count:
                    type: integer
                  total_pages:
                    type: integer
                type: object
            type: object
        404:
          description: Crew not found (when crew_id specified)
      security:
      - JWT_v2: []
      summary: Get crews
      tags:
      - Crews
    patch:
      description: Update existing crew by crew_id
      operationId: v2_updateCrew
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assigned_projects:
              description: Array of project IDs
              items:
                type: number
              type: array
            cost_code:
              description: Cost code
              type: string
            crew_id:
              description: ID of the crew to update
              type: string
            description:
              description: Crew description
              type: string
            members:
              description: Array of user IDs
              items:
                type: string
              type: array
            name:
              description: Crew name
              type: string
            tags:
              description: Array of tags
              items:
                type: string
              type: array
            trade:
              description: Trade type
              type: string
          required:
          - crew_id
          type: object
      responses:
        200:
          description: Crew updated successfully
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        400:
          description: Validation failed or crew_id not provided
        404:
          description: Crew not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update crew
      tags:
      - Crews
    post:
      description: Create new crew. Workspace-scoped endpoint.
      operationId: v2_createCrew
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assigned_projects:
              description: Array of project IDs
              items:
                type: number
              type: array
            cost_code:
              description: Cost code
              type: string
            description:
              description: Optional crew description
              type: string
            members:
              description: Array of user IDs
              items:
                type: string
              type: array
            name:
              description: Crew name
              type: string
            tags:
              description: Array of tags
              items:
                type: string
              type: array
            trade:
              description: Trade type
              type: string
          required:
          - name
          - trade
          - cost_code
          type: object
      responses:
        201:
          description: Crew created successfully
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        400:
          description: Validation failed or missing required fields
          schema:
            properties:
              errors:
                items:
                  type: string
                type: array
              message:
                type: string
              required_fields:
                items:
                  type: string
                type: array
            type: object
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create crew
      tags:
      - Crews
  /v2/workspaces/{workspaceId}/data-point-link:
    delete:
      description: Soft delete a data point link by ID
      operationId: v2_deleteDataPointLink
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: linkId
        type: string
      responses:
        200:
          description: Data point link successfully deleted
      security:
      - JWT_v2: []
      summary: Delete a data point link
      tags:
      - DataPointLink
    get:
      description: Retrieve data point links with filtering options
      operationId: v2_getDataPointLink
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: sourceType
        type: string
      - in: query
        name: sourceId
        type: string
      - in: query
        name: targetType
        type: string
      - in: query
        name: targetId
        type: string
      - in: query
        name: category
        type: string
      - in: query
        name: isDeleted
        type: string
      - in: query
        name: page
        type: string
      - in: query
        name: limit
        type: string
      - collectionFormat: multi
        description: Filter by user IDs in objects array (requires category=form_user)
        in: query
        items:
          type: string
        name: memberIds[]
        type: array
      - collectionFormat: multi
        description: Filter by form IDs in objects array (requires category=form_user)
        in: query
        items:
          type: string
        name: formIds[]
        type: array
      responses:
        200:
          description: Successfully retrieved data point links
      security:
      - JWT_v2: []
      summary: Get data point links
      tags:
      - DataPointLink
    post:
      description: Create a new data point link between objects
      operationId: v2_createDataPointLink
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        schema:
          properties:
            category:
              description: 'Optional custom category for the link. If omitted, the
                backend auto-generates a category from object types (e.g., ''form_user'').
                When a custom category is provided that differs from the auto-generated
                one, the link_id will include the category to allow multiple links
                between the same objects with different categories (e.g., form_assignee
                vs form_follower).

                '
              type: string
            created_at:
              description: Optional timestamp for when the link was created.
              format: date-time
              type: string
            is_deleted:
              default: false
              description: Soft delete flag.
              type: boolean
            objects:
              description: Array of objects to link. Each object must have type, id,
                and project_id.
              items:
                properties:
                  id:
                    type: string
                  project_id:
                    type: string
                  type:
                    type: string
                required:
                - type
                - id
                - project_id
                type: object
              type: array
          required:
          - objects
          type: object
      responses:
        200:
          description: Data point link created successfully
      security:
      - JWT_v2: []
      summary: Create a data point link
      tags:
      - DataPointLink
  /v2/workspaces/{workspaceId}/ds-site/ds_activity:
    get:
      operationId: v2_searchDsActivities
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: RestQuery JSON string
        in: query
        name: query
        required: true
        type: string
      - default: 'false'
        in: query
        name: template
        required: false
        type: string
      - default: 'false'
        in: query
        name: includeFields
        required: false
        type: string
      - default: 'false'
        in: query
        name: includeTasks
        required: false
        type: string
      - default: '1'
        in: query
        name: page
        required: false
        type: string
      - default: '10'
        in: query
        name: pageSize
        required: false
        type: string
      responses:
        200:
          description: Successful response
        400:
          description: Missing/invalid query
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Search activities in a workspace (DS Site v14)
      tags:
      - DS Site Admin Integrations
    post:
      operationId: v2_createDsActivity
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          description: RestActivity payload (e.g. name, template, startDate, endDate,
            frequency, assignee, tasks, fields, sharedWith, timeZone)
          type: object
      responses:
        201:
          description: Activity created
        400:
          description: Invalid body
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create an activity in a workspace (DS Site v14)
      tags:
      - DS Site Admin Integrations
  /v2/workspaces/{workspaceId}/ds-site/form-workflow-emails/{formWorkflowEmailId}:
    get:
      operationId: v2_getConfiguredFormWorkflowEmailById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: formWorkflowEmailId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get configured form workflow email by ID
      tags:
      - DS Site Admin Integrations
    post:
      operationId: v2_sendFormWorkflowEmailById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: formWorkflowEmailId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            email:
              type: string
            global_company_id:
              type: string
          type: object
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Send form workflow email by ID
      tags:
      - DS Site Admin Integrations
  /v2/workspaces/{workspaceId}/ds-site/form-workflow-emails/{formWorkflowEmailId}/configure:
    delete:
      operationId: v2_deleteConfigurationFormWorkflowEmailById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: formWorkflowEmailId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete form workflow email by ID
      tags:
      - DS Site Admin Integrations
    post:
      operationId: v2_configureFormWorkflowEmailById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: formWorkflowEmailId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Configure form workflow email by ID
      tags:
      - DS Site Admin Integrations
  /v2/workspaces/{workspaceId}/ds-site/form-workflow-emails/{formWorkflowEmailId}/submissions:
    get:
      operationId: v2_getConfiguredFormWorkflowEmailSubmissionsById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: formWorkflowEmailId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get configured form workflow email submissions by ID
      tags:
      - DS Site Admin Integrations
  /v2/workspaces/{workspaceId}/ds-site/form-workflow-metadata:
    delete:
      operationId: v2_deleteFormWorkflowMetadata
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            field_alias:
              description: Optional - Specific field alias to delete mapping for
              type: string
            form_alias:
              description: Form alias to delete metadata mappings for
              type: string
            form_workflow_id:
              description: Form workflow ID to delete metadata mappings for
              type: string
            metadata_key:
              description: Optional - Specific metadata key to delete mapping for
              type: string
          required:
          - form_alias
          - form_workflow_id
          type: object
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  field_alias:
                    type: string
                  form_alias:
                    type: string
                  form_workflow_id:
                    type: string
                  metadata_key:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - Missing parameters or workspace not mapped to
            global company
        401:
          description: Unauthorized
        404:
          description: Form workflow not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete form workflow metadata mapping
      tags:
      - DS Site Admin Integrations
    get:
      operationId: v2_getFormWorkflowMetadata
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Form workflow ID to get metadata mappings for
        in: query
        name: formWorkflowId
        required: true
        type: string
      - description: Form alias to get metadata mappings for
        in: query
        name: formAlias
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  form_alias:
                    type: string
                  form_workflow_id:
                    type: string
                  mapping:
                    items:
                      properties:
                        editable_by:
                          enum:
                          - parent
                          - child
                          - both
                          type: string
                        field_alias:
                          type: string
                        max_allowed_values:
                          type: integer
                        metadata_enum_json:
                          type: object
                        metadata_key:
                          type: string
                        metadata_name:
                          type: string
                        metadata_type:
                          enum:
                          - STRING
                          - NUMBER
                          - ENUM
                          type: string
                        min_allowed_values:
                          type: integer
                      type: object
                    type: array
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - Missing parameters or workspace not mapped to
            global company
        401:
          description: Unauthorized
        404:
          description: Form workflow not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get form workflow metadata mappings
      tags:
      - DS Site Admin Integrations
    put:
      operationId: v2_createOrUpdateFormWorkflowMetadata
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            form_alias:
              description: Form alias to map metadata for
              type: string
            form_workflow_id:
              description: Form workflow ID to map metadata for
              type: string
            mapping:
              description: Array of field to metadata mappings
              items:
                properties:
                  field_alias:
                    description: Form field alias to map
                    type: string
                  field_name:
                    description: Field name to map the field to
                    type: string
                  metadata_key:
                    description: Metadata key to map the field to
                    type: string
                  section_name:
                    description: Section name to map the field to
                    type: string
                required:
                - field_alias
                - metadata_key
                - section_name
                - field_name
                - field_type
                type: object
              type: array
          required:
          - form_alias
          - form_workflow_id
          - mapping
          type: object
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  form_alias:
                    type: string
                  form_workflow_id:
                    type: string
                  mapping:
                    items:
                      properties:
                        field_alias:
                          type: string
                        metadata_key:
                          type: string
                      type: object
                    type: array
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - Missing parameters, invalid metadata keys, or
            workspace not mapped to global company
        401:
          description: Unauthorized
        404:
          description: Form workflow or form workflow mapping not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create or update form workflow metadata mapping
      tags:
      - DS Site Admin Integrations
  /v2/workspaces/{workspaceId}/ds-site/form-workflows/{formWorkflowId}:
    get:
      operationId: v2_getConfiguredFormWorkflowById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: formWorkflowId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get configured form workflow by ID
      tags:
      - DS Site Admin Integrations
  /v2/workspaces/{workspaceId}/ds-site/form-workflows/{formWorkflowId}/configure:
    delete:
      operationId: v2_deleteConfigurationFormWorkflowById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: formWorkflowId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete form workflow configuration by ID
      tags:
      - DS Site Admin Integrations
    post:
      operationId: v2_configureFormWorkflowById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: formWorkflowId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Configure form workflow by ID
      tags:
      - DS Site Admin Integrations
  /v2/workspaces/{workspaceId}/ds-site/form-workflows/{formWorkflowId}/submissions:
    get:
      operationId: v2_getConfiguredFormWorkflowSubmissionsById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: formWorkflowId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get configured form workflow submissions by ID
      tags:
      - DS Site Admin Integrations
  /v2/workspaces/{workspaceId}/ds-site/forms:
    get:
      operationId: v2_searchWorkspaceForms
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: searchQuery
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Search forms in a workspace
      tags:
      - DS Site Admin Integrations
  /v2/workspaces/{workspaceId}/ds-site/forms-sync:
    post:
      operationId: v2_syncFormSubmissions
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            query:
              description: JSON-query object, as per DS Site API schema, excluding
                orderBy and resultItems
              type: object
          required:
          - query
          type: object
      responses:
        202:
          description: Sync job started
          schema:
            properties:
              data:
                properties:
                  job_uuid:
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Sync form submissions
      tags:
      - DS Site Admin Integrations
  /v2/workspaces/{workspaceId}/ds-site/forms/{formId}:
    get:
      operationId: v2_getFormById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: formId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get a form in workspace by ID
      tags:
      - DS Site Admin Integrations
  /v2/workspaces/{workspaceId}/files:
    get:
      operationId: v2_v2_getFilesWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by file category
        in: query
        name: category
        required: false
        type: string
      - description: Filter by file type
        in: query
        name: file_type
        required: false
        type: string
      - description: Filter by related document ID
        in: query
        name: related_document_id
        required: false
        type: string
      - description: Include all versions for each file in response
        in: query
        name: include_versions
        required: false
        type: boolean
      - description: Page number for pagination
        in: query
        name: page
        required: false
        type: integer
      - description: Number of items per page
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successfully returns files
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get workspace-level files
      tags:
      - Get Data
    post:
      operationId: v2_v2_postFilesWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Action type (signed-urls, process)
        in: query
        name: action
        required: false
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            files:
              description: Array of file objects
              items:
                properties:
                  category:
                    type: string
                  file_size_bytes:
                    type: integer
                  filename:
                    type: string
                  filetype:
                    type: string
                  related_document_id:
                    type: string
                type: object
              type: array
          type: object
      responses:
        200:
          description: Successfully returns signed URLs or processes files
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get signed URLs for workspace-level file upload
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/files/{fileId}:
    delete:
      operationId: v2_v2_deleteFileWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: fileId
        required: true
        type: string
      responses:
        200:
          description: Successfully deleted file
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete workspace-level file
      tags:
      - Upload Data
    get:
      operationId: v2_v2_getFileWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: fileId
        required: true
        type: string
      responses:
        200:
          description: Successfully returns file details
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get workspace-level file details
      tags:
      - Get Data
    patch:
      operationId: v2_v2_patchFileWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: fileId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            category:
              type: string
            description:
              type: string
            display_name:
              type: string
            related_document_id:
              type: string
          type: object
      responses:
        200:
          description: Successfully updated file
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update workspace-level file metadata
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/files/{fileId}/new-version:
    post:
      operationId: v2_v2_postFileNewVersionWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: fileId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            change_description:
              description: Description of changes made
              type: string
            file_size_bytes:
              description: Size of the file in bytes
              type: integer
            file_url:
              description: URL of the uploaded file
              type: string
            new_filename:
              description: Filename for the new version
              type: string
          type: object
      responses:
        200:
          description: Successfully uploaded new version
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Upload new version of workspace-level file
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/files/{fileId}/versions:
    get:
      operationId: v2_v2_getFileVersionsWorkspaceLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: fileId
        required: true
        type: string
      - description: Page number for pagination
        in: query
        name: page
        required: false
        type: integer
      - description: Number of items per page
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successfully returns file versions
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get workspace-level file version history
      tags:
      - Get Data
  /v2/workspaces/{workspaceId}/hz-commercial-budgets:
    get:
      description: Retrieve budget register entries with optional filters and pagination
      operationId: v2_listCommercialBudgets
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by budget status
        in: query
        name: status
        required: false
        type: string
      - description: Filter by budget category
        in: query
        name: category
        required: false
        type: string
      - description: Filter by project identifier
        in: query
        name: project_id
        required: false
        type: string
      - description: Free text search across budget descriptions
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of budget entries
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List commercial budgets
      tags:
      - Commercial
    post:
      description: Create a new budget entry in the budget register
      operationId: v2_createCommercialBudget
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            category:
              type: string
            costCode:
              type: string
            currentBudget:
              format: float
              type: number
            description:
              type: string
            originalBudget:
              format: float
              type: number
            project_id:
              type: string
          required:
          - category
          - costCode
          - description
          - originalBudget
          type: object
      responses:
        201:
          description: Budget created successfully
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create commercial budget
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-budgets/{budgetId}:
    delete:
      description: Delete a budget entry
      operationId: v2_deleteCommercialBudget
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Budget unique identifier
        in: path
        name: budgetId
        required: true
        type: string
      responses:
        200:
          description: Budget deleted successfully
        403:
          description: Workspace access forbidden
        404:
          description: Budget not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete commercial budget
      tags:
      - Commercial
    get:
      description: Retrieve a specific budget entry by its unique identifier
      operationId: v2_getCommercialBudgetById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Budget unique identifier
        in: path
        name: budgetId
        required: true
        type: string
      responses:
        200:
          description: Budget details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Budget not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get commercial budget by ID
      tags:
      - Commercial
    put:
      description: Update an existing budget entry
      operationId: v2_updateCommercialBudget
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Budget unique identifier
        in: path
        name: budgetId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated budget
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Budget not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update commercial budget
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-dashboard:
    get:
      description: Retrieve commercial dashboard data with budget overview, variations,
        and progress claims summary
      operationId: v2_getCommercialDashboard
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier for project-specific dashboard
        in: query
        name: projectId
        required: false
        type: string
      responses:
        200:
          description: Commercial dashboard data
          schema:
            properties:
              budget:
                type: object
              progressClaims:
                type: array
              project:
                type: object
              variations:
                type: array
            type: object
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get commercial dashboard
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-head-contract-invoices:
    get:
      description: Retrieve head contract invoices with optional filters and pagination
      operationId: v2_listCommercialHeadContractInvoices
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by invoice status
        in: query
        name: status
        required: false
        type: string
      - description: Filter by contractor
        in: query
        name: contractor
        required: false
        type: string
      - description: Filter by project identifier
        in: query
        name: project_id
        required: false
        type: string
      - description: Free text search across invoice details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of head contract invoices
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List commercial head contract invoices
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-head-contract-invoices/{invoiceId}:
    get:
      description: Retrieve a specific head contract invoice by its unique identifier
      operationId: v2_getCommercialHeadContractInvoiceById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Head contract invoice unique identifier
        in: path
        name: invoiceId
        required: true
        type: string
      responses:
        200:
          description: Head contract invoice details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Head contract invoice not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get commercial head contract invoice by ID
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-head-contracts:
    get:
      description: Retrieve head contracts with optional filters and pagination
      operationId: v2_listCommercialHeadContracts
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by contract status
        in: query
        name: status
        required: false
        type: string
      - description: Filter by risk level
        in: query
        name: riskLevel
        required: false
        type: string
      - description: Filter by project identifier
        in: query
        name: project_id
        required: false
        type: string
      - description: Free text search across contract details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of head contracts
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List commercial head contracts
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-head-contracts/{contractId}:
    get:
      description: Retrieve a specific head contract by its unique identifier
      operationId: v2_getCommercialHeadContractById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Head contract unique identifier
        in: path
        name: contractId
        required: true
        type: string
      responses:
        200:
          description: Head contract details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Head contract not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get commercial head contract by ID
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-payment-schedule:
    get:
      description: Retrieve payment schedule entries with optional filters and pagination
      operationId: v2_listCommercialPaymentSchedule
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by payment status
        in: query
        name: status
        required: false
        type: string
      - description: Filter by payment type
        in: query
        name: paymentType
        required: false
        type: string
      - description: Filter by contractor
        in: query
        name: contractor
        required: false
        type: string
      - description: Filter by project identifier
        in: query
        name: project_id
        required: false
        type: string
      - description: Free text search across payment details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of payment schedule entries
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List commercial payment schedule
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-payment-schedule/{paymentId}:
    get:
      description: Retrieve a specific payment schedule entry by its unique identifier
      operationId: v2_getCommercialPaymentScheduleById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Payment schedule entry unique identifier
        in: path
        name: paymentId
        required: true
        type: string
      responses:
        200:
          description: Payment schedule entry details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Payment schedule entry not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get commercial payment schedule entry by ID
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-progress-claims:
    get:
      description: Retrieve progress claims with optional filters and pagination
      operationId: v2_listCommercialProgressClaims
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by claim status
        in: query
        name: status
        required: false
        type: string
      - description: Filter by contractor
        in: query
        name: contractor
        required: false
        type: string
      - description: Filter by claim type
        in: query
        name: claimType
        required: false
        type: string
      - description: Filter by project identifier
        in: query
        name: project_id
        required: false
        type: string
      - description: Free text search across claim details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of progress claims
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List commercial progress claims
      tags:
      - Commercial
    post:
      description: Create a new progress claim
      operationId: v2_createCommercialProgressClaim
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            claimNumber:
              type: string
            claimedAmount:
              format: float
              type: number
            contractor:
              type: string
            period:
              type: string
            project_id:
              type: string
            status:
              type: string
          required:
          - claimNumber
          - contractor
          - period
          - claimedAmount
          type: object
      responses:
        201:
          description: Progress claim created successfully
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create commercial progress claim
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-progress-claims/{claimId}:
    delete:
      description: Delete a progress claim
      operationId: v2_deleteCommercialProgressClaim
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Progress claim unique identifier
        in: path
        name: claimId
        required: true
        type: string
      responses:
        200:
          description: Progress claim deleted successfully
        403:
          description: Workspace access forbidden
        404:
          description: Progress claim not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete commercial progress claim
      tags:
      - Commercial
    get:
      description: Retrieve a specific progress claim by its unique identifier
      operationId: v2_getCommercialProgressClaimById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Progress claim unique identifier
        in: path
        name: claimId
        required: true
        type: string
      responses:
        200:
          description: Progress claim details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Progress claim not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get commercial progress claim by ID
      tags:
      - Commercial
    put:
      description: Update an existing progress claim
      operationId: v2_updateCommercialProgressClaim
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Progress claim unique identifier
        in: path
        name: claimId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated progress claim
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Progress claim not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update commercial progress claim
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-retentions:
    get:
      description: Retrieve retention entries with optional filters and pagination
      operationId: v2_listCommercialRetentions
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by retention status
        in: query
        name: status
        required: false
        type: string
      - description: Filter by contractor
        in: query
        name: contractor
        required: false
        type: string
      - description: Filter by project identifier
        in: query
        name: project_id
        required: false
        type: string
      - description: Free text search across retention details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of retentions
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List commercial retentions
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-retentions/{retentionId}:
    get:
      description: Retrieve a specific retention by its unique identifier
      operationId: v2_getCommercialRetentionById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Retention unique identifier
        in: path
        name: retentionId
        required: true
        type: string
      responses:
        200:
          description: Retention details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Retention not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get commercial retention by ID
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-subcontracts:
    get:
      description: Retrieve subcontract entries with optional filters and pagination
      operationId: v2_listCommercialSubcontracts
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by subcontract status
        in: query
        name: status
        required: false
        type: string
      - description: Filter by risk level
        in: query
        name: riskLevel
        required: false
        type: string
      - description: Filter by work package
        in: query
        name: workPackage
        required: false
        type: string
      - description: Filter by project identifier
        in: query
        name: project_id
        required: false
        type: string
      - description: Free text search across subcontract details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of subcontracts
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List commercial subcontracts
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-subcontracts/{subcontractId}:
    get:
      description: Retrieve a specific subcontract by its unique identifier
      operationId: v2_getCommercialSubcontractById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Subcontract unique identifier
        in: path
        name: subcontractId
        required: true
        type: string
      responses:
        200:
          description: Subcontract details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Subcontract not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get commercial subcontract by ID
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-variations:
    get:
      description: Retrieve contract variations with optional filters and pagination
      operationId: v2_listCommercialVariations
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by variation status
        in: query
        name: status
        required: false
        type: string
      - description: Filter by variation category
        in: query
        name: category
        required: false
        type: string
      - description: Filter by priority level
        in: query
        name: priority
        required: false
        type: string
      - description: Filter by project identifier
        in: query
        name: project_id
        required: false
        type: string
      - description: Free text search across variation titles
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of variations
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List commercial variations
      tags:
      - Commercial
    post:
      description: Create a new contract variation
      operationId: v2_createCommercialVariation
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            contractor:
              type: string
            originalValue:
              format: float
              type: number
            priority:
              type: string
            project_id:
              type: string
            status:
              type: string
            title:
              type: string
            variationNumber:
              type: string
          required:
          - variationNumber
          - title
          - contractor
          - originalValue
          type: object
      responses:
        201:
          description: Variation created successfully
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create commercial variation
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-commercial-variations/{variationId}:
    delete:
      description: Delete a variation
      operationId: v2_deleteCommercialVariation
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Variation unique identifier
        in: path
        name: variationId
        required: true
        type: string
      responses:
        200:
          description: Variation deleted successfully
        403:
          description: Workspace access forbidden
        404:
          description: Variation not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete commercial variation
      tags:
      - Commercial
    get:
      description: Retrieve a specific variation by its unique identifier
      operationId: v2_getCommercialVariationById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Variation unique identifier
        in: path
        name: variationId
        required: true
        type: string
      responses:
        200:
          description: Variation details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Variation not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get commercial variation by ID
      tags:
      - Commercial
    put:
      description: Update an existing variation
      operationId: v2_updateCommercialVariation
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Variation unique identifier
        in: path
        name: variationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated variation
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Variation not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update commercial variation
      tags:
      - Commercial
  /v2/workspaces/{workspaceId}/hz-delivery-action-items:
    get:
      description: Retrieve action items with optional filters and pagination
      operationId: v2_listActionItems
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by action item status
        enum:
        - open
        - in-progress
        - completed
        - overdue
        in: query
        name: status
        required: false
        type: string
      - description: Filter by priority level
        enum:
        - high
        - medium
        - low
        in: query
        name: priority
        required: false
        type: string
      - description: Filter by category
        enum:
        - safety
        - quality
        - schedule
        - general
        in: query
        name: category
        required: false
        type: string
      - description: Filter by assignee name
        in: query
        name: assignedTo
        required: false
        type: string
      - description: Filter by project name
        in: query
        name: project
        required: false
        type: string
      - description: Filter by due date from (inclusive)
        format: date
        in: query
        name: dueDateFrom
        required: false
        type: string
      - description: Filter by due date to (inclusive)
        format: date
        in: query
        name: dueDateTo
        required: false
        type: string
      - description: Free text search across action item content
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of action items
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List action items
      tags:
      - Delivery
    post:
      description: Create a new action item
      operationId: v2_createActionItem
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assignedTo:
              description: Assignee name
              type: string
            category:
              description: Action item category
              enum:
              - safety
              - quality
              - schedule
              - general
              type: string
            description:
              description: Action item description
              type: string
            dueDate:
              description: Due date
              format: date
              type: string
            notes:
              description: Additional notes
              type: string
            priority:
              default: medium
              description: Priority level
              enum:
              - high
              - medium
              - low
              type: string
            project:
              description: Associated project
              type: string
            status:
              default: open
              enum:
              - open
              - in-progress
              - completed
              - overdue
              type: string
            title:
              description: Action item title
              type: string
          required:
          - title
          - description
          - project
          - assignedTo
          - dueDate
          - category
          type: object
      responses:
        201:
          description: Action item created successfully
          schema:
            properties:
              id:
                type: string
              message:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create action item
      tags:
      - Delivery
  /v2/workspaces/{workspaceId}/hz-delivery-action-items/{actionId}:
    get:
      description: Retrieve a specific action item by its unique identifier
      operationId: v2_getActionItemById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Action item unique identifier
        in: path
        name: actionId
        required: true
        type: string
      responses:
        200:
          description: Action item details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Action item not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get action item by ID
      tags:
      - Delivery
    put:
      description: Update an existing action item
      operationId: v2_updateActionItem
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Action item unique identifier
        in: path
        name: actionId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated action item
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Action item not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update action item
      tags:
      - Delivery
  /v2/workspaces/{workspaceId}/hz-delivery-completion-packs:
    get:
      description: Retrieve completion packs with optional filters and pagination
      operationId: v2_listCompletionPacks
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by completion pack status
        enum:
        - draft
        - in-progress
        - under-review
        - approved
        - submitted
        in: query
        name: status
        required: false
        type: string
      - description: Filter by project name
        in: query
        name: project
        required: false
        type: string
      - description: Filter by pack type
        enum:
        - project-closeout
        - handover
        - commissioning
        - warranty
        in: query
        name: type
        required: false
        type: string
      - description: Filter by due date from (inclusive)
        format: date
        in: query
        name: dueDateFrom
        required: false
        type: string
      - description: Filter by due date to (inclusive)
        format: date
        in: query
        name: dueDateTo
        required: false
        type: string
      - description: Free text search across completion pack content
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of completion packs
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List completion packs
      tags:
      - Delivery
    post:
      description: Create a new completion pack
      operationId: v2_createCompletionPack
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            description:
              description: Pack description
              type: string
            documents:
              description: Document URLs or references
              items:
                type: string
              type: array
            dueDate:
              description: Due date
              format: date
              type: string
            name:
              description: Completion pack name
              type: string
            project:
              description: Associated project
              type: string
            status:
              default: draft
              enum:
              - draft
              - in-progress
              - under-review
              - approved
              - submitted
              type: string
            type:
              description: Pack type
              enum:
              - project-closeout
              - handover
              - commissioning
              - warranty
              type: string
          required:
          - name
          - project
          - type
          - dueDate
          type: object
      responses:
        201:
          description: Completion pack created successfully
          schema:
            properties:
              id:
                type: string
              message:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create completion pack
      tags:
      - Delivery
  /v2/workspaces/{workspaceId}/hz-delivery-completion-packs/{packId}:
    get:
      description: Retrieve a specific completion pack by its unique identifier
      operationId: v2_getCompletionPackById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Completion pack unique identifier
        in: path
        name: packId
        required: true
        type: string
      responses:
        200:
          description: Completion pack details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Completion pack not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get completion pack by ID
      tags:
      - Delivery
    put:
      description: Update an existing completion pack
      operationId: v2_updateCompletionPack
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Completion pack unique identifier
        in: path
        name: packId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated completion pack
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Completion pack not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update completion pack
      tags:
      - Delivery
  /v2/workspaces/{workspaceId}/hz-delivery-dashboard:
    get:
      description: Retrieve delivery dashboard data with KPIs, site diary entries,
        RFIs, and action items
      operationId: v2_getDeliveryDashboard
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - default: month
        description: Time filter for dashboard data
        enum:
        - week
        - month
        - quarter
        - year
        in: query
        name: timeFilter
        required: false
        type: string
      - default: overview
        description: Dashboard view mode
        enum:
        - overview
        - site-diary
        - rfis
        - actions
        in: query
        name: activeView
        required: false
        type: string
      responses:
        200:
          description: Delivery dashboard data
          schema:
            properties:
              actionItems:
                items:
                  properties:
                    assignedTo:
                      type: string
                    category:
                      enum:
                      - safety
                      - quality
                      - schedule
                      - general
                      type: string
                    description:
                      type: string
                    dueDate:
                      format: date
                      type: string
                    id:
                      type: string
                    priority:
                      enum:
                      - high
                      - medium
                      - low
                      type: string
                    project:
                      type: string
                    status:
                      enum:
                      - open
                      - in-progress
                      - completed
                      - overdue
                      type: string
                    title:
                      type: string
                  type: object
                type: array
              kpis:
                properties:
                  actionItems:
                    type: integer
                  activeProjects:
                    type: integer
                  completionRate:
                    format: float
                    type: number
                  openRfis:
                    type: integer
                type: object
              recentActivity:
                items:
                  properties:
                    description:
                      type: string
                    id:
                      type: string
                    status:
                      type: string
                    timestamp:
                      format: date-time
                      type: string
                    title:
                      type: string
                    type:
                      type: string
                  type: object
                type: array
              rfis:
                items:
                  properties:
                    assignedTo:
                      type: string
                    category:
                      type: string
                    dueDate:
                      format: date
                      type: string
                    id:
                      type: string
                    priority:
                      enum:
                      - high
                      - medium
                      - low
                      type: string
                    project:
                      type: string
                    rfiNumber:
                      type: string
                    status:
                      enum:
                      - open
                      - pending
                      - answered
                      - closed
                      type: string
                    submittedBy:
                      type: string
                    title:
                      type: string
                  type: object
                type: array
              siteDiaryEntries:
                items:
                  properties:
                    activities:
                      type: string
                    author:
                      type: string
                    date:
                      format: date
                      type: string
                    id:
                      type: string
                    issues:
                      type: string
                    project:
                      type: string
                    status:
                      enum:
                      - draft
                      - submitted
                      - approved
                      type: string
                    temperature:
                      type: number
                    trades:
                      items:
                        type: string
                      type: array
                    weather:
                      enum:
                      - sunny
                      - cloudy
                      - rain
                      - overcast
                      - snow
                      type: string
                    workforce:
                      type: integer
                  type: object
                type: array
            type: object
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get delivery dashboard
      tags:
      - Delivery
  /v2/workspaces/{workspaceId}/hz-delivery-rfis:
    get:
      description: Retrieve RFIs with optional filters and pagination
      operationId: v2_listRFIs
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by RFI status
        enum:
        - open
        - pending
        - answered
        - closed
        in: query
        name: status
        required: false
        type: string
      - description: Filter by priority level
        enum:
        - high
        - medium
        - low
        in: query
        name: priority
        required: false
        type: string
      - description: Filter by RFI category
        in: query
        name: category
        required: false
        type: string
      - description: Filter by submitter name
        in: query
        name: submittedBy
        required: false
        type: string
      - description: Filter by assignee name
        in: query
        name: assignedTo
        required: false
        type: string
      - description: Filter by project name
        in: query
        name: project
        required: false
        type: string
      - description: Filter by due date from (inclusive)
        format: date
        in: query
        name: dueDateFrom
        required: false
        type: string
      - description: Filter by due date to (inclusive)
        format: date
        in: query
        name: dueDateTo
        required: false
        type: string
      - description: Free text search across RFI content
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of RFIs
          schema:
            properties:
              items:
                items:
                  properties:
                    assignedTo:
                      type: string
                    category:
                      type: string
                    createdAt:
                      format: date-time
                      type: string
                    description:
                      type: string
                    dueDate:
                      format: date
                      type: string
                    id:
                      type: string
                    priority:
                      type: string
                    project:
                      type: string
                    rfiNumber:
                      type: string
                    status:
                      type: string
                    submittedBy:
                      type: string
                    title:
                      type: string
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List RFIs (Requests for Information)
      tags:
      - Delivery
    post:
      description: Create a new Request for Information
      operationId: v2_createRFI
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assignedTo:
              description: Assignee name
              type: string
            attachments:
              description: Attachment URLs or references
              items:
                type: string
              type: array
            category:
              description: RFI category
              type: string
            description:
              description: Detailed RFI description
              type: string
            dueDate:
              description: Response due date
              format: date
              type: string
            priority:
              default: medium
              description: Priority level
              enum:
              - high
              - medium
              - low
              type: string
            project:
              description: Associated project
              type: string
            status:
              default: open
              enum:
              - open
              - pending
              - answered
              - closed
              type: string
            submittedBy:
              description: Submitter name
              type: string
            title:
              description: RFI title
              type: string
          required:
          - title
          - project
          - submittedBy
          - assignedTo
          - dueDate
          - description
          type: object
      responses:
        201:
          description: RFI created successfully
          schema:
            properties:
              id:
                type: string
              message:
                type: string
              rfiNumber:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create RFI
      tags:
      - Delivery
  /v2/workspaces/{workspaceId}/hz-delivery-rfis/{rfiId}:
    get:
      description: Retrieve a specific RFI by its unique identifier
      operationId: v2_getRFIById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: RFI unique identifier
        in: path
        name: rfiId
        required: true
        type: string
      responses:
        200:
          description: RFI details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: RFI not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get RFI by ID
      tags:
      - Delivery
    put:
      description: Update an existing RFI
      operationId: v2_updateRFI
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: RFI unique identifier
        in: path
        name: rfiId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated RFI
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: RFI not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update RFI
      tags:
      - Delivery
  /v2/workspaces/{workspaceId}/hz-delivery-site-diary:
    get:
      description: Retrieve site diary entries with optional filters and pagination
      operationId: v2_listSiteDiaryEntries
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by entry status
        enum:
        - draft
        - submitted
        - approved
        in: query
        name: status
        required: false
        type: string
      - description: Filter by project name
        in: query
        name: project
        required: false
        type: string
      - description: Filter by entry author
        in: query
        name: author
        required: false
        type: string
      - description: Filter by weather condition
        enum:
        - sunny
        - cloudy
        - rain
        - overcast
        - snow
        in: query
        name: weather
        required: false
        type: string
      - description: Filter by entry date from (inclusive)
        format: date
        in: query
        name: entryDateFrom
        required: false
        type: string
      - description: Filter by entry date to (inclusive)
        format: date
        in: query
        name: entryDateTo
        required: false
        type: string
      - description: Free text search across diary entry content
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of site diary entries
          schema:
            properties:
              items:
                items:
                  properties:
                    activities:
                      type: string
                    author:
                      type: string
                    createdAt:
                      format: date-time
                      type: string
                    date:
                      format: date
                      type: string
                    id:
                      type: string
                    issues:
                      type: string
                    project:
                      type: string
                    status:
                      type: string
                    temperature:
                      type: number
                    trades:
                      items:
                        type: string
                      type: array
                    updatedAt:
                      format: date-time
                      type: string
                    weather:
                      type: string
                    workforce:
                      type: integer
                  type: object
                type: array
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  pages:
                    type: integer
                  total:
                    type: integer
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List site diary entries
      tags:
      - Delivery
    post:
      description: Create a new site diary entry
      operationId: v2_createSiteDiaryEntry
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            activities:
              description: Activities performed
              type: string
            author:
              description: Entry author name
              type: string
            date:
              description: Diary entry date
              format: date
              type: string
            issues:
              description: Issues encountered (or 'None')
              type: string
            photos:
              description: Photo URLs or references
              items:
                type: string
              type: array
            project:
              description: Associated project
              type: string
            status:
              default: draft
              enum:
              - draft
              - submitted
              - approved
              type: string
            temperature:
              description: Temperature in Celsius
              type: number
            trades:
              description: Trades present on site
              items:
                type: string
              type: array
            weather:
              default: sunny
              description: Weather condition
              enum:
              - sunny
              - cloudy
              - rain
              - overcast
              - snow
              type: string
            workforce:
              description: Number of workers on site
              minimum: 0
              type: integer
          required:
          - date
          - project
          - author
          - activities
          - workforce
          type: object
      responses:
        201:
          description: Site diary entry created successfully
          schema:
            properties:
              id:
                type: string
              message:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create site diary entry
      tags:
      - Delivery
  /v2/workspaces/{workspaceId}/hz-delivery-site-diary/{entryId}:
    delete:
      description: Delete a site diary entry
      operationId: v2_deleteSiteDiaryEntry
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Site diary entry unique identifier
        in: path
        name: entryId
        required: true
        type: string
      responses:
        200:
          description: Site diary entry deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Site diary entry not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete site diary entry
      tags:
      - Delivery
    get:
      description: Retrieve a specific site diary entry by its unique identifier
      operationId: v2_getSiteDiaryEntryById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Site diary entry unique identifier
        in: path
        name: entryId
        required: true
        type: string
      responses:
        200:
          description: Site diary entry details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Site diary entry not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get site diary entry by ID
      tags:
      - Delivery
    put:
      description: Update an existing site diary entry
      operationId: v2_updateSiteDiaryEntry
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Site diary entry unique identifier
        in: path
        name: entryId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated site diary entry
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Site diary entry not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update site diary entry
      tags:
      - Delivery
  /v2/workspaces/{workspaceId}/hz-notification-templates/{channel}:
    get:
      operationId: v2_listHzChannelTemplates
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - enum:
        - email
        - in_app
        in: path
        name: channel
        required: true
        type: string
      - in: query
        name: page
        type: integer
      - in: query
        name: limit
        type: integer
      - description: Filter by template category (e.g., delivery, preconstruction)
        in: query
        name: category
        type: string
      - description: Filter by template type (e.g., site_instruction_notice)
        in: query
        name: type
        type: string
      responses:
        200:
          description: Templates retrieved successfully
      security:
      - JWT_v2: []
      summary: List channel templates
      tags:
      - HzNotifications
    post:
      operationId: v2_createHzChannelTemplate
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - enum:
        - email
        - in_app
        in: path
        name: channel
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            category:
              type: string
            created_by:
              type: string
            email_body:
              type: string
            is_active:
              type: boolean
            locale:
              type: string
            plain_text:
              type: string
            required_fields:
              items:
                type: string
              type: array
            subject:
              type: string
            type:
              type: string
            version:
              type: integer
          type: object
      responses:
        201:
          description: Template created successfully
        400:
          description: Validation failed
      security:
      - JWT_v2: []
      summary: Create channel template
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notification-templates/{channel}/{template_id}:
    delete:
      operationId: v2_deleteHzChannelTemplate
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - enum:
        - email
        - in_app
        in: path
        name: channel
        required: true
        type: string
      - in: path
        name: template_id
        required: true
        type: string
      responses:
        200:
          description: Template deleted successfully
        404:
          description: Not found
      security:
      - JWT_v2: []
      summary: Delete channel template
      tags:
      - HzNotifications
    get:
      operationId: v2_getHzChannelTemplate
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - enum:
        - email
        - in_app
        in: path
        name: channel
        required: true
        type: string
      - in: path
        name: template_id
        required: true
        type: string
      responses:
        200:
          description: Template retrieved successfully
        404:
          description: Not found
      security:
      - JWT_v2: []
      summary: Get channel template detail
      tags:
      - HzNotifications
    patch:
      operationId: v2_updateHzChannelTemplate
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - enum:
        - email
        - in_app
        in: path
        name: channel
        required: true
        type: string
      - in: path
        name: template_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            category:
              type: string
            created_by:
              type: string
            email_body:
              type: string
            is_active:
              type: boolean
            locale:
              type: string
            plain_text:
              type: string
            required_fields:
              items:
                type: string
              type: array
            subject:
              type: string
            type:
              type: string
            version:
              type: integer
          type: object
      responses:
        200:
          description: Template updated successfully
        400:
          description: Validation failed
        404:
          description: Not found
      security:
      - JWT_v2: []
      summary: Update channel template
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notifications/email/preview:
    post:
      operationId: v2_previewHzEmail
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            category:
              type: string
            template_variables:
              type: object
            type:
              type: string
          required:
          - category
          - type
          - template_variables
          type: object
      responses:
        200:
          description: Template processed successfully
        400:
          description: Validation failed
      security:
      - JWT_v2: []
      summary: Preview email without sending
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notifications/email/queue:
    get:
      operationId: v2_listHzEmailQueue
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - enum:
        - pending
        - processing
        - sent
        - failed
        in: query
        name: status
        type: string
      - enum:
        - urgent
        - normal
        - low
        in: query
        name: priority
        type: string
      - in: query
        name: page
        type: integer
      - in: query
        name: limit
        type: integer
      responses:
        200:
          description: Queue items retrieved successfully
      security:
      - JWT_v2: []
      summary: List email queue items
      tags:
      - HzNotifications
    post:
      operationId: v2_createHzEmailQueueItem
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Queue item created
        400:
          description: Validation failed
      security:
      - JWT_v2: []
      summary: Create email queue item (admin)
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notifications/email/queue/process:
    post:
      operationId: v2_processHzEmailQueue
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        schema:
          properties:
            dry_run:
              default: false
              type: boolean
            limit:
              default: 50
              type: integer
          type: object
      responses:
        200:
          description: Queue processing completed
      security:
      - JWT_v2: []
      summary: Process pending email queue items (batch)
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notifications/email/queue/processing-status:
    get:
      operationId: v2_getHzEmailQueueProcessingStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Processing status retrieved
      security:
      - JWT_v2: []
      summary: Get email queue processing status
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notifications/email/queue/statistics:
    get:
      operationId: v2_getHzEmailQueueStatistics
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Queue statistics retrieved
      security:
      - JWT_v2: []
      summary: Get email queue statistics
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notifications/email/queue/{item_id}:
    delete:
      operationId: v2_deleteHzEmailQueueItem
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: item_id
        required: true
        type: string
      responses:
        200:
          description: Queue item deleted
        404:
          description: Not found
      security:
      - JWT_v2: []
      summary: Delete email queue item
      tags:
      - HzNotifications
    get:
      operationId: v2_getHzEmailQueueItem
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: item_id
        required: true
        type: string
      responses:
        200:
          description: Queue item retrieved
        404:
          description: Not found
      security:
      - JWT_v2: []
      summary: Get email queue item
      tags:
      - HzNotifications
    patch:
      operationId: v2_updateHzEmailQueueItem
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: item_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Queue item updated
        404:
          description: Not found
      security:
      - JWT_v2: []
      summary: Update email queue item
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notifications/email/queue/{item_id}/retry:
    post:
      operationId: v2_retryHzEmailQueueItem
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: item_id
        required: true
        type: string
      responses:
        200:
          description: Queue item retry initiated
        404:
          description: Not found
      security:
      - JWT_v2: []
      summary: Retry failed email queue item
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notifications/email/send:
    post:
      operationId: v2_sendHzEmail
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            bcc_recipients:
              items:
                properties:
                  email:
                    type: string
                  name:
                    type: string
                type: object
              type: array
            category:
              description: Template category (e.g., task_management)
              type: string
            cc_recipients:
              items:
                properties:
                  email:
                    type: string
                  name:
                    type: string
                type: object
              type: array
            priority:
              default: normal
              enum:
              - urgent
              - normal
              - low
              type: string
            template_variables:
              description: Variables to substitute in template
              type: object
            to_recipients:
              items:
                properties:
                  email:
                    type: string
                  name:
                    type: string
                type: object
              type: array
            type:
              description: Template type (e.g., task_assigned)
              type: string
          required:
          - category
          - type
          - template_variables
          - to_recipients
          type: object
      responses:
        201:
          description: Email queued successfully
          schema:
            properties:
              data:
                properties:
                  category:
                    type: string
                  priority:
                    type: string
                  queue_id:
                    type: string
                  recipient_count:
                    type: object
                  status:
                    type: string
                  type:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Validation failed
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Send email using template
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notifications/email/send-bulk:
    post:
      operationId: v2_sendHzBulkEmail
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            category:
              type: string
            emails:
              items:
                properties:
                  bcc_recipients:
                    items:
                      type: object
                    type: array
                  cc_recipients:
                    items:
                      type: object
                    type: array
                  template_variables:
                    type: object
                  to_recipients:
                    items:
                      type: object
                    type: array
                type: object
              maxItems: 100
              type: array
            priority:
              enum:
              - urgent
              - normal
              - low
              type: string
            type:
              type: string
          required:
          - category
          - type
          - emails
          type: object
      responses:
        200:
          description: Bulk emails processed
        400:
          description: Validation failed
      security:
      - JWT_v2: []
      summary: Send bulk emails using same template
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notifications/email/settings:
    delete:
      description: Remove custom email settings for the workspace, reverting to defaults.
      operationId: v2_deleteHzEmailSettings
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Email settings deleted, reverting to defaults
      security:
      - JWT_v2: []
      summary: Delete email settings
      tags:
      - HzNotifications
    get:
      description: Retrieve email branding settings (logo, footer) for the workspace.
        Returns defaults if no custom settings exist.
      operationId: v2_getHzEmailSettings
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Email settings retrieved successfully
          schema:
            properties:
              data:
                properties:
                  footer_text:
                    type: string
                  logo_url:
                    type: string
                  source:
                    enum:
                    - workspace
                    - default
                    type: string
                  workspace_id:
                    type: string
                type: object
              message:
                type: string
            type: object
      security:
      - JWT_v2: []
      summary: Get email settings for workspace
      tags:
      - HzNotifications
    put:
      description: Set email branding settings (logo, footer) for the workspace. Creates
        new settings or updates existing.
      operationId: v2_upsertHzEmailSettings
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            footer_text:
              description: HTML footer content for emails
              type: string
            logo_url:
              description: URL to workspace logo image
              type: string
          type: object
      responses:
        200:
          description: Email settings updated successfully
        400:
          description: Validation failed
      security:
      - JWT_v2: []
      summary: Create or update email settings
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notifications/in-app:
    get:
      operationId: v2_getHzUserInAppNotifications
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: User's Kinde ID (if not provided, uses authenticated user's ID)
        in: query
        name: recipient_kinde_id
        type: string
      - default: false
        description: Filter to show only unread notifications
        in: query
        name: unread_only
        type: boolean
      - description: Filter by importance level
        enum:
        - notification
        - warning
        - alert
        in: query
        name: importance
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        name: page
        type: integer
      - default: 50
        description: Number of items per page (max 100)
        in: query
        name: limit
        type: integer
      responses:
        200:
          description: In-app notifications retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    category:
                      type: string
                    created_at:
                      format: date-time
                      type: string
                    id:
                      type: string
                    importance:
                      type: string
                    is_action_required:
                      type: boolean
                    read_at:
                      format: date-time
                      type: string
                    recipient_kinde_id:
                      type: string
                    simplified_fields:
                      items:
                        type: string
                      type: array
                    simplified_fields_value:
                      type: object
                    status:
                      enum:
                      - unread
                      - read
                      - archived
                      type: string
                    template_id:
                      type: string
                    title:
                      type: string
                    type:
                      type: string
                    workspace_id:
                      type: string
                  type: object
                type: array
              message:
                example: In-app notifications retrieved successfully
                type: string
              pagination:
                properties:
                  has_next:
                    type: boolean
                  has_previous:
                    type: boolean
                  limit:
                    type: integer
                  page:
                    type: integer
                  total_count:
                    type: integer
                  total_pages:
                    type: integer
                type: object
              summary:
                properties:
                  page_count:
                    description: Number of notifications on current page
                    type: integer
                  total_count:
                    description: Total number of notifications
                    type: integer
                  unread_count:
                    description: Total number of unread notifications
                    type: integer
                type: object
            type: object
        400:
          description: Invalid query parameters
          schema:
            properties:
              error:
                type: string
              message:
                type: string
            type: object
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List in-app notifications for a user
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notifications/in-app/send:
    post:
      operationId: v2_sendHzInAppNotification
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            category:
              description: Template category (e.g., progress_claims, task_management)
              example: progress_claims
              type: string
            importance:
              default: notification
              description: Importance level of the notification
              enum:
              - notification
              - warning
              - alert
              type: string
            is_action_required:
              default: false
              description: Whether action is required from the recipient
              type: boolean
            recipient_kinde_id:
              description: Kinde ID of the notification recipient
              example: kp_abc123xyz
              type: string
            simplified_fields_value:
              description: Simplified field values for display
              example:
                amount: $1,245,350
                submitted_by: Sarah Wong
              type: object
            template_variables:
              description: Variables to substitute in template
              example:
                claim_amount: $1,245,350
                user_email: sarah@example.com
              type: object
            type:
              description: Template type (e.g., claim_submitted, task_assigned)
              example: claim_submitted
              type: string
          required:
          - category
          - type
          - template_variables
          - simplified_fields_value
          - recipient_kinde_id
          type: object
      responses:
        201:
          description: In-app notification sent successfully
          schema:
            properties:
              data:
                properties:
                  category:
                    example: progress_claims
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  importance:
                    example: notification
                    type: string
                  notification_id:
                    example: notif_abc123
                    type: string
                  recipient_kinde_id:
                    example: kp_abc123xyz
                    type: string
                  status:
                    example: unread
                    type: string
                  template_id:
                    example: tpl_xyz789
                    type: string
                  type:
                    example: claim_submitted
                    type: string
                  workspace_id:
                    example: workspace-123
                    type: string
                type: object
              message:
                example: In-app notification sent successfully
                type: string
            type: object
        400:
          description: Validation failed - missing or invalid fields
          schema:
            properties:
              message:
                type: string
              required_field:
                type: string
              required_fields:
                items:
                  type: string
                type: array
            type: object
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Send in-app notification using template
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-notifications/in-app/stream:
    get:
      description: 'Establishes a Server-Sent Events (SSE) connection that streams
        real-time notification updates.

        This endpoint maintains a long-lived HTTP connection and pushes events to
        the client when:

        - New notifications are added (ADDED)

        - Notifications are modified, e.g., marked as read (MODIFIED)

        - Notifications are removed (REMOVED)


        The stream automatically handles reconnection and sends keepalive messages
        every 30 seconds.


        **Event Types:**

        - `connected`: Initial connection success confirmation

        - `notification_added`: New notification created

        - `notification_modified`: Existing notification updated

        - `notification_removed`: Notification deleted


        **Connection Lifecycle:**

        - Connection timeout: 540 seconds (9 minutes)

        - Client auto-reconnects via EventSource API

        - Keepalive interval: 30 seconds

        - Firestore listener maintains state across reconnections

        '
      operationId: v2_streamHzInAppNotifications
      parameters:
      - description: Workspace ID for filtering notifications
        in: path
        name: workspaceId
        required: true
        type: string
      - description: 'User''s Kinde ID to receive notifications for.

          If not provided, uses the authenticated user''s ID from JWT token.

          '
        in: query
        name: recipient_kinde_id
        required: false
        type: string
      produces:
      - text/event-stream
      responses:
        200:
          description: 'SSE stream established successfully.

            The response body contains a stream of Server-Sent Events in the format:


            ```

            data: {"type":"connected","message":"SSE stream established"}


            data: {"type":"notification_added","data":{...}}


            data: {"type":"notification_modified","data":{...}}


            data: {"type":"notification_removed","data":{"id":"notif_123"}}


            : keepalive

            ```

            '
          headers:
            Cache-Control:
              default: no-cache
              description: Prevent caching of SSE stream
              type: string
            Connection:
              default: keep-alive
              description: Maintain persistent connection
              type: string
            Content-Type:
              default: text/event-stream
              description: SSE content type
              type: string
            X-Accel-Buffering:
              default: 'no'
              description: Disable nginx buffering for SSE
              type: string
          schema:
            description: "Stream of SSE events. Each event follows this structure:\n\
              \n**Connected Event:**\n```json\n{\n  \"type\": \"connected\",\n  \"\
              message\": \"SSE stream established\"\n}\n```\n\n**Notification Added\
              \ Event:**\n```json\n{\n  \"type\": \"notification_added\",\n  \"data\"\
              : {\n    \"id\": \"notif_abc123\",\n    \"recipient_kinde_id\": \"kp_abc123xyz\"\
              ,\n    \"workspace_id\": \"workspace-123\",\n    \"category\": \"progress_claims\"\
              ,\n    \"type\": \"claim_submitted\",\n    \"template_id\": \"tpl_xyz789\"\
              ,\n    \"title\": \"New claim submitted\",\n    \"simplified_fields\"\
              : [\"amount\", \"submitted_by\"],\n    \"simplified_fields_value\":\
              \ {\n      \"amount\": \"$1,245,350\",\n      \"submitted_by\": \"Sarah\
              \ Wong\"\n    },\n    \"importance\": \"notification\",\n    \"is_action_required\"\
              : false,\n    \"is_mark_as_read\": false,\n    \"is_unread\": true,\n\
              \    \"status\": \"unread\",\n    \"created_at\": \"2025-01-15T10:30:45.123456Z\"\
              ,\n    \"updated_at\": \"2025-01-15T10:30:45.123456Z\"\n  }\n}\n```\n\
              \n**Notification Modified Event:**\n```json\n{\n  \"type\": \"notification_modified\"\
              ,\n  \"data\": {\n    \"id\": \"notif_abc123\",\n    \"is_mark_as_read\"\
              : true,\n    \"is_unread\": false,\n    \"status\": \"read\",\n    \"\
              read_at\": \"2025-01-15T10:35:12.654321Z\",\n    ... (other notification\
              \ fields)\n  }\n}\n```\n\n**Notification Removed Event:**\n```json\n\
              {\n  \"type\": \"notification_removed\",\n  \"data\": {\n    \"id\"\
              : \"notif_abc123\"\n  }\n}\n```\n"
            format: binary
            type: string
        400:
          description: Bad request - missing required parameters
          schema:
            properties:
              error:
                example: workspace_id is required
                type: string
            type: object
        401:
          description: Unauthorized - invalid or missing JWT token
          schema:
            properties:
              message:
                example: Unauthorized
                type: string
            type: object
        500:
          description: Internal server error
          schema:
            properties:
              message:
                example: Stream error occurred
                type: string
              type:
                example: error
                type: string
            type: object
      security:
      - JWT_v2: []
      summary: Server-Sent Events stream for real-time in-app notifications
      tags:
      - HzNotificationsSSE
  /v2/workspaces/{workspaceId}/hz-notifications/in-app/{notification_id}:
    patch:
      operationId: v2_patchHzInAppNotification
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Notification ID to update
        in: path
        name: notification_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            is_mark_as_read:
              description: Mark notification as read (true) or unread (false)
              example: true
              type: boolean
          required:
          - is_mark_as_read
          type: object
      responses:
        200:
          description: Notification updated successfully
          schema:
            properties:
              data:
                properties:
                  category:
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  id:
                    type: string
                  importance:
                    enum:
                    - notification
                    - warning
                    - alert
                    type: string
                  is_action_required:
                    type: boolean
                  is_mark_as_read:
                    type: boolean
                  is_unread:
                    type: boolean
                  read_at:
                    format: date-time
                    type: string
                  recipient_kinde_id:
                    type: string
                  simplified_fields:
                    items:
                      type: string
                    type: array
                  simplified_fields_value:
                    type: object
                  status:
                    enum:
                    - pending
                    - delivered
                    - read
                    - failed
                    type: string
                  template_id:
                    type: string
                  title:
                    type: string
                  type:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  workspace_id:
                    type: string
                type: object
              message:
                example: Notification updated successfully
                type: string
            type: object
        400:
          description: Bad request - missing or invalid fields
          schema:
            properties:
              error:
                type: string
              message:
                type: string
            type: object
        404:
          description: Notification not found
          schema:
            properties:
              message:
                example: Notification not found
                type: string
            type: object
        500:
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              message:
                type: string
              request_id:
                type: string
            type: object
      security:
      - JWT_v2: []
      summary: Mark in-app notification as read
      tags:
      - HzNotifications
  /v2/workspaces/{workspaceId}/hz-preconstruction-bid-packages:
    get:
      description: Retrieve bid packages with optional filters and pagination
      operationId: v2_listBidPackages
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by bid package status
        enum:
        - draft
        - issued
        - responses-received
        - evaluated
        - awarded
        in: query
        name: status
        required: false
        type: string
      - description: Filter by package type
        in: query
        name: packageType
        required: false
        type: string
      - description: Filter by project ID
        in: query
        name: projectId
        required: false
        type: string
      - description: Free text search across bid package details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of bid packages
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List bid packages
      tags:
      - Preconstruction
  /v2/workspaces/{workspaceId}/hz-preconstruction-dashboard:
    get:
      description: Retrieve preconstruction dashboard data with KPIs, tender opportunities,
        and activity overview
      operationId: v2_getPreconstructionDashboard
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - default: month
        description: Time filter for dashboard data
        enum:
        - week
        - month
        - quarter
        - year
        in: query
        name: timeFilter
        required: false
        type: string
      responses:
        200:
          description: Preconstruction dashboard data
          schema:
            properties:
              kpis:
                properties:
                  activeEstimates:
                    type: integer
                  activeOpportunities:
                    type: integer
                  pipelineValue:
                    format: float
                    type: number
                  winRate:
                    format: float
                    type: number
                type: object
              recentActivity:
                items:
                  properties:
                    description:
                      type: string
                    id:
                      type: string
                    status:
                      type: string
                    timestamp:
                      format: date-time
                      type: string
                    title:
                      type: string
                    type:
                      type: string
                  type: object
                type: array
              tenderOpportunities:
                items:
                  properties:
                    client:
                      type: string
                    dueDate:
                      format: date
                      type: string
                    estimator:
                      type: string
                    id:
                      type: string
                    project:
                      type: string
                    status:
                      enum:
                      - new
                      - in-progress
                      - submitted
                      - won
                      - lost
                      type: string
                    value:
                      format: float
                      type: number
                  type: object
                type: array
            type: object
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get preconstruction dashboard
      tags:
      - Preconstruction
  /v2/workspaces/{workspaceId}/hz-preconstruction-estimates:
    get:
      description: Retrieve project estimates with optional filters and pagination
      operationId: v2_listProjectEstimates
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by estimate status
        enum:
        - draft
        - in-progress
        - under-review
        - approved
        - rejected
        in: query
        name: status
        required: false
        type: string
      - description: Filter by estimator name
        in: query
        name: estimator
        required: false
        type: string
      - description: Filter by project type
        in: query
        name: projectType
        required: false
        type: string
      - description: Filter by opportunity ID
        in: query
        name: opportunityId
        required: false
        type: string
      - description: Free text search across estimate details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of project estimates
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List project estimates
      tags:
      - Preconstruction
    post:
      description: Create a new project estimate
      operationId: v2_createProjectEstimate
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            description:
              description: Estimate description
              type: string
            estimateName:
              description: Estimate name/title
              type: string
            estimatedValue:
              description: Estimated total value
              format: float
              type: number
            estimator:
              description: Assigned estimator name
              type: string
            opportunityId:
              description: Associated opportunity ID
              type: string
            status:
              default: draft
              enum:
              - draft
              - in-progress
              - under-review
              - approved
              - rejected
              type: string
          required:
          - estimateName
          - estimator
          - opportunityId
          type: object
      responses:
        201:
          description: Project estimate created successfully
          schema:
            properties:
              id:
                type: string
              message:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create project estimate
      tags:
      - Preconstruction
  /v2/workspaces/{workspaceId}/hz-preconstruction-estimates/{estimateId}:
    get:
      description: Retrieve a specific project estimate by its unique identifier
      operationId: v2_getProjectEstimateById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project estimate unique identifier
        in: path
        name: estimateId
        required: true
        type: string
      responses:
        200:
          description: Project estimate details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Project estimate not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get project estimate by ID
      tags:
      - Preconstruction
    put:
      description: Update an existing project estimate
      operationId: v2_updateProjectEstimate
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project estimate unique identifier
        in: path
        name: estimateId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated project estimate
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Project estimate not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update project estimate
      tags:
      - Preconstruction
  /v2/workspaces/{workspaceId}/hz-preconstruction-opportunities:
    get:
      description: Retrieve tender opportunities with optional filters and pagination
      operationId: v2_listTenderOpportunities
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by opportunity status
        enum:
        - new
        - in-progress
        - submitted
        - won
        - lost
        - undecided
        in: query
        name: status
        required: false
        type: string
      - description: Filter by assigned estimator
        in: query
        name: estimator
        required: false
        type: string
      - description: Filter by client name
        in: query
        name: client
        required: false
        type: string
      - description: Filter by region
        in: query
        name: region
        required: false
        type: string
      - description: Filter by minimum project value
        format: float
        in: query
        name: minValue
        required: false
        type: number
      - description: Filter by maximum project value
        format: float
        in: query
        name: maxValue
        required: false
        type: number
      - description: Filter by due date from (inclusive)
        format: date
        in: query
        name: dueDateFrom
        required: false
        type: string
      - description: Filter by due date to (inclusive)
        format: date
        in: query
        name: dueDateTo
        required: false
        type: string
      - description: Free text search across opportunity details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of tender opportunities
          schema:
            properties:
              items:
                items:
                  properties:
                    client:
                      type: string
                    documents:
                      type: integer
                    dueDate:
                      format: date
                      type: string
                    estimator:
                      type: string
                    id:
                      type: string
                    project:
                      type: string
                    region:
                      type: string
                    rfis:
                      type: integer
                    status:
                      type: string
                    type:
                      type: string
                    value:
                      format: float
                      type: number
                  type: object
                type: array
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  pages:
                    type: integer
                  total:
                    type: integer
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List tender opportunities
      tags:
      - Preconstruction
    post:
      description: Create a new tender opportunity
      operationId: v2_createTenderOpportunity
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            client:
              description: Client name
              type: string
            description:
              description: Project description
              type: string
            dueDate:
              description: Tender submission due date
              format: date
              type: string
            estimator:
              description: Assigned estimator name
              type: string
            project:
              description: Project name
              type: string
            region:
              description: Project region
              type: string
            status:
              default: new
              enum:
              - new
              - in-progress
              - submitted
              - won
              - lost
              - undecided
              type: string
            type:
              description: Project type (e.g., Commercial, Healthcare, Residential)
              type: string
            value:
              description: Estimated project value
              format: float
              type: number
          required:
          - project
          - client
          - value
          - dueDate
          - estimator
          type: object
      responses:
        201:
          description: Tender opportunity created successfully
          schema:
            properties:
              id:
                type: string
              message:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create tender opportunity
      tags:
      - Preconstruction
  /v2/workspaces/{workspaceId}/hz-preconstruction-opportunities/{opportunityId}:
    delete:
      description: Delete a tender opportunity
      operationId: v2_deleteTenderOpportunity
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Tender opportunity unique identifier
        in: path
        name: opportunityId
        required: true
        type: string
      responses:
        200:
          description: Tender opportunity deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Tender opportunity not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete tender opportunity
      tags:
      - Preconstruction
    get:
      description: Retrieve a specific tender opportunity by its unique identifier
      operationId: v2_getTenderOpportunityById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Tender opportunity unique identifier
        in: path
        name: opportunityId
        required: true
        type: string
      responses:
        200:
          description: Tender opportunity details
          schema:
            properties:
              client:
                type: string
              createdAt:
                format: date-time
                type: string
              description:
                type: string
              documents:
                type: integer
              dueDate:
                format: date
                type: string
              estimator:
                type: string
              id:
                type: string
              project:
                type: string
              region:
                type: string
              rfis:
                type: integer
              status:
                type: string
              type:
                type: string
              updatedAt:
                format: date-time
                type: string
              value:
                format: float
                type: number
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Tender opportunity not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get tender opportunity by ID
      tags:
      - Preconstruction
    put:
      description: Update an existing tender opportunity
      operationId: v2_updateTenderOpportunity
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Tender opportunity unique identifier
        in: path
        name: opportunityId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            client:
              type: string
            description:
              type: string
            dueDate:
              format: date
              type: string
            estimator:
              type: string
            project:
              type: string
            region:
              type: string
            status:
              enum:
              - new
              - in-progress
              - submitted
              - won
              - lost
              - undecided
              type: string
            type:
              type: string
            value:
              format: float
              type: number
          type: object
      responses:
        200:
          description: Updated tender opportunity
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Tender opportunity not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update tender opportunity
      tags:
      - Preconstruction
  /v2/workspaces/{workspaceId}/hz-preconstruction-quantity-takeoffs:
    get:
      description: Retrieve quantity takeoff records with optional filters and pagination
      operationId: v2_listQuantityTakeoffs
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by takeoff status
        enum:
        - draft
        - in-progress
        - under-review
        - approved
        in: query
        name: status
        required: false
        type: string
      - description: Filter by estimate ID
        in: query
        name: estimateId
        required: false
        type: string
      - description: Filter by trade category
        in: query
        name: trade
        required: false
        type: string
      - description: Free text search across takeoff details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of quantity takeoffs
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List quantity takeoffs
      tags:
      - Preconstruction
    post:
      description: Create a new quantity takeoff record
      operationId: v2_createQuantityTakeoff
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            description:
              description: Takeoff description
              type: string
            estimateId:
              description: Associated estimate ID
              type: string
            quantities:
              description: Quantity items
              items:
                type: object
              type: array
            status:
              default: draft
              enum:
              - draft
              - in-progress
              - under-review
              - approved
              type: string
            takeoffName:
              description: Takeoff name/title
              type: string
            trade:
              description: Trade category
              type: string
          required:
          - takeoffName
          - estimateId
          - trade
          type: object
      responses:
        201:
          description: Quantity takeoff created successfully
          schema:
            properties:
              id:
                type: string
              message:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create quantity takeoff
      tags:
      - Preconstruction
  /v2/workspaces/{workspaceId}/hz-procurement-approvals:
    get:
      description: Retrieve pending approval requests with optional filters and pagination
      operationId: v2_listPendingApprovals
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by assigned approver
        in: query
        name: approver
        required: false
        type: string
      - description: Filter by minimum PO amount
        format: float
        in: query
        name: minAmount
        required: false
        type: number
      - description: Filter by maximum PO amount
        format: float
        in: query
        name: maxAmount
        required: false
        type: number
      - description: Filter by urgency level
        enum:
        - high
        - medium
        - low
        in: query
        name: urgency
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of pending approvals
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List pending approvals
      tags:
      - Procurement
  /v2/workspaces/{workspaceId}/hz-procurement-approvals/{approvalId}:
    put:
      description: Approve or reject a pending approval request
      operationId: v2_processApprovalRequest
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Approval request unique identifier
        in: path
        name: approvalId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            action:
              description: Approval action
              enum:
              - approve
              - reject
              type: string
            approver:
              description: Approver name
              type: string
            comments:
              description: Approval comments
              type: string
          required:
          - action
          - approver
          type: object
      responses:
        200:
          description: Approval processed successfully
          schema:
            properties:
              message:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Approval request not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Process approval request
      tags:
      - Procurement
  /v2/workspaces/{workspaceId}/hz-procurement-dashboard:
    get:
      description: Retrieve procurement dashboard data with KPIs, purchase orders,
        and vendor overview
      operationId: v2_getProcurementDashboard
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - default: month
        description: Time filter for dashboard data
        enum:
        - week
        - month
        - quarter
        - year
        in: query
        name: timeFilter
        required: false
        type: string
      responses:
        200:
          description: Procurement dashboard data
          schema:
            properties:
              kpis:
                properties:
                  activePurchaseOrders:
                    type: integer
                  activeVendors:
                    type: integer
                  pendingApprovals:
                    type: integer
                  totalProcurementValue:
                    format: float
                    type: number
                type: object
              purchaseOrders:
                items:
                  properties:
                    amount:
                      format: float
                      type: number
                    description:
                      type: string
                    id:
                      type: string
                    poNumber:
                      type: string
                    project:
                      type: string
                    status:
                      enum:
                      - draft
                      - pending-approval
                      - approved
                      - ordered
                      - delivered
                      - invoiced
                      - paid
                      type: string
                    urgency:
                      enum:
                      - high
                      - medium
                      - low
                      type: string
                    vendor:
                      type: string
                  type: object
                type: array
              recentActivity:
                items:
                  properties:
                    description:
                      type: string
                    id:
                      type: string
                    status:
                      type: string
                    timestamp:
                      format: date-time
                      type: string
                    title:
                      type: string
                    type:
                      type: string
                  type: object
                type: array
              topVendors:
                items:
                  properties:
                    category:
                      type: string
                    id:
                      type: string
                    name:
                      type: string
                    rating:
                      format: float
                      type: number
                    status:
                      enum:
                      - active
                      - inactive
                      - pending
                      type: string
                    totalOrders:
                      type: integer
                    totalValue:
                      format: float
                      type: number
                  type: object
                type: array
            type: object
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get procurement dashboard
      tags:
      - Procurement
  /v2/workspaces/{workspaceId}/hz-procurement-delivery-tracking:
    get:
      description: Retrieve delivery tracking information with optional filters and
        pagination
      operationId: v2_listDeliveryTracking
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by delivery status
        enum:
        - pending
        - in-transit
        - delivered
        - failed
        in: query
        name: status
        required: false
        type: string
      - description: Filter by purchase order ID
        in: query
        name: poId
        required: false
        type: string
      - description: Filter by vendor name
        in: query
        name: vendor
        required: false
        type: string
      - description: Filter by delivery date from (inclusive)
        format: date
        in: query
        name: deliveryDateFrom
        required: false
        type: string
      - description: Filter by delivery date to (inclusive)
        format: date
        in: query
        name: deliveryDateTo
        required: false
        type: string
      - description: Free text search across delivery details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of delivery tracking records
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List delivery tracking records
      tags:
      - Procurement
  /v2/workspaces/{workspaceId}/hz-procurement-purchase-orders:
    get:
      description: Retrieve purchase orders with optional filters and pagination
      operationId: v2_listPurchaseOrders
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by PO status
        enum:
        - draft
        - pending-approval
        - approved
        - ordered
        - delivered
        - invoiced
        - paid
        in: query
        name: status
        required: false
        type: string
      - description: Filter by vendor name
        in: query
        name: vendor
        required: false
        type: string
      - description: Filter by project name
        in: query
        name: project
        required: false
        type: string
      - description: Filter by urgency level
        enum:
        - high
        - medium
        - low
        in: query
        name: urgency
        required: false
        type: string
      - description: Filter by requester name
        in: query
        name: requestedBy
        required: false
        type: string
      - description: Filter by approver name
        in: query
        name: approvedBy
        required: false
        type: string
      - description: Filter by minimum PO amount
        format: float
        in: query
        name: minAmount
        required: false
        type: number
      - description: Filter by maximum PO amount
        format: float
        in: query
        name: maxAmount
        required: false
        type: number
      - description: Filter by order date from (inclusive)
        format: date
        in: query
        name: orderDateFrom
        required: false
        type: string
      - description: Filter by order date to (inclusive)
        format: date
        in: query
        name: orderDateTo
        required: false
        type: string
      - description: Free text search across PO details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of purchase orders
          schema:
            properties:
              items:
                items:
                  properties:
                    amount:
                      format: float
                      type: number
                    approvedBy:
                      type: string
                    deliveryDate:
                      format: date
                      type: string
                    description:
                      type: string
                    id:
                      type: string
                    orderDate:
                      format: date
                      type: string
                    poNumber:
                      type: string
                    project:
                      type: string
                    requestedBy:
                      type: string
                    status:
                      type: string
                    urgency:
                      type: string
                    vendor:
                      type: string
                  type: object
                type: array
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  pages:
                    type: integer
                  total:
                    type: integer
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List purchase orders
      tags:
      - Procurement
    post:
      description: Create a new purchase order
      operationId: v2_createPurchaseOrder
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Purchase order amount
              format: float
              type: number
            deliveryDate:
              description: Expected delivery date
              format: date
              type: string
            description:
              description: Purchase order description
              type: string
            notes:
              description: Additional notes
              type: string
            project:
              description: Associated project
              type: string
            requestedBy:
              description: Requester name
              type: string
            status:
              default: draft
              enum:
              - draft
              - pending-approval
              - approved
              - ordered
              - delivered
              - invoiced
              - paid
              type: string
            urgency:
              default: medium
              description: Urgency level
              enum:
              - high
              - medium
              - low
              type: string
            vendor:
              description: Vendor name
              type: string
          required:
          - vendor
          - description
          - amount
          - project
          - requestedBy
          type: object
      responses:
        201:
          description: Purchase order created successfully
          schema:
            properties:
              id:
                type: string
              message:
                type: string
              poNumber:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create purchase order
      tags:
      - Procurement
  /v2/workspaces/{workspaceId}/hz-procurement-purchase-orders/{poId}:
    delete:
      description: Delete a purchase order
      operationId: v2_deletePurchaseOrder
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Purchase order unique identifier
        in: path
        name: poId
        required: true
        type: string
      responses:
        200:
          description: Purchase order deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Purchase order not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete purchase order
      tags:
      - Procurement
    get:
      description: Retrieve a specific purchase order by its unique identifier
      operationId: v2_getPurchaseOrderById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Purchase order unique identifier
        in: path
        name: poId
        required: true
        type: string
      responses:
        200:
          description: Purchase order details
          schema:
            properties:
              amount:
                format: float
                type: number
              approvedBy:
                type: string
              createdAt:
                format: date-time
                type: string
              deliveryDate:
                format: date
                type: string
              description:
                type: string
              id:
                type: string
              notes:
                type: string
              orderDate:
                format: date
                type: string
              poNumber:
                type: string
              project:
                type: string
              requestedBy:
                type: string
              status:
                type: string
              updatedAt:
                format: date-time
                type: string
              urgency:
                type: string
              vendor:
                type: string
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Purchase order not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get purchase order by ID
      tags:
      - Procurement
    put:
      description: Update an existing purchase order
      operationId: v2_updatePurchaseOrder
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Purchase order unique identifier
        in: path
        name: poId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              format: float
              type: number
            deliveryDate:
              format: date
              type: string
            description:
              type: string
            notes:
              type: string
            project:
              type: string
            status:
              enum:
              - draft
              - pending-approval
              - approved
              - ordered
              - delivered
              - invoiced
              - paid
              type: string
            urgency:
              enum:
              - high
              - medium
              - low
              type: string
            vendor:
              type: string
          type: object
      responses:
        200:
          description: Updated purchase order
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Purchase order not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update purchase order
      tags:
      - Procurement
  /v2/workspaces/{workspaceId}/hz-procurement-vendors:
    get:
      description: Retrieve vendor directory with optional filters and pagination
      operationId: v2_listVendors
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by vendor status
        enum:
        - active
        - inactive
        - pending
        in: query
        name: status
        required: false
        type: string
      - description: Filter by vendor category
        in: query
        name: category
        required: false
        type: string
      - description: Filter by minimum vendor rating
        format: float
        in: query
        maximum: 5.0
        minimum: 0.0
        name: minRating
        required: false
        type: number
      - description: Filter by vendor region
        in: query
        name: region
        required: false
        type: string
      - description: Free text search across vendor details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of vendors
          schema:
            properties:
              items:
                items:
                  properties:
                    category:
                      type: string
                    contactEmail:
                      type: string
                    contactPhone:
                      type: string
                    id:
                      type: string
                    lastOrder:
                      format: date
                      type: string
                    name:
                      type: string
                    paymentTerms:
                      type: string
                    rating:
                      format: float
                      type: number
                    status:
                      type: string
                    totalOrders:
                      type: integer
                    totalValue:
                      format: float
                      type: number
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List vendors
      tags:
      - Procurement
    post:
      description: Create a new vendor in the directory
      operationId: v2_createVendor
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            address:
              description: Vendor address
              type: string
            category:
              description: Vendor category
              type: string
            contactEmail:
              description: Primary contact email
              format: email
              type: string
            contactPhone:
              description: Primary contact phone
              type: string
            name:
              description: Vendor name
              type: string
            notes:
              description: Additional notes
              type: string
            paymentTerms:
              description: Payment terms
              type: string
            rating:
              description: Vendor rating
              format: float
              maximum: 5.0
              minimum: 0.0
              type: number
            status:
              default: pending
              enum:
              - active
              - inactive
              - pending
              type: string
          required:
          - name
          - category
          - contactEmail
          type: object
      responses:
        201:
          description: Vendor created successfully
          schema:
            properties:
              id:
                type: string
              message:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create vendor
      tags:
      - Procurement
  /v2/workspaces/{workspaceId}/hz-procurement-vendors/{vendorId}:
    get:
      description: Retrieve a specific vendor by its unique identifier
      operationId: v2_getVendorById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Vendor unique identifier
        in: path
        name: vendorId
        required: true
        type: string
      responses:
        200:
          description: Vendor details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Vendor not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get vendor by ID
      tags:
      - Procurement
    put:
      description: Update an existing vendor
      operationId: v2_updateVendor
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Vendor unique identifier
        in: path
        name: vendorId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated vendor
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Vendor not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update vendor
      tags:
      - Procurement
  /v2/workspaces/{workspaceId}/hz-scheduling-constraints:
    get:
      description: Retrieve project constraints with optional filters and pagination
      operationId: v2_listProjectConstraints
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by constraint status
        enum:
        - open
        - in-progress
        - resolved
        in: query
        name: status
        required: false
        type: string
      - description: Filter by constraint type
        enum:
        - resource
        - material
        - weather
        - regulatory
        - design
        in: query
        name: type
        required: false
        type: string
      - description: Filter by severity level
        enum:
        - high
        - medium
        - low
        in: query
        name: severity
        required: false
        type: string
      - description: Filter by project name
        in: query
        name: project
        required: false
        type: string
      - description: Filter by due date from (inclusive)
        format: date
        in: query
        name: dueDateFrom
        required: false
        type: string
      - description: Filter by due date to (inclusive)
        format: date
        in: query
        name: dueDateTo
        required: false
        type: string
      - description: Free text search across constraint details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of project constraints
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List project constraints
      tags:
      - Scheduling
    post:
      description: Create a new project constraint
      operationId: v2_createProjectConstraint
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            description:
              description: Detailed constraint description
              type: string
            dueDate:
              description: Resolution due date
              format: date
              type: string
            impact:
              description: Impact description
              type: string
            mitigation:
              description: Mitigation plan
              type: string
            project:
              description: Associated project
              type: string
            severity:
              description: Severity level
              enum:
              - high
              - medium
              - low
              type: string
            status:
              default: open
              enum:
              - open
              - in-progress
              - resolved
              type: string
            title:
              description: Constraint title
              type: string
            type:
              description: Constraint type
              enum:
              - resource
              - material
              - weather
              - regulatory
              - design
              type: string
          required:
          - title
          - project
          - type
          - severity
          - impact
          - dueDate
          type: object
      responses:
        201:
          description: Project constraint created successfully
          schema:
            properties:
              id:
                type: string
              message:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create project constraint
      tags:
      - Scheduling
  /v2/workspaces/{workspaceId}/hz-scheduling-constraints/{constraintId}:
    get:
      description: Retrieve a specific project constraint by its unique identifier
      operationId: v2_getProjectConstraintById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project constraint unique identifier
        in: path
        name: constraintId
        required: true
        type: string
      responses:
        200:
          description: Project constraint details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Project constraint not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get project constraint by ID
      tags:
      - Scheduling
    put:
      description: Update an existing project constraint
      operationId: v2_updateProjectConstraint
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project constraint unique identifier
        in: path
        name: constraintId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated project constraint
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Project constraint not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update project constraint
      tags:
      - Scheduling
  /v2/workspaces/{workspaceId}/hz-scheduling-construction-programme:
    get:
      description: Retrieve construction programme with Gantt chart data and timeline
        information
      operationId: v2_getConstructionProgramme
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by project ID
        in: query
        name: projectId
        required: false
        type: string
      - default: week
        description: Programme view mode
        enum:
        - day
        - week
        - month
        - quarter
        in: query
        name: viewMode
        required: false
        type: string
      responses:
        200:
          description: Construction programme data
          schema:
            properties:
              constraints:
                items:
                  type: object
                type: array
              milestones:
                items:
                  type: object
                type: array
              tasks:
                items:
                  properties:
                    criticalPath:
                      type: boolean
                    dependencies:
                      items:
                        type: string
                      type: array
                    endDate:
                      format: date
                      type: string
                    id:
                      type: string
                    name:
                      type: string
                    progress:
                      format: float
                      type: number
                    resources:
                      items:
                        type: string
                      type: array
                    startDate:
                      format: date
                      type: string
                  type: object
                type: array
            type: object
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get construction programme
      tags:
      - Scheduling
  /v2/workspaces/{workspaceId}/hz-scheduling-critical-path:
    get:
      description: Retrieve critical path analysis data for project schedules
      operationId: v2_getCriticalPathAnalysis
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID for critical path analysis
        in: query
        name: projectId
        required: true
        type: string
      responses:
        200:
          description: Critical path analysis data
          schema:
            properties:
              criticalPathTasks:
                items:
                  type: object
                type: array
              freeFloat:
                format: float
                type: number
              recommendations:
                items:
                  type: object
                type: array
              totalFloat:
                format: float
                type: number
            type: object
        400:
          description: Project ID is required
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get critical path analysis
      tags:
      - Scheduling
  /v2/workspaces/{workspaceId}/hz-scheduling-dashboard:
    get:
      description: Retrieve scheduling dashboard data with KPIs, project schedules,
        milestones, and constraints
      operationId: v2_getSchedulingDashboard
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - default: month
        description: Time filter for dashboard data
        enum:
        - week
        - month
        - quarter
        - year
        in: query
        name: timeFilter
        required: false
        type: string
      - default: overview
        description: Dashboard view mode
        enum:
        - overview
        - gantt
        - calendar
        - resources
        in: query
        name: activeView
        required: false
        type: string
      responses:
        200:
          description: Scheduling dashboard data
          schema:
            properties:
              constraints:
                items:
                  properties:
                    dueDate:
                      format: date
                      type: string
                    id:
                      type: string
                    impact:
                      type: string
                    project:
                      type: string
                    severity:
                      enum:
                      - high
                      - medium
                      - low
                      type: string
                    status:
                      enum:
                      - open
                      - in-progress
                      - resolved
                      type: string
                    title:
                      type: string
                    type:
                      enum:
                      - resource
                      - material
                      - weather
                      - regulatory
                      - design
                      type: string
                  type: object
                type: array
              kpis:
                properties:
                  activeProjects:
                    type: integer
                  criticalConstraints:
                    type: integer
                  onSchedulePercentage:
                    format: float
                    type: number
                  upcomingMilestones:
                    type: integer
                type: object
              milestones:
                items:
                  properties:
                    assignee:
                      type: string
                    dueDate:
                      format: date
                      type: string
                    id:
                      type: string
                    priority:
                      enum:
                      - high
                      - medium
                      - low
                      type: string
                    project:
                      type: string
                    status:
                      enum:
                      - upcoming
                      - due-today
                      - overdue
                      - completed
                      type: string
                    title:
                      type: string
                  type: object
                type: array
              projectSchedules:
                items:
                  properties:
                    criticalPath:
                      type: boolean
                    daysRemaining:
                      type: integer
                    endDate:
                      format: date
                      type: string
                    id:
                      type: string
                    manager:
                      type: string
                    name:
                      type: string
                    progress:
                      format: float
                      type: number
                    startDate:
                      format: date
                      type: string
                    status:
                      enum:
                      - on-track
                      - at-risk
                      - critical
                      - completed
                      type: string
                  type: object
                type: array
            type: object
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get scheduling dashboard
      tags:
      - Scheduling
  /v2/workspaces/{workspaceId}/hz-scheduling-lookahead-planning:
    get:
      description: Retrieve lookahead planning information for upcoming work
      operationId: v2_getLookaheadPlanning
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by project ID
        in: query
        name: projectId
        required: false
        type: string
      - default: 4weeks
        description: Lookahead time horizon
        enum:
        - 1week
        - 2weeks
        - 4weeks
        - 6weeks
        in: query
        name: timeHorizon
        required: false
        type: string
      responses:
        200:
          description: Lookahead planning data
          schema:
            properties:
              constraints:
                items:
                  type: object
                type: array
              readiness:
                items:
                  type: object
                type: array
              resourceRequirements:
                items:
                  type: object
                type: array
              upcomingTasks:
                items:
                  type: object
                type: array
            type: object
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get lookahead planning data
      tags:
      - Scheduling
  /v2/workspaces/{workspaceId}/hz-scheduling-milestones:
    get:
      description: Retrieve project milestones with optional filters and pagination
      operationId: v2_listProjectMilestones
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by milestone status
        enum:
        - upcoming
        - due-today
        - overdue
        - completed
        in: query
        name: status
        required: false
        type: string
      - description: Filter by priority level
        enum:
        - high
        - medium
        - low
        in: query
        name: priority
        required: false
        type: string
      - description: Filter by assignee
        in: query
        name: assignee
        required: false
        type: string
      - description: Filter by project name
        in: query
        name: project
        required: false
        type: string
      - description: Filter by due date from (inclusive)
        format: date
        in: query
        name: dueDateFrom
        required: false
        type: string
      - description: Filter by due date to (inclusive)
        format: date
        in: query
        name: dueDateTo
        required: false
        type: string
      - description: Free text search across milestone details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of project milestones
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              pagination:
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List project milestones
      tags:
      - Scheduling
    post:
      description: Create a new project milestone
      operationId: v2_createProjectMilestone
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assignee:
              description: Assigned person
              type: string
            dependencies:
              description: Dependent milestone IDs
              items:
                type: string
              type: array
            description:
              description: Milestone description
              type: string
            dueDate:
              description: Milestone due date
              format: date
              type: string
            priority:
              default: medium
              description: Priority level
              enum:
              - high
              - medium
              - low
              type: string
            project:
              description: Associated project
              type: string
            status:
              default: upcoming
              enum:
              - upcoming
              - due-today
              - overdue
              - completed
              type: string
            title:
              description: Milestone title
              type: string
          required:
          - title
          - project
          - dueDate
          - assignee
          type: object
      responses:
        201:
          description: Project milestone created successfully
          schema:
            properties:
              id:
                type: string
              message:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create project milestone
      tags:
      - Scheduling
  /v2/workspaces/{workspaceId}/hz-scheduling-milestones/{milestoneId}:
    get:
      description: Retrieve a specific project milestone by its unique identifier
      operationId: v2_getProjectMilestoneById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project milestone unique identifier
        in: path
        name: milestoneId
        required: true
        type: string
      responses:
        200:
          description: Project milestone details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Project milestone not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get project milestone by ID
      tags:
      - Scheduling
    put:
      description: Update an existing project milestone
      operationId: v2_updateProjectMilestone
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project milestone unique identifier
        in: path
        name: milestoneId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated project milestone
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Project milestone not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update project milestone
      tags:
      - Scheduling
  /v2/workspaces/{workspaceId}/hz-scheduling-projects:
    get:
      description: Retrieve project schedules with optional filters and pagination
      operationId: v2_listProjectSchedules
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by project status
        enum:
        - on-track
        - at-risk
        - critical
        - completed
        in: query
        name: status
        required: false
        type: string
      - description: Filter by project manager
        in: query
        name: manager
        required: false
        type: string
      - description: Filter by critical path projects
        in: query
        name: criticalPath
        required: false
        type: boolean
      - description: Filter by start date from (inclusive)
        format: date
        in: query
        name: startDateFrom
        required: false
        type: string
      - description: Filter by start date to (inclusive)
        format: date
        in: query
        name: startDateTo
        required: false
        type: string
      - description: Filter by end date from (inclusive)
        format: date
        in: query
        name: endDateFrom
        required: false
        type: string
      - description: Filter by end date to (inclusive)
        format: date
        in: query
        name: endDateTo
        required: false
        type: string
      - description: Free text search across project details
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of project schedules
          schema:
            properties:
              items:
                items:
                  properties:
                    budget:
                      format: float
                      type: number
                    budgetSpent:
                      format: float
                      type: number
                    criticalPath:
                      type: boolean
                    daysRemaining:
                      type: integer
                    endDate:
                      format: date
                      type: string
                    id:
                      type: string
                    manager:
                      type: string
                    name:
                      type: string
                    progress:
                      format: float
                      type: number
                    startDate:
                      format: date
                      type: string
                    status:
                      type: string
                  type: object
                type: array
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  pages:
                    type: integer
                  total:
                    type: integer
                type: object
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List project schedules
      tags:
      - Scheduling
  /v2/workspaces/{workspaceId}/hz-scheduling-resource-planning:
    get:
      description: Retrieve resource planning and allocation information
      operationId: v2_getResourcePlanning
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by project ID
        in: query
        name: projectId
        required: false
        type: string
      - description: Filter by resource type
        enum:
        - labor
        - equipment
        - material
        in: query
        name: resourceType
        required: false
        type: string
      - description: Planning start date
        format: date
        in: query
        name: startDate
        required: false
        type: string
      - description: Planning end date
        format: date
        in: query
        name: endDate
        required: false
        type: string
      responses:
        200:
          description: Resource planning data
          schema:
            properties:
              conflicts:
                items:
                  type: object
                type: array
              resourceAllocations:
                items:
                  type: object
                type: array
              resourceCapacity:
                items:
                  type: object
                type: array
              utilization:
                type: object
            type: object
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get resource planning data
      tags:
      - Scheduling
  /v2/workspaces/{workspaceId}/hz-tender-documents:
    get:
      operationId: v2_listHzTenderDocuments
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - default: 1
        description: Page number (1-indexed)
        in: query
        name: page
        type: integer
      - default: 50
        description: Items per page (max 100)
        in: query
        name: limit
        type: integer
      responses:
        200:
          description: Tender documents retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    created_at:
                      format: date-time
                      type: string
                    created_by:
                      type: string
                    document_sections:
                      additionalProperties:
                        properties:
                          content:
                            type: string
                          required_fields:
                            items:
                              type: string
                            type: array
                        type: object
                      type: object
                    id:
                      type: string
                    title:
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                    workspace_id:
                      type: string
                  type: object
                type: array
              message:
                type: string
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  total_count:
                    type: integer
                  total_pages:
                    type: integer
                type: object
            type: object
        400:
          description: Bad request
        401:
          description: Unauthorized
        403:
          description: Forbidden - workspace mismatch
      security:
      - JWT_v2: []
      summary: List all tender documents for a workspace
      tags:
      - HzTenderDocuments
    post:
      operationId: v2_createHzTenderDocument
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            document_sections:
              additionalProperties:
                properties:
                  content:
                    description: HTML + CSS content for the section
                    type: string
                  required_fields:
                    description: Array of required field names
                    items:
                      type: string
                    type: array
                required:
                - content
                type: object
              description: Customizable sections with snake_case keys
              type: object
            title:
              description: Name/title of the tender document
              type: string
          required:
          - title
          - document_sections
          type: object
      responses:
        201:
          description: Tender document created successfully
          schema:
            properties:
              data:
                properties:
                  created_at:
                    format: date-time
                    type: string
                  created_by:
                    type: string
                  document_sections:
                    type: object
                  id:
                    type: string
                  title:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  workspace_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - validation failed
        401:
          description: Unauthorized
        403:
          description: Forbidden - workspace mismatch
      security:
      - JWT_v2: []
      summary: Create a new tender document
      tags:
      - HzTenderDocuments
  /v2/workspaces/{workspaceId}/hz-tender-documents/google-docs/auth-url:
    get:
      description: Generate OAuth authorization URL for connecting Google account
        to enable Google Docs integration
      operationId: v2_getGoogleDocsAuthUrl
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Frontend callback URL for OAuth redirect
        in: query
        name: redirect_uri
        required: true
        type: string
      responses:
        200:
          description: Auth URL generated successfully
          schema:
            properties:
              data:
                properties:
                  auth_url:
                    description: Google OAuth authorization URL to redirect user to
                    type: string
                  state:
                    description: CSRF protection state parameter
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - missing redirect_uri
        401:
          description: Unauthorized
      security:
      - JWT_v2: []
      summary: Get Google OAuth authorization URL
      tags:
      - HzTenderDocuments
  /v2/workspaces/{workspaceId}/hz-tender-documents/google-docs/callback:
    post:
      description: Exchange authorization code for access tokens and save to Firestore
      operationId: v2_handleGoogleDocsOAuthCallback
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            code:
              description: Authorization code from Google OAuth redirect
              type: string
            redirect_uri:
              description: Same redirect_uri used in auth URL generation
              type: string
            state:
              description: State parameter for CSRF validation
              type: string
          required:
          - code
          - redirect_uri
          - state
          type: object
      responses:
        200:
          description: Connected to Google Docs successfully
          schema:
            properties:
              data:
                properties:
                  connected:
                    type: boolean
                  user_email:
                    description: Connected Google account email
                    format: email
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - missing parameters or invalid state
        401:
          description: Unauthorized
        500:
          description: Failed to exchange code for tokens
      security:
      - JWT_v2: []
      summary: Handle Google OAuth callback
      tags:
      - HzTenderDocuments
  /v2/workspaces/{workspaceId}/hz-tender-documents/google-docs/create:
    post:
      description: Create a new Google Doc with pre-populated section headings and
        share to user
      operationId: v2_createGoogleDocTenderDocument
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            section_keys:
              description: Array of section keys to include as headings (e.g. ["invitation_to_tender",
                "bill_of_quantities"])
              items:
                type: string
              type: array
            title:
              description: Document title
              type: string
          required:
          - title
          - section_keys
          type: object
      responses:
        201:
          description: Google Doc created successfully
          schema:
            properties:
              data:
                properties:
                  document_id:
                    description: Google Docs document ID
                    type: string
                  edit_url:
                    description: URL to edit the document in Google Docs
                    type: string
                  title:
                    description: Document title
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - missing title or invalid section keys
        401:
          description: Unauthorized or user not connected to Google Docs
        500:
          description: Failed to create Google Doc
      security:
      - JWT_v2: []
      summary: Create tender document in Google Docs
      tags:
      - HzTenderDocuments
  /v2/workspaces/{workspaceId}/hz-tender-documents/google-docs/disconnect:
    delete:
      description: Revoke OAuth tokens and disconnect user's Google account
      operationId: v2_disconnectGoogleDocs
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Disconnected successfully
          schema:
            properties:
              data:
                properties:
                  connected:
                    type: boolean
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Failed to disconnect
      security:
      - JWT_v2: []
      summary: Disconnect Google Docs account
      tags:
      - HzTenderDocuments
  /v2/workspaces/{workspaceId}/hz-tender-documents/google-docs/links:
    get:
      description: Retrieve all saved Google Docs tender document links for workspace
      operationId: v2_listGoogleDocsLinks
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Links retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    created_at:
                      format: date-time
                      type: string
                    created_by:
                      type: string
                    google_document_id:
                      description: Google Docs document ID
                      type: string
                    id:
                      type: string
                    is_deleted:
                      type: boolean
                    name:
                      description: Document name
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                    url:
                      description: Google Docs edit URL
                      type: string
                    workspace_id:
                      type: string
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Failed to retrieve links
      security:
      - JWT_v2: []
      summary: List saved Google Docs links
      tags:
      - HzTenderDocuments
  /v2/workspaces/{workspaceId}/hz-tender-documents/google-docs/links/{linkId}:
    delete:
      description: Soft delete a saved Google Docs link
      operationId: v2_deleteGoogleDocLink
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Link ID
        in: path
        name: linkId
        required: true
        type: string
      responses:
        200:
          description: Link deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden - link does not belong to workspace
        404:
          description: Link not found
        500:
          description: Failed to delete link
      security:
      - JWT_v2: []
      summary: Delete Google Docs link
      tags:
      - HzTenderDocuments
    get:
      description: Retrieve a specific saved Google Docs link by ID
      operationId: v2_getGoogleDocLink
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Link ID
        in: path
        name: linkId
        required: true
        type: string
      responses:
        200:
          description: Link retrieved successfully
          schema:
            properties:
              data:
                properties:
                  created_at:
                    format: date-time
                    type: string
                  created_by:
                    type: string
                  google_document_id:
                    type: string
                  id:
                    type: string
                  is_deleted:
                    type: boolean
                  name:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  url:
                    type: string
                  workspace_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden - link does not belong to workspace
        404:
          description: Link not found or deleted
        500:
          description: Failed to retrieve link
      security:
      - JWT_v2: []
      summary: Get specific Google Docs link
      tags:
      - HzTenderDocuments
  /v2/workspaces/{workspaceId}/hz-tender-documents/google-docs/save-link:
    post:
      description: Save a Google Docs document link (called by Apps Script sidebar)
      operationId: v2_saveGoogleDocLink
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            document_id:
              description: Google Docs document ID (optional)
              type: string
            name:
              description: Document name
              type: string
            url:
              description: Google Docs edit URL
              type: string
          required:
          - name
          - url
          type: object
      responses:
        201:
          description: Link saved successfully
          schema:
            properties:
              data:
                properties:
                  created_at:
                    format: date-time
                    type: string
                  created_by:
                    type: string
                  google_document_id:
                    type: string
                  id:
                    type: string
                  is_deleted:
                    type: boolean
                  name:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  url:
                    type: string
                  workspace_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - missing name or url, or invalid URL format
        401:
          description: Unauthorized
        500:
          description: Failed to save link
      security:
      - JWT_v2: []
      summary: Save Google Docs link
      tags:
      - HzTenderDocuments
  /v2/workspaces/{workspaceId}/hz-tender-documents/google-docs/status:
    get:
      description: Check if user has connected their Google account for Docs integration
      operationId: v2_getGoogleDocsConnectionStatus
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Connection status retrieved
          schema:
            properties:
              data:
                properties:
                  connected:
                    description: Whether user has connected Google account
                    type: boolean
                  user_email:
                    description: Connected Google account email (only if connected)
                    format: email
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
      security:
      - JWT_v2: []
      summary: Get Google Docs connection status
      tags:
      - HzTenderDocuments
  /v2/workspaces/{workspaceId}/hz-tender-documents/google-docs/variables:
    get:
      description: Retrieve template variables for insertion via Google Docs Apps
        Script sidebar
      operationId: v2_getGoogleDocsTemplateVariables
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Template variables retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    description:
                      description: Variable group description
                      type: string
                    id:
                      description: Variable group ID
                      type: string
                    name:
                      description: Variable group name
                      type: string
                    variables:
                      items:
                        properties:
                          description:
                            description: Variable description
                            type: string
                          example:
                            description: Example value
                            type: string
                          id:
                            description: Variable ID
                            type: string
                          key:
                            description: Variable key for ${key} substitution
                            type: string
                          name:
                            description: Variable display name
                            type: string
                        type: object
                      type: array
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Failed to retrieve variables
      security:
      - JWT_v2: []
      summary: Get template variables for Apps Script
      tags:
      - HzTenderDocuments
  /v2/workspaces/{workspaceId}/hz-tender-documents/send:
    post:
      description: Queue tender document email for sending via user's connected email
        provider (Gmail/Outlook) with PDF attachment
      operationId: v2_sendHzTenderDocument
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            bcc_recipients:
              description: List of BCC recipients (optional)
              items:
                properties:
                  email:
                    format: email
                    type: string
                  name:
                    type: string
                required:
                - email
                type: object
              type: array
            cc_recipients:
              description: List of CC recipients (optional)
              items:
                properties:
                  email:
                    format: email
                    type: string
                  name:
                    type: string
                required:
                - email
                type: object
              type: array
            email_body_html:
              description: HTML body content for the email
              type: string
            email_subject:
              description: Subject line for the email
              type: string
            pdf_filename:
              description: Filename for the PDF attachment
              type: string
            template_variables:
              additionalProperties:
                type: string
              description: Optional variables to substitute in document content (e.g.
                ${project_name} -> "ABC Building")
              type: object
            tender_document_id:
              description: ID of the tender document to send
              type: string
            to_recipients:
              description: List of primary recipients
              items:
                properties:
                  email:
                    format: email
                    type: string
                  name:
                    type: string
                required:
                - email
                type: object
              type: array
          required:
          - tender_document_id
          - to_recipients
          - email_subject
          - email_body_html
          - pdf_filename
          type: object
      responses:
        201:
          description: Tender document email queued successfully
          schema:
            properties:
              data:
                properties:
                  created_at:
                    format: date-time
                    type: string
                  queue_id:
                    description: ID of the queue item
                    type: string
                  recipient_count:
                    properties:
                      bcc:
                        type: integer
                      cc:
                        type: integer
                      to:
                        type: integer
                      total:
                        type: integer
                    type: object
                  status:
                    enum:
                    - pending
                    - processing
                    - sent
                    - failed
                    type: string
                  tender_document_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - validation failed or email integration required
          schema:
            properties:
              error:
                type: string
              errors:
                items:
                  type: string
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden - workspace mismatch
        404:
          description: Tender document not found
      security:
      - JWT_v2: []
      summary: Send tender document via email with PDF attachment
      tags:
      - HzTenderDocuments
  /v2/workspaces/{workspaceId}/hz-tender-documents/{documentId}:
    delete:
      operationId: v2_deleteHzTenderDocument
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Document ID
        in: path
        name: documentId
        required: true
        type: string
      responses:
        200:
          description: Tender document deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        400:
          description: Bad request
        401:
          description: Unauthorized
        403:
          description: Forbidden - workspace mismatch
        404:
          description: Document not found or unauthorized
      security:
      - JWT_v2: []
      summary: Delete a tender document (soft delete)
      tags:
      - HzTenderDocuments
    get:
      operationId: v2_getHzTenderDocument
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Document ID
        in: path
        name: documentId
        required: true
        type: string
      responses:
        200:
          description: Tender document retrieved successfully
          schema:
            properties:
              data:
                properties:
                  created_at:
                    format: date-time
                    type: string
                  created_by:
                    type: string
                  document_sections:
                    additionalProperties:
                      properties:
                        content:
                          type: string
                        required_fields:
                          items:
                            type: string
                          type: array
                      type: object
                    type: object
                  id:
                    type: string
                  title:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  workspace_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request
        401:
          description: Unauthorized
        403:
          description: Forbidden - workspace mismatch
        404:
          description: Document not found
      security:
      - JWT_v2: []
      summary: Get a specific tender document
      tags:
      - HzTenderDocuments
    put:
      operationId: v2_updateHzTenderDocument
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Document ID
        in: path
        name: documentId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            document_sections:
              additionalProperties:
                properties:
                  content:
                    description: HTML + CSS content for the section
                    type: string
                  required_fields:
                    description: Array of required field names
                    items:
                      type: string
                    type: array
                required:
                - content
                type: object
              description: Customizable sections with snake_case keys
              type: object
            title:
              description: Name/title of the tender document
              type: string
          type: object
      responses:
        200:
          description: Tender document updated successfully
          schema:
            properties:
              data:
                properties:
                  created_at:
                    format: date-time
                    type: string
                  created_by:
                    type: string
                  document_sections:
                    type: object
                  id:
                    type: string
                  title:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  workspace_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - validation failed
        401:
          description: Unauthorized
        403:
          description: Forbidden - workspace mismatch or unauthorized
        404:
          description: Document not found
      security:
      - JWT_v2: []
      summary: Update a tender document
      tags:
      - HzTenderDocuments
  /v2/workspaces/{workspaceId}/implementation:
    get:
      operationId: v2_getWorkspaceImplementationChecklist
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                check_name:
                  description: Name of implementation check
                check_result:
                  description: Yes/No result if check passed
                check_workload:
                  description: Implementation Workload (eg. BIM, Material Tracking...)
                first_metric:
                  description: Text describing a metric related to the check (eg.
                    There were 10 Required Parameters found)
                help_link:
                  description: Link to Deep Space knowledgebase for the check
                help_text:
                  description: Help text for the check
                scope:
                  description: Implementation Scope (eg. Workspace)
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Workspace Implementation Checklist
      tags:
      - implementation
    post:
      consumes:
      - application/json
      operationId: v2_createImplementationCheck
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            check_name:
              description: Human-readable check name
              type: string
            check_query:
              description: SQL query with {project_id} placeholder
              type: string
            check_workload:
              description: Workload identifier
              type: string
            first_metric_name:
              description: Name of first metric
              type: string
            help_link:
              description: Link to documentation
              type: string
            negative_text_feedback:
              description: Feedback when check fails
              type: string
            order_field:
              description: Display order
              type: integer
            positive_text_feedback:
              description: Feedback when check passes
              type: string
            scope:
              description: Scope (ProjectConfig, WorkspaceConfig, etc)
              type: string
          required:
          - scope
          - check_workload
          - check_name
          - check_query
          - positive_text_feedback
          - negative_text_feedback
          type: object
      responses:
        201:
          description: Implementation check created
          schema:
            properties:
              id_implementation_checks:
                type: integer
              message:
                type: string
              success:
                type: boolean
            type: object
        403:
          description: Missing or invalid admin password header
        500:
          description: Internal Server Error
      summary: Create New Implementation Check
      tags:
      - implementation
  /v2/workspaces/{workspaceId}/integrations:
    get:
      operationId: v2_getWorkspaceIntegrations
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get workspace integrations
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/integrations/activity-log:
    get:
      operationId: v2_getWorkspaceIntegrationsActivityLog
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        name: page
        required: false
        type: integer
      - default: 50
        description: Number of records per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      - description: Filter by sync type (e.g., contacts, invoices_to_client, purchase_orders)
        in: query
        name: sync_type
        required: false
        type: string
      - description: Filter by activity type (e.g., sync, refresh_token)
        in: query
        name: activity_type
        required: false
        type: string
      - description: Filter by user ID who performed the action
        in: query
        name: user_id
        required: false
        type: string
      - description: Filter by success status (true/false)
        in: query
        name: success
        required: false
        type: boolean
      responses:
        200:
          description: Successfully retrieved integration activity log
          schema:
            properties:
              items:
                items:
                  properties:
                    activity_type:
                      description: Type of activity (e.g., sync, refresh_token)
                      type: string
                    created_at:
                      description: When the record was created
                      format: date-time
                      type: string
                    error_message:
                      description: Error message if operation failed
                      type: string
                    id:
                      description: Activity log entry ID
                      type: string
                    id_integrations_config:
                      description: Integration config ID
                      type: integer
                    integration_id:
                      description: Integration ID (e.g., xero)
                      type: string
                    status_code:
                      description: HTTP status code or result code
                      type: integer
                    success:
                      description: Whether the operation was successful
                      type: boolean
                    sync_type:
                      description: Type of sync (e.g., contacts, invoices_to_client)
                      type: string
                    synced_at:
                      description: When the activity occurred
                      format: date-time
                      type: string
                    user_id:
                      description: ID of user who performed the action
                      type: string
                  type: object
                type: array
              limit:
                description: Records per page
                type: integer
              page:
                description: Current page number
                type: integer
              total:
                description: Total number of records
                type: integer
            type: object
        400:
          description: Invalid parameters
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get integration activity log for all integrations in a workspace
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/integrations/{integrationId}:
    get:
      operationId: v2_getWorkspaceIntegrationFields
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get mapping fields for an integration
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
    patch:
      operationId: v2_patchWorkspaceIntegration
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: integrationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            mappingFieldValue1:
              description: The first mapping field value
              type: string
            mappingFieldValue2:
              description: The first mapping field value
              type: string
          required:
          - mappingFieldValue1
          - mappingFieldValue2
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update an integration configuration in a workspace
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
    post:
      operationId: v2_postWorkspaceIntegration
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: integrationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          description: json object containing configuration values, differs depending
            on integration
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Configure an integration in a workspace
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/integrations/{integrationId}/activity-log:
    get:
      operationId: v2_getWorkspaceIntegrationActivityLog
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: integrationId
        required: true
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        name: page
        required: false
        type: integer
      - default: 50
        description: Number of records per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      - description: Filter by sync type (e.g., contacts, invoices_to_client, purchase_orders)
        in: query
        name: sync_type
        required: false
        type: string
      - description: Filter by activity type (e.g., sync, refresh_token)
        in: query
        name: activity_type
        required: false
        type: string
      - description: Filter by user ID who performed the action
        in: query
        name: user_id
        required: false
        type: string
      - description: Filter by success status (true/false)
        in: query
        name: success
        required: false
        type: boolean
      responses:
        200:
          description: Successfully retrieved integration activity log
          schema:
            properties:
              items:
                items:
                  properties:
                    activity_type:
                      description: Type of activity (e.g., sync, refresh_token)
                      type: string
                    created_at:
                      description: When the record was created
                      format: date-time
                      type: string
                    error_message:
                      description: Error message if operation failed
                      type: string
                    id:
                      description: Activity log entry ID
                      type: string
                    id_integrations_config:
                      description: Integration config ID
                      type: integer
                    integration_id:
                      description: Integration ID (e.g., xero)
                      type: string
                    status_code:
                      description: HTTP status code or result code
                      type: integer
                    success:
                      description: Whether the operation was successful
                      type: boolean
                    sync_type:
                      description: Type of sync (e.g., contacts, invoices_to_client)
                      type: string
                    synced_at:
                      description: When the activity occurred
                      format: date-time
                      type: string
                    user_id:
                      description: ID of user who performed the action
                      type: string
                  type: object
                type: array
              limit:
                description: Records per page
                type: integer
              page:
                description: Current page number
                type: integer
              total:
                description: Total number of records
                type: integer
            type: object
        400:
          description: Invalid parameters
        401:
          description: Unauthorized
        404:
          description: Integration not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get integration activity log for a specific integration in a workspace
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/integrations/{integrationId}/advanced-config:
    delete:
      operationId: v2_deleteWorkspaceIntegrationAdvancedConfig
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Integration successfully disconnected and configuration deleted
        401:
          description: Unauthorized
        404:
          description: Advanced configuration not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete advanced configuration and disconnect integration in a workspace
      tags:
      - External Integrations
    get:
      operationId: v2_getWorkspaceIntegrationAdvancedConfig
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get advanced configuration for an integration in a workspace
      tags:
      - External Integrations
    patch:
      operationId: v2_patchWorkspaceIntegrationAdvancedConfig
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: integrationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          description: json object containing advanced configuration values, differs
            depending on integration
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update advanced configuration for an integration in a workspace
      tags:
      - External Integrations
    post:
      operationId: v2_postWorkspaceIntegrationAdvancedConfig
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: integrationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          description: json object containing advanced configuration values, differs
            depending on integration
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create advanced configuration for an integration in a workspace
      tags:
      - External Integrations
  /v2/workspaces/{workspaceId}/integrations/{integrationId}/advanced-config/mapping:
    get:
      operationId: v2_getWorkspaceIntegrationAdvancedConfigMapping
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Successfully retrieved mapping data from external provider
          schema:
            properties:
              accounts:
                description: Chart of Accounts from external provider
                type: array
              tracking_categories:
                description: Tracking Categories from external provider
                type: array
            type: object
        401:
          description: Unauthorized
        404:
          description: Integration not found or not configured
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get mapping data (Chart of Accounts and Tracking Categories) for advanced
        config setup
      tags:
      - External Integrations
  /v2/workspaces/{workspaceId}/integrations/{integrationId}/refresh:
    post:
      operationId: v2_postWorkspaceIntegrationRefresh
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Refresh access token for an integration in a workspace
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/integrations/{integrationId}/sync:
    post:
      operationId: v2_postWorkspaceIntegrationSync
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Sync data for an integration in a workspace
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/integrations/{integrationId}/webhook:
    post:
      operationId: v2_postWorkspaceIntegrationWebhook
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      summary: Webhook endpoint for a workspace-level integration
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/jobs/{job_id}:
    post:
      operationId: v2_startJobWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: job_id
        required: true
        type: integer
      responses:
        202:
          description: Job started, returns job guid
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Start a new job at workpace-level
      tags:
      - Jobs
  /v2/workspaces/{workspaceId}/labour-rates:
    delete:
      description: Soft delete labour rate (sets is_deleted flag)
      operationId: v2_deleteLabourRate
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Labour rate ID to delete
        in: query
        name: id
        required: true
        type: string
      responses:
        200:
          description: Labour rate deleted successfully
          schema:
            properties:
              id:
                type: string
              message:
                example: Labour rate deleted successfully
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Missing ID parameter
        404:
          description: Labour rate not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete labour rate
      tags:
      - LabourRates
    get:
      description: Retrieve labour rates with filtering and pagination support
      operationId: v2_getLabourRates
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Get specific labour rate by ID
        in: query
        name: id
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 20
        description: Number of items per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      - description: Filter by level
        in: query
        name: level
        required: false
        type: string
      - description: Filter by role
        in: query
        name: role
        required: false
        type: string
      - description: Filter by award_id
        in: query
        name: award_id
        required: false
        type: string
      - description: Filter by sales_tax_code
        in: query
        name: sales_tax_code
        required: false
        type: string
      - description: Search by name
        in: query
        name: search
        required: false
        type: string
      responses:
        200:
          description: Labour rates retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    award_id:
                      type: string
                    cost_rate:
                      format: float
                      type: number
                    created_at:
                      format: date-time
                      type: string
                    effective_date:
                      format: date
                      type: string
                    id:
                      type: string
                    level:
                      type: string
                    multiplier:
                      format: float
                      type: number
                    name:
                      type: string
                    role:
                      type: string
                    sales_tax_code:
                      type: string
                    sell_rate:
                      format: float
                      type: number
                    updated_at:
                      format: date-time
                      type: string
                  type: object
                type: array
              filters:
                type: object
              message:
                example: Labour rates retrieved successfully
                type: string
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  total_count:
                    type: integer
                  total_pages:
                    type: integer
                type: object
            type: object
        400:
          description: Invalid request parameters
        404:
          description: Labour rate not found (when querying by ID)
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get labour rates
      tags:
      - LabourRates
    patch:
      description: Update existing labour rate with partial data
      operationId: v2_updateLabourRate
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Labour rate ID to update
        in: query
        name: id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            award_id:
              maxLength: 50
              type: string
            cost_rate:
              format: float
              maximum: 10000
              minimum: 0
              type: number
            effective_date:
              format: date
              type: string
            level:
              maxLength: 100
              type: string
            multiplier:
              format: float
              maximum: 100
              minimum: 0
              type: number
            name:
              maxLength: 200
              type: string
            role:
              maxLength: 100
              type: string
            sales_tax_code:
              maxLength: 20
              type: string
            sell_rate:
              format: float
              maximum: 10000
              minimum: 0
              type: number
          type: object
      responses:
        200:
          description: Labour rate updated successfully
          schema:
            properties:
              id:
                type: string
              message:
                example: Labour rate updated successfully
                type: string
              updated_fields:
                items:
                  type: string
                type: array
              warnings:
                items:
                  type: string
                type: array
              workspace_id:
                type: string
            type: object
        400:
          description: Validation failed or missing ID parameter
        404:
          description: Labour rate not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update labour rate
      tags:
      - LabourRates
    post:
      description: Create new labour rate with all required fields
      operationId: v2_createLabourRate
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            award_id:
              description: Award identification code
              maxLength: 50
              type: string
            cost_rate:
              description: Cost rate per hour/unit
              format: float
              maximum: 10000
              minimum: 0
              type: number
            effective_date:
              description: Date when the rate becomes effective (YYYY-MM-DD)
              format: date
              type: string
            level:
              description: Labour level (e.g., Junior, Senior, Lead)
              maxLength: 100
              type: string
            multiplier:
              description: Multiplier to calculate sell rate
              format: float
              maximum: 100
              minimum: 0
              type: number
            name:
              description: Descriptive name for the labour rate
              maxLength: 200
              type: string
            role:
              description: Job role (e.g., Developer, Manager, Designer)
              maxLength: 100
              type: string
            sales_tax_code:
              description: Tax code for billing (e.g., GST, VAT)
              maxLength: 20
              type: string
            sell_rate:
              description: Selling rate per hour/unit
              format: float
              maximum: 10000
              minimum: 0
              type: number
          required:
          - level
          - role
          - award_id
          - cost_rate
          - effective_date
          - multiplier
          - name
          - sales_tax_code
          - sell_rate
          type: object
      responses:
        201:
          description: Labour rate created successfully
          schema:
            properties:
              id:
                type: string
              message:
                example: Labour rates created successfully
                type: string
              warnings:
                items:
                  type: string
                type: array
              workspace_id:
                type: string
            type: object
        400:
          description: Validation failed or missing required fields
          schema:
            properties:
              errors:
                items:
                  type: string
                type: array
              message:
                type: string
              received_fields:
                items:
                  type: string
                type: array
              required_fields:
                items:
                  type: string
                type: array
            type: object
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create labour rate
      tags:
      - LabourRates
  /v2/workspaces/{workspaceId}/labour-rates/allowances:
    delete:
      description: Soft delete labour rate allowance
      operationId: v2_deleteLabourRateAllowance
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Allowance ID to delete
        in: query
        name: id
        required: true
        type: string
      responses:
        200:
          description: Labour rate allowance deleted successfully
          schema:
            properties:
              id:
                type: string
              message:
                example: Labour rate allowance deleted successfully
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Missing ID parameter
        404:
          description: Allowance not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete labour rate allowance
      tags:
      - LabourRates
    get:
      description: Retrieve labour rate allowances with filtering and pagination support
      operationId: v2_getLabourRateAllowances
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Get specific allowance by ID
        in: query
        name: id
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 20
        description: Number of items per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      - description: Filter by labour rate ID
        in: query
        name: labour_rate_id
        required: false
        type: string
      - description: Filter by name
        in: query
        name: name
        required: false
        type: string
      - description: Filter by trigger
        in: query
        name: trigger
        required: false
        type: string
      - description: Filter by stackable status
        in: query
        name: is_stackable
        required: false
        type: boolean
      - description: Filter by minimum amount
        format: float
        in: query
        name: min_amount
        required: false
        type: number
      - description: Filter by maximum amount
        format: float
        in: query
        name: max_amount
        required: false
        type: number
      - description: Search by name
        in: query
        name: search
        required: false
        type: string
      responses:
        200:
          description: Labour rate allowances retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    amount:
                      format: float
                      type: number
                    created_at:
                      format: date-time
                      type: string
                    id:
                      type: string
                    is_stackable:
                      type: boolean
                    labour_rate_id:
                      type: string
                    name:
                      type: string
                    trigger:
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                  type: object
                type: array
              filters:
                type: object
              message:
                example: Labour rate allowances retrieved successfully
                type: string
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  total_count:
                    type: integer
                  total_pages:
                    type: integer
                type: object
            type: object
        400:
          description: Invalid request parameters
        404:
          description: Allowance not found (when querying by ID)
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get labour rate allowances
      tags:
      - LabourRates
    patch:
      description: Update existing labour rate allowance
      operationId: v2_updateLabourRateAllowance
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Allowance ID to update
        in: query
        name: id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              format: float
              maximum: 10000
              minimum: 0
              type: number
            is_stackable:
              type: boolean
            labour_rate_id:
              maxLength: 100
              type: string
            name:
              maxLength: 200
              type: string
            trigger:
              maxLength: 500
              type: string
          type: object
      responses:
        200:
          description: Labour rate allowance updated successfully
          schema:
            properties:
              id:
                type: string
              message:
                example: Labour rate allowance updated successfully
                type: string
              updated_fields:
                items:
                  type: string
                type: array
              workspace_id:
                type: string
            type: object
        400:
          description: Validation failed or missing ID parameter
        404:
          description: Allowance not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update labour rate allowance
      tags:
      - LabourRates
    post:
      description: Create new labour rate allowance
      operationId: v2_createLabourRateAllowance
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Allowance amount
              format: float
              maximum: 10000
              minimum: 0
              type: number
            is_stackable:
              description: Whether allowance can stack with others
              type: boolean
            labour_rate_id:
              description: ID of the associated labour rate
              maxLength: 100
              type: string
            name:
              description: Allowance name
              maxLength: 200
              type: string
            trigger:
              description: When allowance is triggered
              maxLength: 500
              type: string
          required:
          - labour_rate_id
          - name
          - amount
          - trigger
          - is_stackable
          type: object
      responses:
        201:
          description: Labour rate allowance created successfully
          schema:
            properties:
              id:
                type: string
              message:
                example: Labour rate allowance created successfully
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Validation failed or missing required fields
          schema:
            properties:
              errors:
                items:
                  type: string
                type: array
              message:
                type: string
            type: object
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create labour rate allowance
      tags:
      - LabourRates
  /v2/workspaces/{workspaceId}/labour-rates/award:
    delete:
      description: Soft delete labour rate award
      operationId: v2_deleteLabourRateAward
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Award ID to delete
        in: query
        name: id
        required: true
        type: string
      responses:
        200:
          description: Labour rate award deleted successfully
          schema:
            properties:
              id:
                type: string
              message:
                example: Labour rate award deleted successfully
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Missing ID parameter
        404:
          description: Award not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete labour rate award
      tags:
      - LabourRates
    get:
      description: Retrieve labour rate awards with filtering and pagination support
      operationId: v2_getLabourRateAwards
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Get specific award by ID
        in: query
        name: id
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 20
        description: Number of items per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      - description: Filter by name
        in: query
        name: name
        required: false
        type: string
      - description: Filter by code
        in: query
        name: code
        required: false
        type: string
      - description: Search by name
        in: query
        name: search
        required: false
        type: string
      responses:
        200:
          description: Labour rate awards retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    code:
                      type: string
                    created_at:
                      format: date-time
                      type: string
                    id:
                      type: string
                    name:
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                  type: object
                type: array
              filters:
                type: object
              message:
                example: Labour rate awards retrieved successfully
                type: string
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  total_count:
                    type: integer
                  total_pages:
                    type: integer
                type: object
            type: object
        400:
          description: Invalid request parameters
        404:
          description: Award not found (when querying by ID)
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get labour rate awards
      tags:
      - LabourRates
    patch:
      description: Update existing labour rate award
      operationId: v2_updateLabourRateAward
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Award ID to update
        in: query
        name: id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            code:
              maxLength: 50
              type: string
            name:
              maxLength: 200
              type: string
          type: object
      responses:
        200:
          description: Labour rate award updated successfully
          schema:
            properties:
              id:
                type: string
              message:
                example: Labour rate award updated successfully
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Validation failed or missing ID parameter
        404:
          description: Award not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update labour rate award
      tags:
      - LabourRates
    post:
      description: Create new labour rate award
      operationId: v2_createLabourRateAward
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            code:
              description: Award code
              maxLength: 50
              type: string
            name:
              description: Award name
              maxLength: 200
              type: string
          required:
          - name
          - code
          type: object
      responses:
        201:
          description: Labour rate award created successfully
          schema:
            properties:
              id:
                type: string
              message:
                example: Labour rate award created successfully
                type: string
              warnings:
                items:
                  type: string
                type: array
              workspace_id:
                type: string
            type: object
        400:
          description: Validation failed or missing required fields
          schema:
            properties:
              errors:
                items:
                  type: string
                type: array
              message:
                type: string
            type: object
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create labour rate award
      tags:
      - LabourRates
  /v2/workspaces/{workspaceId}/labour-rates/project-overrides:
    delete:
      description: Soft delete labour rate project override
      operationId: v2_deleteLabourRateProjectOverride
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Project override ID to delete
        in: query
        name: id
        required: true
        type: string
      responses:
        200:
          description: Labour rate project override deleted successfully
          schema:
            properties:
              id:
                type: string
              message:
                example: Labour rate project override deleted successfully
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Missing ID parameter
        404:
          description: Project override not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete labour rate project override
      tags:
      - LabourRates
    get:
      description: Retrieve labour rate project overrides with filtering and pagination
        support
      operationId: v2_getLabourRateProjectOverrides
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Get specific project override by ID
        in: query
        name: id
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 20
        description: Number of items per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      - description: Filter by labour rate ID
        in: query
        name: labour_rate_id
        required: false
        type: string
      - description: Filter by project ID
        in: query
        name: project_id
        required: false
        type: integer
      - description: Filter by reason
        in: query
        name: reason
        required: false
        type: string
      - description: Filter by minimum override rate
        format: float
        in: query
        name: min_override_rate
        required: false
        type: number
      - description: Filter by maximum override rate
        format: float
        in: query
        name: max_override_rate
        required: false
        type: number
      - description: Search by reason
        in: query
        name: search
        required: false
        type: string
      responses:
        200:
          description: Labour rate project overrides retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    created_at:
                      format: date-time
                      type: string
                    id:
                      type: string
                    labour_rate_id:
                      type: string
                    override_rate:
                      format: float
                      type: number
                    project_id:
                      type: integer
                    reason:
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                  type: object
                type: array
              filters:
                type: object
              message:
                example: Labour rate project overrides retrieved successfully
                type: string
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  total_count:
                    type: integer
                  total_pages:
                    type: integer
                type: object
            type: object
        400:
          description: Invalid request parameters
        404:
          description: Project override not found (when querying by ID)
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get labour rate project overrides
      tags:
      - LabourRates
    patch:
      description: Update existing labour rate project override
      operationId: v2_updateLabourRateProjectOverride
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Project override ID to update
        in: query
        name: id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            labour_rate_id:
              maxLength: 100
              type: string
            override_rate:
              format: float
              maximum: 10000
              minimum: 0
              type: number
            project_id:
              minimum: 1
              type: integer
            reason:
              maxLength: 500
              type: string
          type: object
      responses:
        200:
          description: Labour rate project override updated successfully
          schema:
            properties:
              id:
                type: string
              message:
                example: Labour rate project override updated successfully
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Validation failed or missing ID parameter
        404:
          description: Project override not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update labour rate project override
      tags:
      - LabourRates
    post:
      description: Create new labour rate project override
      operationId: v2_createLabourRateProjectOverride
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            labour_rate_id:
              description: ID of the labour rate being overridden
              maxLength: 100
              type: string
            override_rate:
              description: Override rate value
              format: float
              maximum: 10000
              minimum: 0
              type: number
            project_id:
              description: Project ID for this override
              minimum: 1
              type: integer
            reason:
              description: Reason for the override
              maxLength: 500
              type: string
          required:
          - labour_rate_id
          - override_rate
          - project_id
          - reason
          type: object
      responses:
        201:
          description: Labour rate project override created successfully
          schema:
            properties:
              id:
                type: string
              message:
                example: Labour rate project override created successfully
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Validation failed or missing required fields
          schema:
            properties:
              errors:
                items:
                  type: string
                type: array
              message:
                type: string
            type: object
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create labour rate project override
      tags:
      - LabourRates
  /v2/workspaces/{workspaceId}/markups:
    get:
      description: Retrieve markups with filtering, pagination, and sorting options
      operationId: v2_getWorkspaceMarkups
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by CDE document ID
        in: query
        name: cde_id
        required: false
        type: integer
      - description: Filter by CDE version ID
        in: query
        name: cde_version_id
        required: false
        type: integer
      - description: Filter by author/user ID (for "My Markups")
        in: query
        name: author_kinde_id
        required: false
        type: string
      - description: Filter by PDF page number
        in: query
        minimum: 1
        name: page_number
        required: false
        type: integer
      - description: Filter by markup type (comma-separated list)
        in: query
        name: markup_type
        required: false
        type: string
      - description: Filter by workflow context
        in: query
        name: workflow_context
        required: false
        type: string
      - description: Version filtering option (this_version, all)
        in: query
        name: version_filter
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 10
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of markups
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get markups with optional filters
      tags:
      - Markup
    post:
      description: Create a new markup with CDE ID specified in request body
      operationId: v2_createWorkspaceMarkup
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_id:
              description: CDE document ID
              type: integer
            cde_version_id:
              description: CDE version ID this markup applies to
              type: integer
            geometry:
              description: GeoJSON geometry object
              type: object
            markup_type:
              description: Type of markup shape
              enum:
              - polygon
              - line
              - text
              - rectangle
              - point
              type: string
            pdf_page_number:
              description: Page number within the PDF (1-based)
              minimum: 1
              type: integer
            properties:
              description: Markup properties and metadata
              type: object
            workflow_context:
              default: pdf_review
              description: Workflow context
              type: string
          required:
          - cde_id
          - pdf_page_number
          - geometry
          - markup_type
          - properties
          - cde_version_id
          type: object
      responses:
        201:
          description: Markup created successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create markup with CDE ID in body
      tags:
      - Markup
  /v2/workspaces/{workspaceId}/markups/{markupId}:
    delete:
      description: Delete a markup (soft delete by default)
      operationId: v2_deleteMarkup
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Markup unique identifier
        in: path
        name: markupId
        required: true
        type: string
      responses:
        200:
          description: Markup deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Markup not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete markup
      tags:
      - Markup
    get:
      description: Retrieve a specific markup by its unique identifier
      operationId: v2_getMarkupById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Markup unique identifier
        in: path
        name: markupId
        required: true
        type: string
      responses:
        200:
          description: Markup details
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Markup not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get markup by ID
      tags:
      - Markup
    put:
      description: Update an existing markup's properties, geometry, or metadata
      operationId: v2_updateMarkup
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Markup unique identifier
        in: path
        name: markupId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            geometry:
              description: GeoJSON geometry object
              type: object
            markup_type:
              description: Type of markup shape
              enum:
              - polygon
              - line
              - text
              - rectangle
              - point
              type: string
            pdf_page_number:
              description: Page number within the PDF (1-based)
              minimum: 1
              type: integer
            properties:
              description: Markup properties and metadata
              type: object
            workflow_context:
              description: Workflow context
              type: string
          type: object
      responses:
        200:
          description: Updated markup
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Markup not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update markup
      tags:
      - Markup
  /v2/workspaces/{workspaceId}/menu:
    get:
      description: Returns the menu structure for a workspace based on the workspace's
        template
      operationId: v2_getMenuWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Menu structure for the workspace
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get menu structure for a workspace
      tags:
      - Info
  /v2/workspaces/{workspaceId}/menu-overrides:
    delete:
      description: Remove all menu customisation overrides for a workspace. Requires
        admin permission. Only available for whitelisted workspaces.
      operationId: v2_deleteMenuOverrides
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Menu overrides deleted successfully
        401:
          description: Unauthorized
        403:
          description: Admin permission required or menu customisation not enabled
        404:
          description: No overrides found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete menu overrides for a workspace
      tags:
      - Menu
    get:
      description: Returns the menu customisation overrides (disabled sections and
        apps) for a workspace. Only available for whitelisted workspaces.
      operationId: v2_getMenuOverrides
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Menu overrides for the workspace
        401:
          description: Unauthorized
        403:
          description: Menu customisation not enabled for this workspace
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get menu overrides for a workspace
      tags:
      - Menu
    put:
      description: Create or update menu customisation overrides (disabled sections
        and apps) for a workspace. Requires admin permission. Only available for whitelisted
        workspaces.
      operationId: v2_updateMenuOverrides
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Menu overrides updated successfully
        400:
          description: Invalid request body
        401:
          description: Unauthorized
        403:
          description: Admin permission required or menu customisation not enabled
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update menu overrides for a workspace
      tags:
      - Menu
  /v2/workspaces/{workspaceId}/notifications:
    get:
      operationId: v2_getWorkspaceNotifications
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: User ID to get notifications for (admin only)
        in: query
        name: user_id
        required: false
        type: string
      - default: 50
        description: Number of notifications to return
        in: query
        name: limit
        required: false
        type: integer
      - default: 0
        description: Number of notifications to skip
        in: query
        name: offset
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              limit:
                type: integer
              message:
                type: string
              offset:
                type: integer
              total:
                type: integer
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get workspace-level notifications for the authenticated user
      tags:
      - Notifications
    patch:
      operationId: v2_acknowledgeWorkspaceNotifications
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            notification_ids:
              description: Array of notification IDs to mark as read
              items:
                type: integer
              type: array
          required:
          - notification_ids
          type: object
      responses:
        200:
          description: Notifications acknowledged successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Acknowledge/read workspace-level notifications for the authenticated
        user
      tags:
      - Notifications
    post:
      operationId: v2_createWorkspaceNotification
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            attachments:
              description: Array of CDE IDs to attach
              items:
                type: string
              type: array
            email:
              default: true
              description: Whether to send via email
              type: boolean
            importance:
              default: notification
              description: Importance level of the notification
              enum:
              - notification
              - warning
              - alert
              type: string
            inApp:
              default: true
              description: Whether to send in-app notification
              type: boolean
            jsonFields:
              description: JSON fields to populate the template
              type: object
            notificationTemplateId:
              description: ID of the notification template to use
              type: string
            recipients:
              properties:
                bcc:
                  description: Blind carbon copy recipients
                  items:
                    type: string
                  type: array
                cc:
                  description: Carbon copy recipients
                  items:
                    type: string
                  type: array
                to:
                  description: Primary recipients
                  items:
                    type: string
                  type: array
              required:
              - to
              type: object
            scheduledToSendDate:
              description: When to send the notification (optional)
              format: date-time
              type: string
          required:
          - notificationTemplateId
          - recipients
          type: object
      responses:
        201:
          description: Notification created successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        403:
          description: Forbidden (admin access required)
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a workspace-level notification (admin only)
      tags:
      - Notifications
  /v2/workspaces/{workspaceId}/opportunities:
    get:
      description: Retrieve opportunities for a workspace with optional filters and
        pagination
      operationId: v2_listOpportunities
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by status
        in: query
        name: status
        required: false
        type: string
      - description: Filter by client identifier
        in: query
        name: client_id
        required: false
        type: string
      - description: Filter by project type
        in: query
        name: project_type
        required: false
        type: string
      - description: Filter by priority (High, Medium, Low)
        enum:
        - High
        - Medium
        - Low
        in: query
        name: priority
        required: false
        type: string
      - description: Filter by opportunity source
        in: query
        name: opportunity_source
        required: false
        type: string
      - description: Minimum probability (inclusive)
        in: query
        maximum: 100
        minimum: 0
        name: min_probability
        required: false
        type: integer
      - description: Maximum probability (inclusive)
        in: query
        maximum: 100
        minimum: 0
        name: max_probability
        required: false
        type: integer
      - description: Free text search across project name and client name
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of opportunities
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              limit:
                type: integer
              page:
                type: integer
              total_count:
                type: integer
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List opportunities
      tags:
      - Opportunities
    post:
      description: Create a new opportunity for the workspace
      operationId: v2_createOpportunity
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assigned_estimator:
              description: Estimator assigned to this opportunity (optional)
              type: string
            client_id:
              description: Client identifier (optional)
              type: string
            comments:
              description: Array of comment objects (optional)
              items:
                properties:
                  comment_text:
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  created_by:
                    type: string
                  created_by_name:
                    type: string
                  id:
                    type: string
                type: object
              type: array
            competitors:
              description: Array of competitor objects (optional)
              items:
                properties:
                  company_name:
                    type: string
                  id:
                    type: string
                type: object
              type: array
            contacts:
              description: Array of contact objects (optional)
              items:
                properties:
                  email:
                    type: string
                  id:
                    type: string
                  is_primary:
                    type: boolean
                  name:
                    type: string
                  role:
                    type: string
                type: object
              type: array
            description:
              description: Project description (synced with project_settings.project_description)
              type: string
            estimated_value_millions:
              default: 0
              description: Estimated contract value in millions
              format: float
              type: number
            expected_award_date:
              description: Expected award/decision date in ISO 8601 format (optional)
              format: date
              type: string
            opportunity_notes:
              description: Long text notes about the opportunity (optional)
              type: string
            opportunity_source:
              description: Source of the opportunity (optional)
              type: string
            priority:
              description: Opportunity priority level (optional)
              enum:
              - High
              - Medium
              - Low
              type: string
            probability:
              default: 50
              description: Win probability percentage
              maximum: 100
              minimum: 0
              type: integer
            project_name:
              description: Project name (REQUIRED)
              type: string
            project_type:
              description: Type of project (optional)
              type: string
            status:
              default: Will Bid
              description: Opportunity status
              enum:
              - Identified
              - Qualifying
              - Will Bid
              - Preparing
              - Submitted
              - Awarded
              - Lost
              type: string
            submission_date:
              description: Submission date in ISO 8601 format (optional)
              format: date
              type: string
          required:
          - project_name
          type: object
      responses:
        201:
          description: Opportunity created successfully
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create opportunity
      tags:
      - Opportunities
  /v2/workspaces/{workspaceId}/opportunities/{opportunityId}:
    delete:
      description: Soft delete an opportunity
      operationId: v2_deleteOpportunity
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Opportunity unique identifier
        in: path
        name: opportunityId
        required: true
        type: string
      responses:
        200:
          description: Opportunity deleted successfully
        403:
          description: Workspace access forbidden
        404:
          description: Opportunity not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete opportunity
      tags:
      - Opportunities
    get:
      description: Retrieve a specific opportunity by its unique identifier
      operationId: v2_getOpportunityById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Opportunity unique identifier
        in: path
        name: opportunityId
        required: true
        type: string
      responses:
        200:
          description: Opportunity details
          schema:
            type: object
        403:
          description: Workspace access forbidden
        404:
          description: Opportunity not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get opportunity by ID
      tags:
      - Opportunities
    put:
      description: Update an existing opportunity
      operationId: v2_updateOpportunity
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Opportunity unique identifier
        in: path
        name: opportunityId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated opportunity
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Opportunity not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update opportunity
      tags:
      - Opportunities
  /v2/workspaces/{workspaceId}/opportunities/{opportunityId}/comments:
    post:
      description: Add a comment to an existing opportunity (convenience endpoint)
      operationId: v2_addOpportunityComment
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Opportunity unique identifier
        in: path
        name: opportunityId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            comment_text:
              description: The comment text to add
              type: string
          required:
          - comment_text
          type: object
      responses:
        201:
          description: Comment added successfully
          schema:
            properties:
              comment_text:
                description: Comment text
                type: string
              created_at:
                description: Comment creation timestamp
                format: date-time
                type: string
              created_by:
                description: User ID who created the comment
                type: string
              created_by_name:
                description: Name/email of comment creator
                type: string
              id:
                description: Comment ID
                type: string
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace access forbidden
        404:
          description: Opportunity not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Add comment to opportunity
      tags:
      - Opportunities
  /v2/workspaces/{workspaceId}/powerbi:
    post:
      operationId: v2_postPowerBiWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a new power bi workspace
      tags:
      - Power BI
      x-min-permissions: admin
  /v2/workspaces/{workspaceId}/powerbi/apps/{contentPack}:
    post:
      operationId: v2_postPowerBiAppsWS
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: contentPack
        required: true
        type: string
      responses:
        202:
          description: App deployment initiated
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Deploy power bi apps by content pack
      tags:
      - Power BI
      x-min-permissions: admin
  /v2/workspaces/{workspaceId}/powerbi/deploy/apps:
    post:
      operationId: v2_deployPbiAppWS
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            content_pack:
              type: string
            id_dashboard_deployment_job:
              type: integer
          required:
          - id_dashboard_deployment_job
          - content_pack
          type: object
      responses:
        200:
          description: Deployment initiated
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Deploy power bi app
      tags:
      - Power BI
      x-min-permissions: admin
  /v2/workspaces/{workspaceId}/powerbi/embedded/apps/{appName}:
    get:
      operationId: v2_getEmbeddedPbiAppWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: appName
        required: true
        type: string
      responses:
        200:
          description: App returned
        401:
          description: Unauthorized
        404:
          description: App not found in project
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get PBI Embedded App (Workspace)
      tags:
      - Power BI
  /v2/workspaces/{workspaceId}/powerbi/refresh/apps/{appName}:
    post:
      operationId: v2_refreshPowerBiAppWorkspace
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: appName
        required: true
        type: string
      responses:
        200:
          description: App refresh initiated
        204:
          description: App refresh not iniated for some reason (eg. already in progress)
        401:
          description: Unauthorized
        404:
          description: App not found in project
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Refresh Power BI app in workspace
      tags:
      - Power BI
  /v2/workspaces/{workspaceId}/projects:
    get:
      operationId: v2_getProjects
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Include details of projects
        in: query
        name: includeDetails
        required: false
        type: boolean
      responses:
        200:
          description: Project details
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get projects in a workspace
      tags:
      - Info
    post:
      consumes:
      - application/json
      operationId: v2_postProject
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            billing_stage:
              description: The billing stage of the project (Outseta)
              type: string
            ds_license_type:
              description: The license type of the project
              type: string
            hosting_region:
              description: The hosting region of the project
              type: string
            primary_contact_email:
              description: Primary contact (Outseta) for the project
              type: string
            project_name:
              description: The name of the project
              type: string
            project_weekly_notifications:
              description: dictionary of days of the week as bools
              properties:
                Friday:
                  type: boolean
                Monday:
                  type: boolean
                Saturday:
                  type: boolean
                Sunday:
                  type: boolean
                Thursday:
                  type: boolean
                Tuesday:
                  type: boolean
                Wednesday:
                  type: boolean
              type: object
          required:
          - project_name
          - primary_contact_email
          - billing_stage
          - hosting_region
          - ds_license_type
          type: object
      responses:
        201:
          description: Project successfully created
        400:
          description: Bad Request
        401:
          description: Insufficent permissions to create project
        403:
          description: Forbidden to create project
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a new project
      tags:
      - Project
  /v2/workspaces/{workspaceId}/projects/config/loi-advanced:
    get:
      description: Returns full LOI Advanced configuration as raw table JSON from
        MySQL
      operationId: v2_getLoiAdvancedConfig
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: projectId
        required: true
        type: string
      responses:
        200:
          description: LOI Advanced config JSON
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Download LOI Advanced config
      tags:
      - Automated Config
    post:
      description: Plan or apply changes to LOI Advanced configuration (full sync)
      operationId: v2_postLoiAdvancedConfig
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: projectId
        required: true
        type: string
      - in: header
        name: Idempotency-Key
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            action:
              description: Action to perform
              enum:
              - plan
              - apply
              type: string
            config:
              description: Config JSON (required for plan)
              type: object
            if_match_version:
              description: Version for optimistic locking (required for apply)
              type: integer
            plan_id:
              description: Plan ID (required for apply)
              type: string
          required:
          - action
          type: object
      responses:
        200:
          description: Plan created or changes applied
        400:
          description: Validation error
        401:
          description: Unauthorized
        409:
          description: Version conflict
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Upload LOI Advanced config
      tags:
      - Automated Config
  /v2/workspaces/{workspaceId}/projects/config/operations:
    get:
      description: Returns list of operations (plans) for a project
      operationId: v2_listConfigOperations
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: projectId
        required: true
        type: string
      - description: Filter by status (pending, applied, failed)
        in: query
        name: status
        required: false
        type: string
      - default: 10
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of operations
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: List configuration operations
      tags:
      - Automated Config
  /v2/workspaces/{workspaceId}/projects/config/ops:
    get:
      description: Returns list of available configuration operations with their schemas
      operationId: v2_discoverConfigOperations
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: projectId
        required: true
        type: string
      responses:
        200:
          description: List of operations
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Discover available config operations
      tags:
      - Automated Config
  /v2/workspaces/{workspaceId}/projects/config/ops/{operationName}/apply:
    post:
      description: Executes a previously planned configuration change
      operationId: v2_applyConfigOperation
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: projectId
        required: true
        type: string
      - in: path
        name: operationName
        required: true
        type: string
      - in: header
        name: Idempotency-Key
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            if_match_version:
              description: Expected config version for optimistic locking
              type: integer
            plan_id:
              description: ID of the plan to apply
              type: string
          required:
          - plan_id
          - if_match_version
          type: object
      responses:
        200:
          description: Operation applied successfully
        400:
          description: Validation error or version mismatch
        401:
          description: Unauthorized
        404:
          description: Plan not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Apply a configuration operation
      tags:
      - Automated Config
  /v2/workspaces/{workspaceId}/projects/config/ops/{operationName}/plan:
    post:
      description: Validates and creates a plan for a configuration change without
        applying it
      operationId: v2_planConfigOperation
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: projectId
        required: true
        type: string
      - in: path
        name: operationName
        required: true
        type: string
      - in: header
        name: Idempotency-Key
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          description: Operation-specific parameters
          type: object
      responses:
        200:
          description: Plan created successfully
        400:
          description: Validation error
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Plan a configuration operation
      tags:
      - Automated Config
  /v2/workspaces/{workspaceId}/projects/config/registry/operations:
    get:
      description: Returns list of all operations registered in Firestore
      operationId: v2_listRegistryOperations
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: projectId
        required: true
        type: string
      responses:
        200:
          description: List of operations
        401:
          description: Unauthorized
      security:
      - JWT_v2: []
      summary: List all operations in registry
      tags:
      - Automated Config Registry
    post:
      description: Create or update an operation definition in Firestore
      operationId: v2_upsertRegistryOperation
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: query
        name: projectId
        required: true
        type: string
      responses:
        200:
          description: Operation created/updated
        400:
          description: Invalid request
        401:
          description: Unauthorized
      security:
      - JWT_v2: []
      summary: Upsert operation in registry
      tags:
      - Automated Config Registry
  /v2/workspaces/{workspaceId}/projects/config/registry/operations/{operationName}:
    delete:
      description: Removes an operation definition from Firestore
      operationId: v2_deleteRegistryOperation
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: operationName
        required: true
        type: string
      - in: query
        name: projectId
        required: true
        type: string
      responses:
        200:
          description: Operation deleted
        401:
          description: Unauthorized
        404:
          description: Operation not found
      security:
      - JWT_v2: []
      summary: Delete operation from registry
      tags:
      - Automated Config Registry
    get:
      description: Returns full operation definition from Firestore
      operationId: v2_getRegistryOperation
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: operationName
        required: true
        type: string
      - in: query
        name: projectId
        required: true
        type: string
      responses:
        200:
          description: Operation definition
        401:
          description: Unauthorized
        404:
          description: Operation not found
      security:
      - JWT_v2: []
      summary: Get specific operation from registry
      tags:
      - Automated Config Registry
  /v2/workspaces/{workspaceId}/projects/{projectId}:
    delete:
      consumes:
      - application/json
      operationId: v2_archiveProject
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      responses:
        201:
          description: Project successfully archived
        400:
          description: Bad Request
        401:
          description: Insufficent permissions to archive project
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Archive a project
      tags:
      - Project
    get:
      operationId: v2_getProject
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - description: Include details of the project
        in: query
        name: includeDetails
        required: false
        type: boolean
      responses:
        200:
          description: A successful response
        400:
          description: Bad Request
        401:
          description: Insufficent permissions
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get project
      tags:
      - Project
    patch:
      consumes:
      - application/json
      operationId: v2_updateProject
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            project_name:
              description: Name for the project
              type: string
          type: object
      responses:
        201:
          description: Project successfully archived
        400:
          description: Bad Request
        401:
          description: Insufficent permissions to archive project
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update a project
      tags:
      - Project
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions:
    delete:
      description: Delete an action by action ID. Supports category-specific overrides
        for Scheduling Tasks.
      operationId: v2_deleteAction
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: ID of the action to delete
        in: query
        name: actionId
        required: true
        type: string
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      responses:
        200:
          description: Action deleted successfully
          schema:
            properties:
              action_id:
                type: string
              message:
                type: string
            type: object
        400:
          description: Bad Request - Action ID is required or cannot delete system
            action
        401:
          description: Unauthorized - Missing X-Horizon-Product header or invalid
            authentication
        404:
          description: Action not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete action
      tags:
      - Actions
    get:
      operationId: v2_getActions
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: query
        name: currentApp
        required: false
        type: string
      - description: When true, fetches all scheduling tasks in a single response
          using backend pagination
        in: query
        name: fetch_all
        required: false
        type: boolean
      - description: When true, allows higher limits (500) for admin dashboards
        in: query
        name: admin
        required: false
        type: boolean
      - description: Number of items per page (default 50, max 200 for users, max
          500 for admin)
        in: query
        maximum: 500
        minimum: 1
        name: limit
        required: false
        type: integer
      - description: Page number for pagination (default 1)
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - description: Filter by action status
        in: query
        name: action_status
        required: false
        type: string
      - description: Filter by action category (e.g. 'Scheduling Task')
        in: query
        name: action_category
        required: false
        type: string
      - description: Filter by assignee
        in: query
        name: assignee_individual
        required: false
        type: string
      - description: Filter by task status
        in: query
        name: task_status
        required: false
        type: string
      - description: Filter by progress type
        in: query
        name: progress_type
        required: false
        type: string
      - description: Filter by trade
        in: query
        name: trade
        required: false
        type: string
      - description: Filter by subcontractor
        in: query
        name: subcontractor
        required: false
        type: string
      - description: Search query string
        in: query
        name: q
        required: false
        type: string
      responses:
        200:
          description: Successfully created new action
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get actions
      tags:
      - Actions
    patch:
      operationId: v2_updateAction
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            action_id:
              description: id of existing action to update
              type: integer
          required:
          - action_id
          type: object
      responses:
        200:
          description: Successfully updated action
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update fields in existing action
      tags:
      - Actions
    post:
      operationId: v2_createAction
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Name of the action
        in: formData
        name: name
        required: true
        type: string
      - description: Description of the action
        in: formData
        name: description
        required: false
        type: string
      - description: Due date of the action, expected format 'yyyy-mm-dd'
        in: formData
        name: dueDate
        required: false
        type: string
      - description: Rating of the action - "Low", "Medium", "High"
        in: formData
        name: rating
        required: false
        type: string
      - description: App that the action was created from
        in: formData
        name: currentApp
        required: false
        type: string
      - description: A JSON string representing a list of attachment objects. Each
          object must contain a `cde_id` property.
        in: formData
        name: attachments
        required: false
        type: string
      responses:
        200:
          description: Successfully created new action
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create new action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/actionDeps:
    delete:
      operationId: v2_deleteActionDependency
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: ID of the dependency to delete
        in: query
        name: dependencyId
        required: true
        type: string
      responses:
        200:
          description: Action dependency deleted successfully
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Dependency not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete action dependency
      tags:
      - Actions
    get:
      operationId: v2_getActionDependencies
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Optional action ID to get dependencies for specific action
        in: query
        name: actionId
        required: false
        type: string
      responses:
        200:
          description: Successfully retrieved action dependencies
          schema:
            properties:
              count:
                type: integer
              dependencies:
                items:
                  properties:
                    dependency_id:
                      type: string
                    dependency_type:
                      type: string
                    lag_days:
                      type: integer
                    predecessor_action_id:
                      type: string
                    relationship:
                      type: string
                    successor_action_id:
                      type: string
                  type: object
                type: array
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get action dependencies
      tags:
      - Actions
    patch:
      operationId: v2_updateActionDependency
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: ID of the dependency to update
        in: query
        name: dependencyId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            dependency_type:
              description: Type of dependency relationship
              enum:
              - finish_to_start
              - start_to_start
              - finish_to_finish
              - start_to_finish
              - as_soon_as_possible
              type: string
            lag_days:
              description: Number of lag days for the dependency
              type: integer
          type: object
      responses:
        200:
          description: Action dependency updated successfully
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Dependency not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update action dependency
      tags:
      - Actions
    post:
      operationId: v2_createActionDependency
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            dependency_type:
              default: finish_to_start
              description: Type of dependency relationship
              enum:
              - finish_to_start
              - start_to_start
              - finish_to_finish
              - start_to_finish
              - as_soon_as_possible
              type: string
            lag_days:
              default: 0
              description: Number of lag days for the dependency
              type: integer
            predecessor_action_id:
              description: ID of the predecessor action (Task A)
              type: string
            successor_action_id:
              description: ID of the successor action (Task B)
              type: string
          required:
          - predecessor_action_id
          - successor_action_id
          type: object
      responses:
        201:
          description: Action dependency created successfully
          schema:
            properties:
              dependency_id:
                type: string
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create action dependency
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/constraints:
    delete:
      operationId: v2_deleteActionConstraint
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: ID of the constraint to delete
        in: query
        name: constraintId
        required: true
        type: string
      responses:
        200:
          description: Action constraint deleted successfully
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Constraint not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete action constraint
      tags:
      - Actions
    get:
      operationId: v2_getActionConstraints
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Optional action ID to get constraints for specific action
        in: query
        name: actionId
        required: false
        type: string
      - description: Optional constraint type filter
        in: query
        name: constraintType
        required: false
        type: string
      - description: Optional priority filter
        in: query
        name: priority
        required: false
        type: string
      responses:
        200:
          description: Successfully retrieved action constraints
          schema:
            properties:
              constraints:
                items:
                  properties:
                    action_id:
                      type: string
                    constraint_id:
                      type: string
                    constraint_type:
                      type: string
                    created_at:
                      format: date-time
                      type: string
                    created_by:
                      type: string
                    description:
                      type: string
                    due_date:
                      format: date-time
                      type: string
                    impact:
                      type: integer
                    owner:
                      type: string
                    priority:
                      type: string
                    related_task_id:
                      type: string
                  type: object
                type: array
              count:
                type: integer
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get action constraints
      tags:
      - Actions
    patch:
      operationId: v2_updateActionConstraint
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: ID of the constraint to update
        in: query
        name: constraintId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            constraint_type:
              description: Type of constraint
              type: string
            description:
              description: Description of the constraint
              type: string
            due_date:
              description: Due date for the constraint
              format: date-time
              type: string
            impact:
              description: Impact level (1-5 scale)
              maximum: 5
              minimum: 1
              type: integer
            owner:
              description: Owner of the constraint
              type: string
            priority:
              description: Priority level of the constraint
              enum:
              - Low
              - Medium
              - High
              - Critical
              type: string
            related_task_id:
              description: Related task identifier
              type: string
          type: object
      responses:
        200:
          description: Action constraint updated successfully
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Constraint not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update action constraint
      tags:
      - Actions
    post:
      operationId: v2_createActionConstraint
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            action_id:
              description: ID of the scheduling task action
              type: string
            constraint_type:
              description: Type of constraint
              type: string
            description:
              description: Description of the constraint
              type: string
            due_date:
              description: Due date for the constraint
              format: date-time
              type: string
            impact:
              default: 3
              description: Impact level (1-5 scale)
              maximum: 5
              minimum: 1
              type: integer
            owner:
              description: Owner of the constraint
              type: string
            priority:
              default: Medium
              description: Priority level of the constraint
              enum:
              - Low
              - Medium
              - High
              - Critical
              type: string
            related_task_id:
              description: Related task identifier
              type: string
          required:
          - action_id
          - constraint_type
          - description
          type: object
      responses:
        201:
          description: Action constraint created successfully
          schema:
            properties:
              constraint_id:
                type: string
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create action constraint
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/critical-path:
    get:
      description: Calculates critical path method (CPM) for scheduling tasks including
        early/late start times, float values, and critical path identification. Automatically
        fetches all scheduling tasks from Firestore.
      operationId: v2_calculateCriticalPath
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      responses:
        200:
          description: Critical path calculation successful
        400:
          description: Invalid request parameters
        401:
          description: Unauthorized - Missing X-Horizon-Product header or invalid
            authentication
        404:
          description: No scheduling tasks found for project
        409:
          description: Cycle detected in dependencies
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Calculate Critical Path Method for project actions
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/fetch-all:
    get:
      description: Fetches all scheduling task actions in a single response by performing
        backend pagination loops. Uses the robust fetch_all=true parameter implementation
        with sensible safety limits.
      operationId: v2_fetchAllSchedulingTasks
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Filter by action status
        in: query
        name: action_status
        required: false
        type: string
      - description: Filter by action category (e.g. 'Scheduling Task')
        in: query
        name: action_category
        required: false
        type: string
      - description: Filter by assignee
        in: query
        name: assignee_individual
        required: false
        type: string
      - description: Filter by task status
        in: query
        name: task_status
        required: false
        type: string
      - description: Filter by progress type
        in: query
        name: progress_type
        required: false
        type: string
      - description: Filter by trade
        in: query
        name: trade
        required: false
        type: string
      - description: Filter by subcontractor
        in: query
        name: subcontractor
        required: false
        type: string
      - description: Search query string
        in: query
        name: q
        required: false
        type: string
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      responses:
        200:
          description: All scheduling tasks fetched successfully
          schema:
            properties:
              actions:
                description: All matching scheduling task actions
                items:
                  type: object
                type: array
              fetch_all:
                description: Always true for this endpoint
                type: boolean
              pages_fetched:
                description: Number of pages processed by backend
                type: integer
              source:
                description: Data source indicator (firestore_batch)
                type: string
              total_count:
                description: Total number of items returned
                type: integer
            type: object
        400:
          description: Invalid request parameters
        401:
          description: Unauthorized - Missing X-Horizon-Product header or invalid
            authentication
        404:
          description: No scheduling tasks found for project
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Fetch all scheduling tasks using backend pagination
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/network-diagram:
    post:
      description: Optimized bulk data fetching for network diagram visualization.
        Replaces N+1 dependency queries with single bulk operation. Fetches critical
        path actions and their dependencies in one request, including related tasks.
      operationId: v2_getNetworkDiagram
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      - description: Network diagram request body
        in: body
        name: networkDiagramRequest
        required: true
        schema:
          properties:
            criticalPathActionIds:
              description: Array of critical path action IDs to include
              items:
                type: string
              type: array
            includeRelatedTasks:
              default: true
              description: Whether to include related tasks (predecessors/successors)
              type: boolean
            layoutHints:
              description: Optional layout positioning hints
              properties:
                criticalPathY:
                  type: number
                nodeSpacing:
                  type: number
              type: object
          required:
          - criticalPathActionIds
          type: object
      responses:
        200:
          description: Network diagram data retrieved successfully
          schema:
            properties:
              edges:
                items:
                  properties:
                    dependencyType:
                      type: string
                    id:
                      type: string
                    isCritical:
                      type: boolean
                    lagDays:
                      type: number
                    source:
                      type: string
                    target:
                      type: string
                  type: object
                type: array
              layoutSuggestions:
                properties:
                  nodeSpacing:
                    type: number
                  positions:
                    type: object
                type: object
              metadata:
                properties:
                  criticalTaskCount:
                    type: integer
                  relatedTaskCount:
                    type: integer
                  totalDependencies:
                    type: integer
                  totalTaskCount:
                    type: integer
                type: object
              nodes:
                items:
                  properties:
                    actionData:
                      type: object
                    duration:
                      type: integer
                    endDate:
                      type: string
                    id:
                      type: string
                    isCritical:
                      type: boolean
                    isMilestone:
                      type: boolean
                    isRelated:
                      type: boolean
                    predecessors:
                      items:
                        type: string
                      type: array
                    startDate:
                      type: string
                    successors:
                      items:
                        type: string
                      type: array
                    taskName:
                      type: string
                  type: object
                type: array
              requestMetadata:
                properties:
                  includeRelatedTasks:
                    type: boolean
                  projectId:
                    type: string
                  requestedCriticalActions:
                    type: integer
                  timestamp:
                    type: string
                  workspaceId:
                    type: string
                type: object
            type: object
        400:
          description: Invalid request parameters or validation failed
        401:
          description: Unauthorized - Missing X-Horizon-Product header or invalid
            authentication
        404:
          description: No scheduling tasks found for project
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get optimized network diagram data for critical path visualization
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/project-constraints-delete:
    delete:
      description: Bulk delete all action constraints for a workspace and project.
        Uses Firestore batch operations for efficient processing of large datasets
        (processes in batches of 500 documents).
      operationId: v2_deleteAllActionConstraints
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successfully deleted constraints
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Constraints not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete all action constraints
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/project-dependencies-delete:
    delete:
      description: Bulk delete all action dependencies for a workspace and project.
        Includes cleanup of embedded dependency data in action documents.
      operationId: v2_deleteAllActionDependencies
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successfully deleted dependencies
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Dependencies not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete all action dependencies
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/project-scheduling-tasks-delete:
    delete:
      description: Delete all actions with action_category = 'Scheduling Task' for
        a specific workspace and project. This operation performs soft delete using
        Firestore batch operations for efficient processing of large datasets (processes
        in batches of 500 documents).
      operationId: v2_deleteProjectSchedulingTasks
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      responses:
        200:
          description: Bulk deletion completed successfully
          schema:
            properties:
              deleted_count:
                description: Number of actions successfully deleted
                type: integer
              failed_count:
                description: Number of failed deletions (only present if failures
                  occurred)
                type: integer
              failed_document_ids:
                description: List of document IDs that failed to delete (only present
                  if failures occurred)
                items:
                  type: string
                type: array
              message:
                description: Summary message of the operation
                type: string
              success:
                description: Overall success status
                type: boolean
              total_found:
                description: Total number of scheduling task actions found
                type: integer
            type: object
        400:
          description: Invalid request parameters
        401:
          description: Unauthorized - Missing X-Horizon-Product header or invalid
            authentication
        404:
          description: No scheduling task actions found for the specified workspace
            and project
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Bulk delete all scheduling task actions
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/schedule/bulk-update:
    post:
      description: Create a bulk update job to update multiple scheduling tasks at
        once. Supports per-task field updates with async job processing. Maximum 50
        tasks per request. Returns immediately with job ID for status polling.
      operationId: v2_bulkUpdateSchedulingTasks
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      - description: Bulk update request with array of task updates
        in: body
        name: body
        required: true
        schema:
          properties:
            updates:
              description: Array of task updates (max 50 tasks)
              items:
                properties:
                  action_description:
                    description: Task description
                    type: string
                  action_id:
                    description: UUID of the scheduling task to update
                    type: string
                  actual_end_date:
                    description: Actual end date
                    format: date
                    type: string
                  actual_start_date:
                    description: Actual start date
                    format: date
                    type: string
                  cost_code:
                    description: Cost code
                    type: string
                  duration_days:
                    description: Task duration in days; if omitted, backend may derive
                      from start/end dates
                    format: float
                    type: number
                  end_date:
                    description: Planned end date (triggers propagation)
                    format: date
                    type: string
                  progress_percentage:
                    description: Task completion percentage
                    maximum: 100
                    minimum: 0
                    type: number
                  resources:
                    description: Assigned resources
                    type: string
                  start_date:
                    description: Planned start date (triggers propagation)
                    format: date
                    type: string
                  subcontractor:
                    description: Subcontractor name
                    type: string
                  trade:
                    description: Trade assignment
                    type: string
                required:
                - action_id
                type: object
              maxItems: 50
              type: array
          required:
          - updates
          type: object
      responses:
        202:
          description: Bulk update job created successfully
          schema:
            properties:
              job_id:
                description: Unique job identifier for status polling
                type: string
              message:
                description: Success message
                type: string
              status:
                description: Initial job status
                enum:
                - pending
                type: string
              status_url:
                description: URL to poll for job status
                type: string
              total_tasks:
                description: Number of tasks to be updated
                type: integer
            type: object
        400:
          description: Bad Request - Invalid input (>50 tasks, missing action_id,
            etc.)
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Bulk update scheduling tasks
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/schedule/bulk-update/jobs/{jobId}:
    get:
      description: Poll the status of a bulk update job. Returns current progress,
        results, and propagation status. Poll every 1-2 seconds until status is 'completed'
        or 'failed'.
      operationId: v2_getBulkUpdateJobStatus
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Job identifier from bulk update response
        in: path
        name: jobId
        required: true
        type: string
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      responses:
        200:
          description: Job status retrieved successfully
          schema:
            properties:
              completed_at:
                description: Completion timestamp (null if not completed)
                format: date-time
                type: string
              created_at:
                description: Job creation timestamp
                format: date-time
                type: string
              job_id:
                description: Job identifier
                type: string
              progress:
                properties:
                  completed:
                    description: Number of tasks processed
                    type: integer
                  failed:
                    description: Number of failed tasks
                    type: integer
                  succeeded:
                    description: Number of successfully updated tasks
                    type: integer
                  total:
                    description: Total number of tasks
                    type: integer
                type: object
              propagation_result:
                description: Propagation result details
                properties:
                  cycles_detected:
                    items:
                      type: string
                    type: array
                  errors:
                    items:
                      type: string
                    type: array
                  updated_tasks:
                    items:
                      type: object
                    type: array
                  updated_tasks_count:
                    type: integer
                type: object
              propagation_status:
                description: Date propagation status
                enum:
                - not_needed
                - pending
                - completed
                - failed
                type: string
              results:
                description: Individual task results
                items:
                  properties:
                    action_id:
                      type: string
                    error:
                      description: Error message if failed
                      type: string
                    status:
                      enum:
                      - success
                      - failed
                      type: string
                  type: object
                type: array
              status:
                description: Current job status
                enum:
                - pending
                - processing
                - completed
                - failed
                type: string
              updated_at:
                description: Last update timestamp
                format: date-time
                type: string
            type: object
        400:
          description: Bad Request - Invalid job ID
        401:
          description: Unauthorized
        404:
          description: Job not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get bulk update job status
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/tasks:
    get:
      operationId: v2_getActionTasksByWorkspaceIdAndProjectId
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successfully got tasks from a project
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Actions with category = Tasks by workspaceId and ProjectId
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/{actionId}:
    get:
      operationId: v2_getSingleAction
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      responses:
        200:
          description: Successfully got action
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get an action
      tags:
      - Actions
    patch:
      operationId: v2_updateSingleAction
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      - in: formData
        name: body
        required: true
        type: string
      responses:
        200:
          description: Successfully updated action
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update fields in existing action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/{actionId}/associations/{associationIdentifier}:
    get:
      operationId: v2_getActionAssociation
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      - in: path
        name: associationIdentifier
        required: true
        type: string
      - description: The association_source_table_key
        in: query
        name: association_source_table_key
        required: false
        type: string
      - description: The association_row_table_key
        in: query
        name: association_row_table_key
        required: false
        type: string
      - description: The association type
        in: query
        name: association_type
        required: false
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Find an association
      tags:
      - Actions
      x-min-permissions: isRevitUser
    post:
      operationId: v2_postActionAssociation
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      - in: path
        name: associationIdentifier
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            association_row_table_key:
              description: The key for association row table
              type: string
            association_source_table_key:
              description: The key for association source table
              type: string
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Add an association to an action
      tags:
      - Actions
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/{actionId}/associations/{associationIdentifier}/{associationId}:
    delete:
      operationId: v2_deleteActionAssociation
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      - in: path
        name: associationIdentifier
        required: true
        type: string
      - description: ID of the association to remove
        in: path
        name: associationId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Remove an existing association
      tags:
      - Actions
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/{actionId}/attachments:
    get:
      operationId: v2_getActionAttachments
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      responses:
        200:
          description: Successfully got attachments
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get attachments for an action
      tags:
      - Actions
    post:
      operationId: v2_postActionAttachments
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            attachments:
              description: A list of attachment objects
              items:
                properties:
                  cde_id:
                    description: CDE id corresponding to file
                    type: integer
                required:
                - cde_id
                type: object
              type: array
          required:
          - attachments
          type: object
      responses:
        200:
          description: Successfully got attachments
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Add attachments to action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/{actionId}/comments:
    get:
      operationId: v2_getActionComments
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      - in: query
        name: withAttachments
        required: false
        type: boolean
      responses:
        200:
          description: Successfully got comments
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get comments for an action
      tags:
      - Actions
    post:
      operationId: v2_postActionComment
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            attachments:
              description: A list of attachment objects
              items:
                properties:
                  cde_id:
                    description: CDE id corresponding to file
                    type: integer
                required:
                - cde_id
                type: object
              type: array
            comment:
              description: The comment to add
              type: string
          required:
          - comment
          type: object
      responses:
        200:
          description: Successfully created comment
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create comment for an action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/{actionId}/comments/{commentId}:
    get:
      operationId: v2_getActionComment
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      - in: path
        name: commentId
        required: true
        type: integer
      - in: query
        name: withAttachments
        required: false
        type: boolean
      responses:
        200:
          description: Successfully got comment
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get comment for an action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/{actionId}/comments/{commentId}/attachments:
    post:
      operationId: v2_postActionCommentAttachments
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      - in: path
        name: commentId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            attachments:
              description: A list of attachment objects
              items:
                properties:
                  cde_id:
                    description: CDE id corresponding to file
                    type: integer
                required:
                - cde_id
                type: object
              type: array
          required:
          - attachments
          type: object
      responses:
        200:
          description: Successfully added attachment
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Add attachments to action coment
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/{actionId}/watchers:
    get:
      operationId: v2_getActionWatchers
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      responses:
        200:
          description: Successfully got watchers
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get watchers for an action
      tags:
      - Actions
    post:
      operationId: v2_postActionWatcher
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            watcher:
              description: The email of the watcher
              type: string
          required:
          - watcher
          type: object
      responses:
        200:
          description: Successfully added watcher
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Add watcher to action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/actions/{actionId}/watchers/{watcherId}:
    delete:
      operationId: v2_deleteActionWatcher
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: actionId
        required: true
        type: integer
      - description: email of watcher
        in: path
        name: watcherId
        required: true
        type: string
      responses:
        200:
          description: Successfully removed watcher
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Remove watcher from action
      tags:
      - Actions
  /v2/workspaces/{workspaceId}/projects/{projectId}/activity:
    get:
      operationId: v2_getUserActivity
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get User Activity
      tags:
      - Admin
  /v2/workspaces/{workspaceId}/projects/{projectId}/buildings:
    get:
      description: Returns all building records for a project.
      operationId: v2_getBuildings
      parameters:
      - description: The workspace name or identifier.
        in: path
        name: workspaceId
        required: true
        type: string
      - description: The project identifier.
        in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: A list of building records.
        401:
          description: Unauthorized.
        500:
          description: Internal Server Error.
      security:
      - JWT_v2: []
      summary: Get buildings by project ID
      tags:
      - Buildings
    post:
      consumes:
      - application/json
      description: Creates a new building record. The only required field is `building_name`.
      operationId: v2_postBuildings
      parameters:
      - description: The workspace name or identifier.
        in: path
        name: workspaceId
        required: true
        type: string
      - description: The project identifier.
        in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            building_name:
              description: The name of the building (e.g., "Main Building").
              type: string
          required:
          - building_name
          type: object
      responses:
        201:
          description: Building successfully created.
        400:
          description: Bad Request.
        401:
          description: Unauthorized.
        500:
          description: Internal Server Error.
      security:
      - JWT_v2: []
      summary: Create a new building in a project
      tags:
      - Buildings
  /v2/workspaces/{workspaceId}/projects/{projectId}/buildings/{buildingId}:
    get:
      description: Returns the building details for the given building ID.
      operationId: v2_getBuildingById
      parameters:
      - description: The workspace name or identifier.
        in: path
        name: workspaceId
        required: true
        type: string
      - description: The project identifier.
        in: path
        name: projectId
        required: true
        type: integer
      - description: The building identifier.
        in: path
        name: buildingId
        required: true
        type: integer
      responses:
        200:
          description: Building record retrieved successfully.
        401:
          description: Unauthorized.
        404:
          description: Building not found.
        500:
          description: Internal Server Error.
      security:
      - JWT_v2: []
      summary: Get a building by ID
      tags:
      - Buildings
    patch:
      consumes:
      - application/json
      description: Updates the building record identified by buildingId. Only the
        `building_name` field will be updated.
      operationId: v2_patchBuilding
      parameters:
      - description: The workspace name or identifier.
        in: path
        name: workspaceId
        required: true
        type: string
      - description: The project identifier.
        in: path
        name: projectId
        required: true
        type: integer
      - description: The building identifier.
        in: path
        name: buildingId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            building_name:
              description: The new name for the building.
              type: string
          required:
          - building_name
          type: object
      responses:
        200:
          description: Building updated successfully.
        400:
          description: Bad Request.
        401:
          description: Unauthorized.
        404:
          description: No record updated. Possibly invalid buildingId or projectId.
        500:
          description: Internal Server Error.
      security:
      - JWT_v2: []
      summary: Edit a building by ID
      tags:
      - Buildings
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde:
    get:
      operationId: v2_getCdeDocs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successfully returns CDE docs
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get CDE docs
      tags:
      - Get Data
    post:
      operationId: v2_postCde
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_type:
              description: The type of CDE upload
              type: string
            files:
              description: A list of file objects
              items:
                properties:
                  filename:
                    description: The name of the file
                    type: string
                  filetype:
                    description: The type of the file
                    type: string
                required:
                - filename
                - filetype
                type: object
              type: array
          required:
          - files
          type: object
      responses:
        200:
          description: Successfully returns CDE urls
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get signed urls for cde
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde-folders/bulk-create-defaults:
    post:
      description: 'Creates the default folder hierarchy for a project including static
        folders

        (Preconstruction, Procurement, Commercial, Forms, Delivery, HSEQ, Portals)

        and dynamic folders for clients and subcontractors under Portals.

        '
      operationId: v2_bulkCreateDefaultCdeFolders
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Project to create folders for
        in: path
        name: projectId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            global_company_id:
              description: Global company ID for fetching subcontractors
              type: integer
          required:
          - global_company_id
          type: object
      responses:
        201:
          description: Default folders created successfully
        400:
          description: Missing required parameters
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create default folder structure for project
      tags:
      - CDE Folders
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde-folders/by-path:
    get:
      description: Returns folder if exists at the given path, 404 if not found.
      operationId: v2_getCdeFolderByPath
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Project scope
        in: path
        name: projectId
        required: true
        type: string
      - description: Full folder path like "/Preconstruction/PreliminaryDesign"
        in: query
        name: path
        required: true
        type: string
      responses:
        200:
          description: Folder found
        400:
          description: Missing path parameter
        401:
          description: Unauthorized
        404:
          description: Folder path not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get folder by path
      tags:
      - CDE Folders
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde-folders/create-path:
    post:
      description: Creates all missing folders in the given path. Returns 409 if full
        path already exists.
      operationId: v2_createCdeFolderPath
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Project association
        in: path
        name: projectId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            path:
              description: Full folder path like "/a/b/c/d"
              type: string
          required:
          - path
          type: object
      responses:
        201:
          description: Folder chain created
        400:
          description: Invalid path
        401:
          description: Unauthorized
        409:
          description: Full path already exists
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create folder hierarchy from path
      tags:
      - CDE Folders
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde-helper/finalize:
    post:
      description: 'Step 3 of direct upload workflow: After successfully uploading
        file to GCS via signed URL,

        call this endpoint to:

        1. Verify the blob exists in GCS

        2. Create missing folders in the path hierarchy

        3. Create CDE record in MySQL

        4. Create placement record linking cdeSeriesId to folder

        '
      operationId: v2_finalizeUpload
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Project association
        in: path
        name: projectId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_type:
              description: Optional CDE type name
              type: string
            cde_type_id:
              description: Optional CDE type identifier
              type: string
            entityId:
              description: Optional entity association
              type: string
            folder_path:
              description: Destination folder path like "/a/b/c"
              type: string
            upload_id:
              description: Upload identifier from prepare-upload
              type: string
          required:
          - upload_id
          - folder_path
          type: object
      responses:
        201:
          description: Successfully finalized upload with folder, CDE, and placement
            created
        400:
          description: Invalid request or upload not found
        401:
          description: Unauthorized
        404:
          description: Upload not found or blob not found in GCS
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Finalize upload by creating folder, placement, and CDE records
      tags:
      - CDE Helper
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde-helper/from-url:
    post:
      description: 'URL download workflow: Downloads a file from an external URL asynchronously.

        Creates a job and queues a Cloud Task to:

        1. Download file from source_url

        2. Upload to GCS

        3. Create folder hierarchy, CDE record, and placement


        Poll GET /jobs/{job_id} to check job status.

        '
      operationId: v2_downloadFromUrl
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Project association
        in: path
        name: projectId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_type:
              description: Optional CDE type name
              type: string
            cde_type_id:
              description: Optional CDE type identifier
              type: string
            entityId:
              description: Optional entity association
              type: string
            file_actual_name:
              description: Desired filename
              type: string
            filetype:
              description: MIME type of the file
              type: string
            folder_path:
              description: Destination folder path like "/a/b/c"
              type: string
            source_url:
              description: URL to download file from (must start with http:// or https://)
              type: string
          required:
          - source_url
          - folder_path
          - file_actual_name
          - filetype
          type: object
      responses:
        202:
          description: Job queued for async processing
          schema:
            properties:
              data:
                properties:
                  job_id:
                    description: Job identifier for status polling
                    type: string
                  status:
                    description: Initial job status (pending)
                    type: string
                type: object
              ok:
                type: boolean
            type: object
        400:
          description: Invalid request parameters
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Queue a file download from URL for async processing
      tags:
      - CDE Helper
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde/process:
    post:
      operationId: v2_processCDE
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            files:
              description: A list of file objects
              items:
                properties:
                  cde_id:
                    description: The CDE ID of the file
                    type: integer
                required:
                - cde_id
                type: object
              type: array
          required:
          - files
          type: object
      responses:
        200:
          description: Successfully processed files
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Process files uploaded to CDE
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde/v2:
    get:
      description: 'Fetches CDE documents grouped by document_series_id.

        Returns documents with all versions included.

        Version grouping uses document_series_id (with fallback to filename for legacy
        data).

        '
      operationId: v2_getCdeDocsV2
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      - description: Filter by CDE type ID
        in: query
        name: cde_type_id
        required: false
        type: string
      - description: Filter by worker ID
        in: query
        name: worker_id
        required: false
        type: string
      - description: Filter by CDE status (e.g. active, archived)
        in: query
        name: cde_status
        required: false
        type: string
      responses:
        200:
          description: Successfully returns CDE documents
          schema:
            items:
              properties:
                cde_type_id:
                  type: string
                display_file_name:
                  type: string
                document_series_id:
                  description: UUID grouping document versions
                  type: string
                owner_workspace_id:
                  type: string
                versions:
                  description: All versions of this document
                  items:
                    properties:
                      cde_id:
                        type: integer
                      cde_link:
                        type: string
                      cde_log_entry_created:
                        type: string
                      cde_log_entry_updated:
                        type: string
                      cde_status:
                        type: string
                      cde_type:
                        type: string
                      cde_type_id:
                        type: string
                      document_series_id:
                        type: string
                      file_name:
                        type: string
                      file_size_bytes:
                        type: integer
                      file_type:
                        type: string
                      is_latest_version:
                        type: boolean
                      metadata:
                        items:
                          properties:
                            metadata_key:
                              type: string
                            metadata_value:
                              type: string
                          type: object
                        type: array
                      uploaded_by:
                        type: string
                      uploaded_by_user_id:
                        type: string
                      version:
                        description: Version number (1, 2, 3, ...)
                        type: integer
                    type: object
                  type: array
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get CDE documents with version grouping
      tags:
      - CDE Documents
    post:
      description: 'Returns signed URLs for uploading files to Cloud Storage and creates
        CDE records.

        Supports document versioning via document_series_id.

        - Pass null/omit document_series_id to create a new document

        - Pass existing document_series_id to add a new version to existing document

        '
      operationId: v2_postCdeV2
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_type:
              description: CDE type name
              type: string
            cde_type_id:
              description: CDE type ID
              type: string
            files:
              description: List of files to upload
              items:
                properties:
                  document_series_id:
                    description: 'UUID to group document versions.

                      - Omit or pass null to create a new document (new UUID generated)

                      - Pass existing UUID to add a version to existing document series

                      '
                    type: string
                  file_size_bytes:
                    description: File size in bytes
                    type: integer
                  filename:
                    description: Display filename
                    type: string
                  filetype:
                    description: MIME type of the file
                    type: string
                required:
                - filename
                - filetype
                type: object
              type: array
            uploaded_by:
              description: Override uploaded_by username
              type: string
          required:
          - files
          type: object
      responses:
        200:
          description: Successfully returns signed URLs and CDE records
          schema:
            items:
              properties:
                cde_id:
                  description: Created CDE record ID
                  type: integer
                cde_link:
                  description: Cloud Storage URL
                  type: string
                cde_type_id:
                  type: string
                display_filename:
                  description: Display filename
                  type: string
                document_series_id:
                  description: UUID for the document series (new or existing)
                  type: string
                file_size_bytes:
                  type: integer
                filename:
                  description: Storage filename (timestamped)
                  type: string
                filetype:
                  description: MIME type
                  type: string
                signed_url:
                  description: Signed URL for file upload
                  type: string
                uploaded_by:
                  type: string
                uploaded_by_user_id:
                  type: string
              type: object
            type: array
        400:
          description: Bad request - missing required fields
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get signed URLs for CDE upload
      tags:
      - CDE Documents
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde/v2/archive-by-series-id:
    post:
      description: 'Archive all versions of a document by its document_series_id.

        Sets cde_status to ''archived'' for all versions in the series.

        '
      operationId: v2_archiveBySeriesId
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            document_series_id:
              description: UUID of the document series to archive
              type: string
          required:
          - document_series_id
          type: object
      responses:
        200:
          description: Successfully archived documents
          schema:
            properties:
              archived_count:
                description: Number of document versions archived
                type: integer
              document_series_id:
                description: UUID of the archived document series
                type: string
              success:
                type: boolean
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Archive document by series ID
      tags:
      - CDE Documents
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde/v2/by-series:
    get:
      description: 'Fetches CDE documents by a list of document_series_ids.

        Supports lazy loading of documents when navigating folders:

        1. Frontend fetches placements for a folder (gets document_series_ids)

        2. Frontend calls this endpoint with those series_ids to get document details

        Maximum 500 series_ids per request.

        '
      operationId: v2_getCdeDocsBySeriesIds
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      - collectionFormat: multi
        description: 'Document series IDs to fetch.

          Can be passed multiple times (e.g., ?series_id=uuid1&series_id=uuid2).

          Maximum 500 IDs per request.

          '
        in: query
        items:
          type: string
        name: series_id
        required: true
        type: array
      responses:
        200:
          description: Successfully returns CDE documents for the specified series
            IDs
          schema:
            items:
              properties:
                display_file_name:
                  type: string
                document_series_id:
                  description: UUID grouping document versions
                  type: string
                owner_workspace_id:
                  type: string
                versions:
                  description: All versions of this document
                  items:
                    properties:
                      cde_id:
                        type: integer
                      cde_link:
                        type: string
                      cde_log_entry_created:
                        type: string
                      cde_log_entry_updated:
                        type: string
                      cde_status:
                        type: string
                      cde_type:
                        type: string
                      cde_type_id:
                        type: string
                      document_series_id:
                        type: string
                      file_name:
                        type: string
                      file_size_bytes:
                        type: integer
                      file_type:
                        type: string
                      is_latest_version:
                        type: boolean
                      metadata:
                        items:
                          properties:
                            metadata_key:
                              type: string
                            metadata_value:
                              type: string
                          type: object
                        type: array
                      uploaded_by:
                        type: string
                      uploaded_by_user_id:
                        type: string
                      version:
                        description: Version number (1, 2, 3, ...)
                        type: integer
                    type: object
                  type: array
              type: object
            type: array
        400:
          description: Bad request - missing series_id or too many series_ids (max
            500)
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get CDE documents by series IDs
      tags:
      - CDE Documents
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde/v2/migrate-legacy:
    post:
      description: 'Migrates legacy CDE documents (with null document_series_id) to
        use UUID-based versioning.

        Also updates Firestore placements to use the new UUIDs.

        Use dry_run=true to preview changes without applying them.

        '
      operationId: v2_migrateLegacyCde
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      - description: If true, preview changes without applying them
        in: query
        name: dry_run
        required: false
        type: boolean
      responses:
        200:
          description: Successfully migrated legacy documents
          schema:
            properties:
              dry_run:
                type: boolean
              filename_mappings:
                description: Number of unique filenames processed
                type: integer
              message:
                type: string
              migrated_documents:
                description: Number of BigQuery documents migrated
                type: integer
              migrated_placements:
                description: Number of Firestore placements updated
                type: integer
              success:
                type: boolean
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Migrate legacy CDE documents to use UUIDs
      tags:
      - CDE Documents
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde/v2/registered:
    get:
      description: 'Fetches only CDE documents that have been promoted to the Document
        Register

        (at least one version with cde_type_id = ''ds-registered-document'').

        Includes folder_path for each document from Firestore placements.

        '
      operationId: v2_getRegisteredCdeDocs
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successfully returns registered CDE documents
          schema:
            items:
              properties:
                display_file_name:
                  type: string
                document_series_id:
                  description: UUID grouping document versions
                  type: string
                folder_path:
                  description: Folder path where document is located (e.g. "/Folder/Subfolder")
                  type: string
                owner_workspace_id:
                  type: string
                versions:
                  description: All versions of this document
                  items:
                    properties:
                      cde_id:
                        type: integer
                      cde_link:
                        type: string
                      cde_log_entry_created:
                        type: string
                      cde_log_entry_updated:
                        type: string
                      cde_status:
                        type: string
                      cde_type:
                        type: string
                      cde_type_id:
                        type: string
                      document_series_id:
                        type: string
                      file_name:
                        type: string
                      file_size_bytes:
                        type: integer
                      file_type:
                        type: string
                      is_latest_version:
                        type: boolean
                      metadata:
                        items:
                          properties:
                            metadata_key:
                              type: string
                            metadata_value:
                              type: string
                          type: object
                        type: array
                      uploaded_by:
                        type: string
                      uploaded_by_user_id:
                        type: string
                      version:
                        description: Version number (1, 2, 3, ...)
                        type: integer
                    type: object
                  type: array
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get registered CDE documents with folder paths
      tags:
      - CDE Documents
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde/v2/rename-by-series-id:
    post:
      description: 'Rename all versions of a document by its document_series_id.

        Updates display_file_name for all versions in the series.

        '
      operationId: v2_renameBySeriesId
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            document_series_id:
              description: UUID of the document series to rename
              type: string
            new_display_name:
              description: New display name for the document
              type: string
          required:
          - document_series_id
          - new_display_name
          type: object
      responses:
        200:
          description: Successfully renamed documents
          schema:
            properties:
              document_series_id:
                description: UUID of the renamed document series
                type: string
              new_name:
                description: New display name
                type: string
              old_name:
                description: Previous display name
                type: string
              renamed_count:
                description: Number of document versions renamed
                type: integer
              success:
                type: boolean
            type: object
        400:
          description: Bad request - empty display name
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Rename document by series ID
      tags:
      - CDE Documents
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde/{cdeId}:
    delete:
      description: Invalidates a CDE entry for failed uploads
      operationId: v2_invalidateCdeEntry
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: cdeId
        required: true
        type: integer
      responses:
        200:
          description: Successfully invalidated CDE entry
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Invalidate CDE Entry
      tags:
      - Upload Data
    get:
      operationId: v2_getCdeFile
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Optional filter for CDE status (e.g. active, archived)
        in: query
        name: cde_status
        required: false
        type: string
      - in: path
        name: cdeId
        required: true
        type: integer
      responses:
        200:
          description: Successfully returns CDE url
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get signed url to access cde file
      tags:
      - Get Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde/{cdeId}/metadata:
    put:
      operationId: v2_putCdeMetadata
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: cdeId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            metadata_key:
              description: The key of the metadata
              type: string
            metadata_value:
              description: The value of the metadata
              type: string
          required:
          - metadata_key
          - metadata_value
          type: object
      responses:
        200:
          description: Successfully updated CDE metadata
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update CDE metadata
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde/{cdeId}/status:
    put:
      operationId: v2_putCdeStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: cdeId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_status:
              description: New CDE status (e.g. active, archived)
              type: string
          required:
          - cde_status
          type: object
      responses:
        200:
          description: Successfully updated CDE status
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update CDE status
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/cde/{cdeId}/type:
    put:
      description: Updates the CDE type for an existing document (e.g., promote to
        registered document)
      operationId: v2_putCdeType
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: cdeId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_type_id:
              description: New CDE type ID (must exist in global_cde_types table)
              example: ds-registered-document
              type: string
          required:
          - cde_type_id
          type: object
      responses:
        200:
          description: Successfully updated CDE type
          schema:
            properties:
              data:
                properties:
                  cde_id:
                    type: integer
                  cde_type_id:
                    type: string
                  previous_cde_type_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request (invalid cde_type_id or missing body)
        401:
          description: Unauthorized
        404:
          description: CDE document not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update CDE type
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/cloudstoragebucket:
    get:
      description: Creates a new cloud storage bucket
      operationId: v2_getCloudStorageBucket
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Created Cloud Storage Bucket Name
          schema:
            type: string
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a cloud storage bucket for single-use and return its name
      tags:
      - Navis Integration
    post:
      consumes:
      - application/json
      description: Creates a new cloud storage bucket for a project and initialises
        files expected to arrive in bucket.
      operationId: v2_postCloudStorageBucket
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            collectorKeys:
              description: A list of collector keys (strings)
            fileIds:
              description: A list of file ids (integers)
          required:
          - collectorKeys
          - fileIds
          type: object
      responses:
        200:
          description: Created Cloud Storage Bucket Name
          schema:
            type: string
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a cloud storage bucket for expected files and return its name
      tags:
      - Navis Integration
  /v2/workspaces/{workspaceId}/projects/{projectId}/comments:
    delete:
      description: Soft delete a comment by ID
      operationId: v2_deleteComment
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: query
        name: commentId
        required: true
        type: string
      responses:
        200:
          description: Comment successfully deleted
      security:
      - JWT_v2: []
      summary: Delete a comment
      tags:
      - Comments
    get:
      description: Retrieve project-level comments or a specific comment by ID
      operationId: v2_getComments
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: query
        name: commentId
        type: string
      - in: query
        name: q
        type: string
      - in: query
        name: page
        type: string
      - in: query
        name: limit
        type: string
      - in: query
        name: relatedDocumentId
        type: string
      - in: query
        name: includeReplies
        type: string
      - in: query
        name: nested
        type: string
      - in: query
        name: parentCommentId
        type: string
      - in: query
        name: threadId
        type: string
      - in: query
        name: maxDepth
        type: string
      responses:
        200:
          description: Successfully retrieved project-level comments
      security:
      - JWT_v2: []
      summary: Get project-level comments
      tags:
      - Comments
    patch:
      description: Update a comment by ID
      operationId: v2_updateComment
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: query
        name: commentId
        required: true
        type: string
      - in: body
        name: body
        schema:
          type: object
      responses:
        200:
          description: Comment updated successfully
      security:
      - JWT_v2: []
      summary: Update a comment
      tags:
      - Comments
    post:
      description: Create a new comment
      operationId: v2_createComment
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: body
        name: body
        schema:
          type: object
      responses:
        201:
          description: Comment created successfully
      security:
      - JWT_v2: []
      summary: Create a comment
      tags:
      - Comments
  /v2/workspaces/{workspaceId}/projects/{projectId}/correspondence:
    get:
      operationId: v2_getCorrespondence
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Filter by module type (opportunity, client, action, general)
        in: query
        name: target_module
        required: false
        type: string
      - description: Filter by specific entity ID
        in: query
        name: target_entity_id
        required: false
        type: string
      - default: 50
        description: Number of results to return (default 50, max 200)
        in: query
        name: limit
        required: false
        type: integer
      - default: 0
        description: Number of results to skip (default 0)
        in: query
        name: offset
        required: false
        type: integer
      - description: Filter by correspondence date after (ISO8601 format)
        in: query
        name: after_date
        required: false
        type: string
      - description: Filter by correspondence date before (ISO8601 format)
        in: query
        name: before_date
        required: false
        type: string
      - description: Filter by sender email or name (partial match)
        in: query
        name: sender
        required: false
        type: string
      - description: Search in email subject (partial match)
        in: query
        name: search
        required: false
        type: string
      responses:
        200:
          description: A successful response
          schema:
            properties:
              limit:
                description: Limit used in the query
                type: integer
              offset:
                description: Offset used in the query
                type: integer
              results:
                description: Array of correspondence records
                items:
                  properties:
                    associations:
                      description: Array of entity associations
                      items:
                        properties:
                          target_entity_id:
                            description: The entity ID
                            type: string
                          target_module:
                            description: The module type
                            type: string
                        type: object
                      type: array
                    correspondence_date:
                      description: When the email was sent (ISO8601)
                      type: string
                    correspondence_id:
                      description: The correspondence ID
                      type: integer
                    email_subject:
                      description: The email subject
                      type: string
                    logged_date:
                      description: When the email was logged (ISO8601)
                      type: string
                    sender_email:
                      description: The sender email
                      type: string
                    sender_name:
                      description: The sender name
                      type: string
                  type: object
                type: array
              total:
                description: Total number of correspondence records matching filters
                type: integer
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get correspondence logs for a project
      tags:
      - Correspondence Logging
    post:
      operationId: v2_logCorrespondence
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            associations:
              description: array of association objects linking correspondence to
                entities
              items:
                properties:
                  target_entity_id:
                    description: The Firestore entity ID (e.g., UUID)
                    maxLength: 255
                    type: string
                  target_module:
                    description: The module type (opportunity, client, action, general)
                    enum:
                    - opportunity
                    - client
                    - action
                    - general
                    type: string
                required:
                - target_module
                - target_entity_id
                type: object
              type: array
            attachments:
              description: array of attachment objects
              items:
                properties:
                  cde_id:
                    description: The CDE ID corresponding to attachment
                    type: integer
                required:
                - cde_id
                type: object
              type: array
            date_sent:
              description: datetime in ISO format
              type: string
            html_content:
              description: The html content of the email
              type: string
            recipients:
              description: array of recipient objects
              items:
                properties:
                  email:
                    description: The email of the recipient
                    type: string
                  name:
                    description: The name of the recipient
                    type: string
                  type:
                    description: The type of recipient ('to', 'cc', 'bcc')
                    type: string
                required:
                - email
                - name
                - type
                type: object
              type: array
            sender_email:
              description: The email of the sender
              type: string
            sender_name:
              description: The name of the sender
              type: string
            subject:
              description: The email subject
              type: string
            text_content:
              description: The text content of the email
              type: string
          required:
          - subject
          - date_sent
          - text_content
          - html_content
          - sender_email
          - sender_name
          - recipients
          type: object
      responses:
        200:
          description: A successful response
          schema:
            properties:
              associations_created:
                description: The number of associations created
                type: integer
              correspondence_id:
                description: The ID of the created correspondence
                type: integer
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Log a correspondence in Deep Space
      tags:
      - Correspondence Logging
  /v2/workspaces/{workspaceId}/projects/{projectId}/correspondence_v2/email-provider-synchronizations:
    post:
      description: Start synchronizing emails from a connected email provider.
      operationId: v2_startEmailSync
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            provider:
              default: microsoft
              description: Email provider to sync from
              enum:
              - microsoft
              type: string
          type: object
      responses:
        202:
          description: Sync job started
          schema:
            properties:
              created_at:
                format: date-time
                type: string
              id:
                description: Sync job ID
                format: uuid
                type: string
              status:
                enum:
                - pending
                - processing
                - completed
                - failed
                type: string
            type: object
        401:
          description: Unauthorized
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Start email sync
      tags:
      - Correspondence
  /v2/workspaces/{workspaceId}/projects/{projectId}/correspondence_v2/email-provider-synchronizations/{jobId}:
    get:
      description: Get the current status of a sync job.
      operationId: v2_getEmailSyncStatus
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Sync job ID
        in: path
        name: jobId
        required: true
        type: string
      responses:
        200:
          description: Sync job status
          schema:
            properties:
              completed_at:
                format: date-time
                type: string
              created_at:
                format: date-time
                type: string
              emails_synced:
                description: Number of emails synced
                type: integer
              error:
                description: Error code if failed
                enum:
                - INSUFFICIENT_PERMISSIONS
                - SYNC_ERROR
                type: string
              error_message:
                description: Error message if failed
                type: string
              id:
                format: uuid
                type: string
              started_at:
                format: date-time
                type: string
              status:
                enum:
                - pending
                - processing
                - completed
                - failed
                type: string
              threads_created:
                description: Number of new threads created
                type: integer
              threads_updated:
                description: Number of existing threads updated
                type: integer
            type: object
        401:
          description: Unauthorized
        404:
          description: Sync job not found
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get sync job status
      tags:
      - Correspondence
  /v2/workspaces/{workspaceId}/projects/{projectId}/correspondence_v2/email-provider-synchronizations/{jobId}/events:
    get:
      description: Server-Sent Events stream for real-time sync progress updates.
      operationId: v2_streamEmailSyncProgress
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Sync job ID
        in: path
        name: jobId
        required: true
        type: string
      produces:
      - text/event-stream
      responses:
        200:
          description: SSE stream of sync progress events
        401:
          description: Unauthorized
        404:
          description: Sync job not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Stream sync progress
      tags:
      - Correspondence
  /v2/workspaces/{workspaceId}/projects/{projectId}/correspondence_v2/emails:
    post:
      description: Ingest a new email into the system. Threading is computed automatically.
      operationId: v2_ingestEmail
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            additional_headers:
              additionalProperties:
                type: string
              description: Additional headers not explicitly modeled
              type: object
            attachments:
              items:
                properties:
                  cde_id:
                    description: ID of attachment from CDE service
                    type: string
                  content_base64:
                    description: Base64-encoded file content (transient, for upload
                      processing)
                    type: string
                  content_disposition:
                    default: attachment
                    description: '''attachment'' or ''inline'''
                    type: string
                  content_id:
                    description: RFC 2392
                    type: string
                  content_type:
                    description: MIME type (e.g., 'application/pdf')
                    type: string
                  filename:
                    description: Original filename of the attachment
                    type: string
                required:
                - filename
                - content_type
                type: object
              type: array
            bcc:
              items:
                properties:
                  address:
                    format: email
                    type: string
                  display_name:
                    type: string
                type: object
              type: array
            cc:
              items:
                properties:
                  address:
                    format: email
                    type: string
                  display_name:
                    type: string
                type: object
              type: array
            comments:
              description: Additional comments
              type: string
            date:
              description: Date and time the message was composed
              format: date-time
              type: string
            direction:
              description: Whether email is inbound (received) or outbound (sent)
              enum:
              - inbound
              - outbound
              type: string
            from:
              properties:
                address:
                  description: Email address (local-part@domain)
                  format: email
                  type: string
                display_name:
                  description: Display name (optional)
                  type: string
              required:
              - address
              type: object
            in_reply_to:
              description: Message-ID(s) of the parent message(s) this replies to
              items:
                type: string
              type: array
            keywords:
              description: Keywords/tags
              items:
                type: string
              type: array
            message_id:
              description: Unique message identifier in format <id-left@id-right>
              type: string
            references:
              description: Thread chain of Message-IDs
              items:
                type: string
              type: array
            reply_to:
              items:
                properties:
                  address:
                    format: email
                    type: string
                  display_name:
                    type: string
                type: object
              type: array
            sender:
              properties:
                address:
                  format: email
                  type: string
                display_name:
                  type: string
              type: object
            subject:
              description: Subject line
              type: string
            text_html:
              description: HTML body (text/html)
              type: string
            text_plain:
              description: Plain text body (text/plain)
              type: string
            to:
              items:
                properties:
                  address:
                    format: email
                    type: string
                  display_name:
                    type: string
                required:
                - address
                type: object
              type: array
          required:
          - date
          - from
          - message_id
          - direction
          type: object
      responses:
        201:
          description: Email ingested successfully
          schema:
            properties:
              cc:
                items:
                  properties:
                    address:
                      type: string
                    display_name:
                      type: string
                  type: object
                type: array
              created_at:
                format: date-time
                type: string
              date:
                format: date-time
                type: string
              direction:
                enum:
                - inbound
                - outbound
                type: string
              from:
                properties:
                  address:
                    type: string
                  display_name:
                    type: string
                type: object
              id:
                description: ID of firestore item
                format: uuid
                type: string
              message_id:
                type: string
              project_id:
                type: integer
              subject:
                type: string
              thread_id:
                type: string
              to:
                items:
                  properties:
                    address:
                      type: string
                    display_name:
                      type: string
                  type: object
                type: array
              workspace_id:
                type: string
            type: object
        401:
          description: Unauthorized
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Ingest an email
      tags:
      - Correspondence
  /v2/workspaces/{workspaceId}/projects/{projectId}/correspondence_v2/notices:
    get:
      description: Get notices for a project with optional filters.
      operationId: v2_listNotices
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Filter by status
        enum:
        - draft
        - issued
        - acknowledged
        - actioned
        - closed
        in: query
        name: status
        required: false
        type: string
      - description: Filter by type
        enum:
        - EOT
        - VO
        - RFI
        - SI
        - GC
        - NOD
        - CC
        - CI
        - CAN
        - NOC
        - NTS
        in: query
        name: type
        required: false
        type: string
      - default: 50
        description: Items per page. 0 = no limit (returns all)
        in: query
        maximum: 100
        minimum: 0
        name: limit
        required: false
        type: integer
      - description: Doc ID - get older items
        in: query
        name: after
        required: false
        type: string
      - description: Doc ID - get newer items
        in: query
        name: before
        required: false
        type: string
      - default: created_at
        description: Field to sort by
        enum:
        - created_at
        - updated_at
        - due_date
        in: query
        name: sort_by
        required: false
        type: string
      - default: desc
        description: Sort order (asc or desc)
        enum:
        - asc
        - desc
        in: query
        name: sort_order
        required: false
        type: string
      responses:
        200:
          description: List of notices
          schema:
            properties:
              next_cursor:
                description: Cursor for next page (null if no more results)
                type: string
              page_size:
                type: integer
              prev_cursor:
                description: Cursor for previous page (null if at start)
                type: string
              results:
                items:
                  properties:
                    assignee:
                      description: User ID of the person assigned to this notice
                      type: string
                    created_at:
                      format: date-time
                      type: string
                    created_by:
                      type: string
                    due_date:
                      format: date-time
                      type: string
                    id:
                      description: Firestore document ID
                      type: string
                    is_deleted:
                      type: boolean
                    linked_friendly_id:
                      type: string
                    linked_id:
                      type: string
                    list_index:
                      type: string
                    project_id:
                      type: integer
                    response_required:
                      type: boolean
                    status:
                      enum:
                      - draft
                      - issued
                      - acknowledged
                      - actioned
                      - closed
                      type: string
                    summary:
                      type: string
                    thread_ids:
                      description: Firestore document IDs of threads linked to this
                        notice
                      items:
                        type: string
                      type: array
                    type:
                      enum:
                      - EOT
                      - VO
                      - RFI
                      - SI
                      - GC
                      - NOD
                      - CC
                      - CI
                      - CAN
                      - NOC
                      - NTS
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                    updated_by:
                      type: string
                    workspace_id:
                      type: string
                  type: object
                type: array
            type: object
        401:
          description: Unauthorized
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: List notices
      tags:
      - Correspondence
    post:
      description: Create a new notice linking a thread to a business record.
      operationId: v2_createNotice
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            assignee:
              description: User ID of the person assigned to this notice
              type: string
            due_date:
              description: Mandatory if response_required is True
              format: date-time
              type: string
            linked_friendly_id:
              description: eg. RFI-001
              type: string
            linked_id:
              description: Database ID of Variation Order, RFI, etc. Can be int for
                DS Site
              type: string
            list_index:
              description: Kanban sort key. Lexographic ordering enables reordering
                with only a single update. Auto-generated if not provided.
              type: string
            response_required:
              default: false
              type: boolean
            status:
              default: draft
              description: Draft, Issued, etc
              enum:
              - draft
              - issued
              - acknowledged
              - actioned
              - closed
              type: string
            summary:
              description: eg, Ceiling grid specification clarification
              type: string
            thread_ids:
              description: Thread IDs to link on creation
              items:
                type: string
              type: array
            type:
              description: Variation Order, Request For Information, etc
              enum:
              - EOT
              - VO
              - RFI
              - SI
              - GC
              - NOD
              - CC
              - CI
              - CAN
              - NOC
              - NTS
              type: string
          required:
          - summary
          - type
          - linked_id
          - linked_friendly_id
          type: object
      responses:
        201:
          description: Notice created successfully
          schema:
            properties:
              assignee:
                description: User ID of the person assigned to this notice
                type: string
              created_at:
                format: date-time
                type: string
              created_by:
                type: string
              due_date:
                format: date-time
                type: string
              id:
                description: Firestore document ID
                type: string
              is_deleted:
                type: boolean
              linked_friendly_id:
                type: string
              linked_id:
                type: string
              list_index:
                type: string
              project_id:
                type: integer
              response_required:
                type: boolean
              status:
                enum:
                - draft
                - issued
                - acknowledged
                - actioned
                - closed
                type: string
              summary:
                type: string
              type:
                enum:
                - EOT
                - VO
                - RFI
                - SI
                - GC
                - NOD
                - CC
                - CI
                - CAN
                - NOC
                - NTS
                type: string
              updated_at:
                format: date-time
                type: string
              updated_by:
                type: string
              workspace_id:
                type: string
            type: object
        401:
          description: Unauthorized
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a notice
      tags:
      - Correspondence
  /v2/workspaces/{workspaceId}/projects/{projectId}/correspondence_v2/notices/{noticeId}:
    delete:
      description: Soft delete a notice.
      operationId: v2_deleteNotice
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Notice document ID
        in: path
        name: noticeId
        required: true
        type: string
      responses:
        204:
          description: Notice deleted successfully
        401:
          description: Unauthorized
        404:
          description: Notice not found
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete a notice
      tags:
      - Correspondence
    get:
      description: Get a single notice by its ID.
      operationId: v2_getNotice
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Notice document ID
        in: path
        name: noticeId
        required: true
        type: string
      responses:
        200:
          description: Notice details
          schema:
            properties:
              assignee:
                description: User ID of the person assigned to this notice
                type: string
              created_at:
                format: date-time
                type: string
              created_by:
                type: string
              due_date:
                format: date-time
                type: string
              id:
                description: Firestore document ID
                type: string
              is_deleted:
                type: boolean
              linked_friendly_id:
                type: string
              linked_id:
                type: string
              list_index:
                type: string
              project_id:
                type: integer
              response_required:
                type: boolean
              status:
                enum:
                - draft
                - issued
                - acknowledged
                - actioned
                - closed
                type: string
              summary:
                type: string
              thread_ids:
                description: Firestore document IDs of threads linked to this notice
                items:
                  type: string
                type: array
              type:
                enum:
                - EOT
                - VO
                - RFI
                - SI
                - GC
                - NOD
                - CC
                - CI
                - CAN
                - NOC
                - NTS
                type: string
              updated_at:
                format: date-time
                type: string
              updated_by:
                type: string
              workspace_id:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Notice not found
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get a notice
      tags:
      - Correspondence
    patch:
      description: Partially update a notice. Only provided fields will be updated.
      operationId: v2_updateNotice
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Notice document ID
        in: path
        name: noticeId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assignee:
              description: User ID of the person assigned to this notice
              type: string
            due_date:
              format: date-time
              type: string
            linked_friendly_id:
              type: string
            linked_id:
              type: string
            list_index:
              type: string
            response_required:
              type: boolean
            status:
              enum:
              - draft
              - issued
              - acknowledged
              - actioned
              - closed
              type: string
            summary:
              type: string
            thread_ids:
              description: Replace all linked threads (pass empty array to unlink
                all)
              items:
                type: string
              type: array
            type:
              enum:
              - EOT
              - VO
              - RFI
              - SI
              - GC
              - NOD
              - CC
              - CI
              - CAN
              - NOC
              - NTS
              type: string
          type: object
      responses:
        200:
          description: Notice updated successfully
          schema:
            properties:
              assignee:
                description: User ID of the person assigned to this notice
                type: string
              created_at:
                format: date-time
                type: string
              created_by:
                type: string
              due_date:
                format: date-time
                type: string
              id:
                description: Firestore document ID
                type: string
              is_deleted:
                type: boolean
              linked_friendly_id:
                type: string
              linked_id:
                type: string
              list_index:
                type: string
              project_id:
                type: integer
              response_required:
                type: boolean
              status:
                enum:
                - draft
                - issued
                - acknowledged
                - actioned
                - closed
                type: string
              summary:
                type: string
              type:
                enum:
                - EOT
                - VO
                - RFI
                - SI
                - GC
                - NOD
                - CC
                - CI
                - CAN
                - NOC
                - NTS
                type: string
              updated_at:
                format: date-time
                type: string
              updated_by:
                type: string
              workspace_id:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Notice not found
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update a notice
      tags:
      - Correspondence
  /v2/workspaces/{workspaceId}/projects/{projectId}/correspondence_v2/notices/{noticeId}/issue:
    post:
      description: Issue a draft notice, sending email notification to recipients.
      operationId: v2_issueNotice
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Notice document ID
        in: path
        name: noticeId
        required: true
        type: string
      responses:
        200:
          description: Notice issued successfully
          schema:
            properties:
              assignee:
                description: User ID of the person assigned to this notice
                type: string
              created_at:
                format: date-time
                type: string
              created_by:
                type: string
              due_date:
                format: date-time
                type: string
              id:
                description: Firestore document ID
                type: string
              is_deleted:
                type: boolean
              issued_at:
                format: date-time
                type: string
              issued_by:
                type: string
              linked_friendly_id:
                type: string
              linked_id:
                type: string
              list_index:
                type: string
              project_id:
                type: integer
              response_required:
                type: boolean
              status:
                enum:
                - draft
                - issued
                - acknowledged
                - actioned
                - closed
                type: string
              summary:
                type: string
              type:
                enum:
                - EOT
                - VO
                - RFI
                - SI
                - GC
                - NOD
                - CC
                - CI
                - CAN
                - NOC
                - NTS
                type: string
              updated_at:
                format: date-time
                type: string
              updated_by:
                type: string
              workspace_id:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Notice not found
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Issue a notice
      tags:
      - Correspondence
  /v2/workspaces/{workspaceId}/projects/{projectId}/correspondence_v2/threads:
    get:
      description: Get email threads for a project with cursor-based pagination.
      operationId: v2_listThreads
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - default: 50
        description: Items per page. 0 = no limit (returns all)
        in: query
        maximum: 100
        minimum: 0
        name: limit
        required: false
        type: integer
      - description: Thread doc ID - get older threads
        in: query
        name: after
        required: false
        type: string
      - description: Thread doc ID - get newer threads
        in: query
        name: before
        required: false
        type: string
      - default: desc
        description: Sort order (asc or desc)
        enum:
        - asc
        - desc
        in: query
        name: sort_order
        required: false
        type: string
      responses:
        200:
          description: List of email threads
          schema:
            properties:
              next_cursor:
                description: Cursor for next page (null if no more results)
                type: string
              page_size:
                type: integer
              prev_cursor:
                description: Cursor for previous page (null if at start)
                type: string
              results:
                items:
                  properties:
                    created_at:
                      format: date-time
                      type: string
                    first_message_date:
                      description: Timestamp of the first message (thread start)
                      format: date-time
                      type: string
                    id:
                      description: Firestore document ID
                      type: string
                    last_message_date:
                      description: Timestamp of the most recent message
                      format: date-time
                      type: string
                    linked_notice:
                      description: Summary of the notice this thread is linked to
                        (if any)
                      properties:
                        id:
                          description: Firestore document ID of the notice
                          type: string
                        linked_friendly_id:
                          description: Human-readable ID (e.g., RFI-001)
                          type: string
                        type:
                          description: Notice type (e.g., RFI, VO, EOT)
                          type: string
                      type: object
                    participants:
                      description: Unique participants with email addresses and display
                        names
                      items:
                        properties:
                          address:
                            type: string
                          display_name:
                            type: string
                        type: object
                      type: array
                    project_id:
                      type: integer
                    subject:
                      description: Thread subject (from first message in thread)
                      type: string
                    thread_id:
                      description: Thread identifier (root message's Message-ID)
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                    workspace_id:
                      type: string
                  type: object
                type: array
            type: object
        401:
          description: Unauthorized
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: List email threads
      tags:
      - Correspondence
  /v2/workspaces/{workspaceId}/projects/{projectId}/correspondence_v2/threads/{threadDocId}:
    get:
      description: Get a single thread summary along with all its messages.
      operationId: v2_getThread
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Thread document ID
        in: path
        name: threadDocId
        required: true
        type: string
      responses:
        200:
          description: Thread with all messages
          schema:
            properties:
              created_at:
                format: date-time
                type: string
              first_message_date:
                description: Timestamp of the first message (thread start)
                format: date-time
                type: string
              id:
                description: Firestore document ID
                type: string
              last_message_date:
                description: Timestamp of the most recent message
                format: date-time
                type: string
              linked_notice:
                description: Summary of the notice this thread is linked to (if any)
                properties:
                  id:
                    description: Firestore document ID of the notice
                    type: string
                  linked_friendly_id:
                    description: Human-readable ID (e.g., RFI-001)
                    type: string
                  type:
                    description: Notice type (e.g., RFI, VO, EOT)
                    type: string
                type: object
              messages:
                description: Messages in the thread, ordered by date
                items:
                  properties:
                    attachments:
                      items:
                        properties:
                          cde_id:
                            type: string
                          content_type:
                            type: string
                          filename:
                            type: string
                        type: object
                      type: array
                    cc:
                      items:
                        properties:
                          address:
                            type: string
                          display_name:
                            type: string
                        type: object
                      type: array
                    created_at:
                      format: date-time
                      type: string
                    date:
                      format: date-time
                      type: string
                    direction:
                      enum:
                      - inbound
                      - outbound
                      type: string
                    from:
                      properties:
                        address:
                          type: string
                        display_name:
                          type: string
                      type: object
                    id:
                      format: uuid
                      type: string
                    in_reply_to:
                      items:
                        type: string
                      type: array
                    message_id:
                      type: string
                    project_id:
                      type: integer
                    references:
                      items:
                        type: string
                      type: array
                    subject:
                      type: string
                    text_html:
                      type: string
                    text_plain:
                      type: string
                    thread_id:
                      type: string
                    to:
                      items:
                        properties:
                          address:
                            type: string
                          display_name:
                            type: string
                        type: object
                      type: array
                    workspace_id:
                      type: string
                  type: object
                minItems: 1
                type: array
              participants:
                description: Unique participants with email addresses and display
                  names
                items:
                  properties:
                    address:
                      type: string
                    display_name:
                      type: string
                  type: object
                type: array
              project_id:
                type: integer
              subject:
                description: Thread subject (from first message in thread)
                type: string
              thread_id:
                description: Thread identifier (root message's Message-ID)
                type: string
              updated_at:
                format: date-time
                type: string
              workspace_id:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Thread not found
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get a thread with all messages
      tags:
      - Correspondence
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/aggregate:
    post:
      operationId: v2_postCostAggregateProject
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            project_level:
              description: Endpoints that require project_id
              items:
                properties:
                  endpoint:
                    description: Target endpoint name
                    enum:
                    - budget-items
                    - invoices
                    - orders
                    - variation-requests
                    - approvals
                    - claims
                    - attachments
                    - line-items
                    - contracts
                    - payment-schedules
                    - retentions
                    type: string
                  params:
                    additionalProperties: true
                    description: Parameters for the endpoint
                    properties:
                      method:
                        default: GET
                        type: string
                      project_id:
                        description: Project identifier (will use URL projectId if
                          not specified)
                        type: integer
                      sub_path:
                        default: ''
                        type: string
                    type: object
                required:
                - endpoint
                type: object
              type: array
            workspace_level:
              description: Endpoints that don't require project_id
              items:
                properties:
                  endpoint:
                    description: Target endpoint name
                    enum:
                    - cost-codes
                    - budget-categories
                    type: string
                  params:
                    additionalProperties: true
                    description: Parameters for the endpoint
                    properties:
                      method:
                        default: GET
                        type: string
                      sub_path:
                        default: ''
                        type: string
                    type: object
                required:
                - endpoint
                type: object
              type: array
          type: object
      responses:
        200:
          description: Successful response with aggregated data
          schema:
            properties:
              project_level:
                additionalProperties:
                  properties:
                    data:
                      description: Response data from the endpoint
                      type: object
                    error:
                      description: Error message if endpoint failed
                      type: string
                    status_code:
                      description: HTTP status code from the endpoint
                      type: integer
                  type: object
                description: Results from project-level endpoints
                type: object
              workspace_level:
                additionalProperties:
                  properties:
                    data:
                      description: Response data from the endpoint
                      type: object
                    error:
                      description: Error message if endpoint failed
                      type: string
                    status_code:
                      description: HTTP status code from the endpoint
                      type: integer
                  type: object
                description: Results from workspace-level endpoints
                type: object
            type: object
        400:
          description: Bad request - invalid request body or parameters
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
          schema:
            properties:
              message:
                type: string
            type: object
        405:
          description: Method not allowed
          schema:
            properties:
              message:
                type: string
            type: object
        500:
          description: Internal Server Error
          schema:
            properties:
              message:
                type: string
            type: object
      security:
      - JWT_v2: []
      summary: Aggregate Cost Data from Multiple Endpoints (Project Level)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/approvals:
    get:
      operationId: v2_getCostApprovals
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                approval_by_company_id:
                  description: Internal identifier for the approving company
                approval_by_user_email:
                  description: Email of the user who submitted the approval
                approval_date:
                  description: Date of the approval
                approval_identifier:
                  description: User-friendly identifier for cost approval
                approval_status:
                  description: Status of the approval
                cost_approval_num:
                  description: Internal identifier for cost approval
                cost_num:
                  description: ID of the cost the approval is for
                cost_table:
                  description: Table the approval is for
                note:
                  description: Note added to the approval
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Approvals
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/approvals/claims:
    get:
      operationId: v2_getCostClaimApprovals
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                approval_by_company_id:
                  description: Internal identifier for the approving company
                approval_by_user_email:
                  description: Email of the user who submitted the approval
                approval_date:
                  description: Date of the approval
                approval_identifier:
                  description: User-friendly identifier for cost approval
                approval_status:
                  description: Status of the approval
                cost_approval_num:
                  description: Internal identifier for cost approval
                cost_num:
                  description: ID of the cost the approval is for
                cost_table:
                  description: Table the approval is for
                note:
                  description: Note added to the approval
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Claim Approvals
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostClaimApproval
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            approval_by_company_id:
              description: Internal identifier for the approving company
            approval_status:
              description: Status of the approval
            cost_num:
              description: ID of the cost the approval is for
            note:
              description: Note added to the approval
          required:
          - cost_num
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              approval_by_company_id:
                description: Internal identifier for the approving company
              approval_by_user_email:
                description: Email of the user who submitted the approval
              approval_date:
                description: Date of the approval
              approval_identifier:
                description: User-friendly identifier for cost approval
              approval_status:
                description: Status of the approval
              cost_approval_num:
                description: Internal identifier for cost approval
              cost_num:
                description: ID of the cost the approval is for
              cost_table:
                description: Table the approval is for
              note:
                description: Note added to the approval
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Claim Approval
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/approvals/claims/{costApprovalId}:
    get:
      operationId: v2_getCostClaimApprovalById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costApprovalId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              approval_by_company_id:
                description: Internal identifier for the approving company
              approval_by_user_email:
                description: Email of the user who submitted the approval
              approval_date:
                description: Date of the approval
              approval_identifier:
                description: User-friendly identifier for cost approval
              approval_status:
                description: Status of the approval
              cost_approval_num:
                description: Internal identifier for cost approval
              cost_num:
                description: ID of the cost the approval is for
              cost_table:
                description: Table the approval is for
              note:
                description: Note added to the approval
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Claim Approval By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostClaimApprovalById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costApprovalId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            approval_status:
              description: Status of the approval
            note:
              description: Note added to the approval
          type: object
      responses:
        201:
          description: Object successfully edited
          schema:
            properties:
              approval_by_company_id:
                description: Internal identifier for the approving company
              approval_by_user_email:
                description: Email of the user who submitted the approval
              approval_date:
                description: Date of the approval
              approval_identifier:
                description: User-friendly identifier for cost approval
              approval_status:
                description: Status of the approval
              cost_approval_num:
                description: Internal identifier for cost approval
              cost_num:
                description: ID of the cost the approval is for
              cost_table:
                description: Table the approval is for
              note:
                description: Note added to the approval
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Claim Approval By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/approvals/invoices:
    get:
      operationId: v2_getCostInvoiceApprovals
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                approval_by_company_id:
                  description: Internal identifier for the approving company
                approval_by_user_email:
                  description: Email of the user who submitted the approval
                approval_date:
                  description: Date of the approval
                approval_identifier:
                  description: User-friendly identifier for cost approval
                approval_status:
                  description: Status of the approval
                cost_approval_num:
                  description: Internal identifier for cost approval
                cost_num:
                  description: ID of the cost the approval is for
                cost_table:
                  description: Table the approval is for
                note:
                  description: Note added to the approval
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Invoice Approvals
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostInvoiceApproval
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            approval_by_company_id:
              description: Internal identifier for the approving company
            approval_status:
              description: Status of the approval
            cost_num:
              description: ID of the cost the approval is for
            note:
              description: Note added to the approval
          required:
          - cost_num
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              approval_by_company_id:
                description: Internal identifier for the approving company
              approval_by_user_email:
                description: Email of the user who submitted the approval
              approval_date:
                description: Date of the approval
              approval_identifier:
                description: User-friendly identifier for cost approval
              approval_status:
                description: Status of the approval
              cost_approval_num:
                description: Internal identifier for cost approval
              cost_num:
                description: ID of the cost the approval is for
              cost_table:
                description: Table the approval is for
              note:
                description: Note added to the approval
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Invoice Approval
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/approvals/invoices/{costApprovalId}:
    get:
      operationId: v2_getCostInvoiceApprovalById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costApprovalId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              approval_by_company_id:
                description: Internal identifier for the approving company
              approval_by_user_email:
                description: Email of the user who submitted the approval
              approval_date:
                description: Date of the approval
              approval_identifier:
                description: User-friendly identifier for cost approval
              approval_status:
                description: Status of the approval
              cost_approval_num:
                description: Internal identifier for cost approval
              cost_num:
                description: ID of the cost the approval is for
              cost_table:
                description: Table the approval is for
              note:
                description: Note added to the approval
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Invoice Approval By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostInvoiceApprovalById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costApprovalId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            approval_status:
              description: Status of the approval
            note:
              description: Note added to the approval
          type: object
      responses:
        201:
          description: Object successfully edited
          schema:
            properties:
              approval_by_company_id:
                description: Internal identifier for the approving company
              approval_by_user_email:
                description: Email of the user who submitted the approval
              approval_date:
                description: Date of the approval
              approval_identifier:
                description: User-friendly identifier for cost approval
              approval_status:
                description: Status of the approval
              cost_approval_num:
                description: Internal identifier for cost approval
              cost_num:
                description: ID of the cost the approval is for
              cost_table:
                description: Table the approval is for
              note:
                description: Note added to the approval
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Invoice Approval By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/approvals/variation-requests:
    get:
      operationId: v2_getCostVariationRequestApprovals
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                approval_by_company_id:
                  description: Internal identifier for the approving company
                approval_by_user_email:
                  description: Email of the user who submitted the approval
                approval_date:
                  description: Date of the approval
                approval_identifier:
                  description: User-friendly identifier for cost approval
                approval_status:
                  description: Status of the approval
                cost_approval_num:
                  description: Internal identifier for cost approval
                cost_num:
                  description: ID of the cost the approval is for
                cost_table:
                  description: Table the approval is for
                note:
                  description: Note added to the approval
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Variation Request Approvals
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostVariationRequestApproval
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            approval_by_company_id:
              description: Internal identifier for the approving company
            approval_status:
              description: Status of the approval
            cost_num:
              description: ID of the cost the approval is for
            note:
              description: Note added to the approval
          required:
          - cost_num
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              approval_by_company_id:
                description: Internal identifier for the approving company
              approval_by_user_email:
                description: Email of the user who submitted the approval
              approval_date:
                description: Date of the approval
              approval_identifier:
                description: User-friendly identifier for cost approval
              approval_status:
                description: Status of the approval
              cost_approval_num:
                description: Internal identifier for cost approval
              cost_num:
                description: ID of the cost the approval is for
              cost_table:
                description: Table the approval is for
              note:
                description: Note added to the approval
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Variation Request Approval
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/approvals/variation-requests/{costApprovalId}:
    get:
      operationId: v2_getCostVariationRequestApprovalById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costApprovalId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              approval_by_company_id:
                description: Internal identifier for the approving company
              approval_by_user_email:
                description: Email of the user who submitted the approval
              approval_date:
                description: Date of the approval
              approval_identifier:
                description: User-friendly identifier for cost approval
              approval_status:
                description: Status of the approval
              cost_approval_num:
                description: Internal identifier for cost approval
              cost_num:
                description: ID of the cost the approval is for
              cost_table:
                description: Table the approval is for
              note:
                description: Note added to the approval
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Variation Request Approval By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostVariationRequestApprovalById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costApprovalId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            approval_status:
              description: Status of the approval
            note:
              description: Note added to the approval
          type: object
      responses:
        201:
          description: Object successfully edited
          schema:
            properties:
              approval_by_company_id:
                description: Internal identifier for the approving company
              approval_by_user_email:
                description: Email of the user who submitted the approval
              approval_date:
                description: Date of the approval
              approval_identifier:
                description: User-friendly identifier for cost approval
              approval_status:
                description: Status of the approval
              cost_approval_num:
                description: Internal identifier for cost approval
              cost_num:
                description: ID of the cost the approval is for
              cost_table:
                description: Table the approval is for
              note:
                description: Note added to the approval
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Variation Request Approval By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/attachments/{costObjectType}/{costObjectNum}:
    post:
      operationId: v2_postCostAttachments
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costObjectType
        required: true
        type: string
      - in: path
        name: costObjectNum
        required: true
        type: integer
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Cost Attachment
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/boq-versions:
    get:
      operationId: v2_getBOQVersions
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: query
        name: page
        type: integer
      - in: query
        name: limit
        type: integer
      - in: query
        name: status
        type: string
      - in: query
        name: q
        type: string
      - in: query
        name: includeBoqs
        type: boolean
      responses:
        200:
          description: Successful response
          schema:
            properties:
              items:
                items:
                  properties:
                    boq_version_id:
                      description: BOQ Version ID
                    boqs:
                      type: array
                    boqs_count:
                      type: integer
                    markup:
                      type: array
                    project_id:
                      description: Project ID
                    status:
                      description: Status
                    version_code:
                      description: Version code
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get BOQ Versions
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postBOQVersion
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            contingency:
              type: number
            markup:
              type: array
            overheads:
              type: number
            preliminaries:
              type: number
            profit_margin:
              type: number
            status:
              type: string
            version_code:
              type: string
          required:
          - version_code
          - status
          type: object
      responses:
        201:
          description: BOQ Version successfully created
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create BOQ Version
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/boq-versions/{versionId}:
    delete:
      operationId: v2_deleteBOQVersionById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      responses:
        200:
          description: BOQ Version successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete BOQ Version By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getBOQVersionById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: query
        name: includeBoqs
        type: boolean
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get BOQ Version By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchBOQVersionById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            contingency:
              type: number
            markup:
              type: array
            overheads:
              type: number
            preliminaries:
              type: number
            profit_margin:
              type: number
            status:
              type: string
            version_code:
              type: string
          type: object
      responses:
        200:
          description: BOQ Version successfully updated
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update BOQ Version By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/boq-versions/{versionId}/boqs:
    get:
      operationId: v2_getBOQs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: query
        name: page
        type: integer
      - in: query
        name: limit
        type: integer
      - in: query
        name: status
        type: string
      - in: query
        name: budget_category
        type: string
      - in: query
        name: q
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get BOQs
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postBOQ
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            budget_category:
              type: string
            items:
              type: array
            qto_id:
              type: string
            qto_name:
              type: string
            status:
              type: string
          required:
          - qto_name
          - budget_category
          - status
          type: object
      responses:
        201:
          description: BOQ successfully created
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create BOQ
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/boq-versions/{versionId}/boqs/{boqId}:
    delete:
      operationId: v2_deleteBOQById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: path
        name: boqId
        required: true
        type: string
      responses:
        200:
          description: BOQ successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete BOQ By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getBOQById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: path
        name: boqId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get BOQ By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchBOQById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: path
        name: boqId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: BOQ successfully updated
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update BOQ By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/boq-versions/{versionId}/boqs/{boqId}/items:
    get:
      operationId: v2_getBOQItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: path
        name: boqId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get BOQ Items
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postBOQItem
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: path
        name: boqId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: BOQ Item successfully created
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create BOQ Item
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/boq-versions/{versionId}/boqs/{boqId}/items/{itemId}:
    delete:
      operationId: v2_deleteBOQItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: path
        name: boqId
        required: true
        type: string
      - in: path
        name: itemId
        required: true
        type: string
      responses:
        200:
          description: BOQ Item successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete BOQ Item By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getBOQItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: path
        name: boqId
        required: true
        type: string
      - in: path
        name: itemId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get BOQ Item By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchBOQItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: path
        name: boqId
        required: true
        type: string
      - in: path
        name: itemId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: BOQ Item successfully updated
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update BOQ Item By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/boq-versions/{versionId}/boqs/{boqId}/items/{itemId}/move:
    post:
      operationId: v2_postBOQItemMove
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: path
        name: boqId
        required: true
        type: string
      - in: path
        name: itemId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            new_budget_category:
              type: string
          required:
          - new_budget_category
          type: object
      responses:
        200:
          description: Item moved successfully
          schema:
            properties:
              data:
                properties:
                  item:
                    type: object
                  source_boq_id:
                    type: string
                  target_boq_created:
                    type: boolean
                  target_boq_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Not Found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Move BOQ Item to Different BOQ
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/boq-versions/{versionId}/bulk-items:
    post:
      operationId: v2_postBOQBulkItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Items created successfully
          schema:
            type: object
        207:
          description: Partial success
        400:
          description: Bad request
        401:
          description: Unauthorized
        404:
          description: Not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Bulk Create BOQ Items
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/boq-versions/{versionId}/compare-with-qto:
    get:
      operationId: v2_getBOQCompareWithQTO
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      responses:
        200:
          description: Comparison completed successfully
          schema:
            properties:
              boqs_with_differences:
                type: integer
              differences:
                items:
                  type: object
                type: array
              message:
                type: string
              total_boqs_compared:
                type: integer
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Compare BOQ with QTO
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/boq-versions/{versionId}/markup:
    get:
      operationId: v2_getBOQVersionMarkup
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              count:
                type: integer
              items:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Version Markup List
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postBOQVersionMarkup
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            budget_category_id:
              type: string
            contingency:
              type: number
            overheads:
              type: number
            preliminaries:
              type: number
            profit_margin:
              type: number
          required:
          - budget_category_id
          - preliminaries
          - overheads
          - profit_margin
          - contingency
          type: object
      responses:
        201:
          description: Markup successfully created
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Version Markup
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/boq-versions/{versionId}/markup/{budgetCategoryId}:
    delete:
      operationId: v2_deleteBOQVersionMarkupByBudgetCategoryId
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: path
        name: budgetCategoryId
        required: true
        type: string
      responses:
        200:
          description: Markup successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Markup not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Version Markup By Budget Category ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getBOQVersionMarkupByBudgetCategoryId
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: path
        name: budgetCategoryId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Markup not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Version Markup By Budget Category ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchBOQVersionMarkupByBudgetCategoryId
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: path
        name: budgetCategoryId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            budget_category_id:
              type: string
            contingency:
              type: number
            overheads:
              type: number
            preliminaries:
              type: number
            profit_margin:
              type: number
          required:
          - budget_category_id
          - preliminaries
          - overheads
          - profit_margin
          - contingency
          type: object
      responses:
        200:
          description: Markup successfully updated
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Markup not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Version Markup By Budget Category ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/boq-versions/{versionId}/sync-from-qto:
    post:
      operationId: v2_postBOQSyncFromQTO
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: versionId
        required: true
        type: string
      - in: body
        name: body
        required: false
        schema:
          properties:
            qto_ids:
              items:
                type: string
              type: array
            sync_mode:
              type: string
          type: object
      responses:
        200:
          description: QTO sync completed successfully
          schema:
            properties:
              details:
                type: array
              message:
                type: string
              summary:
                type: object
            type: object
        207:
          description: QTO sync completed with errors
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Sync QTO to BOQ
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/budget-import:
    post:
      operationId: v2_postBudgetImport
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Excel file (.xlsx or .xls) containing Budget and Cost Codes sheets
        in: formData
        name: file
        required: true
        type: string
      responses:
        201:
          description: Budget import completed successfully
          schema:
            properties:
              data:
                properties:
                  budget_items:
                    description: Array of imported budget items
                    items:
                      properties:
                        cost_budget_identifier:
                          description: User-friendly identifier for cost budget item
                          type: string
                        cost_budget_item_description:
                          description: Description of the cost budget item
                          type: string
                        cost_budget_item_name:
                          description: Name of the cost budget item
                          type: string
                        cost_budget_item_num:
                          description: Internal identifier for cost budget item
                          type: integer
                        cost_code_num:
                          description: Cost code number
                          type: integer
                        original_total_amount:
                          description: Original total amount of the cost budget item
                          type: number
                        total_amount:
                          description: Total amount of the cost budget item
                          type: number
                      type: object
                    type: array
                  imported_budget_items:
                    description: Number of budget items imported
                    type: integer
                type: object
              message:
                description: Success message
                type: string
            type: object
        400:
          description: Bad Request
          schema:
            properties:
              message:
                description: Error message
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden - Insufficient permissions
        405:
          description: Method Not Allowed
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Import Budget Items from Excel File
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/budget-items:
    get:
      operationId: v2_getBudgetItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                cost_budget_identifier:
                  description: User-friendly identifier for cost budget item
                cost_budget_item_description:
                  description: Description of the cost budget item
                cost_budget_item_name:
                  description: Name of the cost budget item
                cost_budget_item_num:
                  description: Internal identifier for cost budget item
                cost_code_num:
                  description: Cost code number
                ds_wbs_id:
                  description: WBS ID of the cost budget item
                original_total_amount:
                  description: Original total amount of the cost budget item
                qty:
                  description: Quantity of the cost budget item
                total_amount:
                  description: Total amount of the cost budget item
                unit_amount:
                  description: Unit amount of the cost budget item
                unit_of_measure:
                  description: Unit of measure of the cost budget item
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Budget Items
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postBudgetItem
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_budget_item_client_id:
              description: Client ID of the cost budget item
            cost_budget_item_description:
              description: Description of the cost budget item
            cost_budget_item_name:
              description: Name of the cost budget item
            cost_code_num:
              description: Cost code number
            ds_wbs_id:
              description: WBS ID of the cost budget item
            qty:
              description: Quantity of the cost budget item
            total_amount:
              description: Total amount of the cost budget item
            unit_amount:
              description: Unit amount of the cost budget item
            unit_of_measure:
              description: Unit of measure of the cost budget item
          required:
          - cost_budget_item_name
          - cost_code_num
          - total_amount
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              cost_budget_identifier:
                description: User-friendly identifier for cost budget item
              cost_budget_item_description:
                description: Description of the cost budget item
              cost_budget_item_name:
                description: Name of the cost budget item
              cost_budget_item_num:
                description: Internal identifier for cost budget item
              cost_code_num:
                description: Cost code number
              ds_wbs_id:
                description: WBS ID of the cost budget item
              original_total_amount:
                description: Original total amount of the cost budget item
              qty:
                description: Quantity of the cost budget item
              total_amount:
                description: Total amount of the cost budget item
              unit_amount:
                description: Unit amount of the cost budget item
              unit_of_measure:
                description: Unit of measure of the cost budget item
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Budget Item
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/budget-items/{costBudgetItemId}:
    get:
      operationId: v2_getBudgetItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costBudgetItemId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              cost_budget_identifier:
                description: User-friendly identifier for cost budget item
              cost_budget_item_description:
                description: Description of the cost budget item
              cost_budget_item_name:
                description: Name of the cost budget item
              cost_budget_item_num:
                description: Internal identifier for cost budget item
              cost_code_num:
                description: Cost code number
              ds_wbs_id:
                description: WBS ID of the cost budget item
              original_total_amount:
                description: Original total amount of the cost budget item
              qty:
                description: Quantity of the cost budget item
              total_amount:
                description: Total amount of the cost budget item
              unit_amount:
                description: Unit amount of the cost budget item
              unit_of_measure:
                description: Unit of measure of the cost budget item
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Budget Item By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchBudgetItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costBudgetItemId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_budget_item_description:
              description: Description of the cost budget item
            cost_budget_item_name:
              description: Name of the cost budget item
            cost_code_num:
              description: Cost code number
            ds_wbs_id:
              description: WBS ID of the cost budget item
            qty:
              description: Quantity of the cost budget item
            total_amount:
              description: Total amount of the cost budget item
            unit_amount:
              description: Unit amount of the cost budget item
            unit_of_measure:
              description: Unit of measure of the cost budget item
          type: object
      responses:
        201:
          description: Object successfully edited
          schema:
            properties:
              cost_budget_identifier:
                description: User-friendly identifier for cost budget item
              cost_budget_item_description:
                description: Description of the cost budget item
              cost_budget_item_name:
                description: Name of the cost budget item
              cost_budget_item_num:
                description: Internal identifier for cost budget item
              cost_code_num:
                description: Cost code number
              ds_wbs_id:
                description: WBS ID of the cost budget item
              original_total_amount:
                description: Original total amount of the cost budget item
              qty:
                description: Quantity of the cost budget item
              total_amount:
                description: Total amount of the cost budget item
              unit_amount:
                description: Unit amount of the cost budget item
              unit_of_measure:
                description: Unit of measure of the cost budget item
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Budget Item By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/budget-register:
    get:
      operationId: v2_getBudgetRegister
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Set to 'true' to recalculate and update budget register using
          stored BOQ version
        in: query
        name: update_without_qto
        required: false
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              br_data:
                description: Budget register data with categories and cost codes
                type: object
              message:
                description: Response message
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Budget register data not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Budget Register
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchBudgetRegister
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Must be set to 'true' for full update including BOQ recalculation
          using stored BOQ version
        in: query
        name: full_update
        required: true
        type: string
      responses:
        200:
          description: Budget register data fully updated
          schema:
            properties:
              br_data:
                description: Updated budget register data
                type: object
              message:
                description: Response message
                type: string
            type: object
        400:
          description: Bad request - full_update parameter required or budget register
            created before BOQ version tracking
        401:
          description: Unauthorized
        404:
          description: Budget register data not found or BOQ version not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Budget Register with Full Recalculation from Stored BOQ Version
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postBudgetRegister
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: BOQ version ID to use for calculating original budget
        in: query
        name: boq_version_id
        required: true
        type: string
      responses:
        201:
          description: Budget register snapshot created successfully
          schema:
            properties:
              br_data:
                description: Created budget register data
                type: object
              message:
                description: Response message
                type: string
            type: object
        400:
          description: Bad request - boq_version_id parameter required or BOQ version
            does not belong to project
        401:
          description: Unauthorized
        404:
          description: BOQ version not found
        409:
          description: Budget register snapshot already exists
        422:
          description: No BOQ data found for this version
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Budget Register Snapshot from BOQ
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/budget-register/notes:
    delete:
      operationId: v2_deleteBudgetRegisterNote
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: ID of the note to delete
        in: query
        name: note_id
        required: true
        type: string
      responses:
        200:
          description: Note deleted successfully
          schema:
            properties:
              message:
                type: string
              note_id:
                type: string
            type: object
        400:
          description: Bad request - note_id required
        401:
          description: Unauthorized
        404:
          description: Note not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Budget Register Note
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getBudgetRegisterNotes
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              message:
                type: string
              notes:
                items:
                  type: object
                type: array
              total:
                type: integer
            type: object
        401:
          description: Unauthorized
        404:
          description: Budget register data not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Budget Register Notes
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postBudgetRegisterNote
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            note_content:
              type: string
          type: object
      responses:
        201:
          description: Note created successfully
          schema:
            properties:
              message:
                type: string
              note:
                type: object
            type: object
        400:
          description: Bad request
        401:
          description: Unauthorized
        404:
          description: Budget register data not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Budget Register Note
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/budget-snapshots:
    get:
      operationId: v2_getBudgetSnapshots
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                cost_budget_snapshot_id:
                  description: Internal identifier for cost budget snapshot
                items:
                  items:
                    properties:
                      cost_budget_item_num:
                        description: internal ID of the budget item
                      qty:
                        description: quantity of the budget item
                      total_amount:
                        description: total amount of the budget item
                      unit_amount:
                        description: unit amount of the budget item
                      unit_of_measure:
                        description: unit of measure of the budget item
                    type: object
                  type: array
                snapshot_by_user_id:
                  description: User ID of the user who created the snapshot
                snapshot_name:
                  description: Name of the snapshot
                snapshot_on_date:
                  description: Date of the snapshot
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Budget Snapshots
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postBudgetSnapshot
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            snapshot_name:
              description: Name of snapshot
          required:
          - snapshot_name
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              cost_budget_snapshot_id:
                description: Internal identifier for cost budget snapshot
              items:
                items:
                  properties:
                    cost_budget_item_num:
                      description: internal ID of the budget item
                    qty:
                      description: quantity of the budget item
                    total_amount:
                      description: total amount of the budget item
                    unit_amount:
                      description: unit amount of the budget item
                    unit_of_measure:
                      description: unit of measure of the budget item
                  type: object
                type: array
              snapshot_by_user_id:
                description: User ID of the user who created the snapshot
              snapshot_name:
                description: Name of the snapshot
              snapshot_on_date:
                description: Date of the snapshot
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Budget Snapshot
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/budget-snapshots/{costBudgetSnapshotId}:
    get:
      operationId: v2_getBudgetSnapshotById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costBudgetSnapshotId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              cost_budget_snapshot_id:
                description: Internal identifier for cost budget snapshot
              items:
                items:
                  properties:
                    cost_budget_item_num:
                      description: internal ID of the budget item
                    qty:
                      description: quantity of the budget item
                    total_amount:
                      description: total amount of the budget item
                    unit_amount:
                      description: unit amount of the budget item
                    unit_of_measure:
                      description: unit of measure of the budget item
                  type: object
                type: array
              snapshot_by_user_id:
                description: User ID of the user who created the snapshot
              snapshot_name:
                description: Name of the snapshot
              snapshot_on_date:
                description: Date of the snapshot
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Budget Snapshot By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchBudgetSnapshotById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costBudgetSnapshotId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            snapshot_name:
              description: Name of snapshot
          type: object
      responses:
        201:
          description: Object successfully edited
          schema:
            properties:
              cost_budget_snapshot_id:
                description: Internal identifier for cost budget snapshot
              snapshot_by_user_id:
                description: User ID of the user who created the snapshot
              snapshot_name:
                description: Name of the snapshot
              snapshot_on_date:
                description: Date of the snapshot
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Budget Snapshot By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/claims:
    get:
      operationId: v2_getCostClaims
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Filter claims by related cost order UUID
        in: query
        name: related_cost_order_num
        required: false
        type: string
      - description: Maximum number of results to return (default 50)
        in: query
        name: limit
        required: false
        type: integer
      - description: Page number for pagination (default 1)
        in: query
        name: page
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                amount:
                  description: Amount of the claim
                claim_date:
                  description: Date of the claim
                claim_identifer:
                  description: User-friendly identifier for cost claim
                claim_name:
                  description: Name of the cost claim
                claim_period_end:
                  description: End of the claim period
                claim_period_start:
                  description: Start of the claim period
                claim_type:
                  description: Type of cost claim - progress or deposit
                claimant_company_id:
                  description: Internal identifier for the company claiming
                cost_claim_num:
                  description: Internal identifier for cost claim
                created_by_user_email:
                  description: Email of the user who created the claim
                currency:
                  description: Currency of the claim
                date_created:
                  description: Date the cost claim was created
                date_modified:
                  description: Date the cost claim was last modified
                description:
                  description: Description for the claim
                related_cost_order_num:
                  description: Id of the related cost order the claim is against
                status:
                  description: Status of the claim
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Claims
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/claims/deposit:
    get:
      operationId: v2_getCostDepositClaims
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                amount:
                  description: Amount of the claim
                claim_date:
                  description: Date of the claim
                claim_identifer:
                  description: User-friendly identifier for cost claim
                claim_name:
                  description: Name of the cost claim
                claim_period_end:
                  description: End of the claim period
                claim_period_start:
                  description: Start of the claim period
                claim_type:
                  description: Type of cost claim - progress or deposit
                claimant_company_id:
                  description: Internal identifier for the company claiming
                cost_claim_num:
                  description: Internal identifier for cost claim
                created_by_user_email:
                  description: Email of the user who created the claim
                currency:
                  description: Currency of the claim
                date_created:
                  description: Date the cost claim was created
                date_modified:
                  description: Date the cost claim was last modified
                description:
                  description: Description for the claim
                related_cost_order_num:
                  description: Id of the related cost order the claim is against
                status:
                  description: Status of the claim
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Deposit Claims
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostDepositClaim
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Amount of the cost claim
            claim_date:
              description: Date of the claim
            claim_name:
              description: Name of the cost claim
            claim_period_end:
              description: End of the claim period
            claim_period_start:
              description: Start of the claim period
            cost_claim_client_id:
              description: Provided identifier for cost claim
            currency:
              description: Currency of the cost claim
            description:
              description: Description for the claim
            related_cost_order_num:
              description: Id of the related cost order the claim is against
            status:
              description: Status of the claim
          required:
          - claim_name
          - amount
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              amount:
                description: Amount of the claim
              claim_date:
                description: Date of the claim
              claim_identifer:
                description: User-friendly identifier for cost claim
              claim_name:
                description: Name of the cost claim
              claim_period_end:
                description: End of the claim period
              claim_period_start:
                description: Start of the claim period
              claim_type:
                description: Type of cost claim - progress or deposit
              claimant_company_id:
                description: Internal identifier for the company claiming
              cost_claim_num:
                description: Internal identifier for cost claim
              created_by_user_email:
                description: Email of the user who created the claim
              currency:
                description: Currency of the claim
              date_created:
                description: Date the cost claim was created
              date_modified:
                description: Date the cost claim was last modified
              description:
                description: Description for the claim
              related_cost_order_num:
                description: Id of the related cost order the claim is against
              status:
                description: Status of the claim
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Deposit Claim
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/claims/deposit/{costClaimId}:
    get:
      operationId: v2_getCostDepositClaimById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costClaimId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              amount:
                description: Amount of the claim
              claim_date:
                description: Date of the claim
              claim_identifer:
                description: User-friendly identifier for cost claim
              claim_name:
                description: Name of the cost claim
              claim_period_end:
                description: End of the claim period
              claim_period_start:
                description: Start of the claim period
              claim_type:
                description: Type of cost claim - progress or deposit
              claimant_company_id:
                description: Internal identifier for the company claiming
              cost_claim_num:
                description: Internal identifier for cost claim
              created_by_user_email:
                description: Email of the user who created the claim
              currency:
                description: Currency of the claim
              date_created:
                description: Date the cost claim was created
              date_modified:
                description: Date the cost claim was last modified
              description:
                description: Description for the claim
              related_cost_order_num:
                description: Id of the related cost order the claim is against
              status:
                description: Status of the claim
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Deposit Claim By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostDepositClaimById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costClaimId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Amount of the cost claim
            claim_date:
              description: Date of the claim
            claim_name:
              description: Name of the cost claim
            claim_period_end:
              description: End of the claim period
            claim_period_start:
              description: Start of the claim period
            currency:
              description: Currency of the cost claim
            description:
              description: Description for the claim
            status:
              description: Status of the claim
          type: object
      responses:
        201:
          description: Object successfully edited
          schema:
            properties:
              amount:
                description: Amount of the claim
              claim_date:
                description: Date of the claim
              claim_identifer:
                description: User-friendly identifier for cost claim
              claim_name:
                description: Name of the cost claim
              claim_period_end:
                description: End of the claim period
              claim_period_start:
                description: Start of the claim period
              claim_type:
                description: Type of cost claim - progress or deposit
              claimant_company_id:
                description: Internal identifier for the company claiming
              cost_claim_num:
                description: Internal identifier for cost claim
              created_by_user_email:
                description: Email of the user who created the claim
              currency:
                description: Currency of the claim
              date_created:
                description: Date the cost claim was created
              date_modified:
                description: Date the cost claim was last modified
              description:
                description: Description for the claim
              related_cost_order_num:
                description: Id of the related cost order the claim is against
              status:
                description: Status of the claim
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Deposit Claim By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/claims/progress:
    get:
      operationId: v2_getCostProgressClaims
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                amount:
                  description: Amount of the claim
                claim_date:
                  description: Date of the claim
                claim_identifer:
                  description: User-friendly identifier for cost claim
                claim_name:
                  description: Name of the cost claim
                claim_period_end:
                  description: End of the claim period
                claim_period_start:
                  description: Start of the claim period
                claim_type:
                  description: Type of cost claim - progress or deposit
                claimant_company_id:
                  description: Internal identifier for the company claiming
                cost_claim_num:
                  description: Internal identifier for cost claim
                created_by_user_email:
                  description: Email of the user who created the claim
                currency:
                  description: Currency of the claim
                date_created:
                  description: Date the cost claim was created
                date_modified:
                  description: Date the cost claim was last modified
                description:
                  description: Description for the claim
                related_cost_order_num:
                  description: Id of the related cost order the claim is against
                status:
                  description: Status of the claim
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Progress Claims
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostProgressClaim
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Amount of the cost claim
            claim_date:
              description: Date of the claim
            claim_name:
              description: Name of the cost claim
            claim_period_end:
              description: End of the claim period
            claim_period_start:
              description: Start of the claim period
            cost_claim_client_id:
              description: Provided identifier for cost claim
            currency:
              description: Currency of the cost claim
            description:
              description: Description for the claim
            related_cost_order_num:
              description: Id of the related cost order the claim is against
            status:
              description: Status of the claim
          required:
          - claim_name
          - amount
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              amount:
                description: Amount of the claim
              claim_date:
                description: Date of the claim
              claim_identifer:
                description: User-friendly identifier for cost claim
              claim_name:
                description: Name of the cost claim
              claim_period_end:
                description: End of the claim period
              claim_period_start:
                description: Start of the claim period
              claim_type:
                description: Type of cost claim - progress or deposit
              claimant_company_id:
                description: Internal identifier for the company claiming
              cost_claim_num:
                description: Internal identifier for cost claim
              created_by_user_email:
                description: Email of the user who created the claim
              currency:
                description: Currency of the claim
              date_created:
                description: Date the cost claim was created
              date_modified:
                description: Date the cost claim was last modified
              description:
                description: Description for the claim
              related_cost_order_num:
                description: Id of the related cost order the claim is against
              status:
                description: Status of the claim
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Progress Claim
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/claims/progress/{costClaimId}:
    get:
      operationId: v2_getCostProgressClaimById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costClaimId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              amount:
                description: Amount of the claim
              claim_date:
                description: Date of the claim
              claim_identifer:
                description: User-friendly identifier for cost claim
              claim_name:
                description: Name of the cost claim
              claim_period_end:
                description: End of the claim period
              claim_period_start:
                description: Start of the claim period
              claim_type:
                description: Type of cost claim - progress or deposit
              claimant_company_id:
                description: Internal identifier for the company claiming
              cost_claim_num:
                description: Internal identifier for cost claim
              created_by_user_email:
                description: Email of the user who created the claim
              currency:
                description: Currency of the claim
              date_created:
                description: Date the cost claim was created
              date_modified:
                description: Date the cost claim was last modified
              description:
                description: Description for the claim
              related_cost_order_num:
                description: Id of the related cost order the claim is against
              status:
                description: Status of the claim
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Progress Claim By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostProgressClaimById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costClaimId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Amount of the cost claim
            claim_date:
              description: Date of the claim
            claim_name:
              description: Name of the cost claim
            claim_period_end:
              description: End of the claim period
            claim_period_start:
              description: Start of the claim period
            currency:
              description: Currency of the cost claim
            description:
              description: Description for the claim
            status:
              description: Status of the claim
          type: object
      responses:
        201:
          description: Object successfully edited
          schema:
            properties:
              amount:
                description: Amount of the claim
              claim_date:
                description: Date of the claim
              claim_identifer:
                description: User-friendly identifier for cost claim
              claim_name:
                description: Name of the cost claim
              claim_period_end:
                description: End of the claim period
              claim_period_start:
                description: Start of the claim period
              claim_type:
                description: Type of cost claim - progress or deposit
              claimant_company_id:
                description: Internal identifier for the company claiming
              cost_claim_num:
                description: Internal identifier for cost claim
              created_by_user_email:
                description: Email of the user who created the claim
              currency:
                description: Currency of the claim
              date_created:
                description: Date the cost claim was created
              date_modified:
                description: Date the cost claim was last modified
              description:
                description: Description for the claim
              related_cost_order_num:
                description: Id of the related cost order the claim is against
              status:
                description: Status of the claim
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Progress Claim By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/contracts:
    get:
      operationId: v2_getCostContracts
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Get specific contract by ID
        in: query
        name: costContractId
        required: false
        type: integer
      - description: Filter by contract type (SUBCONTRACT/HEAD)
        in: query
        name: contractType
        required: false
        type: string
      - description: Filter by contract status (Draft/Active/Completed/Cancelled)
        in: query
        name: contractStatus
        required: false
        type: string
      - description: Filter by contract risk (Low/Medium/High)
        in: query
        name: contractRisk
        required: false
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    attachments:
                      items:
                        properties:
                          cde_id:
                            type: string
                          created_by_company_id:
                            type: string
                          created_by_user_email:
                            type: string
                        type: object
                      type: array
                    award_date:
                      type: string
                    claim_cycle_type:
                      type: string
                    contract_currency:
                      type: string
                    contract_date:
                      type: string
                    contract_identifier:
                      type: string
                    contract_risk:
                      type: string
                    contract_status:
                      type: string
                    contract_template_set:
                      type: string
                    contract_type:
                      type: string
                    contract_value:
                      type: string
                    cost_contract_name:
                      type: string
                    cost_contract_num:
                      type: string
                    cost_contract_scope_of_work:
                      type: string
                    created_at:
                      type: string
                    created_by_user_id:
                      type: string
                    dlp_end:
                      type: string
                    dlp_setting:
                      type: object
                    gst:
                      type: number
                    head_contract_type:
                      type: string
                    internal_reference:
                      type: string
                    issuing_company_id:
                      type: string
                    opportunity_tender_reference:
                      type: string
                    payment_term:
                      type: integer
                    pc_date:
                      type: string
                    receiving_company_id:
                      type: string
                    reference_date:
                      type: integer
                    region:
                      type: string
                    retention_cap_value:
                      type: string
                    retention_setting:
                      type: object
                    scope_of_work:
                      type: string
                    sector:
                      type: string
                    signed_contract_pack:
                      type: integer
                    sov_structure:
                      type: string
                    sovs:
                      type: array
                    start_date:
                      type: string
                    trade:
                      type: string
                    updated_at:
                      type: string
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Contracts
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostContract
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            award_date:
              type: string
            claim_cycle_type:
              type: string
            contract_currency:
              type: string
            contract_date:
              type: string
            contract_risk:
              type: string
            contract_status:
              type: string
            contract_template_set:
              type: string
            contract_type:
              type: string
            contract_value:
              type: number
            cost_contract_client_id:
              type: string
            cost_contract_name:
              type: string
            cost_contract_scope_of_work:
              type: string
            dlp_end:
              type: string
            dlp_setting:
              properties:
                type:
                  type: string
                value:
                  type: integer
              type: object
            gst:
              type: number
            head_contract_type:
              description: Head contract type (Lump Sum, GMP, Cost Plus, Construction
                Management, Schedule of Rates, Other)
              type: string
            internal_reference:
              type: string
            opportunity_tender_reference:
              type: string
            payment_term:
              type: integer
            pc_date:
              type: string
            receiving_company_id:
              type: integer
            reference_date:
              type: integer
            region:
              type: string
            retention_cap_value:
              type: number
            retention_setting:
              properties:
                type:
                  type: string
                value:
                  type: number
              type: object
            scope_of_work:
              type: string
            sector:
              type: string
            signed_contract_pack:
              type: integer
            sov_structure:
              type: string
            sovs:
              items:
                properties:
                  budget_category_id:
                    type: string
                  contract_num:
                    type: number
                  linked_cost_code:
                    items:
                      type: string
                    type: array
                required:
                - budget_category_id
                - contract_num
                type: object
              type: array
            start_date:
              type: string
            trade:
              type: string
          required:
          - cost_contract_name
          - cost_contract_scope_of_work
          - contract_value
          - receiving_company_id
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              award_date:
                type: string
              claim_cycle_type:
                type: string
              contract_currency:
                type: string
              contract_date:
                type: string
              contract_identifier:
                type: string
              contract_risk:
                type: string
              contract_status:
                type: string
              contract_template_set:
                type: string
              contract_type:
                type: string
              contract_value:
                type: string
              cost_contract_name:
                type: string
              cost_contract_num:
                type: string
              cost_contract_scope_of_work:
                type: string
              created_at:
                type: string
              created_by_user_id:
                type: string
              dlp_end:
                type: string
              dlp_setting:
                type: object
              gst:
                type: number
              head_contract_type:
                type: string
              internal_reference:
                type: string
              issuing_company_id:
                type: string
              opportunity_tender_reference:
                type: string
              payment_term:
                type: integer
              pc_date:
                type: string
              receiving_company_id:
                type: string
              reference_date:
                type: integer
              region:
                type: string
              retention_cap_value:
                type: string
              retention_setting:
                type: object
              scope_of_work:
                type: string
              sector:
                type: string
              signed_contract_pack:
                type: integer
              sov_structure:
                type: string
              sovs:
                type: array
              start_date:
                type: string
              trade:
                type: string
              updated_at:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Cost Contract
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/contracts/{costContractId}:
    get:
      operationId: v2_getCostContractById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costContractId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              attachments:
                items:
                  properties:
                    cde_id:
                      type: string
                    created_by_company_id:
                      type: string
                    created_by_user_email:
                      type: string
                  type: object
                type: array
              award_date:
                type: string
              claim_cycle_type:
                type: string
              contract_currency:
                type: string
              contract_date:
                type: string
              contract_identifier:
                type: string
              contract_risk:
                type: string
              contract_status:
                type: string
              contract_template_set:
                type: string
              contract_type:
                type: string
              contract_value:
                type: string
              cost_contract_name:
                type: string
              cost_contract_num:
                type: string
              cost_contract_scope_of_work:
                type: string
              created_at:
                type: string
              created_by_user_id:
                type: string
              dlp_end:
                type: string
              dlp_setting:
                type: object
              gst:
                type: number
              head_contract_type:
                type: string
              internal_reference:
                type: string
              issuing_company_id:
                type: string
              opportunity_tender_reference:
                type: string
              payment_term:
                type: integer
              pc_date:
                type: string
              receiving_company_id:
                type: string
              reference_date:
                type: integer
              region:
                type: string
              retention_cap_value:
                type: string
              retention_setting:
                type: object
              scope_of_work:
                type: string
              sector:
                type: string
              signed_contract_pack:
                type: integer
              sov_structure:
                type: string
              sovs:
                type: array
              start_date:
                type: string
              trade:
                type: string
              updated_at:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Contract By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostContractById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costContractId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            award_date:
              type: string
            claim_cycle_type:
              type: string
            contract_currency:
              type: string
            contract_date:
              type: string
            contract_risk:
              type: string
            contract_status:
              type: string
            contract_template_set:
              type: string
            contract_type:
              type: string
            contract_value:
              type: number
            cost_contract_client_id:
              type: string
            cost_contract_name:
              type: string
            cost_contract_scope_of_work:
              type: string
            dlp_end:
              type: string
            dlp_setting:
              properties:
                type:
                  type: string
                value:
                  type: integer
              type: object
            gst:
              type: number
            head_contract_type:
              description: Head contract type (Lump Sum, GMP, Cost Plus, Construction
                Management, Schedule of Rates, Other)
              type: string
            internal_reference:
              type: string
            opportunity_tender_reference:
              type: string
            payment_term:
              type: integer
            pc_date:
              type: string
            receiving_company_id:
              type: integer
            reference_date:
              type: integer
            region:
              type: string
            retention_cap_value:
              type: number
            retention_setting:
              properties:
                type:
                  type: string
                value:
                  type: number
              type: object
            scope_of_work:
              type: string
            sector:
              type: string
            signed_contract_pack:
              type: integer
            sov_structure:
              type: string
            sovs:
              items:
                properties:
                  budget_category_id:
                    type: string
                  contract_num:
                    type: number
                  linked_cost_code:
                    items:
                      type: string
                    type: array
                type: object
              type: array
            start_date:
              type: string
            trade:
              type: string
          type: object
      responses:
        200:
          description: Object successfully edited
          schema:
            properties:
              award_date:
                type: string
              claim_cycle_type:
                type: string
              contract_currency:
                type: string
              contract_date:
                type: string
              contract_identifier:
                type: string
              contract_risk:
                type: string
              contract_status:
                type: string
              contract_template_set:
                type: string
              contract_type:
                type: string
              contract_value:
                type: string
              cost_contract_name:
                type: string
              cost_contract_num:
                type: string
              cost_contract_scope_of_work:
                type: string
              created_at:
                type: string
              created_by_user_id:
                type: string
              dlp_end:
                type: string
              dlp_setting:
                type: object
              gst:
                type: number
              head_contract_type:
                type: string
              internal_reference:
                type: string
              issuing_company_id:
                type: string
              opportunity_tender_reference:
                type: string
              payment_term:
                type: integer
              pc_date:
                type: string
              receiving_company_id:
                type: string
              reference_date:
                type: integer
              region:
                type: string
              retention_cap_value:
                type: string
              retention_setting:
                type: object
              scope_of_work:
                type: string
              sector:
                type: string
              signed_contract_pack:
                type: integer
              sov_structure:
                type: string
              sovs:
                type: array
              start_date:
                type: string
              trade:
                type: string
              updated_at:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Cost Contract By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/contracts/{costContractId}/change-status:
    patch:
      operationId: v2_patchContractStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costContractId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            status:
              description: New contract status
              enum:
              - Draft
              - Active
              - Completed
              - Cancelled
              type: string
          required:
          - status
          type: object
      responses:
        200:
          description: Contract status updated successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Invalid status value
        401:
          description: Unauthorized
        403:
          description: Access denied
        404:
          description: Contract not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Change Contract Status
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/contracts/{costContractId}/sovs:
    get:
      operationId: v2_getContractSovs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costContractId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    budget_category_id:
                      description: Budget category ID
                      type: string
                    contract_num:
                      description: Contract number/value
                      type: number
                    linked_cost_code:
                      description: Array of linked cost code numbers
                      items:
                        type: string
                      type: array
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Contract not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Contract SOVs
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postContractSov
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costContractId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            budget_category_id:
              description: Budget category ID
              type: string
            contract_num:
              description: Contract number/value
              type: number
            linked_cost_code:
              description: Array of linked cost code numbers
              items:
                type: string
              type: array
          required:
          - budget_category_id
          - contract_num
          type: object
      responses:
        201:
          description: SOV added successfully
          schema:
            properties:
              data:
                properties:
                  budget_category_id:
                    type: string
                  contract_num:
                    type: number
                  linked_cost_code:
                    items:
                      type: string
                    type: array
                type: object
              index:
                description: Index of the new SOV in the array
                type: integer
              message:
                type: string
            type: object
        400:
          description: Invalid request body
        401:
          description: Unauthorized
        404:
          description: Contract not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Add Contract SOV
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/contracts/{costContractId}/sovs/{sovId}:
    delete:
      operationId: v2_deleteContractSov
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costContractId
        required: true
        type: string
      - description: Index of the SOV in the array
        in: path
        name: sovId
        required: true
        type: integer
      responses:
        200:
          description: SOV deleted successfully
          schema:
            properties:
              data:
                properties:
                  budget_category_id:
                    type: string
                  contract_num:
                    type: number
                  linked_cost_code:
                    items:
                      type: string
                    type: array
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: SOV not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Contract SOV
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getContractSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costContractId
        required: true
        type: string
      - description: Index of the SOV in the array
        in: path
        name: sovId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  budget_category_id:
                    type: string
                  contract_num:
                    type: number
                  linked_cost_code:
                    items:
                      type: string
                    type: array
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: SOV not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Contract SOV By Index
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchContractSov
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costContractId
        required: true
        type: string
      - description: Index of the SOV in the array
        in: path
        name: sovId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            budget_category_id:
              description: Budget category ID
              type: string
            contract_num:
              description: Contract number/value
              type: number
            linked_cost_code:
              description: Array of linked cost code numbers
              items:
                type: string
              type: array
          required:
          - budget_category_id
          - contract_num
          type: object
      responses:
        200:
          description: SOV updated successfully
          schema:
            properties:
              data:
                properties:
                  budget_category_id:
                    type: string
                  contract_num:
                    type: number
                  linked_cost_code:
                    items:
                      type: string
                    type: array
                type: object
              message:
                type: string
            type: object
        400:
          description: Invalid request body
        401:
          description: Unauthorized
        404:
          description: SOV not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Contract SOV
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-claims:
    get:
      operationId: v2_getHeadContractClaims
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Head Contract Claims
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postHeadContractClaim
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Object successfully created
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Head Contract Claim
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-claims/{claimId}:
    delete:
      operationId: v2_deleteHeadContractClaimById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      responses:
        200:
          description: Object successfully deleted
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Head Contract Claim By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getHeadContractClaimById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Head Contract Claim By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchHeadContractClaimById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Object successfully updated
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Head Contract Claim By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-claims/{claimId}/change-status:
    patch:
      operationId: v2_patchHeadContractClaimChangeStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            status:
              enum:
              - Submitted
              type: string
          required:
          - status
          type: object
      responses:
        200:
          description: Status successfully updated
        400:
          description: Bad Request
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Change Head Contract Claim Status to Submitted
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-claims/{claimId}/sovs:
    get:
      operationId: v2_getClaimSovs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Claim SOVs
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postClaimSov
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Object successfully created
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Claim SOV
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-claims/{claimId}/sovs/{sovId}:
    delete:
      operationId: v2_deleteClaimSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Object successfully deleted
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Claim SOV By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getClaimSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Claim SOV By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchClaimSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Object successfully updated
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Claim SOV By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-invoices:
    get:
      operationId: v2_getHeadContractInvoices
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Head Contract Invoices
      tags:
      - Cost
    post:
      operationId: v2_postHeadContractInvoice
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Create Head Contract Invoice
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-invoices/{invoiceId}:
    delete:
      operationId: v2_deleteHeadContractInvoiceById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Head Contract Invoice By Id
      tags:
      - Cost
    get:
      operationId: v2_getHeadContractInvoiceById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Head Contract Invoice By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchHeadContractInvoiceById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Edit Head Contract Invoice By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-invoices/{invoiceId}/change-status:
    patch:
      operationId: v2_patchHeadContractInvoiceStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Status updated
      security:
      - JWT_v2: []
      summary: Change Head Contract Invoice Status
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-invoices/{invoiceId}/sovs:
    get:
      operationId: v2_getInvoiceSovs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Invoice SOVs
      tags:
      - Cost
    post:
      operationId: v2_postInvoiceSov
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Create Invoice SOV
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-invoices/{invoiceId}/sovs/{sovId}:
    delete:
      operationId: v2_deleteInvoiceSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Invoice SOV By Id
      tags:
      - Cost
    get:
      operationId: v2_getInvoiceSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Invoice SOV By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchInvoiceSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Edit Invoice SOV By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-payment-schedules:
    get:
      operationId: v2_getHeadContractPaymentSchedules
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Head Contract Payment Schedules
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postHeadContractPaymentSchedule
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Object successfully created
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Head Contract Payment Schedule
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-payment-schedules/{scheduleId}:
    delete:
      operationId: v2_deleteHeadContractPaymentScheduleById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      responses:
        200:
          description: Object successfully deleted
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Payment Schedule By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getHeadContractPaymentScheduleById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Payment Schedule By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchHeadContractPaymentScheduleById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Object successfully updated
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Payment Schedule By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-payment-schedules/{scheduleId}/change-status:
    patch:
      operationId: v2_patchPaymentScheduleChangeStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            status:
              enum:
              - Accepted
              - Disputed
              type: string
          required:
          - status
          type: object
      responses:
        200:
          description: Status successfully updated
        400:
          description: Bad Request
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Change Payment Schedule Status
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-payment-schedules/{scheduleId}/sovs:
    get:
      operationId: v2_getPaymentScheduleSovs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Payment Schedule SOVs
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postPaymentScheduleSov
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Object successfully created
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Payment Schedule SOV
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-payment-schedules/{scheduleId}/sovs/{sovId}:
    delete:
      operationId: v2_deletePaymentScheduleSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Object successfully deleted
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Payment Schedule SOV By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getPaymentScheduleSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Payment Schedule SOV By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchPaymentScheduleSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Object successfully updated
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Payment Schedule SOV By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-retentions:
    get:
      operationId: v2_getHeadContractRetentions
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Head Contract Retentions
      tags:
      - Cost
    post:
      operationId: v2_postHeadContractRetention
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Create Head Contract Retention
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-retentions/{retentionId}:
    delete:
      operationId: v2_deleteHeadContractRetentionById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Head Contract Retention By Id
      tags:
      - Cost
    get:
      operationId: v2_getHeadContractRetentionById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Head Contract Retention By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchHeadContractRetentionById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Edit Head Contract Retention By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-retentions/{retentionId}/records:
    get:
      operationId: v2_getRetentionRecords
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Retention Records
      tags:
      - Cost
    post:
      operationId: v2_postRetentionRecord
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Add Retention Record
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-retentions/{retentionId}/records/{recordId}:
    delete:
      operationId: v2_deleteRetentionRecordById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      - in: path
        name: recordId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Retention Record By Id
      tags:
      - Cost
    get:
      operationId: v2_getRetentionRecordById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      - in: path
        name: recordId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Retention Record By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchRetentionRecordById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      - in: path
        name: recordId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Update Retention Record By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-variations:
    get:
      operationId: v2_getHeadContractVariations
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Head Contract Variations
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postHeadContractVariation
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Object successfully created
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Head Contract Variation
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-variations/{variationId}:
    delete:
      operationId: v2_deleteHeadContractVariationById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      responses:
        200:
          description: Object successfully deleted
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Head Contract Variation By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getHeadContractVariationById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Head Contract Variation By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchHeadContractVariationById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Object successfully updated
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Head Contract Variation By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-variations/{variationId}/scopes:
    get:
      operationId: v2_getVariationScopes
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Variation Scopes
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postVariationScope
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Object successfully created
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Variation Scope
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-variations/{variationId}/scopes/{scopeId}:
    delete:
      operationId: v2_deleteVariationScopeById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      - in: path
        name: scopeId
        required: true
        type: string
      responses:
        200:
          description: Object successfully deleted
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Variation Scope By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getVariationScopeById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      - in: path
        name: scopeId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Variation Scope By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchVariationScopeById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      - in: path
        name: scopeId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Object successfully updated
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Variation Scope By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/head-contract-variations/{variationId}/update-status:
    patch:
      operationId: v2_patchHeadContractVariationStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Status updated successfully
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Head Contract Variation Status
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/invoices:
    get:
      operationId: v2_getCostInvoices
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                amount:
                  description: Amount of the invoice
                cost_invoice_num:
                  description: Internal identifier for invoice
                cost_payment_schedule_num:
                  description: Id of the related payment schedule the invoice is against
                created_by_user_email:
                  description: Email of the user who created the claim
                currency:
                  description: Currency of the invoice
                date_created:
                  description: Date the invoice was created
                date_modified:
                  description: Date the invoice was last modified
                description:
                  description: Description for the invoice
                invoice_date:
                  description: Date of the invoice
                invoice_due_date:
                  description: Due date of the invoice
                invoice_identifier:
                  description: User-friendly identifier for invoice
                invoice_name:
                  description: Name of the invoice
                invoice_period_end:
                  description: End of the invoice period
                invoice_period_start:
                  description: Start of the invoice period
                invoice_to_company_id:
                  description: Internal identifier for the company being invoiced
                invoicer_company_id:
                  description: Internal identifier for the company invoicing
                marked_as_paid_by_user_email:
                  description: Email of the user who marked the invoice as paid
                marked_as_paid_date:
                  description: Date the invoice was marked as paid
                related_cost_claim_num:
                  description: Id of the related cost claim the invoice is against
                related_cost_order_num:
                  description: Id of the related cost order the invoice is against
                specified_paid_date:
                  description: Date the invoice was specified as paid
                status:
                  description: Status of the invoice
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Invoices
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostInvoice
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Amount of the invoice
            cost_invoice_client_id:
              description: User-friendly identifier for invoice
            cost_payment_schedule_num:
              description: Id of the related payment schedule the invoice is against
            currency:
              description: Currency of the invoice
            description:
              description: Description for the invoice
            invoice_date:
              description: Date of the invoice
            invoice_due_date:
              description: Due date of the invoice
            invoice_name:
              description: Name of the invoice
            invoice_period_end:
              description: End of the invoice period
            invoice_period_start:
              description: Start of the invoice period
            invoice_to_company_id:
              description: Internal identifier for the company being invoiced
            related_cost_claim_num:
              description: Id of the related cost claim the invoice is against
            related_cost_order_num:
              description: Id of the related cost order the invoice is against
            status:
              description: Status of the invoice
          required:
          - invoice_name
          - amount
          - invoice_to_company_id
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              amount:
                description: Amount of the invoice
              cost_invoice_num:
                description: Internal identifier for invoice
              created_by_user_email:
                description: Email of the user who created the claim
              currency:
                description: Currency of the invoice
              date_created:
                description: Date the invoice was created
              date_modified:
                description: Date the invoice was last modified
              description:
                description: Description for the invoice
              invoice_date:
                description: Date of the invoice
              invoice_due_date:
                description: Due date of the invoice
              invoice_identifier:
                description: User-friendly identifier for invoice
              invoice_name:
                description: Name of the invoice
              invoice_period_end:
                description: End of the invoice period
              invoice_period_start:
                description: Start of the invoice period
              invoice_to_company_id:
                description: Internal identifier for the company being invoiced
              invoicer_company_id:
                description: Internal identifier for the company invoicing
              marked_as_paid_by_user_email:
                description: Email of the user who marked the invoice as paid
              marked_as_paid_date:
                description: Date the invoice was marked as paid
              related_cost_claim_num:
                description: Id of the related cost claim the invoice is against
              related_cost_order_num:
                description: Id of the related cost order the invoice is against
              specified_paid_date:
                description: Date the invoice was specified as paid
              status:
                description: Status of the invoice
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Invoice
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/invoices/{costInvoiceId}:
    get:
      operationId: v2_getCostInvoiceById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costInvoiceId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              amount:
                description: Amount of the invoice
              cost_invoice_num:
                description: Internal identifier for invoice
              created_by_user_email:
                description: Email of the user who created the claim
              currency:
                description: Currency of the invoice
              date_created:
                description: Date the invoice was created
              date_modified:
                description: Date the invoice was last modified
              description:
                description: Description for the invoice
              invoice_date:
                description: Date of the invoice
              invoice_due_date:
                description: Due date of the invoice
              invoice_identifier:
                description: User-friendly identifier for invoice
              invoice_name:
                description: Name of the invoice
              invoice_period_end:
                description: End of the invoice period
              invoice_period_start:
                description: Start of the invoice period
              invoice_to_company_id:
                description: Internal identifier for the company being invoiced
              invoicer_company_id:
                description: Internal identifier for the company invoicing
              marked_as_paid_by_user_email:
                description: Email of the user who marked the invoice as paid
              marked_as_paid_date:
                description: Date the invoice was marked as paid
              related_cost_claim_num:
                description: Id of the related cost claim the invoice is against
              related_cost_order_num:
                description: Id of the related cost order the invoice is against
              specified_paid_date:
                description: Date the invoice was specified as paid
              status:
                description: Status of the invoice
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Invoice By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostInvoiceById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costInvoiceId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Amount of the invoice
            currency:
              description: Currency of the invoice
            description:
              description: Description for the invoice
            invoice_date:
              description: Date of the invoice
            invoice_due_date:
              description: Due date of the invoice
            invoice_name:
              description: Name of the invoice
            invoice_period_end:
              description: End of the invoice period
            invoice_period_start:
              description: Start of the invoice period
            specified_paid_date:
              description: Date the invoice was specified as paid
            status:
              description: Status of the invoice
          type: object
      responses:
        201:
          description: Object successfully edited
          schema:
            properties:
              amount:
                description: Amount of the invoice
              cost_invoice_num:
                description: Internal identifier for invoice
              created_by_user_email:
                description: Email of the user who created the claim
              currency:
                description: Currency of the invoice
              date_created:
                description: Date the invoice was created
              date_modified:
                description: Date the invoice was last modified
              description:
                description: Description for the invoice
              invoice_date:
                description: Date of the invoice
              invoice_due_date:
                description: Due date of the invoice
              invoice_identifier:
                description: User-friendly identifier for invoice
              invoice_name:
                description: Name of the invoice
              invoice_period_end:
                description: End of the invoice period
              invoice_period_start:
                description: Start of the invoice period
              invoice_to_company_id:
                description: Internal identifier for the company being invoiced
              invoicer_company_id:
                description: Internal identifier for the company invoicing
              marked_as_paid_by_user_email:
                description: Email of the user who marked the invoice as paid
              marked_as_paid_date:
                description: Date the invoice was marked as paid
              related_cost_claim_num:
                description: Id of the related cost claim the invoice is against
              related_cost_order_num:
                description: Id of the related cost order the invoice is against
              specified_paid_date:
                description: Date the invoice was specified as paid
              status:
                description: Status of the invoice
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Invoice By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/issues:
    get:
      operationId: v2_getCostIssues
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Optional issue ID to fetch specific issue
        in: query
        name: issueId
        required: false
        type: string
      - description: Filter by status
        in: query
        name: status
        required: false
        type: string
      - description: Filter by severity
        in: query
        name: severity
        required: false
        type: string
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                assignee:
                  description: Issue assignee
                  type: string
                created_at:
                  description: Created timestamp
                  format: date-time
                  type: string
                creator_name:
                  description: Creator name
                  type: string
                description:
                  description: Issue description
                  type: string
                id:
                  description: Issue identifier
                  type: string
                project_id:
                  description: Project ID
                  type: integer
                related_document_num:
                  description: Related document number
                  type: string
                severity:
                  description: Issue severity
                  type: string
                status:
                  description: Issue status
                  type: string
                title:
                  description: Issue title
                  type: string
                type:
                  description: Issue type
                  type: string
                updated_at:
                  description: Updated timestamp
                  format: date-time
                  type: string
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Issues
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostIssues
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            assignee:
              description: Issue assignee
              type: string
            creator_name:
              description: Creator name
              type: string
            description:
              description: Issue description
              type: string
            related_document_num:
              description: Related document number
              type: string
            severity:
              description: Issue severity
              type: string
            status:
              description: Issue status
              type: string
            title:
              description: Issue title
              type: string
            type:
              description: Issue type
              type: string
          required:
          - title
          - description
          - status
          - severity
          type: object
      responses:
        201:
          description: Issue successfully created
          schema:
            properties:
              data:
                properties:
                  assignee:
                    description: Issue assignee
                    type: string
                  created_at:
                    description: Created timestamp
                    format: date-time
                    type: string
                  creator_name:
                    description: Creator name
                    type: string
                  description:
                    description: Issue description
                    type: string
                  id:
                    description: Issue identifier
                    type: string
                  project_id:
                    description: Project ID
                    type: integer
                  related_document_num:
                    description: Related document number
                    type: string
                  severity:
                    description: Issue severity
                    type: string
                  status:
                    description: Issue status
                    type: string
                  title:
                    description: Issue title
                    type: string
                  type:
                    description: Issue type
                    type: string
                  updated_at:
                    description: Updated timestamp
                    format: date-time
                    type: string
                type: object
              message:
                type: string
              updated_objects:
                type: array
            type: object
        400:
          description: Bad Request - Invalid input or missing required fields
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Cost Issue
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/issues/{issueId}:
    delete:
      operationId: v2_deleteCostIssueById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: issueId
        required: true
        type: string
      responses:
        200:
          description: Issue successfully deleted
          schema:
            properties:
              data:
                properties:
                  id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Issue not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Cost Issue By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostIssueById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: issueId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assignee:
              description: Issue assignee
              type: string
            creator_name:
              description: Creator name
              type: string
            description:
              description: Issue description
              type: string
            related_document_num:
              description: Related document number
              type: string
            severity:
              description: Issue severity
              type: string
            status:
              description: Issue status
              type: string
            title:
              description: Issue title
              type: string
            type:
              description: Issue type
              type: string
          type: object
      responses:
        201:
          description: Issue successfully updated
          schema:
            properties:
              data:
                properties:
                  assignee:
                    description: Issue assignee
                    type: string
                  created_at:
                    description: Created timestamp
                    format: date-time
                    type: string
                  creator_name:
                    description: Creator name
                    type: string
                  description:
                    description: Issue description
                    type: string
                  id:
                    description: Issue identifier
                    type: string
                  project_id:
                    description: Project ID
                    type: integer
                  related_document_num:
                    description: Related document number
                    type: string
                  severity:
                    description: Issue severity
                    type: string
                  status:
                    description: Issue status
                    type: string
                  title:
                    description: Issue title
                    type: string
                  type:
                    description: Issue type
                    type: string
                  updated_at:
                    description: Updated timestamp
                    format: date-time
                    type: string
                type: object
              message:
                type: string
              updated_objects:
                type: array
            type: object
        400:
          description: Bad Request - Invalid input
        401:
          description: Unauthorized
        404:
          description: Issue not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Cost Issue By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/line-items/claim:
    get:
      operationId: v2_getCostClaimLineItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Optional line item ID to fetch specific line item
        in: query
        name: lineItemId
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                claim_remaining_percentage:
                  description: Remaining claim percentage (0-100)
                  type: number
                cost_claim_line_description:
                  description: Description of the claim line item
                  type: string
                cost_claim_line_name:
                  description: Name of the claim line item
                  type: string
                cost_claim_line_num:
                  description: Internal identifier for claim line item
                  type: integer
                cost_claim_num:
                  description: Related claim number
                  type: integer
                line_item_identifier:
                  description: User-friendly identifier for claim line item
                  type: string
                qty:
                  description: Quantity
                  type: number
                related_cost_order_line_num:
                  description: Related order line item number
                  type: integer
                related_order_line_name:
                  description: Name of related order line item
                  type: string
                total_amount:
                  description: Total amount for the line item
                  type: number
                unit_amount:
                  description: Unit amount
                  type: number
                unit_of_measure:
                  description: Unit of measure
                  type: string
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Claim Line Items
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostClaimLineItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            items:
              items:
                properties:
                  claim_remaining_percentage:
                    description: Remaining claim percentage (0-100)
                    maximum: 100
                    minimum: 0
                    type: number
                  cost_claim_line_client_id:
                    description: Client-defined identifier for claim line item
                    type: string
                  cost_claim_line_description:
                    description: Description of the claim line item
                    type: string
                  cost_claim_line_name:
                    description: Name of the claim line item
                    type: string
                  cost_claim_num:
                    description: Related claim number
                    type: integer
                  qty:
                    description: Quantity
                    type: number
                  related_cost_order_line_num:
                    description: Related order line item number
                    type: integer
                  total_amount:
                    description: Total amount for the line item
                    type: number
                  unit_amount:
                    description: Unit amount
                    type: number
                  unit_of_measure:
                    description: Unit of measure
                    type: string
                required:
                - cost_claim_line_name
                - cost_claim_line_description
                - cost_claim_num
                - total_amount
                - claim_remaining_percentage
                type: object
              type: array
          type: object
      responses:
        201:
          description: Line item(s) successfully created
          schema:
            properties:
              data:
                items:
                  properties:
                    claim_remaining_percentage:
                      description: Remaining claim percentage (0-100)
                      type: number
                    cost_claim_line_description:
                      description: Description of the claim line item
                      type: string
                    cost_claim_line_name:
                      description: Name of the claim line item
                      type: string
                    cost_claim_line_num:
                      description: Internal identifier for claim line item
                      type: integer
                    cost_claim_num:
                      description: Related claim number
                      type: integer
                    line_item_identifier:
                      description: User-friendly identifier for claim line item
                      type: string
                    qty:
                      description: Quantity
                      type: number
                    related_cost_order_line_num:
                      description: Related order line item number
                      type: integer
                    related_order_line_name:
                      description: Name of related order line item
                      type: string
                    total_amount:
                      description: Total amount for the line item
                      type: number
                    unit_amount:
                      description: Unit amount
                      type: number
                    unit_of_measure:
                      description: Unit of measure
                      type: string
                  type: object
                type: array
              message:
                type: string
              updated_objects:
                type: array
            type: object
        400:
          description: Bad Request - Invalid input or missing required fields
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Claim Line Item(s)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/line-items/claim/{lineItemId}:
    patch:
      operationId: v2_patchCostClaimLineItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: lineItemId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            related_cost_order_line_num:
              description: Related order line item number
              type: integer
          type: object
      responses:
        201:
          description: Line item successfully updated
          schema:
            properties:
              data:
                properties:
                  claim_remaining_percentage:
                    description: Remaining claim percentage (0-100)
                    type: number
                  cost_claim_line_description:
                    description: Description of the claim line item
                    type: string
                  cost_claim_line_name:
                    description: Name of the claim line item
                    type: string
                  cost_claim_line_num:
                    description: Internal identifier for claim line item
                    type: integer
                  cost_claim_num:
                    description: Related claim number
                    type: integer
                  line_item_identifier:
                    description: User-friendly identifier for claim line item
                    type: string
                  qty:
                    description: Quantity
                    type: number
                  related_cost_order_line_num:
                    description: Related order line item number
                    type: integer
                  related_order_line_name:
                    description: Name of related order line item
                    type: string
                  total_amount:
                    description: Total amount for the line item
                    type: number
                  unit_amount:
                    description: Unit amount
                    type: number
                  unit_of_measure:
                    description: Unit of measure
                    type: string
                type: object
              message:
                type: string
              updated_objects:
                type: array
            type: object
        400:
          description: Bad Request - Invalid input
        401:
          description: Unauthorized
        404:
          description: Line item not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Claim Line Item By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/line-items/invoice:
    get:
      operationId: v2_getCostInvoiceLineItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Optional line item ID to fetch specific line item
        in: query
        name: lineItemId
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                cost_invoice_line_description:
                  description: Description of the invoice line item
                  type: string
                cost_invoice_line_name:
                  description: Name of the invoice line item
                  type: string
                cost_invoice_line_num:
                  description: Internal identifier for invoice line item
                  type: integer
                cost_invoice_num:
                  description: Related invoice number
                  type: integer
                line_item_identifier:
                  description: User-friendly identifier for invoice line item
                  type: string
                qty:
                  description: Quantity
                  type: number
                related_claim_line_name:
                  description: Name of related claim line item
                  type: string
                related_cost_claim_line_num:
                  description: Related claim line item number
                  type: integer
                total_amount:
                  description: Total amount for the line item
                  type: number
                unit_amount:
                  description: Unit amount
                  type: number
                unit_of_measure:
                  description: Unit of measure
                  type: string
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Invoice Line Items
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostInvoiceLineItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            items:
              items:
                properties:
                  cost_invoice_line_client_id:
                    description: Client-defined identifier for invoice line item
                    type: string
                  cost_invoice_line_description:
                    description: Description of the invoice line item
                    type: string
                  cost_invoice_line_name:
                    description: Name of the invoice line item
                    type: string
                  cost_invoice_num:
                    description: Related invoice number
                    type: integer
                  qty:
                    description: Quantity
                    type: number
                  related_cost_claim_line_num:
                    description: Related claim line item number
                    type: integer
                  total_amount:
                    description: Total amount for the line item
                    type: number
                  unit_amount:
                    description: Unit amount
                    type: number
                  unit_of_measure:
                    description: Unit of measure
                    type: string
                required:
                - cost_invoice_line_name
                - cost_invoice_line_description
                - cost_invoice_num
                - total_amount
                type: object
              type: array
          type: object
      responses:
        201:
          description: Line item(s) successfully created
          schema:
            properties:
              data:
                items:
                  properties:
                    cost_invoice_line_description:
                      description: Description of the invoice line item
                      type: string
                    cost_invoice_line_name:
                      description: Name of the invoice line item
                      type: string
                    cost_invoice_line_num:
                      description: Internal identifier for invoice line item
                      type: integer
                    cost_invoice_num:
                      description: Related invoice number
                      type: integer
                    line_item_identifier:
                      description: User-friendly identifier for invoice line item
                      type: string
                    qty:
                      description: Quantity
                      type: number
                    related_claim_line_name:
                      description: Name of related claim line item
                      type: string
                    related_cost_claim_line_num:
                      description: Related claim line item number
                      type: integer
                    total_amount:
                      description: Total amount for the line item
                      type: number
                    unit_amount:
                      description: Unit amount
                      type: number
                    unit_of_measure:
                      description: Unit of measure
                      type: string
                  type: object
                type: array
              message:
                type: string
              updated_objects:
                type: array
            type: object
        400:
          description: Bad Request - Invalid input or missing required fields
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Invoice Line Item(s)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/line-items/invoice/{lineItemId}:
    patch:
      operationId: v2_patchCostInvoiceLineItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: lineItemId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            related_cost_claim_line_num:
              description: Related claim line item number
              type: integer
          type: object
      responses:
        201:
          description: Line item successfully updated
          schema:
            properties:
              data:
                properties:
                  cost_invoice_line_description:
                    description: Description of the invoice line item
                    type: string
                  cost_invoice_line_name:
                    description: Name of the invoice line item
                    type: string
                  cost_invoice_line_num:
                    description: Internal identifier for invoice line item
                    type: integer
                  cost_invoice_num:
                    description: Related invoice number
                    type: integer
                  line_item_identifier:
                    description: User-friendly identifier for invoice line item
                    type: string
                  qty:
                    description: Quantity
                    type: number
                  related_claim_line_name:
                    description: Name of related claim line item
                    type: string
                  related_cost_claim_line_num:
                    description: Related claim line item number
                    type: integer
                  total_amount:
                    description: Total amount for the line item
                    type: number
                  unit_amount:
                    description: Unit amount
                    type: number
                  unit_of_measure:
                    description: Unit of measure
                    type: string
                type: object
              message:
                type: string
              updated_objects:
                type: array
            type: object
        400:
          description: Bad Request - Invalid input
        401:
          description: Unauthorized
        404:
          description: Line item not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Invoice Line Item By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/line-items/order:
    get:
      operationId: v2_getCostOrderLineItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Optional line item ID to fetch specific line item
        in: query
        name: lineItemId
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                cost_budget_item_name:
                  description: Name of related budget item
                  type: string
                cost_code_num:
                  description: Cost code number
                  type: string
                cost_order_line_description:
                  description: Description of the order line item
                  type: string
                cost_order_line_name:
                  description: Name of the order line item
                  type: string
                cost_order_line_num:
                  description: Internal identifier for order line item
                  type: integer
                cost_order_num:
                  description: Related order number
                  type: integer
                line_item_identifier:
                  description: User-friendly identifier for order line item
                  type: string
                qty:
                  description: Quantity
                  type: number
                related_cost_budget_item_num:
                  description: Related budget item number
                  type: integer
                total_amount:
                  description: Total amount for the line item
                  type: number
                unit_amount:
                  description: Unit amount
                  type: number
                unit_of_measure:
                  description: Unit of measure
                  type: string
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Order Line Items
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostOrderLineItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            items:
              items:
                properties:
                  cost_order_line_client_id:
                    description: Client-defined identifier for order line item
                    type: string
                  cost_order_line_description:
                    description: Description of the order line item
                    type: string
                  cost_order_line_name:
                    description: Name of the order line item
                    type: string
                  cost_order_num:
                    description: Related order number
                    type: integer
                  qty:
                    description: Quantity
                    type: number
                  related_cost_budget_item_num:
                    description: Related budget item number
                    type: integer
                  total_amount:
                    description: Total amount for the line item
                    type: number
                  unit_amount:
                    description: Unit amount
                    type: number
                  unit_of_measure:
                    description: Unit of measure
                    type: string
                required:
                - cost_order_line_name
                - cost_order_line_description
                - cost_order_num
                - total_amount
                type: object
              type: array
          type: object
      responses:
        201:
          description: Line item(s) successfully created
          schema:
            properties:
              data:
                items:
                  properties:
                    cost_budget_item_name:
                      description: Name of related budget item
                      type: string
                    cost_code_num:
                      description: Cost code number
                      type: string
                    cost_order_line_description:
                      description: Description of the order line item
                      type: string
                    cost_order_line_name:
                      description: Name of the order line item
                      type: string
                    cost_order_line_num:
                      description: Internal identifier for order line item
                      type: integer
                    cost_order_num:
                      description: Related order number
                      type: integer
                    line_item_identifier:
                      description: User-friendly identifier for order line item
                      type: string
                    qty:
                      description: Quantity
                      type: number
                    related_cost_budget_item_num:
                      description: Related budget item number
                      type: integer
                    total_amount:
                      description: Total amount for the line item
                      type: number
                    unit_amount:
                      description: Unit amount
                      type: number
                    unit_of_measure:
                      description: Unit of measure
                      type: string
                  type: object
                type: array
              message:
                type: string
              updated_objects:
                type: array
            type: object
        400:
          description: Bad Request - Invalid input or missing required fields
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Order Line Item(s)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/line-items/order/{lineItemId}:
    patch:
      operationId: v2_patchCostOrderLineItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: lineItemId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            related_cost_budget_item_num:
              description: Related budget item number
              type: integer
          type: object
      responses:
        201:
          description: Line item successfully updated
          schema:
            properties:
              data:
                properties:
                  cost_budget_item_name:
                    description: Name of related budget item
                    type: string
                  cost_code_num:
                    description: Cost code number
                    type: string
                  cost_order_line_description:
                    description: Description of the order line item
                    type: string
                  cost_order_line_name:
                    description: Name of the order line item
                    type: string
                  cost_order_line_num:
                    description: Internal identifier for order line item
                    type: integer
                  cost_order_num:
                    description: Related order number
                    type: integer
                  line_item_identifier:
                    description: User-friendly identifier for order line item
                    type: string
                  qty:
                    description: Quantity
                    type: number
                  related_cost_budget_item_num:
                    description: Related budget item number
                    type: integer
                  total_amount:
                    description: Total amount for the line item
                    type: number
                  unit_amount:
                    description: Unit amount
                    type: number
                  unit_of_measure:
                    description: Unit of measure
                    type: string
                type: object
              message:
                type: string
              updated_objects:
                type: array
            type: object
        400:
          description: Bad Request - Invalid input
        401:
          description: Unauthorized
        404:
          description: Line item not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Order Line Item By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/line-items/variation:
    get:
      operationId: v2_getCostVariationLineItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Optional line item ID to fetch specific line item
        in: query
        name: lineItemId
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                cost_budget_item_name:
                  description: Name of related budget item
                  type: string
                cost_code_num:
                  description: Cost code number
                  type: string
                cost_variation_line_description:
                  description: Description of the variation line item
                  type: string
                cost_variation_line_name:
                  description: Name of the variation line item
                  type: string
                cost_variation_line_num:
                  description: Internal identifier for variation line item
                  type: integer
                cost_variation_num:
                  description: Related variation number
                  type: integer
                line_item_identifier:
                  description: User-friendly identifier for variation line item
                  type: string
                qty:
                  description: Quantity
                  type: number
                related_cost_budget_item_num:
                  description: Related budget item number
                  type: integer
                total_amount:
                  description: Total amount for the line item
                  type: number
                unit_amount:
                  description: Unit amount
                  type: number
                unit_of_measure:
                  description: Unit of measure
                  type: string
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Variation Line Items
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostVariationLineItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            items:
              items:
                properties:
                  cost_variation_line_client_id:
                    description: Client-defined identifier for variation line item
                    type: string
                  cost_variation_line_description:
                    description: Description of the variation line item
                    type: string
                  cost_variation_line_name:
                    description: Name of the variation line item
                    type: string
                  cost_variation_num:
                    description: Related variation number
                    type: integer
                  qty:
                    description: Quantity
                    type: number
                  related_cost_budget_item_num:
                    description: Related budget item number
                    type: integer
                  total_amount:
                    description: Total amount for the line item
                    type: number
                  unit_amount:
                    description: Unit amount
                    type: number
                  unit_of_measure:
                    description: Unit of measure
                    type: string
                required:
                - cost_variation_line_name
                - cost_variation_line_description
                - cost_variation_num
                - total_amount
                type: object
              type: array
          type: object
      responses:
        201:
          description: Line item(s) successfully created
          schema:
            properties:
              data:
                items:
                  properties:
                    cost_budget_item_name:
                      description: Name of related budget item
                      type: string
                    cost_code_num:
                      description: Cost code number
                      type: string
                    cost_variation_line_description:
                      description: Description of the variation line item
                      type: string
                    cost_variation_line_name:
                      description: Name of the variation line item
                      type: string
                    cost_variation_line_num:
                      description: Internal identifier for variation line item
                      type: integer
                    cost_variation_num:
                      description: Related variation number
                      type: integer
                    line_item_identifier:
                      description: User-friendly identifier for variation line item
                      type: string
                    qty:
                      description: Quantity
                      type: number
                    related_cost_budget_item_num:
                      description: Related budget item number
                      type: integer
                    total_amount:
                      description: Total amount for the line item
                      type: number
                    unit_amount:
                      description: Unit amount
                      type: number
                    unit_of_measure:
                      description: Unit of measure
                      type: string
                  type: object
                type: array
              message:
                type: string
              updated_objects:
                type: array
            type: object
        400:
          description: Bad Request - Invalid input or missing required fields
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Variation Line Item(s)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/line-items/variation/{lineItemId}:
    patch:
      operationId: v2_patchCostVariationLineItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: lineItemId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            related_cost_budget_item_num:
              description: Related budget item number
              type: integer
          type: object
      responses:
        201:
          description: Line item successfully updated
          schema:
            properties:
              data:
                properties:
                  cost_budget_item_name:
                    description: Name of related budget item
                    type: string
                  cost_code_num:
                    description: Cost code number
                    type: string
                  cost_variation_line_description:
                    description: Description of the variation line item
                    type: string
                  cost_variation_line_name:
                    description: Name of the variation line item
                    type: string
                  cost_variation_line_num:
                    description: Internal identifier for variation line item
                    type: integer
                  cost_variation_num:
                    description: Related variation number
                    type: integer
                  line_item_identifier:
                    description: User-friendly identifier for variation line item
                    type: string
                  qty:
                    description: Quantity
                    type: number
                  related_cost_budget_item_num:
                    description: Related budget item number
                    type: integer
                  total_amount:
                    description: Total amount for the line item
                    type: number
                  unit_amount:
                    description: Unit amount
                    type: number
                  unit_of_measure:
                    description: Unit of measure
                    type: string
                type: object
              message:
                type: string
              updated_objects:
                type: array
            type: object
        400:
          description: Bad Request - Invalid input
        401:
          description: Unauthorized
        404:
          description: Line item not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Variation Line Item By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/orders:
    get:
      operationId: v2_getCostOrders
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                amount:
                  description: Amount of the cost order
                cost_contract_num:
                  description: Internal identifier for the associated cost contract
                cost_order_name:
                  description: Name of the cost order
                cost_order_num:
                  description: Internal identifier for cost order
                cost_order_type:
                  description: Type of cost order - either purchase or Variation
                created_by_user_email:
                  description: Email of the user who created the cost order
                currency:
                  description: Currency of the cost order
                date_created:
                  description: Date the cost order was created
                issuing_company_id:
                  description: Internal identifier for the issuing company
                order_identifier:
                  description: User-friendly identifier for cost order
                receiving_company_id:
                  description: Internal identifier for the receiving company
                remaining_amount:
                  description: Remaining amount of the cost order (if manually entered)
                retention_percent:
                  description: Retention percentage
                scope_of_work:
                  description: Scope of work for the cost order
                status:
                  description: Status of the cost order
                work_end_date:
                  description: End date of the work
                work_start_date:
                  description: Start date of the work
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Purchase & Variation Orders
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/orders/purchase:
    get:
      operationId: v2_getCostPurchaseOrders
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                amount:
                  description: Amount of the cost order
                cost_order_name:
                  description: Name of the cost order
                cost_order_num:
                  description: Internal identifier for cost order
                cost_order_type:
                  description: Type of cost order - either purchase or Variation
                created_by_user_email:
                  description: Email of the user who created the cost order
                currency:
                  description: Currency of the cost order
                date_created:
                  description: Date the cost order was created
                issuing_company_id:
                  description: Internal identifier for the issuing company
                order_identifier:
                  description: User-friendly identifier for cost order
                receiving_company_id:
                  description: Internal identifier for the receiving company
                remaining_amount:
                  description: Remaining amount of the cost order (if manually entered)
                retention_percent:
                  description: Retention percentage
                scope_of_work:
                  description: Scope of work for the cost order
                status:
                  description: Status of the cost order
                work_end_date:
                  description: End date of the work
                work_start_date:
                  description: Start date of the work
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Purchase Orders
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postCostPurchaseOrder
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Amount of the cost order
            cost_order_client_id:
              description: Provided identifier for cost order
            cost_order_name:
              description: Name of the cost order
            currency:
              description: Currency of the cost order
            receiving_company_id:
              description: Internal identifier for the receiving company
            remaining_amount:
              description: Remaining amount of the cost order (if manually entered)
            retention_percent:
              description: Retention percentage
            scope_of_work:
              description: Scope of work for the cost order
            status:
              description: Status of the cost order
            work_end_date:
              description: End date of the work
            work_start_date:
              description: Start date of the work
          required:
          - cost_order_name
          - amount
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              amount:
                description: Amount of the cost order
              cost_contract_num:
                description: Internal identifier for the associated cost contract
              cost_order_name:
                description: Name of the cost order
              cost_order_num:
                description: Internal identifier for cost order
              cost_order_type:
                description: Type of cost order - either purchase or Variation
              created_by_user_email:
                description: Email of the user who created the cost order
              currency:
                description: Currency of the cost order
              date_created:
                description: Date the cost order was created
              issuing_company_id:
                description: Internal identifier for the issuing company
              order_identifier:
                description: User-friendly identifier for cost order
              receiving_company_id:
                description: Internal identifier for the receiving company
              remaining_amount:
                description: Remaining amount of the cost order (if manually entered)
              retention_percent:
                description: Retention percentage
              scope_of_work:
                description: Scope of work for the cost order
              status:
                description: Status of the cost order
              work_end_date:
                description: End date of the work
              work_start_date:
                description: Start date of the work
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Purchase Order
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/orders/purchase/{costOrderId}:
    get:
      operationId: v2_getCostPurchaseOrderById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costOrderId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              amount:
                description: Amount of the cost order
              cost_order_name:
                description: Name of the cost order
              cost_order_num:
                description: Internal identifier for cost order
              cost_order_type:
                description: Type of cost order - either purchase or Variation
              created_by_user_email:
                description: Email of the user who created the cost order
              currency:
                description: Currency of the cost order
              date_created:
                description: Date the cost order was created
              issuing_company_id:
                description: Internal identifier for the issuing company
              order_identifier:
                description: User-friendly identifier for cost order
              receiving_company_id:
                description: Internal identifier for the receiving company
              remaining_amount:
                description: Remaining amount of the cost order (if manually entered)
              retention_percent:
                description: Retention percentage
              scope_of_work:
                description: Scope of work for the cost order
              status:
                description: Status of the cost order
              work_end_date:
                description: End date of the work
              work_start_date:
                description: Start date of the work
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Purchase Order By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostPurchaseOrderById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costOrderId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Amount of the cost order
            cost_order_client_id:
              description: Provided identifier for cost order
            cost_order_name:
              description: Name of the cost order
            currency:
              description: Currency of the cost order
            receiving_company_id:
              description: Internal identifier for the receiving company
            remaining_amount:
              description: Remaining amount of the cost order (if manually entered)
            retention_percent:
              description: Retention percentage
            scope_of_work:
              description: Scope of work for the cost order
            status:
              description: Status of the cost order
            work_end_date:
              description: End date of the work
            work_start_date:
              description: Start date of the work
          type: object
      responses:
        201:
          description: Object successfully edited
          schema:
            properties:
              amount:
                description: Amount of the cost order
              cost_contract_num:
                description: Internal identifier for the associated cost contract
              cost_order_name:
                description: Name of the cost order
              cost_order_num:
                description: Internal identifier for cost order
              cost_order_type:
                description: Type of cost order - either purchase or Variation
              created_by_user_email:
                description: Email of the user who created the cost order
              currency:
                description: Currency of the cost order
              date_created:
                description: Date the cost order was created
              issuing_company_id:
                description: Internal identifier for the issuing company
              order_identifier:
                description: User-friendly identifier for cost order
              receiving_company_id:
                description: Internal identifier for the receiving company
              remaining_amount:
                description: Remaining amount of the cost order (if manually entered)
              retention_percent:
                description: Retention percentage
              scope_of_work:
                description: Scope of work for the cost order
              status:
                description: Status of the cost order
              work_end_date:
                description: End date of the work
              work_start_date:
                description: Start date of the work
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Purchase Order By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/orders/variation:
    get:
      operationId: v2_getCostVariationOrders
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                amount:
                  description: Amount of the cost order
                cost_order_name:
                  description: Name of the cost order
                cost_order_num:
                  description: Internal identifier for cost order
                cost_order_type:
                  description: Type of cost order - either purchase or Variation
                created_by_user_email:
                  description: Email of the user who created the cost order
                currency:
                  description: Currency of the cost order
                date_created:
                  description: Date the cost order was created
                issuing_company_id:
                  description: Internal identifier for the issuing company
                order_identifier:
                  description: User-friendly identifier for cost order
                receiving_company_id:
                  description: Internal identifier for the receiving company
                remaining_amount:
                  description: Remaining amount of the cost order (if manually entered)
                retention_percent:
                  description: Retention percentage
                scope_of_work:
                  description: Scope of work for the cost order
                status:
                  description: Status of the cost order
                work_end_date:
                  description: End date of the work
                work_start_date:
                  description: Start date of the work
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Variation Orders
      tags:
      - Cost
      x-ds-test-enabled: true
    post:
      operationId: v2_postCostVariationOrder
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Amount of the cost order
            cost_order_client_id:
              description: Provided identifier for cost order
            cost_order_name:
              description: Name of the cost order
            currency:
              description: Currency of the cost order
            receiving_company_id:
              description: Internal identifier for the receiving company
            remaining_amount:
              description: Remaining amount of the cost order (if manually entered)
            retention_percent:
              description: Retention percentage
            scope_of_work:
              description: Scope of work for the cost order
            status:
              description: Status of the cost order
            work_end_date:
              description: End date of the work
            work_start_date:
              description: Start date of the work
          required:
          - cost_order_name
          - amount
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              amount:
                description: Amount of the cost order
              cost_contract_num:
                description: Internal identifier for the associated cost contract
              cost_order_name:
                description: Name of the cost order
              cost_order_num:
                description: Internal identifier for cost order
              cost_order_type:
                description: Type of cost order - either purchase or Variation
              created_by_user_email:
                description: Email of the user who created the cost order
              currency:
                description: Currency of the cost order
              date_created:
                description: Date the cost order was created
              issuing_company_id:
                description: Internal identifier for the issuing company
              order_identifier:
                description: User-friendly identifier for cost order
              receiving_company_id:
                description: Internal identifier for the receiving company
              remaining_amount:
                description: Remaining amount of the cost order (if manually entered)
              retention_percent:
                description: Retention percentage
              scope_of_work:
                description: Scope of work for the cost order
              status:
                description: Status of the cost order
              work_end_date:
                description: End date of the work
              work_start_date:
                description: Start date of the work
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Variation Order
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/orders/variation/{costOrderId}:
    get:
      operationId: v2_getCostVariationOrderById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costOrderId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              amount:
                description: Amount of the cost order
              cost_order_name:
                description: Name of the cost order
              cost_order_num:
                description: Internal identifier for cost order
              cost_order_type:
                description: Type of cost order - either purchase or Variation
              created_by_user_email:
                description: Email of the user who created the cost order
              currency:
                description: Currency of the cost order
              date_created:
                description: Date the cost order was created
              issuing_company_id:
                description: Internal identifier for the issuing company
              order_identifier:
                description: User-friendly identifier for cost order
              receiving_company_id:
                description: Internal identifier for the receiving company
              remaining_amount:
                description: Remaining amount of the cost order (if manually entered)
              retention_percent:
                description: Retention percentage
              scope_of_work:
                description: Scope of work for the cost order
              status:
                description: Status of the cost order
              work_end_date:
                description: End date of the work
              work_start_date:
                description: Start date of the work
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Variation Order By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostVariationOrderById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costOrderId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Amount of the cost order
            cost_order_client_id:
              description: Provided identifier for cost order
            cost_order_name:
              description: Name of the cost order
            currency:
              description: Currency of the cost order
            receiving_company_id:
              description: Internal identifier for the receiving company
            remaining_amount:
              description: Remaining amount of the cost order (if manually entered)
            retention_percent:
              description: Retention percentage
            scope_of_work:
              description: Scope of work for the cost order
            status:
              description: Status of the cost order
            work_end_date:
              description: End date of the work
            work_start_date:
              description: Start date of the work
          type: object
      responses:
        201:
          description: Object successfully edited
          schema:
            properties:
              amount:
                description: Amount of the cost order
              cost_contract_num:
                description: Internal identifier for the associated cost contract
              cost_order_name:
                description: Name of the cost order
              cost_order_num:
                description: Internal identifier for cost order
              cost_order_type:
                description: Type of cost order - either purchase or Variation
              created_by_user_email:
                description: Email of the user who created the cost order
              currency:
                description: Currency of the cost order
              date_created:
                description: Date the cost order was created
              issuing_company_id:
                description: Internal identifier for the issuing company
              order_identifier:
                description: User-friendly identifier for cost order
              receiving_company_id:
                description: Internal identifier for the receiving company
              remaining_amount:
                description: Remaining amount of the cost order (if manually entered)
              retention_percent:
                description: Retention percentage
              scope_of_work:
                description: Scope of work for the cost order
              status:
                description: Status of the cost order
              work_end_date:
                description: End date of the work
              work_start_date:
                description: Start date of the work
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Variation Order By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/package-items:
    get:
      operationId: v2_getCostPackageItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Filter by parent package ID
        in: query
        name: costPackageNum
        required: false
        type: string
      - enum:
        - non-compliant
        - compliant
        - partially compliant
        in: query
        name: status
        required: false
        type: string
      - description: Search query
        in: query
        name: q
        required: false
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    cost_package_item_name:
                      type: string
                    cost_package_item_num:
                      type: string
                    cost_package_num:
                      type: string
                    created_at:
                      format: date-time
                      type: string
                    created_by_user_id:
                      type: string
                    description:
                      type: string
                    project_id:
                      type: integer
                    reviewer:
                      type: string
                    status:
                      enum:
                      - non-compliant
                      - compliant
                      - partially compliant
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                    updated_by_user_id:
                      type: string
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Package Items
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_createCostPackageItem
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_package_item_name:
              type: string
            cost_package_num:
              type: string
            description:
              type: string
            reviewer:
              type: string
            status:
              enum:
              - non-compliant
              - compliant
              - partially compliant
              type: string
          required:
          - cost_package_item_name
          - cost_package_num
          - status
          - description
          type: object
      responses:
        201:
          description: Package item created successfully
          schema:
            properties:
              data:
                properties:
                  cost_package_item_name:
                    type: string
                  cost_package_item_num:
                    type: string
                  cost_package_num:
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  created_by_user_id:
                    type: string
                  description:
                    type: string
                  project_id:
                    type: integer
                  reviewer:
                    type: string
                  status:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  updated_by_user_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Cost Package Item
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/package-items/{packageItemId}:
    delete:
      operationId: v2_deleteCostPackageItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: packageItemId
        required: true
        type: string
      responses:
        200:
          description: Package item deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Package item not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Cost Package Item By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getCostPackageItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: packageItemId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  cost_package_item_name:
                    type: string
                  cost_package_item_num:
                    type: string
                  cost_package_num:
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  created_by_user_id:
                    type: string
                  description:
                    type: string
                  project_id:
                    type: integer
                  reviewer:
                    type: string
                  status:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  updated_by_user_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Package item not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Package Item By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_updateCostPackageItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: packageItemId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_package_item_name:
              type: string
            cost_package_num:
              type: string
            description:
              type: string
            reviewer:
              type: string
            status:
              enum:
              - non-compliant
              - compliant
              - partially compliant
              type: string
          type: object
      responses:
        200:
          description: Package item updated successfully
          schema:
            properties:
              data:
                properties:
                  cost_package_item_name:
                    type: string
                  cost_package_item_num:
                    type: string
                  cost_package_num:
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  created_by_user_id:
                    type: string
                  description:
                    type: string
                  project_id:
                    type: integer
                  reviewer:
                    type: string
                  status:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  updated_by_user_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Package item not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Cost Package Item By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/packages:
    get:
      operationId: v2_getCostPackages
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - enum:
        - not started
        - in review
        - approved with comments
        - approved
        in: query
        name: status
        required: false
        type: string
      - enum:
        - Structural
        - MEP
        - Fire Engineering
        - Architecture
        - Civil
        in: query
        name: discipline
        required: false
        type: string
      - description: Search query
        in: query
        name: q
        required: false
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    cost_package_name:
                      type: string
                    cost_package_num:
                      type: string
                    created_at:
                      format: date-time
                      type: string
                    created_by_user_id:
                      type: string
                    discipline:
                      enum:
                      - Structural
                      - MEP
                      - Fire Engineering
                      - Architecture
                      - Civil
                      type: string
                    documents:
                      items:
                        properties:
                          cde_id:
                            type: string
                          cde_link:
                            type: string
                          display_file_name:
                            type: string
                          file_type:
                            type: string
                        type: object
                      type: array
                    due_date:
                      format: date-time
                      type: string
                    issues:
                      items:
                        properties:
                          id:
                            type: string
                          severity:
                            type: string
                          status:
                            type: string
                          title:
                            type: string
                        type: object
                      type: array
                    project_id:
                      type: integer
                    revision:
                      enum:
                      - Rev A
                      - Rev B
                      - Rev C
                      type: string
                    status:
                      enum:
                      - not started
                      - in review
                      - approved with comments
                      - approved
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                    updated_by_user_id:
                      type: string
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Packages
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_createCostPackage
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_package_name:
              type: string
            discipline:
              enum:
              - Structural
              - MEP
              - Fire Engineering
              - Architecture
              - Civil
              type: string
            due_date:
              format: date-time
              type: string
            revision:
              enum:
              - Rev A
              - Rev B
              - Rev C
              type: string
            status:
              enum:
              - not started
              - in review
              - approved with comments
              - approved
              type: string
          required:
          - cost_package_name
          - discipline
          - revision
          - status
          type: object
      responses:
        201:
          description: Cost package created successfully
          schema:
            properties:
              data:
                properties:
                  cost_package_name:
                    type: string
                  cost_package_num:
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  created_by_user_id:
                    type: string
                  discipline:
                    type: string
                  documents:
                    items:
                      type: object
                    type: array
                  due_date:
                    format: date-time
                    type: string
                  issues:
                    items:
                      type: object
                    type: array
                  project_id:
                    type: integer
                  revision:
                    type: string
                  status:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  updated_by_user_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Cost Package
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/packages/{packageId}:
    delete:
      operationId: v2_deleteCostPackageById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: packageId
        required: true
        type: string
      responses:
        200:
          description: Package deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Package not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Cost Package By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getCostPackageById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: packageId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  cost_package_name:
                    type: string
                  cost_package_num:
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  created_by_user_id:
                    type: string
                  discipline:
                    type: string
                  documents:
                    items:
                      type: object
                    type: array
                  due_date:
                    format: date-time
                    type: string
                  issues:
                    items:
                      type: object
                    type: array
                  project_id:
                    type: integer
                  revision:
                    type: string
                  status:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  updated_by_user_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Package not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost Package By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_updateCostPackageById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: packageId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_package_name:
              type: string
            discipline:
              enum:
              - Structural
              - MEP
              - Fire Engineering
              - Architecture
              - Civil
              type: string
            due_date:
              format: date-time
              type: string
            revision:
              enum:
              - Rev A
              - Rev B
              - Rev C
              type: string
            status:
              enum:
              - not started
              - in review
              - approved with comments
              - approved
              type: string
          type: object
      responses:
        200:
          description: Package updated successfully
          schema:
            properties:
              data:
                properties:
                  cost_package_name:
                    type: string
                  cost_package_num:
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  created_by_user_id:
                    type: string
                  discipline:
                    type: string
                  documents:
                    items:
                      type: object
                    type: array
                  due_date:
                    format: date-time
                    type: string
                  issues:
                    items:
                      type: object
                    type: array
                  project_id:
                    type: integer
                  revision:
                    type: string
                  status:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  updated_by_user_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Package not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Cost Package By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/payment-schedules:
    get:
      operationId: v2_getPaymentSchedules
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Filter payment schedules by related cost claim UUID
        in: query
        name: related_cost_claim_num
        required: false
        type: string
      - description: Maximum number of results to return (default 1000)
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    attachments:
                      items:
                        properties:
                          cde_id:
                            type: string
                          created_by_company_id:
                            type: integer
                          created_by_user_email:
                            type: string
                        type: object
                      type: array
                    cost_payment_schedule_num:
                      type: integer
                    created_by_user_id:
                      type: string
                    currency:
                      type: string
                    due_date:
                      format: date
                      type: string
                    issued_date:
                      format: date
                      type: string
                    issuing_company_id:
                      type: integer
                    receiving_company_id:
                      type: integer
                    related_cost_claim_num:
                      type: integer
                    retention_amount:
                      format: float
                      type: number
                    schedule_identifier:
                      type: string
                    scheduled_amount:
                      format: float
                      type: number
                    withholdings:
                      items:
                        properties:
                          amount:
                            format: float
                            type: number
                          reason:
                            type: string
                        type: object
                      type: array
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Payment Schedules
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_createPaymentSchedule
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            cost_payment_schedule_client_id:
              type: string
            currency:
              default: AUD
              type: string
            due_date:
              format: date
              type: string
            issued_date:
              format: date
              type: string
            issuing_company_id:
              type: integer
            receiving_company_id:
              type: integer
            related_cost_claim_num:
              type: integer
            retention_amount:
              format: float
              type: number
            scheduled_amount:
              format: float
              type: number
            withholdings:
              items:
                properties:
                  amount:
                    format: float
                    type: number
                  reason:
                    type: string
                required:
                - reason
                - amount
                type: object
              type: array
          required:
          - scheduled_amount
          - retention_amount
          - issuing_company_id
          - receiving_company_id
          - due_date
          - issued_date
          - related_cost_claim_num
          type: object
      responses:
        201:
          description: Payment schedule created successfully
          schema:
            properties:
              data:
                properties:
                  attachments:
                    items:
                      properties:
                        cde_id:
                          type: string
                        created_by_company_id:
                          type: integer
                        created_by_user_email:
                          type: string
                      type: object
                    type: array
                  cost_payment_schedule_num:
                    type: integer
                  created_by_user_id:
                    type: string
                  currency:
                    type: string
                  due_date:
                    format: date
                    type: string
                  issued_date:
                    format: date
                    type: string
                  issuing_company_id:
                    type: integer
                  receiving_company_id:
                    type: integer
                  related_cost_claim_num:
                    type: integer
                  retention_amount:
                    format: float
                    type: number
                  schedule_identifier:
                    type: string
                  scheduled_amount:
                    format: float
                    type: number
                  withholdings:
                    items:
                      properties:
                        amount:
                          format: float
                          type: number
                        reason:
                          type: string
                      type: object
                    type: array
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Payment Schedule
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/payment-schedules/{paymentScheduleId}:
    get:
      operationId: v2_getPaymentScheduleById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: paymentScheduleId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  attachments:
                    items:
                      properties:
                        cde_id:
                          type: string
                        created_by_company_id:
                          type: integer
                        created_by_user_email:
                          type: string
                      type: object
                    type: array
                  cost_payment_schedule_num:
                    type: integer
                  created_by_user_id:
                    type: string
                  currency:
                    type: string
                  due_date:
                    format: date
                    type: string
                  issued_date:
                    format: date
                    type: string
                  issuing_company_id:
                    type: integer
                  receiving_company_id:
                    type: integer
                  related_cost_claim_num:
                    type: integer
                  retention_amount:
                    format: float
                    type: number
                  schedule_identifier:
                    type: string
                  scheduled_amount:
                    format: float
                    type: number
                  withholdings:
                    items:
                      properties:
                        amount:
                          format: float
                          type: number
                        reason:
                          type: string
                      type: object
                    type: array
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Payment schedule not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Payment Schedule By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_updatePaymentScheduleById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: paymentScheduleId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            currency:
              type: string
            due_date:
              format: date
              type: string
            issued_date:
              format: date
              type: string
            retention_amount:
              format: float
              type: number
            scheduled_amount:
              format: float
              type: number
            withholdings:
              items:
                properties:
                  amount:
                    format: float
                    type: number
                  reason:
                    type: string
                required:
                - reason
                - amount
                type: object
              type: array
          type: object
      responses:
        200:
          description: Payment schedule updated successfully
          schema:
            properties:
              data:
                properties:
                  attachments:
                    items:
                      properties:
                        cde_id:
                          type: string
                        created_by_company_id:
                          type: integer
                        created_by_user_email:
                          type: string
                      type: object
                    type: array
                  cost_payment_schedule_num:
                    type: integer
                  created_by_user_id:
                    type: string
                  currency:
                    type: string
                  due_date:
                    format: date
                    type: string
                  issued_date:
                    format: date
                    type: string
                  issuing_company_id:
                    type: integer
                  receiving_company_id:
                    type: integer
                  related_cost_claim_num:
                    type: integer
                  retention_amount:
                    format: float
                    type: number
                  schedule_identifier:
                    type: string
                  scheduled_amount:
                    format: float
                    type: number
                  withholdings:
                    items:
                      properties:
                        amount:
                          format: float
                          type: number
                        reason:
                          type: string
                      type: object
                    type: array
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Payment schedule not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Payment Schedule By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/po-register:
    get:
      description: Consolidated endpoint replacing multiple API calls.
      operationId: v2_getPoRegisterData
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Comma-separated list (line_items, line_items_variation, issues,
          variations, budget_categories, cost_codes, wbs, all)
        in: query
        name: include
        required: false
        type: string
      - default: 1
        in: query
        name: page
        required: false
        type: integer
      - default: 100
        in: query
        maximum: 1000
        name: limit
        required: false
        type: integer
      - in: query
        name: status
        required: false
        type: string
      - in: query
        name: currency
        required: false
        type: string
      - in: query
        name: search
        required: false
        type: string
      - default: date
        enum:
        - date
        - amount
        - status
        - po_number
        in: query
        name: sort_by
        required: false
        type: string
      - default: desc
        enum:
        - asc
        - desc
        in: query
        name: sort_order
        required: false
        type: string
      responses:
        200:
          description: Success
          schema:
            properties:
              data:
                properties:
                  budget_categories:
                    items:
                      properties:
                        children:
                          items:
                            type: object
                          type: array
                        cost_budget_category_id:
                          type: string
                        cost_budget_category_name:
                          type: string
                        description:
                          type: string
                        parent_cost_budget_category_id:
                          type: string
                      type: object
                    type: array
                    x-nullable: true
                  cost_codes:
                    items:
                      properties:
                        children:
                          items:
                            type: object
                          type: array
                        cost_code_identifier:
                          type: string
                        cost_code_name:
                          type: string
                        cost_code_num:
                          type: integer
                        parent_cost_code_num:
                          type: integer
                      type: object
                    type: array
                    x-nullable: true
                  issues:
                    items:
                      properties:
                        created_at:
                          format: date-time
                          type: string
                        description:
                          type: string
                        id:
                          type: string
                        issue_id:
                          type: string
                        project_id:
                          type: integer
                        related_document_num:
                          type: string
                        severity:
                          enum:
                          - low
                          - medium
                          - high
                          - critical
                          type: string
                        status:
                          enum:
                          - open
                          - in_progress
                          - resolved
                          - closed
                          type: string
                        title:
                          type: string
                        type:
                          type: string
                      type: object
                    type: array
                    x-nullable: true
                  line_items:
                    additionalProperties:
                      items:
                        properties:
                          cost_order_line_description:
                            type: string
                          cost_order_line_name:
                            type: string
                          cost_order_line_num:
                            type: integer
                          cost_order_num:
                            type: integer
                          line_item_identifier:
                            type: string
                          qty:
                            type: number
                          total_amount:
                            type: number
                          unit_amount:
                            type: number
                          unit_of_measure:
                            type: string
                        type: object
                      type: array
                    type: object
                    x-nullable: true
                  line_items_variation:
                    additionalProperties:
                      items:
                        properties:
                          cost_variation_line_name:
                            type: string
                          cost_variation_line_num:
                            type: integer
                          cost_variation_req_num:
                            type: integer
                          line_item_identifier:
                            type: string
                          total_amount:
                            type: number
                        type: object
                      type: array
                    type: object
                    x-nullable: true
                  pagination:
                    properties:
                      current_page:
                        type: integer
                      has_next_page:
                        type: boolean
                      has_previous_page:
                        type: boolean
                      per_page:
                        type: integer
                      total_pages:
                        type: integer
                      total_records:
                        type: integer
                    type: object
                  purchase_orders:
                    items:
                      properties:
                        amount:
                          type: number
                        approved_by:
                          type: string
                        contract_type:
                          enum:
                          - SUPPLIER
                          type: string
                        cost_order_name:
                          type: string
                        cost_order_num:
                          type: integer
                        created_at:
                          format: date-time
                          type: string
                        created_by_user_email:
                          type: string
                        currency:
                          type: string
                        issuing_company_id:
                          type: integer
                        order_identifier:
                          type: string
                        order_type:
                          enum:
                          - purchase
                          type: string
                        project_id:
                          type: integer
                        receiving_company_id:
                          type: integer
                        scope_of_work:
                          type: string
                        status:
                          type: string
                      type: object
                    type: array
                  statistics:
                    properties:
                      currencies:
                        items:
                          type: string
                        type: array
                      pending_approvals:
                        type: integer
                      status_breakdown:
                        additionalProperties:
                          type: integer
                        type: object
                      total_amount:
                        type: number
                      total_amount_by_currency:
                        additionalProperties:
                          type: number
                        type: object
                      total_orders:
                        type: integer
                    type: object
                  variations:
                    items:
                      properties:
                        amount:
                          type: number
                        cost_variation_req_num:
                          type: integer
                        description:
                          type: string
                        related_cost_order_num:
                          type: integer
                        status:
                          type: string
                        variation_req_identifier:
                          type: string
                        variation_req_name:
                          type: string
                      type: object
                    type: array
                    x-nullable: true
                  wbs:
                    items:
                      properties:
                        children:
                          items:
                            type: object
                          type: array
                        description:
                          type: string
                        parent_wbs_id:
                          type: integer
                        wbs_id:
                          type: integer
                        wbs_name:
                          type: string
                      type: object
                    type: array
                    x-nullable: true
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden
        500:
          description: Internal Server Error
          schema:
            properties:
              message:
                type: string
            type: object
      security:
      - JWT_v2: []
      summary: Get PO Register (Consolidated)
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/qto:
    get:
      operationId: v2_getQTOs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: QTO type filter
        in: query
        name: type
        required: false
        type: string
      - description: QTO status filter
        enum:
        - in_progress
        - completed
        in: query
        name: status
        required: false
        type: string
      - description: Search query
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        name: page
        required: false
        type: integer
      - default: 50
        description: Number of items per page
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              count:
                type: integer
              items:
                items:
                  properties:
                    author:
                      type: string
                    comments_count:
                      type: integer
                    created_at:
                      format: date-time
                      type: string
                    estimate_id:
                      type: string
                    files_count:
                      type: integer
                    items:
                      items:
                        type: object
                      type: array
                    items_count:
                      type: integer
                    project_id:
                      type: integer
                    qto_id:
                      type: string
                    qto_name:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                  type: object
                type: array
              limit:
                type: integer
              page:
                type: integer
              total_count:
                type: integer
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get QTOs
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_createQTO
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            author:
              description: Author of the QTO
              type: string
            estimate_id:
              description: Link to estimate
              type: string
            items:
              description: Array of QTO items (optional)
              items:
                properties:
                  assigned_user:
                    type: string
                  breakdown:
                    items:
                      properties:
                        description:
                          type: string
                        formula:
                          type: string
                        result:
                          type: string
                      type: object
                    type: array
                  code:
                    type: string
                  cost_code_id:
                    type: string
                  location:
                    type: string
                  notes:
                    type: string
                  qto_item_name:
                    type: string
                  quantity:
                    type: number
                  specifications:
                    items:
                      properties:
                        content:
                          type: string
                        title:
                          type: string
                      type: object
                    type: array
                  unit:
                    type: string
                  unit_rate:
                    type: number
                  volume:
                    type: number
                type: object
              type: array
            qto_name:
              description: Name of the QTO
              type: string
            status:
              description: QTO status
              enum:
              - in_progress
              - completed
              type: string
            type:
              description: Type/category of QTO
              type: string
          required:
          - qto_name
          - type
          - status
          type: object
      responses:
        201:
          description: QTO created successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create QTO
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/qto/{qtoId}:
    delete:
      operationId: v2_deleteQTOById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: qtoId
        required: true
        type: string
      responses:
        200:
          description: QTO deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: QTO not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete QTO By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getQTOById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: qtoId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  author:
                    type: string
                  comments:
                    type: array
                  comments_count:
                    type: integer
                  created_at:
                    format: date-time
                    type: string
                  estimate_id:
                    type: string
                  files:
                    type: array
                  files_count:
                    type: integer
                  items:
                    items:
                      type: object
                    type: array
                  items_count:
                    type: integer
                  project_id:
                    type: integer
                  qto_id:
                    type: string
                  qto_name:
                    type: string
                  status:
                    type: string
                  type:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: QTO not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get QTO By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_updateQTOById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: qtoId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            author:
              type: string
            estimate_id:
              type: string
            items:
              description: Complete items array replacement
              items:
                type: object
              type: array
            qto_name:
              type: string
            status:
              enum:
              - in_progress
              - completed
              type: string
            type:
              type: string
          type: object
      responses:
        200:
          description: QTO updated successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: QTO not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update QTO By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/qto/{qtoId}/items:
    get:
      operationId: v2_getQTOItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: qtoId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              count:
                type: integer
              items:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: QTO not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get QTO Items
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_createQTOItem
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: qtoId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assigned_user:
              type: string
            breakdown:
              items:
                properties:
                  description:
                    type: string
                  formula:
                    type: string
                  result:
                    type: string
                type: object
              type: array
            code:
              type: string
            cost_code_id:
              type: string
            location:
              type: string
            notes:
              type: string
            qto_item_name:
              type: string
            quantity:
              type: number
            specifications:
              items:
                properties:
                  content:
                    type: string
                  title:
                    type: string
                type: object
              type: array
            unit:
              type: string
            unit_rate:
              type: number
            volume:
              type: number
          type: object
      responses:
        201:
          description: QTO item created successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: QTO not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create QTO Item
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/qto/{qtoId}/items/{itemId}:
    delete:
      operationId: v2_deleteQTOItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: qtoId
        required: true
        type: string
      - in: path
        name: itemId
        required: true
        type: string
      responses:
        200:
          description: QTO item deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: QTO or item not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete QTO Item By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getQTOItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: qtoId
        required: true
        type: string
      - in: path
        name: itemId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: QTO or item not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get QTO Item By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_updateQTOItemById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: qtoId
        required: true
        type: string
      - in: path
        name: itemId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            assigned_user:
              type: string
            breakdown:
              type: array
            code:
              type: string
            cost_code_id:
              type: string
            location:
              type: string
            notes:
              type: string
            qto_item_name:
              type: string
            quantity:
              type: number
            specifications:
              type: array
            unit:
              type: string
            unit_rate:
              type: number
            volume:
              type: number
          type: object
      responses:
        200:
          description: QTO item updated successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: QTO or item not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update QTO Item By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/retentions:
    get:
      operationId: v2_getRetentionReleases
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                created_at:
                  description: Date retention release was created
                created_by_user_id:
                  description: User ID who created retention release
                id:
                  description: Internal identifier for retention release (UUID)
                marked_as_released_by_user_id:
                  description: User ID who marked retention as released
                milestone_name:
                  description: Name of the milestone
                retention_amount:
                  description: Retention amount
                retention_percentage:
                  description: Retention percentage
                retention_reference_no:
                  description: Reference number for retention
                retention_release_date:
                  description: Date when retention is released
                retention_released_by_company_id:
                  description: ID of company releasing retention
                retention_released_to_company_id:
                  description: ID of company receiving retention
                status:
                  description: Status of retention (pending/released/scheduled)
                updated_at:
                  description: Date retention release was last updated
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Retention Releases
      tags:
      - Cost
      x-min-permissions: isCostUser
    post:
      operationId: v2_postRetentionRelease
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            marked_as_released_by_user_id:
              description: User ID who marked retention as released
            milestone_name:
              description: Name of the milestone
            retention_amount:
              description: Retention amount
            retention_percentage:
              description: Retention percentage
            retention_reference_no:
              description: Reference number for retention
            retention_release_date:
              description: Date when retention is released
            retention_released_by_company_id:
              description: ID of company releasing retention
            retention_released_to_company_id:
              description: ID of company receiving retention
            status:
              default: pending
              description: Status of retention (pending/released/scheduled)
          required:
          - milestone_name
          - retention_amount
          - retention_released_by_company_id
          - retention_released_to_company_id
          type: object
      responses:
        201:
          description: Retention release created successfully
          schema:
            properties:
              data:
                properties:
                  created_at:
                    description: Date retention release was created
                  created_by_user_id:
                    description: User ID who created retention release
                  id:
                    description: Internal identifier for retention release
                  marked_as_released_by_user_id:
                    description: User ID who marked retention as released
                  milestone_name:
                    description: Name of the milestone
                  retention_amount:
                    description: Retention amount
                  retention_percentage:
                    description: Retention percentage
                  retention_reference_no:
                    description: Reference number for retention
                  retention_release_date:
                    description: Date when retention is released
                  retention_released_by_company_id:
                    description: ID of company releasing retention
                  retention_released_to_company_id:
                    description: ID of company receiving retention
                  status:
                    description: Status of retention (pending/released/scheduled)
                  updated_at:
                    description: Date retention release was last updated
                type: object
              message:
                description: Response message
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Retention Release
      tags:
      - Cost
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/retentions/{retentionId}:
    get:
      operationId: v2_getRetentionReleaseById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: path
        name: retentionId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  created_at:
                    description: Date retention release was created
                  created_by_user_id:
                    description: User ID who created retention release
                  id:
                    description: Internal identifier for retention release
                  marked_as_released_by_user_id:
                    description: User ID who marked retention as released
                  milestone_name:
                    description: Name of the milestone
                  retention_amount:
                    description: Retention amount
                  retention_percentage:
                    description: Retention percentage
                  retention_reference_no:
                    description: Reference number for retention
                  retention_release_date:
                    description: Date when retention is released
                  retention_released_by_company_id:
                    description: ID of company releasing retention
                  retention_released_to_company_id:
                    description: ID of company receiving retention
                  status:
                    description: Status of retention (pending/released/scheduled)
                  updated_at:
                    description: Date retention release was last updated
                type: object
              message:
                description: Response message
            type: object
        401:
          description: Unauthorized
        404:
          description: Retention release not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Retention Release By Id
      tags:
      - Cost
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchRetentionReleaseById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: path
        name: retentionId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            marked_as_released_by_user_id:
              description: User ID who marked retention as released
            milestone_name:
              description: Name of the milestone
            retention_amount:
              description: Retention amount
            retention_percentage:
              description: Retention percentage
            retention_reference_no:
              description: Reference number for retention
            retention_release_date:
              description: Date when retention is released
            retention_released_by_company_id:
              description: ID of company releasing retention
            retention_released_to_company_id:
              description: ID of company receiving retention
            status:
              description: Status of retention (pending/released/scheduled)
          type: object
      responses:
        201:
          description: Retention release updated successfully
          schema:
            properties:
              data:
                properties:
                  created_at:
                    description: Date retention release was created
                  created_by_user_id:
                    description: User ID who created retention release
                  id:
                    description: Internal identifier for retention release
                  marked_as_released_by_user_id:
                    description: User ID who marked retention as released
                  milestone_name:
                    description: Name of the milestone
                  retention_amount:
                    description: Retention amount
                  retention_percentage:
                    description: Retention percentage
                  retention_reference_no:
                    description: Reference number for retention
                  retention_release_date:
                    description: Date when retention is released
                  retention_released_by_company_id:
                    description: ID of company releasing retention
                  retention_released_to_company_id:
                    description: ID of company receiving retention
                  status:
                    description: Status of retention (pending/released/scheduled)
                  updated_at:
                    description: Date retention release was last updated
                type: object
              message:
                description: Response message
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Retention release not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Retention Release By Id
      tags:
      - Cost
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop:
    get:
      operationId: v2_getSOPs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: query
        name: page
        type: integer
      - in: query
        name: limit
        type: integer
      - in: query
        name: status
        type: string
      - in: query
        name: q
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    change_requests:
                      type: array
                    deliverables:
                      type: array
                    dependencies:
                      type: array
                    description:
                      description: SOP description
                    id:
                      description: SOP ID
                    linked_rfqs:
                      type: array
                    linked_subcontracts:
                      type: array
                    milestones:
                      type: array
                    original_budget:
                      description: Original budget
                    progress:
                      description: Progress percentage
                    revised_budget:
                      description: Revised budget
                    status:
                      description: SOP status
                    title:
                      description: SOP title
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get SOPs
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postSOP
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            approval_required:
              type: boolean
            description:
              type: string
            end_date:
              type: string
            original_budget:
              type: number
            priority_level:
              type: string
            progress:
              type: number
            responsible_party:
              type: string
            revised_budget:
              type: number
            start_date:
              type: string
            status:
              type: string
            title:
              type: string
          required:
          - title
          - description
          type: object
      responses:
        201:
          description: SOP successfully created
          schema:
            properties:
              data:
                properties:
                  description:
                    description: SOP description
                  id:
                    description: SOP ID
                  title:
                    description: SOP title
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create SOP
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop/{sopId}:
    delete:
      operationId: v2_deleteSOPById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      responses:
        200:
          description: SOP successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete SOP By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getSOPById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  change_requests:
                    type: array
                  deliverables:
                    type: array
                  dependencies:
                    type: array
                  description:
                    description: SOP description
                  id:
                    description: SOP ID
                  linked_rfqs:
                    type: array
                  linked_subcontracts:
                    type: array
                  milestones:
                    type: array
                  progress:
                    description: Progress percentage
                  status:
                    description: SOP status
                  title:
                    description: SOP title
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get SOP By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchSOPById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: SOP successfully updated
          schema:
            properties:
              data:
                properties:
                  description:
                    description: SOP description
                  id:
                    description: SOP ID
                  title:
                    description: SOP title
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update SOP By ID
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop/{sopId}/change_requests:
    get:
      operationId: v2_getSOPChangeRequests
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get SOP Change Requests
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postSOPChangeRequest
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            approved_date:
              type: string
            cost_impact:
              type: number
            description:
              type: string
            impact_assessment:
              type: string
            reason:
              type: string
            requested_date:
              type: string
            schedule_impact:
              type: string
            status:
              type: string
          required:
          - description
          - requested_date
          type: object
      responses:
        201:
          description: Change request successfully created
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create SOP Change Request
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop/{sopId}/change_requests/{changeRequestId}:
    delete:
      operationId: v2_deleteSOPChangeRequest
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: path
        name: changeRequestId
        required: true
        type: string
      responses:
        200:
          description: Change request successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete SOP Change Request
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchSOPChangeRequest
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: path
        name: changeRequestId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Change request successfully updated
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update SOP Change Request
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop/{sopId}/deliverables:
    get:
      operationId: v2_getSOPDeliverables
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get SOP Deliverables
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postSOPDeliverable
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            description:
              type: string
            due_date:
              type: string
            name:
              type: string
            responsible_party:
              type: string
            status:
              type: string
          required:
          - name
          - due_date
          type: object
      responses:
        201:
          description: Deliverable successfully created
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create SOP Deliverable
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop/{sopId}/deliverables/{deliverableId}:
    delete:
      operationId: v2_deleteSOPDeliverable
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: path
        name: deliverableId
        required: true
        type: string
      responses:
        200:
          description: Deliverable successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete SOP Deliverable
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchSOPDeliverable
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: path
        name: deliverableId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Deliverable successfully updated
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update SOP Deliverable
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop/{sopId}/dependencies:
    get:
      operationId: v2_getSOPDependencies
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get SOP Dependencies
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postSOPDependency
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            dependency_type:
              type: string
            lag_time:
              type: number
            predecessor_task:
              type: string
            successor_task:
              type: string
          required:
          - predecessor_task
          - successor_task
          type: object
      responses:
        201:
          description: Dependency successfully created
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create SOP Dependency
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop/{sopId}/dependencies/{dependencyId}:
    delete:
      operationId: v2_deleteSOPDependency
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: path
        name: dependencyId
        required: true
        type: string
      responses:
        200:
          description: Dependency successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete SOP Dependency
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchSOPDependency
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: path
        name: dependencyId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Dependency successfully updated
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update SOP Dependency
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop/{sopId}/linked_rfqs:
    get:
      operationId: v2_getSOPLinkedRFQs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get SOP Linked RFQs
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postSOPLinkedRFQ
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            notes:
              type: string
            relationship_type:
              type: string
            rfq_id:
              type: string
          required:
          - rfq_id
          type: object
      responses:
        201:
          description: Linked RFQ successfully created
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create SOP Linked RFQ
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop/{sopId}/linked_rfqs/{linkedRfqId}:
    delete:
      operationId: v2_deleteSOPLinkedRFQ
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: path
        name: linkedRfqId
        required: true
        type: string
      responses:
        200:
          description: Linked RFQ successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete SOP Linked RFQ
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchSOPLinkedRFQ
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: path
        name: linkedRfqId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Linked RFQ successfully updated
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update SOP Linked RFQ
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop/{sopId}/linked_subcontracts:
    get:
      operationId: v2_getSOPLinkedSubcontracts
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get SOP Linked Subcontracts
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postSOPLinkedSubcontract
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            contract_id:
              type: string
            notes:
              type: string
            relationship_type:
              type: string
          required:
          - contract_id
          type: object
      responses:
        201:
          description: Linked subcontract successfully created
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create SOP Linked Subcontract
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop/{sopId}/linked_subcontracts/{linkedSubcontractId}:
    delete:
      operationId: v2_deleteSOPLinkedSubcontract
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: path
        name: linkedSubcontractId
        required: true
        type: string
      responses:
        200:
          description: Linked subcontract successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete SOP Linked Subcontract
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchSOPLinkedSubcontract
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: path
        name: linkedSubcontractId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Linked subcontract successfully updated
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update SOP Linked Subcontract
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop/{sopId}/milestones:
    get:
      operationId: v2_getSOPMilestones
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get SOP Milestones
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postSOPMilestone
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            description:
              type: string
            due_date:
              type: string
            name:
              type: string
            progress:
              type: number
            status:
              type: string
          required:
          - name
          - due_date
          type: object
      responses:
        201:
          description: Milestone successfully created
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create SOP Milestone
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/sop/{sopId}/milestones/{milestoneId}:
    delete:
      operationId: v2_deleteSOPMilestone
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: path
        name: milestoneId
        required: true
        type: string
      responses:
        200:
          description: Milestone successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete SOP Milestone
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchSOPMilestone
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: sopId
        required: true
        type: string
      - in: path
        name: milestoneId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Milestone successfully updated
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update SOP Milestone
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-claims:
    get:
      operationId: v2_getSubcontractClaims
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Claims
      tags:
      - Cost
    post:
      operationId: v2_postSubcontractClaim
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Create Subcontract Claim
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-claims/{claimId}:
    delete:
      operationId: v2_deleteSubcontractClaimById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Subcontract Claim By Id
      tags:
      - Cost
    get:
      operationId: v2_getSubcontractClaimById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Claim By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchSubcontractClaimById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Edit Subcontract Claim By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-claims/{claimId}/change-status:
    patch:
      operationId: v2_patchSubcontractClaimStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Status updated
      security:
      - JWT_v2: []
      summary: Change Subcontract Claim Status
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-claims/{claimId}/sovs:
    get:
      operationId: v2_getSubcontractClaimSovs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Claim SOVs
      tags:
      - Cost
    post:
      operationId: v2_postSubcontractClaimSov
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Add Subcontract Claim SOV
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-claims/{claimId}/sovs/{sovId}:
    delete:
      operationId: v2_deleteSubcontractClaimSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Subcontract Claim SOV By Id
      tags:
      - Cost
    get:
      operationId: v2_getSubcontractClaimSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Claim SOV By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchSubcontractClaimSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: claimId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Update Subcontract Claim SOV By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-invoices:
    get:
      operationId: v2_getSubcontractInvoices
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Invoices
      tags:
      - Cost
    post:
      operationId: v2_postSubcontractInvoice
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Create Subcontract Invoice
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-invoices/{invoiceId}:
    delete:
      operationId: v2_deleteSubcontractInvoiceById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Subcontract Invoice By Id
      tags:
      - Cost
    get:
      operationId: v2_getSubcontractInvoiceById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Invoice By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchSubcontractInvoiceById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Edit Subcontract Invoice By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-invoices/{invoiceId}/change-status:
    patch:
      operationId: v2_patchSubcontractInvoiceStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Status updated
      security:
      - JWT_v2: []
      summary: Change Subcontract Invoice Status
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-invoices/{invoiceId}/sovs:
    get:
      operationId: v2_getSubcontractInvoiceSovs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Invoice SOVs
      tags:
      - Cost
    post:
      operationId: v2_postSubcontractInvoiceSov
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Add Subcontract Invoice SOV
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-invoices/{invoiceId}/sovs/{sovId}:
    delete:
      operationId: v2_deleteSubcontractInvoiceSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Subcontract Invoice SOV By Id
      tags:
      - Cost
    get:
      operationId: v2_getSubcontractInvoiceSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Invoice SOV By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchSubcontractInvoiceSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: invoiceId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Update Subcontract Invoice SOV By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-payment-schedules:
    get:
      operationId: v2_getSubcontractPaymentSchedules
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Payment Schedules
      tags:
      - Cost
    post:
      operationId: v2_postSubcontractPaymentSchedule
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Create Subcontract Payment Schedule
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-payment-schedules/{scheduleId}:
    delete:
      operationId: v2_deleteSubcontractPaymentScheduleById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Subcontract Payment Schedule By Id
      tags:
      - Cost
    get:
      operationId: v2_getSubcontractPaymentScheduleById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Payment Schedule By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchSubcontractPaymentScheduleById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Edit Subcontract Payment Schedule By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-payment-schedules/{scheduleId}/change-status:
    patch:
      operationId: v2_patchSubcontractPaymentScheduleStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Status updated
      security:
      - JWT_v2: []
      summary: Change Subcontract Payment Schedule Status
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-payment-schedules/{scheduleId}/sovs:
    get:
      operationId: v2_getSubcontractPaymentScheduleSovs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Payment Schedule SOVs
      tags:
      - Cost
    post:
      operationId: v2_postSubcontractPaymentScheduleSov
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Add Subcontract Payment Schedule SOV
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-payment-schedules/{scheduleId}/sovs/{sovId}:
    delete:
      operationId: v2_deleteSubcontractPaymentScheduleSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Subcontract Payment Schedule SOV By Id
      tags:
      - Cost
    get:
      operationId: v2_getSubcontractPaymentScheduleSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Payment Schedule SOV By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchSubcontractPaymentScheduleSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: scheduleId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Update Subcontract Payment Schedule SOV By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-retentions:
    get:
      operationId: v2_getSubcontractRetentions
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Retentions
      tags:
      - Cost
    post:
      operationId: v2_postSubcontractRetention
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Create Subcontract Retention
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-retentions/{retentionId}:
    delete:
      operationId: v2_deleteSubcontractRetentionById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Subcontract Retention By Id
      tags:
      - Cost
    get:
      operationId: v2_getSubcontractRetentionById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Retention By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchSubcontractRetentionById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Edit Subcontract Retention By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-retentions/{retentionId}/records:
    get:
      operationId: v2_getSubcontractRetentionRecords
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Retention Records
      tags:
      - Cost
    post:
      operationId: v2_postSubcontractRetentionRecord
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Add Subcontract Retention Record
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-retentions/{retentionId}/records/{recordId}:
    delete:
      operationId: v2_deleteSubcontractRetentionRecordById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      - in: path
        name: recordId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Subcontract Retention Record By Id
      tags:
      - Cost
    get:
      operationId: v2_getSubcontractRetentionRecordById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      - in: path
        name: recordId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Retention Record By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchSubcontractRetentionRecordById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: retentionId
        required: true
        type: string
      - in: path
        name: recordId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Update Subcontract Retention Record By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-variations:
    get:
      operationId: v2_getSubcontractVariations
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Variations
      tags:
      - Cost
    post:
      operationId: v2_postSubcontractVariation
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Create Subcontract Variation
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-variations/{variationId}:
    delete:
      operationId: v2_deleteSubcontractVariationById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Subcontract Variation By Id
      tags:
      - Cost
    get:
      operationId: v2_getSubcontractVariationById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Variation By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchSubcontractVariationById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Edit Subcontract Variation By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-variations/{variationId}/scopes:
    get:
      operationId: v2_getSubcontractVariationScopes
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Variation Scopes
      tags:
      - Cost
    post:
      operationId: v2_postSubcontractVariationScope
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Add Subcontract Variation Scope
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-variations/{variationId}/scopes/{scopeId}:
    delete:
      operationId: v2_deleteSubcontractVariationScopeById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      - in: path
        name: scopeId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Subcontract Variation Scope By Id
      tags:
      - Cost
    get:
      operationId: v2_getSubcontractVariationScopeById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      - in: path
        name: scopeId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract Variation Scope By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchSubcontractVariationScopeById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      - in: path
        name: scopeId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Update Subcontract Variation Scope By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontract-variations/{variationId}/update-status:
    patch:
      operationId: v2_patchSubcontractVariationStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: variationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Status updated
      security:
      - JWT_v2: []
      summary: Update Subcontract Variation Status
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontracts:
    get:
      operationId: v2_getSubcontracts
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontracts
      tags:
      - Cost
    post:
      operationId: v2_postSubcontract
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Create Subcontract
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontracts/{subcontractId}:
    delete:
      operationId: v2_deleteSubcontractById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: subcontractId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Subcontract By Id
      tags:
      - Cost
    get:
      operationId: v2_getSubcontractById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: subcontractId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchSubcontractById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: subcontractId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Edit Subcontract By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontracts/{subcontractId}/change-status:
    patch:
      operationId: v2_patchSubcontractStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: subcontractId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Status updated
      security:
      - JWT_v2: []
      summary: Change Subcontract Status
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontracts/{subcontractId}/sovs:
    get:
      operationId: v2_getSubcontractSovs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: subcontractId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract SOVs
      tags:
      - Cost
    post:
      operationId: v2_postSubcontractSov
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: subcontractId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        201:
          description: Created
      security:
      - JWT_v2: []
      summary: Add Subcontract SOV
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/subcontracts/{subcontractId}/sovs/{sovId}:
    delete:
      operationId: v2_deleteSubcontractSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: subcontractId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Deleted
      security:
      - JWT_v2: []
      summary: Delete Subcontract SOV By Id
      tags:
      - Cost
    get:
      operationId: v2_getSubcontractSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: subcontractId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      responses:
        200:
          description: Successful response
      security:
      - JWT_v2: []
      summary: Get Subcontract SOV By Id
      tags:
      - Cost
    patch:
      operationId: v2_patchSubcontractSovById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: subcontractId
        required: true
        type: string
      - in: path
        name: sovId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          type: object
      responses:
        200:
          description: Updated
      security:
      - JWT_v2: []
      summary: Update Subcontract SOV By Id
      tags:
      - Cost
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/tenders:
    get:
      operationId: v2_getTenders
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - enum:
        - commercial
        - residential
        - infrastructure
        - education
        - healthcare
        - industrial
        - retail
        - other
        in: query
        name: type
        required: false
        type: string
      - enum:
        - will_bid
        - undecided
        in: query
        name: bid_status
        required: false
        type: string
      - enum:
        - in_progress
        - submitted
        - cancelled
        in: query
        name: tender_status
        required: false
        type: string
      - enum:
        - open
        - invited
        - shortlisted
        in: query
        name: stage
        required: false
        type: string
      - description: Include related project information
        in: query
        name: includeProjectInfo
        required: false
        type: boolean
      responses:
        200:
          description: Successful response
          schema:
            properties:
              count:
                type: integer
              items:
                items:
                  properties:
                    bid_status:
                      type: string
                    client_contact:
                      description: Denormalized client contact for display
                      type: string
                    client_id:
                      description: Reference to workspace client (Firestore document
                        ID)
                      type: string
                    client_name:
                      description: Denormalized client name for display
                      type: string
                    created_at:
                      format: date-time
                      type: string
                    description:
                      type: string
                    due_date:
                      format: date-time
                      type: string
                    estimator:
                      description: Optional estimator name or identifier
                      type: string
                    id:
                      type: string
                    location:
                      type: string
                    name:
                      type: string
                    project_id:
                      type: string
                    stage:
                      type: string
                    tags:
                      type: array
                    teams:
                      type: array
                    tender_status:
                      type: string
                    type:
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                    value:
                      type: number
                  type: object
                type: array
              limit:
                type: integer
              page:
                type: integer
              total_count:
                type: integer
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Tenders
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_createTender
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            bid_status:
              enum:
              - will_bid
              - undecided
              type: string
            client_contact:
              description: Denormalized client contact for display
              type: string
            client_id:
              description: Reference to workspace client (Firestore document ID, 32-char
                hex string)
              type: string
            client_name:
              description: Denormalized client name for display
              type: string
            description:
              type: string
            due_date:
              format: date-time
              type: string
            estimator:
              description: Optional estimator name or identifier
              type: string
            location:
              type: string
            name:
              type: string
            notes:
              type: string
            project_info:
              type: object
            stage:
              enum:
              - open
              - invited
              - shortlisted
              type: string
            tags:
              items:
                properties:
                  tag_id:
                    type: string
                  tag_name:
                    type: string
                type: object
              type: array
            teams:
              items:
                properties:
                  name:
                    type: string
                  role:
                    type: string
                  user_email:
                    type: string
                  user_id:
                    type: string
                type: object
              type: array
            tender_status:
              enum:
              - in_progress
              - submitted
              - cancelled
              type: string
            type:
              enum:
              - commercial
              - residential
              - infrastructure
              - education
              - healthcare
              - industrial
              - retail
              - other
              type: string
            value:
              type: number
          required:
          - name
          - type
          - bid_status
          - tender_status
          - stage
          type: object
      responses:
        201:
          description: Tender created successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Tender
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/tenders/enums:
    get:
      operationId: v2_getTenderEnums
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              bid_statuses:
                type: array
              stages:
                type: array
              tender_statuses:
                type: array
              tender_types:
                type: array
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Tender Enums
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/tenders/{tenderId}:
    delete:
      operationId: v2_deleteTenderById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: tenderId
        required: true
        type: string
      responses:
        200:
          description: Tender deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Tender not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Tender By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getTenderById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: tenderId
        required: true
        type: string
      - description: Include related project information
        in: query
        name: includeProjectInfo
        required: false
        type: boolean
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  bid_status:
                    type: string
                  client_contact:
                    description: Denormalized client contact for display
                    type: string
                  client_id:
                    description: Reference to workspace client (Firestore document
                      ID)
                    type: string
                  client_name:
                    description: Denormalized client name for display
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  description:
                    type: string
                  due_date:
                    format: date-time
                    type: string
                  estimator:
                    description: Optional estimator name or identifier
                    type: string
                  id:
                    type: string
                  location:
                    type: string
                  name:
                    type: string
                  notes:
                    type: string
                  project_id:
                    type: string
                  stage:
                    type: string
                  tags:
                    type: array
                  teams:
                    type: array
                  tender_status:
                    type: string
                  type:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  value:
                    type: number
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Tender not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Tender By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_updateTenderById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: tenderId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            bid_status:
              enum:
              - will_bid
              - undecided
              type: string
            client_contact:
              description: Denormalized client contact for display
              type: string
            client_id:
              description: Reference to workspace client (Firestore document ID, 32-char
                hex string)
              type: string
            client_name:
              description: Denormalized client name for display
              type: string
            description:
              type: string
            due_date:
              format: date-time
              type: string
            estimator:
              description: Optional estimator name or identifier
              type: string
            location:
              type: string
            name:
              type: string
            notes:
              type: string
            stage:
              enum:
              - open
              - invited
              - shortlisted
              type: string
            tags:
              type: array
            teams:
              type: array
            tender_status:
              enum:
              - in_progress
              - submitted
              - cancelled
              type: string
            type:
              enum:
              - commercial
              - residential
              - infrastructure
              - education
              - healthcare
              - industrial
              - retail
              - other
              type: string
            value:
              type: number
          type: object
      responses:
        200:
          description: Tender updated successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Tender not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Tender By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/user:
    get:
      operationId: v2_getCostUserDetails
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              id_company:
                description: Company id
              is_primary_company:
                description: Bool representing if user is primary company
              username:
                description: Email of user that made request
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Cost User details
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/variation-requests:
    get:
      operationId: v2_getCostVariationRequests
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                amount:
                  description: Amount of the variation request
                cost_variation_req_num:
                  description: Internal identifier for variation request
                created_by_user_email:
                  description: Email of the user who created the claim
                currency:
                  description: Currency of the variation request
                date_created:
                  description: Date the variation request was created
                date_modified:
                  description: Date the variation request was last modified
                description:
                  description: Description for the variation request
                related_cost_claim_num:
                  description: Id of the related cost claim the variation request
                    is raised from
                related_cost_order_num:
                  description: Id of the related cost order the variation request
                    is raised from
                status:
                  description: Status of the variation request
                variation_order_num:
                  description: Internal identifier for the variation order created
                    from approved request
                variation_req_by_company_id:
                  description: Internal identifier for the company raising the variation
                    request
                variation_req_identifer:
                  description: User-friendly identifier for variation request
                variation_req_name:
                  description: Name of the variation request
                variation_req_to_company_id:
                  description: Internal identifier for the company the variation request
                    is raised to
                work_end_date:
                  description: Start of work period for variation request
                work_start_date:
                  description: Start of work period for variation request
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Variation Requests
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_postVariationRequest
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Amount of the variation request
            cost_variation_req_client_id:
              description: User-friendly identifier for variation request
            currency:
              description: Currency of the variation request
            description:
              description: Description for the variation request
            related_cost_claim_num:
              description: Id of the related cost claim the variation request is raised
                from
            related_cost_order_num:
              description: Id of the related cost order the variation request is raised
                from
            status:
              description: Status of the variation request
            variation_req_name:
              description: Name of the variation request
            variation_req_to_company_id:
              description: Internal identifier for the company the variation request
                is raised to
            work_end_date:
              description: Start of work period for variation request
            work_start_date:
              description: Start of work period for variation request
          required:
          - variation_req_name
          - amount
          - variation_req_to_company_id
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              amount:
                description: Amount of the variation request
              cost_variation_req_num:
                description: Internal identifier for variation request
              created_by_user_email:
                description: Email of the user who created the claim
              currency:
                description: Currency of the variation request
              date_created:
                description: Date the variation request was created
              date_modified:
                description: Date the variation request was last modified
              description:
                description: Description for the variation request
              related_cost_claim_num:
                description: Id of the related cost claim the variation request is
                  raised from
              related_cost_order_num:
                description: Id of the related cost order the variation request is
                  raised from
              status:
                description: Status of the variation request
              variation_order_num:
                description: Internal identifier for the variation order created from
                  approved request
              variation_req_by_company_id:
                description: Internal identifier for the company raising the variation
                  request
              variation_req_identifer:
                description: User-friendly identifier for variation request
              variation_req_name:
                description: Name of the variation request
              variation_req_to_company_id:
                description: Internal identifier for the company the variation request
                  is raised to
              work_end_date:
                description: Start of work period for variation request
              work_start_date:
                description: Start of work period for variation request
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Variation Request
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/cost/variation-requests/{costVariationReqId}:
    get:
      operationId: v2_getCostVariationRequestById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costVariationReqId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              amount:
                description: Amount of the variation request
              cost_variation_req_num:
                description: Internal identifier for variation request
              created_by_user_email:
                description: Email of the user who created the claim
              currency:
                description: Currency of the variation request
              date_created:
                description: Date the variation request was created
              date_modified:
                description: Date the variation request was last modified
              description:
                description: Description for the variation request
              related_cost_claim_num:
                description: Id of the related cost claim the variation request is
                  raised from
              related_cost_order_num:
                description: Id of the related cost order the variation request is
                  raised from
              status:
                description: Status of the variation request
              variation_order_num:
                description: Internal identifier for the variation order created from
                  approved request
              variation_req_by_company_id:
                description: Internal identifier for the company raising the variation
                  request
              variation_req_identifer:
                description: User-friendly identifier for variation request
              variation_req_name:
                description: Name of the variation request
              variation_req_to_company_id:
                description: Internal identifier for the company the variation request
                  is raised to
              work_end_date:
                description: Start of work period for variation request
              work_start_date:
                description: Start of work period for variation request
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Invoice By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_patchCostVariationReqById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: costVariationReqId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            amount:
              description: Amount of the variation request
            currency:
              description: Currency of the variation request
            description:
              description: Description for the variation request
            status:
              description: Status of the variation request
            variation_order_num:
              description: Internal identifier for the variation order created from
                approved request
            variation_req_name:
              description: Name of the variation request
            work_end_date:
              description: Start of work period for variation request
            work_start_date:
              description: Start of work period for variation request
          type: object
      responses:
        201:
          description: Object successfully edited
          schema:
            properties:
              amount:
                description: Amount of the variation request
              cost_variation_req_num:
                description: Internal identifier for variation request
              created_by_user_email:
                description: Email of the user who created the claim
              currency:
                description: Currency of the variation request
              date_created:
                description: Date the variation request was created
              date_modified:
                description: Date the variation request was last modified
              description:
                description: Description for the variation request
              related_cost_claim_num:
                description: Id of the related cost claim the variation request is
                  raised from
              related_cost_order_num:
                description: Id of the related cost order the variation request is
                  raised from
              status:
                description: Status of the variation request
              variation_order_num:
                description: Internal identifier for the variation order created from
                  approved request
              variation_req_by_company_id:
                description: Internal identifier for the company raising the variation
                  request
              variation_req_identifer:
                description: User-friendly identifier for variation request
              variation_req_name:
                description: Name of the variation request
              variation_req_to_company_id:
                description: Internal identifier for the company the variation request
                  is raised to
              work_end_date:
                description: Start of work period for variation request
              work_start_date:
                description: Start of work period for variation request
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Variation Request By Id
      tags:
      - Cost
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/data:
    get:
      operationId: v2_getSupportedUploads
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: List of supported upload formats
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get supported upload formats
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/data/any:
    post:
      operationId: v2_uploadAnyData
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: formData
        name: file
        required: true
        type: string
      - in: header
        name: X-Horizon-Product
        required: false
        type: string
      responses:
        200:
          description: File uploaded successfully
        400:
          description: Bad request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Upload any data file
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/data/{data_classification}:
    get:
      operationId: v2_getClassificationFormats
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: data_classification
        required: true
        type: string
      responses:
        200:
          description: List of supported formats for the classification
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get supported formats for data classification
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/data/{data_classification}/{data_source}/{export_type}/{export_version}:
    post:
      operationId: v2_uploadClassifiedData
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: data_classification
        required: true
        type: string
      - in: path
        name: data_source
        required: true
        type: string
      - in: path
        name: export_type
        required: true
        type: string
      - in: path
        name: export_version
        required: true
        type: string
      - in: formData
        name: file
        required: true
        type: string
      - in: header
        name: X-Horizon-Product
        required: false
        type: string
      responses:
        200:
          description: File uploaded and processed successfully
        400:
          description: Bad request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Upload classified data file
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/download/{ds_data_type}:
    get:
      operationId: v2_getProjectDownload
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: ds_data_type
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Download a file from the project
      tags:
      - Download
  /v2/workspaces/{workspaceId}/projects/{projectId}/files:
    get:
      operationId: v2_v2_getFiles
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Filter by file category
        in: query
        name: category
        required: false
        type: string
      - description: Filter by file type
        in: query
        name: file_type
        required: false
        type: string
      - description: Filter by related document ID
        in: query
        name: related_document_id
        required: false
        type: string
      - description: Include all versions for each file in response
        in: query
        name: include_versions
        required: false
        type: boolean
      - description: Page number for pagination
        in: query
        name: page
        required: false
        type: integer
      - description: Number of items per page
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successfully returns files
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get list of files
      tags:
      - Get Data
    post:
      operationId: v2_v2_postFiles
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Action type (signed-urls, process)
        in: query
        name: action
        required: false
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            files:
              description: Array of file objects
              items:
                properties:
                  category:
                    type: string
                  file_size_bytes:
                    type: integer
                  filename:
                    type: string
                  filetype:
                    type: string
                  related_document_id:
                    type: string
                type: object
              type: array
          type: object
      responses:
        200:
          description: Successfully returns signed URLs or processes files
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get signed URLs for file upload or create file metadata
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/files/{fileId}:
    delete:
      operationId: v2_v2_deleteFile
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: fileId
        required: true
        type: string
      responses:
        200:
          description: Successfully deleted file
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete file
      tags:
      - Upload Data
    get:
      operationId: v2_v2_getFile
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: fileId
        required: true
        type: string
      responses:
        200:
          description: Successfully returns file details
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get single file details
      tags:
      - Get Data
    patch:
      operationId: v2_v2_patchFile
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: fileId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            category:
              type: string
            description:
              type: string
            display_name:
              type: string
            related_document_id:
              type: string
          type: object
      responses:
        200:
          description: Successfully updated file
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update file metadata
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/files/{fileId}/navis/{collectorKey}:
    post:
      consumes:
      - application/json
      operationId: v2_navisfileupload
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: The file id
        in: path
        name: fileId
        required: true
        type: string
      - description: The collector key
        in: path
        name: collectorKey
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            bucket_name:
              description: The name of the cloud storage bucket
            crawlKey:
              description: The crawl key
            end_time:
              description: 'Datetime value of end of navis extraction - expected format:
                %d/%m/%Y %I:%M:%S %p'
            start_time:
              description: 'Datetime value of start of navis extraction - expected
                format: %d/%m/%Y %I:%M:%S %p'
          required:
          - start_time
          - end_time
          - bucket_name
          - crawlKey
          type: object
      responses:
        200:
          description: Successfully uploaded navis data
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Upload navis data to Deep Space at the file level
      tags:
      - Navis Integration
  /v2/workspaces/{workspaceId}/projects/{projectId}/files/{fileId}/new-version:
    post:
      operationId: v2_v2_postFileNewVersionProjectLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: fileId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            change_description:
              description: Description of changes made
              type: string
            file_size_bytes:
              description: Size of the file in bytes
              type: integer
            file_url:
              description: URL of the uploaded file
              type: string
            new_filename:
              description: Filename for the new version
              type: string
          type: object
      responses:
        200:
          description: Successfully uploaded new version
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Upload new version of project-level file
      tags:
      - Upload Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/files/{fileId}/versions:
    get:
      operationId: v2_v2_getFileVersionsProjectLevel
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: fileId
        required: true
        type: string
      - description: Page number for pagination
        in: query
        name: page
        required: false
        type: integer
      - description: Number of items per page
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successfully returns file versions
        401:
          description: Unauthorized
        404:
          description: File not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get project-level file version history
      tags:
      - Get Data
  /v2/workspaces/{workspaceId}/projects/{projectId}/hz-approvals:
    get:
      description: 'List approval instances for a workspace/project with optional
        filtering.

        Results are ordered by created_at descending (newest first).

        '
      operationId: v2_v2_listHzApprovals
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: string
      - description: Filter by entity type (e.g., "PO", "SWMS")
        in: query
        name: entity_type
        type: string
      - description: Filter by entity ID
        in: query
        name: entity_id
        type: string
      - description: Filter by approval status
        enum:
        - IN_REVIEW
        - APPROVED
        - REJECTED
        - CANCELLED
        in: query
        name: status
        type: string
      - default: 1
        description: Page number (1-based)
        in: query
        name: page
        type: integer
      - default: 50
        description: Items per page
        in: query
        maximum: 100
        name: limit
        type: integer
      responses:
        200:
          description: Approval instances retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    approval_id:
                      description: Unique identifier for the approval instance
                      type: string
                    completed_at:
                      description: Unix timestamp in milliseconds (null if not completed)
                      type: integer
                    context_snapshot:
                      description: Frozen context data (immutable after creation)
                      type: object
                    created_at:
                      description: Unix timestamp in milliseconds
                      type: integer
                    created_by_user_email:
                      type: string
                    created_by_user_id:
                      type: string
                    current_step_index:
                      description: Index of the current active step
                      type: integer
                    entity_id:
                      description: ID of the entity being approved
                      type: string
                    entity_type:
                      description: Type of entity being approved
                      type: string
                    project_id:
                      type: string
                    status:
                      enum:
                      - IN_REVIEW
                      - APPROVED
                      - REJECTED
                      - CANCELLED
                      type: string
                    updated_at:
                      description: Unix timestamp in milliseconds
                      type: integer
                    workflow_snapshot:
                      description: Frozen workflow definition
                      type: object
                    workspace_id:
                      type: string
                  type: object
                type: array
              message:
                type: string
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  total_count:
                    type: integer
                type: object
            type: object
        400:
          description: Bad request
        401:
          description: Unauthorized
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List approval instances
      tags:
      - HzApproval
    post:
      description: 'Create a new approval instance with workflow steps.

        The first step is automatically set to IN_REVIEW status.

        '
      operationId: v2_v2_createHzApproval
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            context:
              description: Context data snapshot (frozen at creation, immutable)
              example:
                amount: 42000
                currency: AUD
                department_id: Operations
              type: object
            entity_id:
              description: ID of the entity being approved
              example: PO-2023-090
              type: string
            entity_type:
              description: Type of entity being approved (e.g., "PO", "SWMS")
              example: PO
              type: string
            workflow:
              description: Workflow definition (frozen at creation)
              properties:
                name:
                  example: Standard Purchase Approval
                  type: string
                steps:
                  items:
                    properties:
                      candidates_snapshot:
                        default:
                          type: manual
                          users: []
                        type: object
                      decision_rule:
                        default:
                          mode: ANY
                        type: object
                      name:
                        example: Department Manager Approval
                        type: string
                      required_role_id:
                        description: Role ID required to approve/reject this step
                        example: dcbc79c2-0118-4989-ad72-1727d5998f20
                        type: string
                    required:
                    - name
                    type: object
                  minItems: 1
                  type: array
                version:
                  example: 1
                  type: integer
              required:
              - steps
              type: object
          required:
          - entity_type
          - entity_id
          - workflow
          type: object
      responses:
        201:
          description: Approval instance created successfully
          schema:
            properties:
              data:
                properties:
                  approval_id:
                    description: Unique identifier for the approval instance
                    type: string
                  completed_at:
                    description: Unix timestamp in milliseconds (null if not completed)
                    type: integer
                  context_snapshot:
                    description: Frozen context data (immutable after creation)
                    type: object
                  created_at:
                    description: Unix timestamp in milliseconds
                    type: integer
                  created_by_user_email:
                    type: string
                  created_by_user_id:
                    type: string
                  current_step_index:
                    description: Index of the current active step
                    type: integer
                  decisions:
                    items:
                      properties:
                        action:
                          enum:
                          - APPROVE
                          - REJECT
                          - COMMENT
                          type: string
                        actor_user_email:
                          type: string
                        actor_user_id:
                          type: string
                        attachments:
                          items:
                            type: object
                          type: array
                        comment:
                          type: string
                        created_at:
                          description: Unix timestamp in milliseconds
                          type: integer
                        decision_id:
                          type: string
                        step_index:
                          type: integer
                      type: object
                    type: array
                  entity_id:
                    description: ID of the entity being approved
                    type: string
                  entity_type:
                    description: Type of entity being approved
                    type: string
                  project_id:
                    type: string
                  status:
                    enum:
                    - IN_REVIEW
                    - APPROVED
                    - REJECTED
                    - CANCELLED
                    type: string
                  steps:
                    items:
                      properties:
                        candidates_snapshot:
                          description: Snapshot of eligible approvers
                          type: object
                        closed_at:
                          description: Unix timestamp in milliseconds (null if not
                            closed)
                          type: integer
                        decision_rule:
                          description: Rule for approving this step (MVP only supports
                            mode=ANY)
                          type: object
                        name:
                          type: string
                        opened_at:
                          description: Unix timestamp in milliseconds
                          type: integer
                        required_role_id:
                          description: Role ID required to approve/reject this step
                            (null if any role can act)
                          type: string
                        status:
                          enum:
                          - PENDING
                          - IN_REVIEW
                          - APPROVED
                          - REJECTED
                          type: string
                        step_id:
                          type: string
                        step_index:
                          type: integer
                      type: object
                    type: array
                  updated_at:
                    description: Unix timestamp in milliseconds
                    type: integer
                  workflow_snapshot:
                    description: Frozen workflow definition
                    type: object
                  workspace_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - validation error
        401:
          description: Unauthorized
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create approval instance
      tags:
      - HzApproval
  /v2/workspaces/{workspaceId}/projects/{projectId}/hz-approvals/{approvalId}:
    get:
      description: 'Get approval instance with steps (ordered by step_index)

        and decisions (ordered by created_at).

        '
      operationId: v2_v2_getHzApproval
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: string
      - description: Approval instance ID
        in: path
        name: approvalId
        required: true
        type: string
      responses:
        200:
          description: Approval instance retrieved successfully
          schema:
            properties:
              data:
                properties:
                  approval_id:
                    description: Unique identifier for the approval instance
                    type: string
                  completed_at:
                    description: Unix timestamp in milliseconds (null if not completed)
                    type: integer
                  context_snapshot:
                    description: Frozen context data (immutable after creation)
                    type: object
                  created_at:
                    description: Unix timestamp in milliseconds
                    type: integer
                  created_by_user_email:
                    type: string
                  created_by_user_id:
                    type: string
                  current_step_index:
                    description: Index of the current active step
                    type: integer
                  decisions:
                    items:
                      properties:
                        action:
                          enum:
                          - APPROVE
                          - REJECT
                          - COMMENT
                          type: string
                        actor_user_email:
                          type: string
                        actor_user_id:
                          type: string
                        attachments:
                          items:
                            type: object
                          type: array
                        comment:
                          type: string
                        created_at:
                          description: Unix timestamp in milliseconds
                          type: integer
                        decision_id:
                          type: string
                        step_index:
                          type: integer
                      type: object
                    type: array
                  entity_id:
                    description: ID of the entity being approved
                    type: string
                  entity_type:
                    description: Type of entity being approved
                    type: string
                  project_id:
                    type: string
                  status:
                    enum:
                    - IN_REVIEW
                    - APPROVED
                    - REJECTED
                    - CANCELLED
                    type: string
                  steps:
                    items:
                      properties:
                        candidates_snapshot:
                          description: Snapshot of eligible approvers
                          type: object
                        closed_at:
                          description: Unix timestamp in milliseconds (null if not
                            closed)
                          type: integer
                        decision_rule:
                          description: Rule for approving this step (MVP only supports
                            mode=ANY)
                          type: object
                        name:
                          type: string
                        opened_at:
                          description: Unix timestamp in milliseconds
                          type: integer
                        required_role_id:
                          description: Role ID required to approve/reject this step
                            (null if any role can act)
                          type: string
                        status:
                          enum:
                          - PENDING
                          - IN_REVIEW
                          - APPROVED
                          - REJECTED
                          type: string
                        step_id:
                          type: string
                        step_index:
                          type: integer
                      type: object
                    type: array
                  updated_at:
                    description: Unix timestamp in milliseconds
                    type: integer
                  workflow_snapshot:
                    description: Frozen workflow definition
                    type: object
                  workspace_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Approval instance not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get approval instance details
      tags:
      - HzApproval
  /v2/workspaces/{workspaceId}/projects/{projectId}/hz-approvals/{approvalId}/actions:
    post:
      description: 'Submit an action (APPROVE, REJECT, or COMMENT) on the current
        step.


        State machine rules:

        - COMMENT: Records the decision without changing state

        - APPROVE: Marks current step as APPROVED and advances to next step (or completes
        if last step)

        - REJECT: Marks current step as REJECTED and completes with REJECTED status


        All actions are recorded in the append-only decisions audit log.

        '
      operationId: v2_v2_submitHzApprovalAction
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: string
      - description: Approval instance ID
        in: path
        name: approvalId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            action:
              description: The action to perform
              enum:
              - APPROVE
              - REJECT
              - COMMENT
              type: string
            attachments:
              default: []
              description: Optional attachments (reserved for future use)
              items:
                type: object
              type: array
            comment:
              description: Optional comment explaining the action
              type: string
            role_id:
              description: 'User''s role ID for authorization. Required for APPROVE/REJECT
                actions

                if the current step has a required_role_id configured.

                '
              type: string
          required:
          - action
          type: object
      responses:
        200:
          description: Action recorded successfully
          schema:
            properties:
              data:
                properties:
                  affected_step_id:
                    type: string
                  approval_instance:
                    properties:
                      approval_id:
                        description: Unique identifier for the approval instance
                        type: string
                      completed_at:
                        description: Unix timestamp in milliseconds (null if not completed)
                        type: integer
                      context_snapshot:
                        description: Frozen context data (immutable after creation)
                        type: object
                      created_at:
                        description: Unix timestamp in milliseconds
                        type: integer
                      created_by_user_email:
                        type: string
                      created_by_user_id:
                        type: string
                      current_step_index:
                        description: Index of the current active step
                        type: integer
                      entity_id:
                        description: ID of the entity being approved
                        type: string
                      entity_type:
                        description: Type of entity being approved
                        type: string
                      project_id:
                        type: string
                      status:
                        enum:
                        - IN_REVIEW
                        - APPROVED
                        - REJECTED
                        - CANCELLED
                        type: string
                      updated_at:
                        description: Unix timestamp in milliseconds
                        type: integer
                      workflow_snapshot:
                        description: Frozen workflow definition
                        type: object
                      workspace_id:
                        type: string
                    type: object
                  decision:
                    properties:
                      action:
                        enum:
                        - APPROVE
                        - REJECT
                        - COMMENT
                        type: string
                      actor_user_email:
                        type: string
                      actor_user_id:
                        type: string
                      attachments:
                        items:
                          type: object
                        type: array
                      comment:
                        type: string
                      created_at:
                        description: Unix timestamp in milliseconds
                        type: integer
                      decision_id:
                        type: string
                      step_index:
                        type: integer
                    type: object
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - invalid action, state, or role mismatch
        401:
          description: Unauthorized
        404:
          description: Approval instance not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Submit approval action
      tags:
      - HzApproval
  /v2/workspaces/{workspaceId}/projects/{projectId}/hz-msprojectupload:
    delete:
      description: Delete all scheduling tasks, WBS items, resources, constraints,
        and dependencies for a project
      operationId: v2_cleanAllProjectData
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      responses:
        200:
          description: Successfully cleaned all project data
        207:
          description: Partially completed - some operations failed
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Clean all project data
      tags:
      - MS Project Upload
    post:
      consumes:
      - multipart/form-data
      description: Upload and process MS Project XML files for Firestore scheduling
        data integration
      operationId: v2_uploadMSProjectXML
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: MS Project XML file
        format: binary
        in: formData
        name: file
        required: true
        type: string
      - default: true
        description: Whether to create WBS structure
        in: formData
        name: create_wbs
        required: false
        type: boolean
      - default: false
        description: Whether to overwrite existing items
        in: formData
        name: overwrite_existing
        required: false
        type: boolean
      - description: Horizon product identifier
        in: header
        name: X-Horizon-Product
        required: false
        type: string
      produces:
      - application/json
      responses:
        200:
          description: MS Project file processed successfully
          schema:
            properties:
              dependencies_created:
                description: Number of dependencies created in Firestore
                type: integer
              message:
                type: string
              processing_details:
                properties:
                  create_wbs:
                    type: boolean
                  file_type:
                    type: string
                  overwrite_existing:
                    type: boolean
                  total_items_created:
                    type: integer
                type: object
              resources_created:
                description: Number of resources created in Firestore
                type: integer
              resources_parsed:
                description: Number of resources parsed from XML
                type: integer
              success:
                type: boolean
              task_mapping:
                description: Mapping of MS Project task UIDs to Firestore action IDs
                type: object
              tasks_created:
                description: Number of actions created in Firestore
                type: integer
              tasks_parsed:
                description: Number of tasks parsed from XML
                type: integer
              warnings:
                description: Processing warnings if any
                items:
                  type: string
                type: array
              wbs_items_created:
                description: Number of WBS items created in Firestore
                type: integer
            type: object
        400:
          description: Bad request - Invalid file or parameters
          schema:
            properties:
              error:
                description: Error message
                type: string
              step:
                description: Processing step where error occurred
                type: string
              success:
                example: false
                type: boolean
            type: object
        401:
          description: Unauthorized - Invalid or missing authentication
        413:
          description: Payload too large - File size exceeds limits
        415:
          description: Unsupported media type - File must be XML format
        422:
          description: Unprocessable entity - Valid file but processing failed
          schema:
            properties:
              conversion_summary:
                description: Summary of conversion results if available
                type: object
              error:
                description: Processing error details
                type: string
              parse_summary:
                description: Summary of parsed data if available
                type: object
              step:
                enum:
                - xml_parsing
                - firestore_conversion
                - firestore_write
                type: string
              success:
                example: false
                type: boolean
            type: object
        500:
          description: Internal server error
          schema:
            properties:
              error:
                description: Server error message
                type: string
              success:
                example: false
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Upload MS Project XML file
      tags:
      - MS Project Upload
  /v2/workspaces/{workspaceId}/projects/{projectId}/hz-weather/day:
    get:
      description: 'Returns observed weather data for a project on the specified date.

        Reads from Firestore: project_weather/{projectId}/weatherDays/{date}

        '
      operationId: v2_v2_getHzWeatherDay
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Numeric project ID
        in: path
        name: projectId
        required: true
        type: integer
      - description: Date in YYYY-MM-DD format
        in: query
        name: date
        required: true
        type: string
      responses:
        200:
          description: Weather data retrieved successfully
          schema:
            properties:
              data:
                properties:
                  capturedAt:
                    description: ISO timestamp of when data was captured
                    type: string
                  date:
                    description: Date in YYYY-MM-DD format
                    type: string
                  id:
                    description: Document ID (date)
                    type: string
                  lat:
                    type: number
                  lng:
                    type: number
                  observed:
                    properties:
                      conditions:
                        type: string
                      humidityAvg:
                        type: number
                      rainMm:
                        type: number
                      tempMax:
                        type: number
                      tempMin:
                        type: number
                      windAvgKph:
                        type: number
                      windMaxKph:
                        type: number
                    type: object
                  provider:
                    description: Weather data provider
                    type: string
                  timezone:
                    description: Timezone (fixed to Australia/Sydney)
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - missing or invalid date
        401:
          description: Unauthorized
        404:
          description: Weather data not found for date
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get observed weather for a specific date
      tags:
      - HzWeather
  /v2/workspaces/{workspaceId}/projects/{projectId}/hz-weather/forecast:
    get:
      description: 'Returns current weather forecast for a project (next 5-7 days).

        Reads from Firestore: project_weather/{projectId}/weatherForecast/current

        '
      operationId: v2_v2_getHzWeatherForecast
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Numeric project ID
        in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Forecast data retrieved successfully
          schema:
            properties:
              data:
                properties:
                  capturedAt:
                    description: ISO timestamp of when data was captured
                    type: string
                  days:
                    items:
                      properties:
                        conditions:
                          type: string
                        date:
                          type: string
                        humidityAvg:
                          type: number
                        icon:
                          type: string
                        precipProb:
                          type: number
                        rainMm:
                          type: number
                        tempMax:
                          type: number
                        tempMin:
                          type: number
                        windAvgKph:
                          type: number
                        windMaxKph:
                          type: number
                      type: object
                    type: array
                  id:
                    description: Document ID (always "current")
                    type: string
                  lat:
                    type: number
                  lng:
                    type: number
                  provider:
                    description: Weather data provider
                    type: string
                  timezone:
                    description: Timezone (fixed to Australia/Sydney)
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Forecast data not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get weather forecast
      tags:
      - HzWeather
  /v2/workspaces/{workspaceId}/projects/{projectId}/hz-weather/refresh:
    post:
      description: 'Triggers weather data capture from VisualCrossing API for the
        specified date

        (or today in Australia/Sydney if omitted) and updates Firestore.


        Project lat/lng is automatically fetched from MySQL projects_def table.


        Upserts to:

        - project_weather/{projectId}/weatherDays/{date}

        - project_weather/{projectId}/weatherForecast/current

        '
      operationId: v2_v2_refreshHzWeather
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Numeric project ID
        in: path
        name: projectId
        required: true
        type: integer
      - description: Date in YYYY-MM-DD format (defaults to today in Australia/Sydney)
        in: query
        name: date
        required: false
        type: string
      responses:
        200:
          description: Weather data refreshed successfully
          schema:
            properties:
              data:
                properties:
                  day:
                    description: Observed weather for the specified date
                    type: object
                  forecast:
                    description: Forecast data (next 5-7 days)
                    type: object
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - invalid date format or project lat/lng not configured
        401:
          description: Unauthorized
        500:
          description: Internal server error
        502:
          description: Weather provider error
      security:
      - JWT_v2: []
      summary: Refresh weather data
      tags:
      - HzWeather
  /v2/workspaces/{workspaceId}/projects/{projectId}/hz-workflows:
    get:
      description: 'List workflow templates for a workspace with optional filtering.

        Results are ordered by created_at descending (newest first).

        '
      operationId: v2_v2_listHzWorkflows
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: string
      - description: Filter by entity type (e.g., "PO", "SWMS")
        in: query
        name: entity_type
        type: string
      - description: Filter by active status (true/false)
        in: query
        name: is_active
        type: boolean
      - default: 1
        description: Page number (1-based)
        in: query
        name: page
        type: integer
      - default: 50
        description: Items per page
        in: query
        maximum: 100
        name: limit
        type: integer
      responses:
        200:
          description: Workflows retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    created_at:
                      description: Unix timestamp in milliseconds
                      type: integer
                    created_by_user_email:
                      description: Email of creator
                      type: string
                    created_by_user_id:
                      description: Kinde user ID of creator
                      type: string
                    description:
                      description: Description of the workflow
                      type: string
                    entity_type:
                      description: Entity type this workflow applies to (e.g., "PO",
                        "SWMS")
                      type: string
                    is_active:
                      description: Whether the workflow is active and can be used
                      type: boolean
                    name:
                      description: Workflow template name
                      type: string
                    steps:
                      description: List of approval steps
                      items:
                        properties:
                          candidates_snapshot:
                            description: Definition of eligible approvers
                            properties:
                              type:
                                enum:
                                - manual
                                - role
                                - dynamic
                                type: string
                              users:
                                items:
                                  type: string
                                type: array
                            type: object
                          decision_rule:
                            description: Rule for approving this step
                            properties:
                              mode:
                                description: ANY = one approval, ALL = all must approve
                                enum:
                                - ANY
                                - ALL
                                type: string
                            type: object
                          name:
                            description: Step name
                            type: string
                        type: object
                      type: array
                    thresholds:
                      description: Reserved for future use - threshold conditions
                      type: object
                    updated_at:
                      description: Unix timestamp in milliseconds
                      type: integer
                    version:
                      description: Version number (increments on each update)
                      type: integer
                    workflow_id:
                      description: Unique identifier for the workflow template
                      type: string
                    workspace_id:
                      description: Workspace this workflow belongs to
                      type: string
                  type: object
                type: array
              message:
                type: string
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  total_count:
                    type: integer
                type: object
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List workflow templates
      tags:
      - HzWorkflow
    post:
      description: 'Create a new workflow template. Workflows define the approval
        steps

        for a specific entity type. When creating an approval instance,

        the system automatically looks up the matching workflow.

        '
      operationId: v2_v2_createHzWorkflow
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            description:
              description: Optional description of the workflow
              example: Workflow for purchase order approvals
              type: string
            entity_type:
              description: Entity type this workflow applies to (e.g., "PO", "SWMS")
              example: PO
              type: string
            name:
              description: Workflow template name
              example: Standard PO Approval
              type: string
            steps:
              description: List of approval steps
              items:
                properties:
                  candidates_snapshot:
                    default:
                      type: manual
                      users: []
                    description: Definition of eligible approvers
                    type: object
                  decision_rule:
                    default:
                      mode: ANY
                    description: Rule for approving this step
                    type: object
                  name:
                    example: Department Manager Approval
                    type: string
                required:
                - name
                type: object
              minItems: 1
              type: array
            thresholds:
              default: {}
              description: Reserved for future use - threshold conditions
              type: object
          required:
          - name
          - entity_type
          - steps
          type: object
      responses:
        201:
          description: Workflow created successfully
          schema:
            properties:
              data:
                properties:
                  created_at:
                    description: Unix timestamp in milliseconds
                    type: integer
                  created_by_user_email:
                    description: Email of creator
                    type: string
                  created_by_user_id:
                    description: Kinde user ID of creator
                    type: string
                  description:
                    description: Description of the workflow
                    type: string
                  entity_type:
                    description: Entity type this workflow applies to (e.g., "PO",
                      "SWMS")
                    type: string
                  is_active:
                    description: Whether the workflow is active and can be used
                    type: boolean
                  name:
                    description: Workflow template name
                    type: string
                  steps:
                    description: List of approval steps
                    items:
                      properties:
                        candidates_snapshot:
                          description: Definition of eligible approvers
                          properties:
                            type:
                              enum:
                              - manual
                              - role
                              - dynamic
                              type: string
                            users:
                              items:
                                type: string
                              type: array
                          type: object
                        decision_rule:
                          description: Rule for approving this step
                          properties:
                            mode:
                              description: ANY = one approval, ALL = all must approve
                              enum:
                              - ANY
                              - ALL
                              type: string
                          type: object
                        name:
                          description: Step name
                          type: string
                      type: object
                    type: array
                  thresholds:
                    description: Reserved for future use - threshold conditions
                    type: object
                  updated_at:
                    description: Unix timestamp in milliseconds
                    type: integer
                  version:
                    description: Version number (increments on each update)
                    type: integer
                  workflow_id:
                    description: Unique identifier for the workflow template
                    type: string
                  workspace_id:
                    description: Workspace this workflow belongs to
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - validation error
        401:
          description: Unauthorized
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create workflow template
      tags:
      - HzWorkflow
  /v2/workspaces/{workspaceId}/projects/{projectId}/hz-workflows/{workflowId}:
    delete:
      description: 'Delete a workflow template. By default, performs a soft delete

        (sets is_active=false). Use ?hard=true for permanent deletion.

        '
      operationId: v2_v2_deleteHzWorkflow
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: string
      - description: Workflow template ID
        in: path
        name: workflowId
        required: true
        type: string
      - default: false
        description: If true, permanently delete. Otherwise soft delete (set is_active=false)
        in: query
        name: hard
        type: boolean
      responses:
        200:
          description: Workflow deleted/deactivated successfully
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Workflow not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete workflow template
      tags:
      - HzWorkflow
    get:
      description: Get workflow template details by ID.
      operationId: v2_v2_getHzWorkflow
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: string
      - description: Workflow template ID
        in: path
        name: workflowId
        required: true
        type: string
      responses:
        200:
          description: Workflow retrieved successfully
          schema:
            properties:
              data:
                properties:
                  created_at:
                    description: Unix timestamp in milliseconds
                    type: integer
                  created_by_user_email:
                    description: Email of creator
                    type: string
                  created_by_user_id:
                    description: Kinde user ID of creator
                    type: string
                  description:
                    description: Description of the workflow
                    type: string
                  entity_type:
                    description: Entity type this workflow applies to (e.g., "PO",
                      "SWMS")
                    type: string
                  is_active:
                    description: Whether the workflow is active and can be used
                    type: boolean
                  name:
                    description: Workflow template name
                    type: string
                  steps:
                    description: List of approval steps
                    items:
                      properties:
                        candidates_snapshot:
                          description: Definition of eligible approvers
                          properties:
                            type:
                              enum:
                              - manual
                              - role
                              - dynamic
                              type: string
                            users:
                              items:
                                type: string
                              type: array
                          type: object
                        decision_rule:
                          description: Rule for approving this step
                          properties:
                            mode:
                              description: ANY = one approval, ALL = all must approve
                              enum:
                              - ANY
                              - ALL
                              type: string
                          type: object
                        name:
                          description: Step name
                          type: string
                      type: object
                    type: array
                  thresholds:
                    description: Reserved for future use - threshold conditions
                    type: object
                  updated_at:
                    description: Unix timestamp in milliseconds
                    type: integer
                  version:
                    description: Version number (increments on each update)
                    type: integer
                  workflow_id:
                    description: Unique identifier for the workflow template
                    type: string
                  workspace_id:
                    description: Workspace this workflow belongs to
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Workflow not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get workflow template
      tags:
      - HzWorkflow
    put:
      description: 'Update a workflow template. Note that updating a workflow does
        NOT

        affect existing approval instances since they store a snapshot of

        the workflow at creation time.

        '
      operationId: v2_v2_updateHzWorkflow
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: string
      - description: Workflow template ID
        in: path
        name: workflowId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            description:
              description: Description of the workflow
              type: string
            is_active:
              description: Whether the workflow is active
              type: boolean
            name:
              description: Workflow template name
              type: string
            steps:
              description: List of approval steps
              items:
                properties:
                  candidates_snapshot:
                    type: object
                  decision_rule:
                    type: object
                  name:
                    type: string
                required:
                - name
                type: object
              minItems: 1
              type: array
            thresholds:
              description: Reserved for future use
              type: object
          type: object
      responses:
        200:
          description: Workflow updated successfully
          schema:
            properties:
              data:
                properties:
                  created_at:
                    description: Unix timestamp in milliseconds
                    type: integer
                  created_by_user_email:
                    description: Email of creator
                    type: string
                  created_by_user_id:
                    description: Kinde user ID of creator
                    type: string
                  description:
                    description: Description of the workflow
                    type: string
                  entity_type:
                    description: Entity type this workflow applies to (e.g., "PO",
                      "SWMS")
                    type: string
                  is_active:
                    description: Whether the workflow is active and can be used
                    type: boolean
                  name:
                    description: Workflow template name
                    type: string
                  steps:
                    description: List of approval steps
                    items:
                      properties:
                        candidates_snapshot:
                          description: Definition of eligible approvers
                          properties:
                            type:
                              enum:
                              - manual
                              - role
                              - dynamic
                              type: string
                            users:
                              items:
                                type: string
                              type: array
                          type: object
                        decision_rule:
                          description: Rule for approving this step
                          properties:
                            mode:
                              description: ANY = one approval, ALL = all must approve
                              enum:
                              - ANY
                              - ALL
                              type: string
                          type: object
                        name:
                          description: Step name
                          type: string
                      type: object
                    type: array
                  thresholds:
                    description: Reserved for future use - threshold conditions
                    type: object
                  updated_at:
                    description: Unix timestamp in milliseconds
                    type: integer
                  version:
                    description: Version number (increments on each update)
                    type: integer
                  workflow_id:
                    description: Unique identifier for the workflow template
                    type: string
                  workspace_id:
                    description: Workspace this workflow belongs to
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - validation error
        401:
          description: Unauthorized
        404:
          description: Workflow not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update workflow template
      tags:
      - HzWorkflow
  /v2/workspaces/{workspaceId}/projects/{projectId}/implementation:
    get:
      operationId: v2_getProjectImplementationChecklist
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            items:
              properties:
                check_name:
                  description: Name of implementation check
                check_result:
                  description: Yes/No result if check passed
                check_workload:
                  description: Implementation Workload (eg. BIM, Material Tracking...)
                first_metric:
                  description: Text describing a metric related to the check (eg.
                    There were 10 Required Parameters found)
                help_link:
                  description: Link to Deep Space knowledgebase for the check
                help_text:
                  description: Help text for the check
                scope:
                  description: Implementation Scope (eg. Project)
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Project Implementation Checklist
      tags:
      - implementation
  /v2/workspaces/{workspaceId}/projects/{projectId}/integrations:
    get:
      operationId: v2_getProjectIntegrations
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get integrations on a project
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/integrations/{integrationId}:
    get:
      operationId: v2_getProjectIntegrationFields
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get mapping fields for an integration
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
    patch:
      operationId: v2_patchProjectIntegration
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: integrationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            mappingFieldValue1:
              description: The first mapping field value
              type: string
            mappingFieldValue2:
              description: The first mapping field value
              type: string
          required:
          - mappingFieldValue1
          - mappingFieldValue2
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update an integration configuration on a project
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
    post:
      operationId: v2_postProjectIntegration
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: integrationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          description: json object containing configuration values, differs depending
            on integration
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Configure an integration on a project
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/integrations/{integrationId}/advanced-config:
    delete:
      operationId: v2_deleteProjectIntegrationAdvancedConfig
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Integration successfully disconnected and configuration deleted
        401:
          description: Unauthorized
        404:
          description: Advanced configuration not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete advanced configuration and disconnect integration on a project
      tags:
      - External Integrations
    get:
      operationId: v2_getProjectIntegrationAdvancedConfig
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get advanced configuration for an integration on a project
      tags:
      - External Integrations
    patch:
      operationId: v2_patchProjectIntegrationAdvancedConfig
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: integrationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          description: json object containing advanced configuration values, differs
            depending on integration
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update advanced configuration for an integration on a project
      tags:
      - External Integrations
    post:
      operationId: v2_postProjectIntegrationAdvancedConfig
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: integrationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          description: json object containing advanced configuration values, differs
            depending on integration
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create advanced configuration for an integration on a project
      tags:
      - External Integrations
  /v2/workspaces/{workspaceId}/projects/{projectId}/integrations/{integrationId}/advanced-config/mapping:
    get:
      operationId: v2_getProjectIntegrationAdvancedConfigMapping
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Successfully retrieved mapping data from external provider
          schema:
            properties:
              accounts:
                description: Chart of Accounts from external provider
                type: array
              tracking_categories:
                description: Tracking Categories from external provider
                type: array
            type: object
        401:
          description: Unauthorized
        404:
          description: Integration not found or not configured
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get mapping data (Chart of Accounts and Tracking Categories) for advanced
        config setup on a project
      tags:
      - External Integrations
  /v2/workspaces/{workspaceId}/projects/{projectId}/integrations/{integrationId}/refresh:
    post:
      operationId: v2_postProjectIntegrationRefresh
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Refresh access token for an integration on a project
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/integrations/{integrationId}/sync:
    post:
      operationId: v2_postProjectIntegrationSync
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Sync data for an integration on a project
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/integrations/{integrationId}/webhook:
    post:
      operationId: v2_postProjectIntegrationWebhook
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: integrationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      summary: Webhook endpoint for a project-level integration
      tags:
      - External Integrations
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/jobs:
    get:
      operationId: v2_getJobs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Get jobs associated with a specific app
        in: query
        name: app
        required: false
        type: string
      responses:
        202:
          description: Job started, returns job guid
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get supported jobs
      tags:
      - Jobs
  /v2/workspaces/{workspaceId}/projects/{projectId}/jobs/{job_guid}/status:
    get:
      operationId: v2_getJobStatus
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: job_guid
        required: true
        type: integer
      responses:
        202:
          description: Returns job status
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get job status
      tags:
      - Jobs
  /v2/workspaces/{workspaceId}/projects/{projectId}/jobs/{job_id}:
    post:
      operationId: v2_startJob
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: job_id
        required: true
        type: integer
      responses:
        202:
          description: Job started, returns job guid
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Start a new job
      tags:
      - Jobs
  /v2/workspaces/{workspaceId}/projects/{projectId}/link/{linkType}:
    get:
      operationId: v2_getProjectLinkType
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: linkType
        required: true
        type: string
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get specified link type for a project
      tags:
      - Links
      x-min-permissions: isRevitUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/locations:
    delete:
      operationId: v2_deleteLocation
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: ID of the location to delete
        in: query
        name: locationId
        required: true
        type: string
      responses:
        200:
          description: Location successfully deleted
          schema:
            properties:
              message:
                description: Success message
                type: string
            type: object
        400:
          description: Bad Request - missing locationId
        401:
          description: Unauthorized
        404:
          description: Location not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Location by ID
      tags:
      - Locations
      x-ds-test-enabled: true
      x-min-permissions: isProjectMember
    get:
      operationId: v2_getLocations
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Optional location ID to retrieve a single location
        in: query
        name: locationId
        type: string
      - description: Page number for pagination (only used when locationId is not
          provided)
        in: query
        name: page
        type: string
      - description: Number of items per page (only used when locationId is not provided)
        in: query
        name: limit
        type: string
      - description: Whether to return locations in hierarchical tree structure (only
          used when locationId is not provided)
        in: query
        name: treeStructure
        type: string
      responses:
        200:
          description: Successful response. Returns single location object in data
            field when locationId query parameter is provided, otherwise returns array
            of locations with pagination.
          schema:
            properties:
              data:
                description: Array of location objects (or single object when locationId
                  is provided)
                items:
                  properties:
                    location_description:
                      description: Description of location
                      type: string
                    location_id:
                      description: Internal identifier for location
                      type: string
                    location_name:
                      description: Name of location
                      type: string
                    parent_location_id:
                      description: ID of parent location
                      type: string
                    project_id:
                      description: Project ID
                      type: integer
                  type: object
                type: array
              message:
                description: Response message
                type: string
              pagination:
                description: Only present when locationId is not provided
                properties:
                  limit:
                    description: Items per page
                    type: integer
                  page:
                    description: Current page number
                    type: integer
                  total_count:
                    description: Total number of items
                    type: integer
                type: object
            type: object
        401:
          description: Unauthorized
        404:
          description: Location not found (when locationId is provided)
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Locations or Single Location by ID
      tags:
      - Locations
      x-ds-test-enabled: true
      x-min-permissions: isProjectMember
    patch:
      operationId: v2_patchLocation
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: ID of the location to update
        in: query
        name: locationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            location_description:
              description: Description of location
              type: string
            location_name:
              description: Name of location
              type: string
            parent_location_id:
              description: ID of parent location
              type: string
          type: object
      responses:
        200:
          description: Location successfully updated
          schema:
            properties:
              data:
                description: Updated location object
                properties:
                  location_description:
                    description: Description of location
                    type: string
                  location_id:
                    description: Internal identifier for location
                    type: string
                  location_name:
                    description: Name of location
                    type: string
                  parent_location_id:
                    description: ID of parent location
                    type: string
                  project_id:
                    description: Project ID
                    type: integer
                type: object
              message:
                description: Success message
                type: string
            type: object
        400:
          description: Bad Request - missing locationId or no fields to update
        401:
          description: Unauthorized
        404:
          description: Location not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Location by ID
      tags:
      - Locations
      x-ds-test-enabled: true
      x-min-permissions: isProjectMember
    post:
      operationId: v2_postLocation
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            location_description:
              description: Description of location
              type: string
            location_name:
              description: Name of location
              type: string
            parent_location_id:
              description: ID of parent location
              type: string
          required:
          - location_name
          type: object
      responses:
        201:
          description: Object successfully created
          schema:
            properties:
              data:
                description: Created location object
                properties:
                  location_description:
                    description: Description of location
                    type: string
                  location_id:
                    description: Internal identifier for location
                    type: string
                  location_name:
                    description: Name of location
                    type: string
                  parent_location_id:
                    description: ID of parent location
                    type: string
                  project_id:
                    description: Project ID
                    type: integer
                type: object
              message:
                description: Success message
                type: string
            type: object
        400:
          description: Bad Request - validation error
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create Location
      tags:
      - Locations
      x-ds-test-enabled: true
      x-min-permissions: isProjectMember
  /v2/workspaces/{workspaceId}/projects/{projectId}/locations/import:
    post:
      operationId: v2_postLocationsImport
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            locations:
              description: Array of locations to import. Supports hierarchical parent-child
                relationships using location_name as identifier.
              items:
                properties:
                  location_description:
                    description: Description of location
                    type: string
                  location_name:
                    description: Name of location (serves as temporary identifier
                      for hierarchy)
                    type: string
                  parent_location_name:
                    description: location_name of parent location (null or omitted
                      for root nodes)
                    type: string
                required:
                - location_name
                type: object
              type: array
          required:
          - locations
          type: object
      responses:
        201:
          description: Locations successfully created
          schema:
            properties:
              data:
                description: Array of created location objects
                items:
                  properties:
                    location_description:
                      description: Description of location
                      type: string
                    location_id:
                      description: Internal identifier for location
                      type: string
                    location_name:
                      description: Name of location
                      type: string
                    parent_location_id:
                      description: ID of parent location
                      type: string
                    project_id:
                      description: Project ID
                      type: integer
                  type: object
                type: array
              message:
                description: Success message
                example: Batch locations created successfully
                type: string
            type: object
        400:
          description: Bad Request - validation error, duplicate location_name, or
            unresolvable parent references
          schema:
            properties:
              location_name:
                description: Name of problematic location (if applicable)
                type: string
              message:
                description: Error message
                type: string
              unresolved_location_names:
                description: List of location_names that couldn't be resolved due
                  to missing parents
                items:
                  type: string
                type: array
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Batch Import Locations
      tags:
      - Locations
      x-ds-test-enabled: true
      x-min-permissions: isProjectMember
  /v2/workspaces/{workspaceId}/projects/{projectId}/locations/{locationId}:
    delete:
      operationId: v2_deleteLocationById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: locationId
        required: true
        type: string
      responses:
        200:
          description: Location successfully deleted
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Location not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete Location By Id
      tags:
      - Locations
      x-ds-test-enabled: true
      x-min-permissions: isProjectMember
    get:
      operationId: v2_getLocationById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: locationId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  location_description:
                    description: Description of location
                    type: string
                  location_id:
                    description: Internal identifier for location
                    type: string
                  location_name:
                    description: Name of location
                    type: string
                  parent_location_id:
                    description: ID of parent location
                    type: string
                  project_id:
                    description: Project ID
                    type: integer
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Location not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Location By Id
      tags:
      - Locations
      x-ds-test-enabled: true
      x-min-permissions: isProjectMember
    patch:
      operationId: v2_patchLocationById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: locationId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            location_description:
              description: Description of location
              type: string
            location_name:
              description: Name of location
              type: string
            parent_location_id:
              description: ID of parent location
              type: string
          type: object
      responses:
        200:
          description: Location successfully updated
          schema:
            properties:
              data:
                properties:
                  location_description:
                    description: Description of location
                    type: string
                  location_id:
                    description: Internal identifier for location
                    type: string
                  location_name:
                    description: Name of location
                    type: string
                  parent_location_id:
                    description: ID of parent location
                    type: string
                  project_id:
                    description: Project ID
                    type: integer
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request - no fields to update
        401:
          description: Unauthorized
        404:
          description: Location not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit Location By Id
      tags:
      - Locations
      x-ds-test-enabled: true
      x-min-permissions: isProjectMember
  /v2/workspaces/{workspaceId}/projects/{projectId}/logout/{userId}:
    post:
      description: Used to track logout times, mainly for concurrent seat licenses
      operationId: v2_logoutUser
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: email
        in: path
        name: userId
        required: true
        type: string
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Logout a user for a certain project
      tags:
      - Users
  /v2/workspaces/{workspaceId}/projects/{projectId}/menu:
    get:
      description: Returns the menu structure for a project based on the project's
        template
      operationId: v2_getMenu
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Menu structure for the project
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get menu structure for a project
      tags:
      - Info
  /v2/workspaces/{workspaceId}/projects/{projectId}/milestone:
    get:
      operationId: v2_getMilestones
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: A list of current milestones
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get list of current milestones
      tags:
      - Milestones
    post:
      description: Create a new milestone for the project. Optionally scope to a specific
        file set.
      operationId: v2_postMilestone
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            milestone_date:
              description: The date of the milestone, expected format 'yyyy-mm-dd'
              type: string
            milestone_name:
              description: The name of the milestone
              type: string
            source_file_set_id:
              description: Optional file set ID to scope the milestone to specific
                files
              type: integer
          required:
          - milestone_name
          - milestone_date
          type: object
      responses:
        201:
          description: Successfully created new milestone
        400:
          description: Invalid request - missing required fields or invalid file set
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create new milestone
      tags:
      - Milestones
  /v2/workspaces/{workspaceId}/projects/{projectId}/milestone/file-sets:
    get:
      description: Returns a list of file sets that have files in this project. Use
        for populating file set dropdown in milestone creation.
      operationId: v2_getMilestoneFileSets
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: A list of file sets with file counts
          schema:
            items:
              properties:
                file_count:
                  description: Number of files in this set for this project
                  type: integer
                id:
                  description: File set ID
                  type: integer
                name:
                  description: File set name
                  type: string
              type: object
            type: array
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get file sets available for milestone scoping
      tags:
      - Milestones
    post:
      description: Create a new file set with the specified source files. All files
        must belong to this project.
      operationId: v2_createFileSet
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            file_ids:
              description: List of source file IDs to include in the set
              items:
                type: integer
              type: array
            name:
              description: The name of the file set
              type: string
          required:
          - name
          - file_ids
          type: object
      responses:
        201:
          description: Successfully created file set
          schema:
            properties:
              file_count:
                description: Number of files in the set
                type: integer
              id:
                description: New file set ID
                type: integer
              name:
                description: File set name
                type: string
            type: object
        400:
          description: Invalid request (missing name or file_ids, or invalid file
            IDs)
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create new file set
      tags:
      - Milestones
  /v2/workspaces/{workspaceId}/projects/{projectId}/milestone/file-sets/{setId}:
    get:
      description: Returns details of a specific file set including the list of member
        files scoped to the project.
      operationId: v2_getFileSetDetails
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: The file set ID
        in: path
        name: setId
        required: true
        type: integer
      responses:
        200:
          description: File set details with member files
          schema:
            properties:
              files:
                items:
                  properties:
                    id:
                      description: Source file ID
                      type: integer
                    name:
                      description: Source file name
                      type: string
                  type: object
                type: array
              id:
                description: File set ID
                type: integer
              name:
                description: File set name
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: File set not found or has no files in this project
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get file set details with member files
      tags:
      - Milestones
  /v2/workspaces/{workspaceId}/projects/{projectId}/milestone/file-sets/{setId}/files:
    post:
      description: Adds one or more files to an existing file set. Files must belong
        to the specified project.
      operationId: v2_addFilesToFileSet
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: The file set ID
        in: path
        name: setId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            file_ids:
              description: List of source file IDs to add to the set
              items:
                type: integer
              type: array
          required:
          - file_ids
          type: object
      responses:
        200:
          description: Files added successfully
          schema:
            properties:
              added_count:
                description: Number of files actually added (excludes duplicates)
                type: integer
              message:
                type: string
            type: object
        400:
          description: Invalid file IDs or files don't belong to project
        401:
          description: Unauthorized
        404:
          description: File set not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Add files to a file set
      tags:
      - Milestones
  /v2/workspaces/{workspaceId}/projects/{projectId}/milestone/file-sets/{setId}/files/{fileId}:
    delete:
      description: Removes a single file from a file set. File must belong to the
        specified project.
      operationId: v2_removeFileFromFileSet
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: The file set ID
        in: path
        name: setId
        required: true
        type: integer
      - description: The source file ID to remove
        in: path
        name: fileId
        required: true
        type: integer
      responses:
        200:
          description: File removed from set
          schema:
            properties:
              message:
                type: string
            type: object
        400:
          description: File not found or doesn't belong to project
        401:
          description: Unauthorized
        404:
          description: File was not in this set
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Remove a file from a file set
      tags:
      - Milestones
  /v2/workspaces/{workspaceId}/projects/{projectId}/navis/{collectorKey}:
    post:
      consumes:
      - application/json
      operationId: v2_navisprojectupload
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: The collector key
        in: path
        name: collectorKey
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            bucket_name:
              description: The name of the cloud storage bucket
            crawlKey:
              description: The crawl key
            end_time:
              description: 'Datetime value of end of navis extraction - expected format:
                %d/%m/%Y %I:%M:%S %p'
            start_time:
              description: 'Datetime value of start of navis extraction - expected
                format: %d/%m/%Y %I:%M:%S %p'
          required:
          - start_time
          - end_time
          - bucket_name
          - crawlKey
          type: object
      responses:
        200:
          description: Successfully uploaded navis data
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Upload navis data to Deep Space at the project level
      tags:
      - Navis Integration
  /v2/workspaces/{workspaceId}/projects/{projectId}/notifications:
    get:
      operationId: v2_getProjectNotifications
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: string
      - description: User ID to get notifications for (admin only)
        in: query
        name: user_id
        required: false
        type: string
      - default: 50
        description: Number of notifications to return
        in: query
        name: limit
        required: false
        type: integer
      - default: 0
        description: Number of notifications to skip
        in: query
        name: offset
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              limit:
                type: integer
              message:
                type: string
              offset:
                type: integer
              total:
                type: integer
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get project-level notifications for the authenticated user
      tags:
      - Notifications
    patch:
      operationId: v2_acknowledgeProjectNotifications
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            notification_ids:
              description: Array of notification IDs to mark as read
              items:
                type: integer
              type: array
          required:
          - notification_ids
          type: object
      responses:
        200:
          description: Notifications acknowledged successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Acknowledge/read project-level notifications for the authenticated
        user
      tags:
      - Notifications
    post:
      operationId: v2_createProjectNotification
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            attachments:
              description: Array of CDE IDs to attach
              items:
                type: string
              type: array
            email:
              default: true
              description: Whether to send via email
              type: boolean
            importance:
              default: notification
              description: Importance level of the notification
              enum:
              - notification
              - warning
              - alert
              type: string
            inApp:
              default: true
              description: Whether to send in-app notification
              type: boolean
            jsonFields:
              description: JSON fields to populate the template
              type: object
            notificationTemplateId:
              description: ID of the notification template to use
              type: string
            recipients:
              properties:
                bcc:
                  description: Blind carbon copy recipients
                  items:
                    type: string
                  type: array
                cc:
                  description: Carbon copy recipients
                  items:
                    type: string
                  type: array
                to:
                  description: Primary recipients
                  items:
                    type: string
                  type: array
              required:
              - to
              type: object
            scheduledToSendDate:
              description: When to send the notification (optional)
              format: date-time
              type: string
          required:
          - notificationTemplateId
          - recipients
          type: object
      responses:
        201:
          description: Notification created successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        403:
          description: Forbidden (admin access required)
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a project-level notification (admin only)
      tags:
      - Notifications
  /v2/workspaces/{workspaceId}/projects/{projectId}/outseta:
    patch:
      consumes:
      - application/json
      operationId: v2_patchProjectOutseta
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            webflow_collection_id:
              description: The webflow collection id
              type: string
          required:
          - webflow_collection_id
          type: object
      responses:
        200:
          description: Account successfully updated
        400:
          description: Bad Request
        401:
          description: Insufficent permissions
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update an outseta account
      tags:
      - Outseta
      x-min-permissions: admin
    post:
      consumes:
      - application/json
      operationId: v2_postProjectOutseta
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            billing_stage:
              description: The billing stage of the project (Outseta)
              type: string
            ds_license_type:
              description: The license type of the project
              type: string
            primary_contact_email:
              description: Primary contact (Outseta) for the project
              type: string
            project_weekly_notifications:
              description: dictionary of days of the week as bools
              properties:
                Friday:
                  type: boolean
                Monday:
                  type: boolean
                Saturday:
                  type: boolean
                Sunday:
                  type: boolean
                Thursday:
                  type: boolean
                Tuesday:
                  type: boolean
                Wednesday:
                  type: boolean
              type: object
          required:
          - primary_contact_email
          - billing_stage
          - project_weekly_notifications
          - ds_license_type
          type: object
      responses:
        201:
          description: Account successfully created
        400:
          description: Bad Request
        401:
          description: Insufficent permissions
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create an outseta account for a project
      tags:
      - Outseta
      x-min-permissions: admin
  /v2/workspaces/{workspaceId}/projects/{projectId}/parameters:
    get:
      description: Get list of unique parameters from all parameter sets for a project
      operationId: v2_getParameters
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: A list of parameters
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get parameters for project
      tags:
      - Info
  /v2/workspaces/{workspaceId}/projects/{projectId}/powerbi/apps/{contentPack}:
    post:
      operationId: v2_postPowerBiApps
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: contentPack
        required: true
        type: string
      responses:
        202:
          description: App deployment initiated
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Deploy power bi apps by content pack
      tags:
      - Power BI
      x-min-permissions: admin
  /v2/workspaces/{workspaceId}/projects/{projectId}/powerbi/deploy/apps:
    post:
      operationId: v2_deployPbiApp
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            content_pack:
              type: string
            id_dashboard_deployment_job:
              type: integer
          required:
          - id_dashboard_deployment_job
          - content_pack
          type: object
      responses:
        200:
          description: Deployment initiated
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Deploy power bi app
      tags:
      - Power BI
      x-min-permissions: admin
  /v2/workspaces/{workspaceId}/projects/{projectId}/powerbi/embedded/apps/{appName}:
    get:
      operationId: v2_getEmbeddedPbiApp
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: appName
        required: true
        type: string
      responses:
        200:
          description: App returned
        401:
          description: Unauthorized
        404:
          description: App not found in project
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get PBI Embedded App
      tags:
      - Power BI
  /v2/workspaces/{workspaceId}/projects/{projectId}/powerbi/filters:
    get:
      operationId: v2_getPbiFilters
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Filters for pbi
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get filters for power bi
      tags:
      - Power BI
  /v2/workspaces/{workspaceId}/projects/{projectId}/powerbi/refresh/apps:
    get:
      operationId: v2_getPowerBiApps
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get power bi apps & latest refresh dates in a project
      tags:
      - Power BI
  /v2/workspaces/{workspaceId}/projects/{projectId}/powerbi/refresh/apps/{appName}:
    post:
      operationId: v2_refreshPowerBiApp
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: appName
        required: true
        type: string
      responses:
        200:
          description: App refresh initiated
        204:
          description: App refresh not iniated for some reason (eg. already in progress)
        401:
          description: Unauthorized
        404:
          description: App not found in project
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Refresh Power BI app in project
      tags:
      - Power BI
  /v2/workspaces/{workspaceId}/projects/{projectId}/powerbi/syncback/apps/{appName}:
    post:
      operationId: v2_syncbackPbiApp
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: appName
        required: true
        type: string
      responses:
        200:
          description: Syncback complete
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Run syncback for power bi app
      tags:
      - Power BI
  /v2/workspaces/{workspaceId}/projects/{projectId}/project-resources-delete:
    delete:
      description: Bulk delete all resources for a workspace and project. Uses Firestore
        batch operations for efficient processing of large datasets (processes in
        batches of 500 documents).
      operationId: v2_deleteAllResources
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successfully deleted resources
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: Resources not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete all resources
      tags:
      - Resources
  /v2/workspaces/{workspaceId}/projects/{projectId}/project-wbs-delete:
    delete:
      description: Bulk delete all WBS items for a workspace and project. Uses Firestore
        batch operations for efficient processing of large datasets (processes in
        batches of 500 documents).
      operationId: v2_deleteAllWbsItems
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      responses:
        200:
          description: Successfully deleted WBS items
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: WBS items not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete all WBS items
      tags:
      - WBS
      x-min-permissions: isProjectManager
  /v2/workspaces/{workspaceId}/projects/{projectId}/recipe/{recipeId}:
    delete:
      description: Soft deletes a recipe by setting the is_deleted flag to true
      operationId: v2_deleteRecipe
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Recipe document ID
        in: path
        name: recipeId
        required: true
        type: string
      responses:
        200:
          description: Recipe deleted successfully
          schema:
            properties:
              data:
                properties:
                  created_at:
                    format: date-time
                    title: Created At
                    type: string
                  created_by:
                    title: Created By
                    type: string
                  created_by_user_id:
                    title: Created By User Id
                    type: string
                  ingredients:
                    items:
                      properties:
                        amount:
                          title: Amount
                          type: string
                        name:
                          title: Name
                          type: string
                      required:
                      - name
                      - amount
                      type: object
                    title: Ingredients
                    type: array
                  is_deleted:
                    default: false
                    title: Is Deleted
                    type: boolean
                  name:
                    title: Name
                    type: string
                  steps:
                    items:
                      type: string
                    title: Steps
                    type: array
                  updated_at:
                    format: date-time
                    title: Updated At
                    type: string
                  workspace_id:
                    title: Workspace Id
                    type: string
                required:
                - workspace_id
                - created_by
                - created_by_user_id
                - name
                - ingredients
                - steps
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Recipe not found or already deleted
          schema:
            properties:
              message:
                type: string
            type: object
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete a recipe (soft delete)
      tags:
      - Recipes
    get:
      operationId: v2_getRecipeById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Recipe document ID
        in: path
        name: recipeId
        required: true
        type: string
      responses:
        200:
          description: Successfully retrieved recipe
          schema:
            properties:
              created_at:
                format: date-time
                title: Created At
                type: string
              created_by:
                title: Created By
                type: string
              created_by_user_id:
                title: Created By User Id
                type: string
              ingredients:
                items:
                  properties:
                    amount:
                      title: Amount
                      type: string
                    name:
                      title: Name
                      type: string
                  required:
                  - name
                  - amount
                  type: object
                title: Ingredients
                type: array
              is_deleted:
                default: false
                title: Is Deleted
                type: boolean
              name:
                title: Name
                type: string
              steps:
                items:
                  type: string
                title: Steps
                type: array
              updated_at:
                format: date-time
                title: Updated At
                type: string
              workspace_id:
                title: Workspace Id
                type: string
            required:
            - workspace_id
            - created_by
            - created_by_user_id
            - name
            - ingredients
            - steps
            type: object
        401:
          description: Unauthorized
        404:
          description: Recipe not found
          schema:
            properties:
              message:
                type: string
            type: object
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get a single recipe by ID
      tags:
      - Recipes
    patch:
      operationId: v2_updateRecipe
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Recipe document ID
        in: path
        name: recipeId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            ingredients:
              items:
                properties:
                  amount:
                    title: Amount
                    type: string
                  name:
                    title: Name
                    type: string
                required:
                - name
                - amount
                type: object
              title: Ingredients
              type: array
            name:
              title: Name
              type: string
            steps:
              items:
                type: string
              title: Steps
              type: array
          type: object
      responses:
        200:
          description: Recipe updated successfully
          schema:
            properties:
              created_at:
                format: date-time
                title: Created At
                type: string
              created_by:
                title: Created By
                type: string
              created_by_user_id:
                title: Created By User Id
                type: string
              ingredients:
                items:
                  properties:
                    amount:
                      title: Amount
                      type: string
                    name:
                      title: Name
                      type: string
                  required:
                  - name
                  - amount
                  type: object
                title: Ingredients
                type: array
              is_deleted:
                default: false
                title: Is Deleted
                type: boolean
              name:
                title: Name
                type: string
              steps:
                items:
                  type: string
                title: Steps
                type: array
              updated_at:
                format: date-time
                title: Updated At
                type: string
              workspace_id:
                title: Workspace Id
                type: string
            required:
            - workspace_id
            - created_by
            - created_by_user_id
            - name
            - ingredients
            - steps
            type: object
        400:
          description: Bad Request - Validation error
          schema:
            properties:
              errors:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Recipe not found
          schema:
            properties:
              message:
                type: string
            type: object
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update an existing recipe
      tags:
      - Recipes
  /v2/workspaces/{workspaceId}/projects/{projectId}/recipes:
    get:
      operationId: v2_getRecipes
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Pagination cursor for retrieving the next page of results
        in: query
        name: cursor
        required: false
        type: string
      - description: Search query string to filter recipes
        in: query
        name: q
        required: false
        type: string
      - default: 10
        description: Number of items per page (default 10)
        in: query
        maximum: 100
        minimum: 1
        name: page_size
        required: false
        type: integer
      responses:
        200:
          description: Successfully retrieved recipes
          schema:
            properties:
              has_more:
                description: Boolean indicating whether more results are available
                  for pagination
                type: boolean
              items:
                items:
                  properties:
                    created_at:
                      format: date-time
                      title: Created At
                      type: string
                    created_by:
                      title: Created By
                      type: string
                    created_by_user_id:
                      title: Created By User Id
                      type: string
                    ingredients:
                      items:
                        properties:
                          amount:
                            title: Amount
                            type: string
                          name:
                            title: Name
                            type: string
                        required:
                        - name
                        - amount
                        type: object
                      title: Ingredients
                      type: array
                    is_deleted:
                      default: false
                      title: Is Deleted
                      type: boolean
                    name:
                      title: Name
                      type: string
                    steps:
                      items:
                        type: string
                      title: Steps
                      type: array
                    updated_at:
                      format: date-time
                      title: Updated At
                      type: string
                    workspace_id:
                      title: Workspace Id
                      type: string
                  required:
                  - workspace_id
                  - created_by
                  - created_by_user_id
                  - name
                  - ingredients
                  - steps
                  type: object
                type: array
              next_cursor:
                description: Cursor token for retrieving the next page of results
                  (pass this value to the 'cursor' query parameter)
                type: string
              page_size:
                description: Number of items returned in the current page
                type: integer
              source:
                description: Data source identifier (e.g., 'firestore')
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get all recipes with optional filtering and pagination
      tags:
      - Recipes
    post:
      operationId: v2_createRecipe
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            ingredients:
              description: List of ingredients required for the recipe
              items:
                properties:
                  amount:
                    title: Amount
                    type: string
                  name:
                    title: Name
                    type: string
                required:
                - name
                - amount
                type: object
              type: array
            name:
              description: Name of the recipe
              type: string
            steps:
              description: Ordered list of cooking steps
              items:
                type: string
              type: array
          required:
          - name
          - ingredients
          - steps
          type: object
      responses:
        201:
          description: Recipe created successfully
          schema:
            properties:
              created_at:
                format: date-time
                title: Created At
                type: string
              created_by:
                title: Created By
                type: string
              created_by_user_id:
                title: Created By User Id
                type: string
              ingredients:
                items:
                  properties:
                    amount:
                      title: Amount
                      type: string
                    name:
                      title: Name
                      type: string
                  required:
                  - name
                  - amount
                  type: object
                title: Ingredients
                type: array
              is_deleted:
                default: false
                title: Is Deleted
                type: boolean
              name:
                title: Name
                type: string
              steps:
                items:
                  type: string
                title: Steps
                type: array
              updated_at:
                format: date-time
                title: Updated At
                type: string
              workspace_id:
                title: Workspace Id
                type: string
            required:
            - workspace_id
            - created_by
            - created_by_user_id
            - name
            - ingredients
            - steps
            type: object
        400:
          description: Bad Request - Validation error
          schema:
            properties:
              errors:
                items:
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create new recipe
      tags:
      - Recipes
  /v2/workspaces/{workspaceId}/projects/{projectId}/reports/wip/claims-by-month:
    get:
      description: Returns claims grouped by month with variance from previous month
      operationId: v2_getMonthlyClaims
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Monthly aggregated claims data
          schema:
            properties:
              data:
                properties:
                  periodClaims:
                    items:
                      properties:
                        claimCount:
                          type: integer
                        claimDate:
                          type: string
                        claimValue:
                          type: number
                        id:
                          type: string
                        period:
                          type: string
                        status:
                          type: string
                        varianceFromPrevious:
                          type: object
                      type: object
                    type: array
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Get monthly aggregated claims for a project
      tags:
      - Reports
  /v2/workspaces/{workspaceId}/projects/{projectId}/resources:
    get:
      description: Retrieves resources for a specific project within a workspace.
        Supports both legacy and Firestore implementations.
      operationId: v2_getProjectResources
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Optional header to enable Firestore-based implementation
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: false
        type: string
      - description: Search query for resource name, type, or description (Firestore
          only)
        in: query
        name: q
        required: false
        type: string
      - description: Filter by resource type
        in: query
        name: resource_type
        required: false
        type: string
      - default: 100
        description: Maximum number of resources to return (Firestore only)
        in: query
        maximum: 1000
        minimum: 1
        name: limit
        required: false
        type: integer
      - default: 0
        description: Number of resources to skip for pagination (Firestore only)
        in: query
        minimum: 0
        name: offset
        required: false
        type: integer
      responses:
        200:
          description: Project resources retrieved successfully
        400:
          description: Invalid request parameters
        401:
          description: Unauthorized
        404:
          description: Project not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get project resources
      tags:
      - Resources
    post:
      description: Creates a new resource within a project. Supports both legacy and
        Firestore implementations via X-Horizon-Product header.
      operationId: v2_createProjectResource
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Optional header to enable Firestore-based implementation
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: false
        type: string
      - description: Resource creation data
        in: body
        name: body
        required: true
        schema:
          properties:
            allocate_place:
              description: Location where resource is allocated (Firestore only)
              type: string
            allocate_time:
              description: Time when resource should be allocated (Firestore only)
              format: date-time
              type: string
            allocation:
              description: Resource allocation percentage (Firestore only)
              maximum: 100
              minimum: 0
              type: number
            company_id:
              description: Associated company ID (Firestore only)
              type: integer
            description:
              description: Detailed resource description (Firestore only)
              type: string
            parent_resource_id:
              description: Parent resource ID for hierarchical organization
              type: string
            resource_mapping:
              description: Additional resource mapping data (legacy compatibility)
              properties:
                related_column:
                  description: Related database column
                  type: string
                related_table:
                  description: Related database table
                  type: string
              type: object
            resource_name:
              description: Name of the resource
              type: string
            resource_type:
              default: unknown
              description: Type of resource
              enum:
              - equipment
              - machinery
              - tool
              - material
              - labor
              - vehicle
              - unknown
              type: string
          required:
          - resource_name
          - resource_type
          type: object
      responses:
        201:
          description: Resource created successfully
        400:
          description: Invalid request data
        401:
          description: Unauthorized
        409:
          description: Resource already exists
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create a new resource
      tags:
      - Resources
  /v2/workspaces/{workspaceId}/projects/{projectId}/resources/{resourceId}:
    delete:
      description: Soft deletes a resource (sets is_deleted flag to true). Firestore
        implementation only - requires X-Horizon-Product header.
      operationId: v2_deleteResource
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Resource identifier
        in: path
        name: resourceId
        required: true
        type: string
      - description: Required header for Firestore-based resource deletion
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      - default: false
        description: Whether to permanently delete the resource (true) or soft delete
          (false)
        in: query
        name: hard_delete
        required: false
        type: boolean
      responses:
        200:
          description: Resource deleted successfully
        401:
          description: Unauthorized - Missing X-Horizon-Product header
        404:
          description: Resource not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete resource
      tags:
      - Resources
    get:
      description: Retrieves detailed information for a specific resource. Firestore
        implementation only - requires X-Horizon-Product header.
      operationId: v2_getResourceDetails
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Resource identifier
        in: path
        name: resourceId
        required: true
        type: string
      - description: Required header for Firestore-based resource details
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      responses:
        200:
          description: Resource details retrieved successfully
        401:
          description: Unauthorized - Missing X-Horizon-Product header or invalid
            authentication
        404:
          description: Resource not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get specific resource details
      tags:
      - Resources
    patch:
      description: Partially updates an existing resource. Firestore implementation
        only - requires X-Horizon-Product header.
      operationId: v2_patchResource
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Resource identifier
        in: path
        name: resourceId
        required: true
        type: string
      - description: Required header for Firestore-based resource updates
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      - description: Partial resource update data
        in: body
        name: body
        required: true
        schema:
          properties:
            allocate_place:
              description: Updated allocation location
              type: string
            allocate_time:
              description: Updated allocation time
              format: date-time
              type: string
            allocation:
              description: Updated allocation percentage
              maximum: 100
              minimum: 0
              type: number
            company_id:
              description: Associated company ID (required for Subcontractor resources)
              type: integer
            description:
              description: Updated resource description
              type: string
            resource_name:
              description: Updated name of the resource
              type: string
            resource_type:
              description: Updated resource type
              enum:
              - equipment
              - machinery
              - tool
              - material
              - labor
              - vehicle
              - unknown
              type: string
          type: object
      responses:
        200:
          description: Resource updated successfully
        400:
          description: Invalid update data
        401:
          description: Unauthorized - Missing X-Horizon-Product header
        404:
          description: Resource not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Partially update resource
      tags:
      - Resources
    put:
      description: Updates an existing resource. Firestore implementation only - requires
        X-Horizon-Product header.
      operationId: v2_updateResource
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Resource identifier
        in: path
        name: resourceId
        required: true
        type: string
      - description: Required header for Firestore-based resource updates
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      - description: Resource update data
        in: body
        name: body
        required: true
        schema:
          properties:
            allocate_place:
              description: Updated allocation location
              type: string
            allocate_time:
              description: Updated allocation time
              format: date-time
              type: string
            allocation:
              description: Updated allocation percentage
              maximum: 100
              minimum: 0
              type: number
            company_id:
              description: Associated company ID (required for Subcontractor resources)
              type: integer
            description:
              description: Updated resource description
              type: string
            resource_name:
              description: Updated name of the resource
              type: string
            resource_type:
              description: Updated resource type
              enum:
              - equipment
              - machinery
              - tool
              - material
              - labor
              - vehicle
              - unknown
              type: string
          type: object
      responses:
        200:
          description: Resource updated successfully
        400:
          description: Invalid update data
        401:
          description: Unauthorized - Missing X-Horizon-Product header
        404:
          description: Resource not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update resource
      tags:
      - Resources
  /v2/workspaces/{workspaceId}/projects/{projectId}/rfq/responses:
    get:
      operationId: v2_getAllRFQResponsesByProject
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - description: Filter by supplier company ID
        in: query
        name: supplierCompanyId
        required: false
        type: integer
      - description: Filter by minimum evaluation score
        in: query
        name: evaluationScoreMin
        required: false
        type: number
      - description: Filter by maximum evaluation score
        in: query
        name: evaluationScoreMax
        required: false
        type: number
      - default: 1
        description: Page number for pagination
        format: int32
        in: query
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of items per page
        format: int32
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    clarifications:
                      description: Clarifications text
                      type: string
                    created_at:
                      description: Date response was created
                    created_by_user_id:
                      description: User ID who created response
                    duration:
                      description: Quoted duration in days
                      type: integer
                    evaluation_score:
                      description: Evaluation score out of 100
                      type: number
                    exclusions:
                      description: Exclusions text
                      type: string
                    id:
                      description: Internal identifier for RFQ response (UUID)
                    notes:
                      description: Additional notes
                      type: string
                    project_id:
                      description: Project ID this response belongs to
                    rfq_id:
                      description: RFQ ID this response belongs to
                    scope_of_work_quotes:
                      description: Array of quotes per scope of work item
                      items:
                        type: object
                      type: array
                    submitted_date:
                      description: Date when response was submitted
                    supplier_company_id:
                      description: Company ID of the supplier
                    supplier_company_name:
                      description: Supplier company name
                      type: string
                    total_amount:
                      description: Total quoted amount
                      type: number
                    updated_at:
                      description: Date response was last updated
                  type: object
                type: array
              limit:
                description: Items per page
                type: integer
              message:
                description: Response message
              page:
                description: Current page number
                type: integer
              total_count:
                description: Total number of items
                type: integer
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get All RFQ Responses By Project
      tags:
      - RFQ
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/rfq/rfqs:
    get:
      operationId: v2_getRFQs
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - description: Filter by RFQ title (case-sensitive search)
        in: query
        name: title
        required: false
        type: string
      - description: Filter by response format
        enum:
        - Standard price schedule
        - Detailed breakdown
        - Custom template
        in: query
        name: responseFormat
        required: false
        type: string
      - description: Filter by evaluation criteria
        enum:
        - Price (100%)
        - Price (70%), Quality (30%)
        - Price (60%), Experience (20%), Capacity (20%)
        in: query
        name: evaluationCriteria
        required: false
        type: string
      - description: Filter by project ID
        in: query
        name: filterProjectId
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        format: int32
        in: query
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of items per page
        format: int32
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    attached_documents:
                      description: Array of CDE IDs for attached documents
                      items:
                        type: string
                      type: array
                    created_at:
                      description: Date RFQ was created
                    created_by_user_id:
                      description: User ID who created RFQ
                    estimated_value:
                      description: Estimated value of the RFQ
                    evaluation_criteria:
                      description: Evaluation criteria for responses
                      enum:
                      - Price (100%)
                      - Price (70%), Quality (30%)
                      - Price (60%), Experience (20%), Capacity (20%)
                    id:
                      description: Internal identifier for RFQ (UUID)
                    response_due_date:
                      description: Date when responses are due
                    response_format:
                      description: Required response format
                      enum:
                      - Standard price schedule
                      - Detailed breakdown
                      - Custom template
                    scope_of_work:
                      description: Scope of work object with id and description
                      properties:
                        description:
                          description: Scope of work description
                        id:
                          description: Scope of work ID
                      type: object
                    suppliers:
                      description: Array of company IDs for suppliers
                      items:
                        type: integer
                      type: array
                    title:
                      description: RFQ title
                    updated_at:
                      description: Date RFQ was last updated
                  type: object
                type: array
              limit:
                description: Items per page
              message:
                description: Response message
              page:
                description: Current page number
              total_count:
                description: Total number of items
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get RFQs (Requests for Quotation)
      tags:
      - RFQ
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_createRFQ
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            attached_documents:
              description: Array of CDE IDs for attached documents
              items:
                type: string
              type: array
            estimated_value:
              description: Estimated value of the RFQ
              type: number
            evaluation_criteria:
              default: Price (100%)
              description: Evaluation criteria for responses
              enum:
              - Price (100%)
              - Price (70%), Quality (30%)
              - Price (60%), Experience (20%), Capacity (20%)
              type: string
            response_due_date:
              description: Date when responses are due (YYYY-MM-DD or DD/MM/YYYY format)
              type: string
            response_format:
              default: Standard price schedule
              description: Required response format
              enum:
              - Standard price schedule
              - Detailed breakdown
              - Custom template
              type: string
            scope_of_work:
              description: Scope of work object with id and description
              properties:
                description:
                  description: Scope of work description
                id:
                  description: Scope of work ID
              type: object
            suppliers:
              description: Array of company IDs for suppliers
              items:
                type: integer
              type: array
            title:
              description: RFQ title
              type: string
          required:
          - title
          - scope_of_work
          - response_due_date
          - estimated_value
          type: object
      responses:
        201:
          description: RFQ created successfully
          schema:
            properties:
              data:
                properties:
                  attached_documents:
                    description: Array of CDE IDs for attached documents
                  created_at:
                    description: Date RFQ was created
                  created_by_user_id:
                    description: User ID who created RFQ
                  estimated_value:
                    description: Estimated value of the RFQ
                  evaluation_criteria:
                    description: Evaluation criteria for responses
                  id:
                    description: Internal identifier for RFQ
                  response_due_date:
                    description: Date when responses are due
                  response_format:
                    description: Required response format
                  scope_of_work:
                    description: Scope of work object
                  suppliers:
                    description: Array of company IDs for suppliers
                  title:
                    description: RFQ title
                  updated_at:
                    description: Date RFQ was last updated
                type: object
              message:
                description: Response message
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create RFQ (Request for Quotation)
      tags:
      - RFQ
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/rfq/rfqs/{rfqId}:
    delete:
      operationId: v2_deleteRFQById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: path
        name: rfqId
        required: true
        type: string
      responses:
        200:
          description: RFQ deleted successfully
          schema:
            properties:
              message:
                description: Response message
            type: object
        401:
          description: Unauthorized
        404:
          description: RFQ not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete RFQ By Id
      tags:
      - RFQ
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getRFQById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: path
        name: rfqId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  attached_documents:
                    description: Array of CDE IDs for attached documents
                  created_at:
                    description: Date RFQ was created
                  created_by_user_id:
                    description: User ID who created RFQ
                  estimated_value:
                    description: Estimated value of the RFQ
                  evaluation_criteria:
                    description: Evaluation criteria for responses
                  id:
                    description: Internal identifier for RFQ
                  response_due_date:
                    description: Date when responses are due
                  response_format:
                    description: Required response format
                  scope_of_work:
                    description: Scope of work object
                  suppliers:
                    description: Array of company IDs for suppliers
                  title:
                    description: RFQ title
                  updated_at:
                    description: Date RFQ was last updated
                type: object
              message:
                description: Response message
            type: object
        401:
          description: Unauthorized
        404:
          description: RFQ not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get RFQ By Id
      tags:
      - RFQ
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_updateRFQById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: path
        name: rfqId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            attached_documents:
              description: Array of CDE IDs for attached documents
              items:
                type: string
              type: array
            estimated_value:
              description: Estimated value of the RFQ
              type: number
            evaluation_criteria:
              description: Evaluation criteria for responses
              enum:
              - Price (100%)
              - Price (70%), Quality (30%)
              - Price (60%), Experience (20%), Capacity (20%)
              type: string
            response_due_date:
              description: Date when responses are due
              type: string
            response_format:
              description: Required response format
              enum:
              - Standard price schedule
              - Detailed breakdown
              - Custom template
              type: string
            scope_of_work:
              description: Scope of work object
              properties:
                description:
                  description: Scope of work description
                id:
                  description: Scope of work ID
              type: object
            suppliers:
              description: Array of company IDs for suppliers
              items:
                type: integer
              type: array
            title:
              description: RFQ title
              type: string
          type: object
      responses:
        200:
          description: RFQ updated successfully
          schema:
            properties:
              data:
                properties:
                  attached_documents:
                    description: Array of CDE IDs for attached documents
                  created_at:
                    description: Date RFQ was created
                  created_by_user_id:
                    description: User ID who created RFQ
                  estimated_value:
                    description: Estimated value of the RFQ
                  evaluation_criteria:
                    description: Evaluation criteria for responses
                  id:
                    description: Internal identifier for RFQ
                  response_due_date:
                    description: Date when responses are due
                  response_format:
                    description: Required response format
                  scope_of_work:
                    description: Scope of work object
                  suppliers:
                    description: Array of company IDs for suppliers
                  title:
                    description: RFQ title
                  updated_at:
                    description: Date RFQ was last updated
                type: object
              message:
                description: Response message
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: RFQ not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update RFQ By Id
      tags:
      - RFQ
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/rfq/rfqs/{rfqId}/responses:
    get:
      operationId: v2_getRFQResponses
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: path
        name: rfqId
        required: true
        type: string
      - description: Filter by supplier company ID
        in: query
        name: supplierCompanyId
        required: false
        type: integer
      - description: Filter by minimum evaluation score
        in: query
        name: evaluationScoreMin
        required: false
        type: number
      - description: Filter by maximum evaluation score
        in: query
        name: evaluationScoreMax
        required: false
        type: number
      - default: 1
        description: Page number for pagination
        format: int32
        in: query
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of items per page
        format: int32
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                items:
                  properties:
                    clarifications:
                      description: Array of clarifications
                      items:
                        type: string
                      type: array
                    created_at:
                      description: Date response was created
                    created_by_user_id:
                      description: User ID who created response
                    duration:
                      description: Quoted duration in days
                      type: integer
                    evaluation_score:
                      description: Evaluation score out of 100
                      type: number
                    exclusions:
                      description: Array of exclusions
                      items:
                        type: string
                      type: array
                    id:
                      description: Internal identifier for RFQ response (UUID)
                    notes:
                      description: Additional notes
                      type: string
                    rfq_id:
                      description: RFQ ID this response belongs to
                    scope_of_work_quotes:
                      description: Array of quotes per scope of work item
                      items:
                        properties:
                          quoted_value:
                            description: Quoted value for this scope
                            type: number
                          scope_id:
                            description: Scope of work ID
                        type: object
                      type: array
                    submitted_date:
                      description: Date when response was submitted
                    supplier_company_id:
                      description: Company ID of the supplier
                    total_amount:
                      description: Total quoted amount
                      type: number
                    updated_at:
                      description: Date response was last updated
                  type: object
                type: array
              limit:
                description: Items per page
              message:
                description: Response message
              page:
                description: Current page number
              total_count:
                description: Total number of items
            type: object
        401:
          description: Unauthorized
        404:
          description: RFQ not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get RFQ Responses
      tags:
      - RFQ
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    post:
      operationId: v2_createRFQResponse
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: path
        name: rfqId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            clarifications:
              description: Array of clarifications (dot point list)
              items:
                type: string
              type: array
            duration:
              description: Quoted duration in days
              type: integer
            evaluation_score:
              description: Evaluation score out of 100 (0-100)
              maximum: 100
              minimum: 0
              type: number
            exclusions:
              description: Array of exclusions (dot point list)
              items:
                type: string
              type: array
            notes:
              description: Additional notes
              type: string
            scope_of_work_quotes:
              description: Array of quotes per scope of work item
              items:
                properties:
                  quoted_value:
                    description: Quoted value for this scope
                    type: number
                  scope_id:
                    description: Scope of work ID
                type: object
              type: array
            submitted_date:
              description: Date when response was submitted (YYYY-MM-DD or DD/MM/YYYY
                format)
              type: string
            supplier_company_id:
              description: Company ID of the supplier
              type: integer
            total_amount:
              description: Total quoted amount
              type: number
          required:
          - supplier_company_id
          - total_amount
          - duration
          type: object
      responses:
        201:
          description: RFQ response created successfully
          schema:
            properties:
              data:
                properties:
                  clarifications:
                    description: Array of clarifications
                  created_at:
                    description: Date response was created
                  created_by_user_id:
                    description: User ID who created response
                  duration:
                    description: Quoted duration in days
                  evaluation_score:
                    description: Evaluation score out of 100
                  exclusions:
                    description: Array of exclusions
                  id:
                    description: Internal identifier for RFQ response
                  notes:
                    description: Additional notes
                  rfq_id:
                    description: RFQ ID this response belongs to
                  scope_of_work_quotes:
                    description: Array of quotes per scope of work item
                  submitted_date:
                    description: Date when response was submitted
                  supplier_company_id:
                    description: Company ID of the supplier
                  total_amount:
                    description: Total quoted amount
                  updated_at:
                    description: Date response was last updated
                type: object
              message:
                description: Response message
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: RFQ not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create RFQ Response
      tags:
      - RFQ
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/rfq/rfqs/{rfqId}/responses/{responseId}:
    delete:
      operationId: v2_deleteRFQResponseById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: path
        name: rfqId
        required: true
        type: string
      - in: path
        name: responseId
        required: true
        type: string
      responses:
        200:
          description: RFQ response deleted successfully
          schema:
            properties:
              message:
                description: Response message
            type: object
        401:
          description: Unauthorized
        404:
          description: RFQ response not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete RFQ Response By Id
      tags:
      - RFQ
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    get:
      operationId: v2_getRFQResponseById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: path
        name: rfqId
        required: true
        type: string
      - in: path
        name: responseId
        required: true
        type: string
      responses:
        200:
          description: Successful response
          schema:
            properties:
              data:
                properties:
                  clarifications:
                    description: Array of clarifications
                  created_at:
                    description: Date response was created
                  created_by_user_id:
                    description: User ID who created response
                  duration:
                    description: Quoted duration in days
                  evaluation_score:
                    description: Evaluation score out of 100
                  exclusions:
                    description: Array of exclusions
                  id:
                    description: Internal identifier for RFQ response
                  notes:
                    description: Additional notes
                  rfq_id:
                    description: RFQ ID this response belongs to
                  scope_of_work_quotes:
                    description: Array of quotes per scope of work item
                  submitted_date:
                    description: Date when response was submitted
                  supplier_company_id:
                    description: Company ID of the supplier
                  total_amount:
                    description: Total quoted amount
                  updated_at:
                    description: Date response was last updated
                type: object
              message:
                description: Response message
            type: object
        401:
          description: Unauthorized
        404:
          description: RFQ response not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get RFQ Response By Id
      tags:
      - RFQ
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
    patch:
      operationId: v2_updateRFQResponseById
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: path
        name: rfqId
        required: true
        type: string
      - in: path
        name: responseId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            clarifications:
              description: Array of clarifications
              items:
                type: string
              type: array
            duration:
              description: Quoted duration in days
              type: integer
            evaluation_score:
              description: Evaluation score out of 100 (0-100)
              maximum: 100
              minimum: 0
              type: number
            exclusions:
              description: Array of exclusions
              items:
                type: string
              type: array
            notes:
              description: Additional notes
              type: string
            scope_of_work_quotes:
              description: Array of quotes per scope of work item
              items:
                properties:
                  quoted_value:
                    description: Quoted value for this scope
                    type: number
                  scope_id:
                    description: Scope of work ID
                type: object
              type: array
            submitted_date:
              description: Date when response was submitted
              type: string
            supplier_company_id:
              description: Company ID of the supplier
              type: integer
            total_amount:
              description: Total quoted amount
              type: number
          type: object
      responses:
        200:
          description: RFQ response updated successfully
          schema:
            properties:
              data:
                properties:
                  clarifications:
                    description: Array of clarifications
                  created_at:
                    description: Date response was created
                  created_by_user_id:
                    description: User ID who created response
                  duration:
                    description: Quoted duration in days
                  evaluation_score:
                    description: Evaluation score out of 100
                  exclusions:
                    description: Array of exclusions
                  id:
                    description: Internal identifier for RFQ response
                  notes:
                    description: Additional notes
                  rfq_id:
                    description: RFQ ID this response belongs to
                  scope_of_work_quotes:
                    description: Array of quotes per scope of work item
                  submitted_date:
                    description: Date when response was submitted
                  supplier_company_id:
                    description: Company ID of the supplier
                  total_amount:
                    description: Total quoted amount
                  updated_at:
                    description: Date response was last updated
                type: object
              message:
                description: Response message
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: RFQ response not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update RFQ Response By Id
      tags:
      - RFQ
      x-ds-test-enabled: true
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/sectors:
    get:
      operationId: v2_getSectors
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Sectors
      tags:
      - Info
      x-min-permissions: isCostUser
  /v2/workspaces/{workspaceId}/projects/{projectId}/settings:
    get:
      operationId: v2_getProjectSettings
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response with project settings data
          schema:
            properties:
              data:
                description: Project settings data
                properties:
                  actual_start_date:
                    description: Actual start date (Firestore only)
                    format: date
                    type: string
                  country:
                    description: Project country (Firestore only)
                    type: string
                  current_stage:
                    description: Current project stage
                    type: string
                  delivery_method:
                    description: Project delivery method (Firestore only)
                    type: string
                  external_stakeholders:
                    description: External stakeholders (Firestore only)
                    items:
                      type: object
                    type: array
                  forecast_finish_date:
                    description: Forecast finish date (Firestore only)
                    format: date
                    type: string
                  key_project_manager_user_id:
                    description: User ID of key project manager
                    type: string
                  owner_type:
                    description: Type of owner (Firestore only)
                    type: string
                  parent_project_id:
                    description: Parent project ID (Firestore only)
                    type: integer
                  planned_completion_date:
                    description: Planned completion date (Firestore only)
                    format: date
                    type: string
                  planned_start_date:
                    description: Planned start date (Firestore only)
                    format: date
                    type: string
                  postcode:
                    description: Postcode (Firestore only)
                    type: string
                  procurement_strategy:
                    description: Procurement strategy
                    type: string
                  project_addr_country:
                    description: Project country
                    type: string
                  project_addr_postcode:
                    description: Project postcode
                    type: integer
                  project_address:
                    description: Project address
                    type: string
                  project_client:
                    description: Client name
                    type: string
                  project_completion_date:
                    description: Project completion date (Firestore only)
                    format: date
                    type: string
                  project_description:
                    description: Project description (automatically synced with opportunity.description
                      when linked by project_id)
                    type: string
                  project_estimated_finish_date:
                    description: Estimated project finish date
                    format: date
                    type: string
                  project_estimated_start_date:
                    description: Estimated project start date
                    format: date
                    type: string
                  project_group:
                    description: Project group (Firestore only)
                    type: string
                  project_id:
                    description: Project ID
                    type: integer
                  project_identifier:
                    description: Project identifier code
                    type: string
                  project_image_url:
                    description: URL to project cover/header image (Firestore only)
                    type: string
                  project_latlong:
                    description: Project latitude/longitude coordinates
                    type: string
                  project_logo_url:
                    description: URL to project logo image (Firestore only)
                    type: string
                  project_name:
                    description: Name of the project
                    type: string
                  project_sector:
                    description: Project sector/industry
                    type: string
                  project_start_date:
                    description: Project start date (Firestore only)
                    format: date
                    type: string
                  project_type:
                    description: Type of project (Firestore only)
                    type: string
                  region:
                    description: Region/LGA (Firestore only)
                    type: string
                  state:
                    description: State/Territory (Firestore only)
                    type: string
                  street_address:
                    description: Street address (Firestore only)
                    type: string
                  tags:
                    description: Project tags (Firestore only)
                    items:
                      type: string
                    type: array
                  teams:
                    description: Internal project roles (Firestore only)
                    type: object
                  tender_type:
                    description: Type of tender (Firestore only)
                    type: string
                  total_contract_value_aud:
                    description: Total contract value in AUD
                    type: number
                  warranty_end_date:
                    description: Warranty end date (Firestore only)
                    format: date
                    type: string
                  warranty_start_date:
                    description: Warranty start date (Firestore only)
                    format: date
                    type: string
                type: object
              message:
                description: Response message
                type: string
              source:
                description: Data source (firestore or mysql)
                enum:
                - firestore
                - mysql
                type: string
            type: object
        401:
          description: Unauthorized
        404:
          description: Project not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get Project Settings
      tags:
      - Projects
      x-ds-test-enabled: true
      x-min-permissions: isProjectMember
    patch:
      description: 'Update project settings fields stored in Firestore only.

        These fields are NOT synced back to MySQL.


        Note: project_description is automatically synced with opportunity.description
        (when linked by project_id).


        General: project_name, project_identifier, project_description, current_stage,
        delivery_method, project_type, project_sector, tender_type, owner_type, project_group,
        parent_project_id, tags, project_logo_url, project_image_url


        Location: country, state, region, street_address, postcode, project_latlong


        Dates: project_start_date, project_completion_date, planned_start_date, actual_start_date,
        planned_completion_date, forecast_finish_date, warranty_start_date, warranty_end_date


        Teams: teams (merge behavior), external_stakeholders (replace behavior)

        '
      operationId: v2_patchProjectSettings
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            actual_start_date:
              description: Actual start date (ISO format YYYY-MM-DD)
              format: date
              type: string
            country:
              description: Project country
              type: string
            current_stage:
              description: Current project stage
              type: string
            delivery_method:
              description: Project delivery method
              type: string
            external_stakeholders:
              description: 'External stakeholders array. Entire array is sent and
                replaces existing data.

                Valid stakeholder_types: Subcontractor, Consultant, Client, Supplier

                '
              items:
                properties:
                  company_name:
                    type: string
                  contact_email:
                    type: string
                  contact_name:
                    type: string
                  contact_phone:
                    type: string
                  id:
                    type: string
                  membership_role:
                    type: string
                  portal_status:
                    enum:
                    - active
                    - inactive
                    type: string
                  stakeholder_type:
                    type: string
                  trade_discipline:
                    type: string
                type: object
              type: array
            forecast_finish_date:
              description: Forecast finish date (ISO format YYYY-MM-DD)
              format: date
              type: string
            owner_type:
              description: Type of owner
              type: string
            parent_project_id:
              description: Parent project ID
              type: integer
            planned_completion_date:
              description: Planned completion date (ISO format YYYY-MM-DD)
              format: date
              type: string
            planned_start_date:
              description: Planned start date (ISO format YYYY-MM-DD)
              format: date
              type: string
            postcode:
              description: Postcode
              type: string
            project_addr_country:
              description: Project country
              type: string
            project_addr_postcode:
              description: Project postcode
              type: integer
            project_address:
              description: Project address
              type: string
            project_completion_date:
              description: Project completion date (ISO format YYYY-MM-DD)
              format: date
              type: string
            project_description:
              description: Project description (automatically synced with opportunity.description
                when linked by project_id)
              type: string
            project_group:
              description: Project group
              type: string
            project_image_url:
              description: URL to project cover/header image
              type: string
            project_latlong:
              description: Project latitude/longitude coordinates
              type: string
            project_logo_url:
              description: URL to project logo image
              type: string
            project_name:
              description: Project name
              type: string
            project_start_date:
              description: Project start date (ISO format YYYY-MM-DD)
              format: date
              type: string
            project_type:
              description: Type of project
              type: string
            region:
              description: Region/LGA
              type: string
            state:
              description: State/Territory
              type: string
            street_address:
              description: Street address
              type: string
            tags:
              description: Project tags (list of strings)
              items:
                type: string
              type: array
            teams:
              description: 'Internal project roles. Only changed roles are sent.

                Set role to null to remove assignment.

                Valid roles: project_manager, site_manager, contracts_manager, commercial_lead,
                hseq_lead

                '
              type: object
            tender_type:
              description: Type of tender
              type: string
            warranty_end_date:
              description: Warranty end date (ISO format YYYY-MM-DD)
              format: date
              type: string
            warranty_start_date:
              description: Warranty start date (ISO format YYYY-MM-DD)
              format: date
              type: string
          type: object
      responses:
        200:
          description: Project settings updated successfully
          schema:
            properties:
              data:
                description: Updated project settings data
                type: object
              message:
                description: Response message
                type: string
            type: object
        400:
          description: Bad request - invalid fields or validation error
        401:
          description: Unauthorized
        404:
          description: Project not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update Project Settings (Firestore only)
      tags:
      - Projects
      x-ds-test-enabled: true
      x-min-permissions: isProjectManager
  /v2/workspaces/{workspaceId}/projects/{projectId}/sourcefiles:
    get:
      description: Returns all sourcefiles details for a project
      operationId: v2_getSourceFiles
      parameters:
      - description: The workspace name or identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: The project identifier
        in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: A list of sourcefiles
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get sourcefiles by project ID
      tags:
      - Files
    patch:
      consumes:
      - application/json
      description: "This endpoint allows partial updates for a single source file\
        \ or multiple source files in a project. **Single update** requires `idSourceFiles`\
        \ to be present; **batch update** requires `sourceFilesId` (array) and `fileDetail`\
        \ (object).  \n- **Single Update**  \n  Required: `idSourceFiles`.  \n  Optional\
        \ fields to update include `FileName`, `IsControlFile`, `building_id`, `file_discipline`,\n\
        \  `team_bim_id`, `is_tracking_model`, `IsRoomDefining`, `is_zone_model`,\
        \ `Active`.  \n  - If `FileName` is provided, it must be unique within the\
        \ workspace.  \n  - If `IsControlFile` is set to `1`, any other file in the\
        \ same project with `IsControlFile = 1`\n    will be reset to `0`.\n\n- **Batch\
        \ Update**  \n  Required: `sourceFilesId` (array of integers) and `fileDetail`\
        \ (object).  \n  Optional fields to update are `file_discipline`, `team_bim_id`,\
        \ `building_id`, `is_tracking_model`,\n  `IsRoomDefining`, `is_zone_model`,\
        \ `Active`.  \n  - `FileName` and `IsControlFile` are **not** updated in batch\
        \ mode.  \n"
      operationId: v2_patchSourceFile
      parameters:
      - description: The workspace name or identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: The project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          description: 'Either provide `idSourceFiles` for single updates or provide  `sourceFilesId`
            and `fileDetail` for batch updates.

            '
          properties:
            Active:
              description: Flag indicating if this sourcefile is active.
              enum:
              - 0
              - 1
              type: integer
            FileName:
              description: New filename (unique within the workspace). Only for single
                update.
              type: string
            IsControlFile:
              description: Flag indicating if this file is the control file (only
                for single update).
              enum:
              - 0
              - 1
              type: integer
            IsRoomDefining:
              description: Flag indicating if this file is room-defining.
              enum:
              - 0
              - 1
              type: integer
            building_id:
              description: The new building ID.
              type: integer
            fileDetail:
              description: Fields to apply to all source files in sourceFilesId (except
                FileName & IsControlFile).
              properties:
                Active:
                  description: Flag indicating if these sourcefiles are active.
                  enum:
                  - 0
                  - 1
                  type: integer
                IsRoomDefining:
                  description: Flag for room-defining, applied to all selected files.
                  enum:
                  - 0
                  - 1
                  type: integer
                building_id:
                  description: The new building ID for all selected files.
                  type: integer
                file_discipline:
                  description: The new discipline for all selected files.
                  type: string
                is_tracking_model:
                  description: Flag for tracking model, applied to all selected files.
                  enum:
                  - 0
                  - 1
                  type: integer
                is_zone_model:
                  description: Flag for zone model, applied to all selected files.
                  enum:
                  - 0
                  - 1
                  type: integer
                team_bim_id:
                  description: The new team BIM ID for all selected files.
                  type: integer
              type: object
            file_discipline:
              description: The new discipline.
              type: string
            idSourceFiles:
              description: The unique identifier of a single sourcefile to update.
              type: integer
            is_tracking_model:
              description: Flag indicating if this file is a tracking model.
              enum:
              - 0
              - 1
              type: integer
            is_zone_model:
              description: Flag indicating if this file is a zone model.
              enum:
              - 0
              - 1
              type: integer
            sourceFilesId:
              description: A list of file IDs for a batch update.
              items:
                type: integer
              type: array
            team_bim_id:
              description: The new team BIM ID.
              type: integer
          type: object
      responses:
        200:
          description: Sourcefile(s) updated successfully
          schema:
            description: Either "Updated record with idSourceFiles=xxx" for single
              update or "Updated N records" for batch updates.
            type: string
        400:
          description: Bad Request
        401:
          description: Unauthorized
        404:
          description: No record updated. Possibly invalid idSourceFiles or projectid.
        409:
          description: Filename already exists
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit a source file or multiple files in a project
      tags:
      - Files
    post:
      consumes:
      - application/json
      description: Creates a new sourcefile in a project with the provided filename
        and discipline
      operationId: v2_postSourceFiles
      parameters:
      - description: The workspace name or identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: The project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            discipline:
              description: The discipline of the sourcefile (e.g., "Architecture")
              type: string
            filename:
              description: The name of the sourcefile (e.g., "MyFile.rvt")
              type: string
          required:
          - filename
          - discipline
          type: object
      responses:
        201:
          description: Sourcefile successfully created
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a sourcefile in a project
      tags:
      - Files
  /v2/workspaces/{workspaceId}/projects/{projectId}/stage:
    patch:
      consumes:
      - application/json
      operationId: v2_updateProjectStage
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            current_stage:
              description: The new stage for the project. Use DELETE endpoint to archive
                projects.
              enum:
              - Opportunity
              - Tender
              - Delivery
              - DLP
              type: string
          required:
          - current_stage
          type: object
      responses:
        200:
          description: Project stage updated successfully
          schema:
            properties:
              message:
                type: string
              new_stage:
                type: string
              old_stage:
                type: string
              project_id:
                type: string
              project_name:
                type: string
            type: object
        400:
          description: Bad Request - Invalid stage or missing parameters
        401:
          description: Unauthorized
        404:
          description: Project not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update project stage
      tags:
      - Project
  /v2/workspaces/{workspaceId}/projects/{projectId}/teams:
    get:
      operationId: v2_getTeams
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: query
        name: includeDetails
        required: false
        type: boolean
      responses:
        200:
          description: list of teams
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get list of teams
      tags:
      - Teams
    post:
      operationId: v2_postTeam
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            company_id:
              description: The company id of the team (see GET /companies)
              type: integer
            discipline:
              description: The name of the team
              type: string
            pri_abbrev:
              description: The abbreviation of the team
              type: string
          required:
          - discipline
          - pri_abbrev
          - company_id
          type: object
      responses:
        200:
          description: new team created
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a new team
      tags:
      - Teams
  /v2/workspaces/{workspaceId}/projects/{projectId}/teams/bulk:
    post:
      operationId: v2_postTeamsBulk
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: The file to upload
        in: formData
        name: file
        required: true
        type: string
      responses:
        200:
          description: updates complete
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Bulk edit teams with template
      tags:
      - Teams
  /v2/workspaces/{workspaceId}/projects/{projectId}/teams/{teamId}:
    patch:
      operationId: v2_patchTeam
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: teamId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            company_id:
              description: The company id of the team (see GET /companies)
              type: integer
            discipline:
              description: The name of the team
              type: string
            pri_abbrev:
              description: The abbreviation of the team
              type: string
          type: object
      responses:
        200:
          description: team edited
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit a team
      tags:
      - Teams
  /v2/workspaces/{workspaceId}/projects/{projectId}/tokens/{tokenId}:
    get:
      operationId: v2_getProjectTokens
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: tokenId
        required: true
        type: string
      - description: Include isProjectManager flag in response
        in: query
        name: includeIsProjectManagerFlag
        required: false
        type: boolean
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get a token for a project
      tags:
      - Tokens
  /v2/workspaces/{workspaceId}/projects/{projectId}/transmittals:
    get:
      description: Retrieve transmittals for a project with optional filters and pagination
      operationId: v2_listTransmittals
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Filter by status (draft, sent, closed)
        in: query
        name: status
        required: false
        type: string
      - description: Filter by WBS identifier
        in: query
        name: wbs_id
        required: false
        type: integer
      - description: Free text search across transmittal name and description
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of results per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: List of transmittals
          schema:
            properties:
              items:
                items:
                  type: object
                type: array
              limit:
                type: integer
              page:
                type: integer
              total_count:
                type: integer
            type: object
        400:
          description: Invalid request parameters
        403:
          description: Workspace or project access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List transmittals
      tags:
      - Transmittals
    post:
      description: Create a new transmittal package for the project
      operationId: v2_createTransmittal
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            description:
              description: Optional description of the transmittal
              type: string
            transmittal_name:
              description: Name of the transmittal package
              type: string
            transmittal_number:
              description: Manual transmittal number (auto-generated if not provided)
              type: string
            wbs_id:
              description: WBS identifier for the transmittal (optional)
              type: integer
          required:
          - transmittal_name
          type: object
      responses:
        201:
          description: Transmittal created successfully
          schema:
            type: object
        400:
          description: Invalid request data
        403:
          description: Workspace or project access forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create transmittal
      tags:
      - Transmittals
  /v2/workspaces/{workspaceId}/projects/{projectId}/transmittals/{transmittalId}:
    delete:
      description: Soft delete a transmittal (only if status is draft)
      operationId: v2_deleteTransmittal
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Transmittal unique identifier
        in: path
        name: transmittalId
        required: true
        type: string
      responses:
        200:
          description: Transmittal deleted successfully
        400:
          description: Cannot delete - transmittal already sent
        403:
          description: Workspace or project access forbidden
        404:
          description: Transmittal not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Delete transmittal
      tags:
      - Transmittals
    get:
      description: Retrieve a specific transmittal by its unique identifier
      operationId: v2_getTransmittalById
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Transmittal unique identifier
        in: path
        name: transmittalId
        required: true
        type: string
      responses:
        200:
          description: Transmittal details
          schema:
            type: object
        403:
          description: Workspace or project access forbidden
        404:
          description: Transmittal not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get transmittal by ID
      tags:
      - Transmittals
    put:
      description: Update an existing transmittal (only if status is draft)
      operationId: v2_updateTransmittal
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Transmittal unique identifier
        in: path
        name: transmittalId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            description:
              type: string
            transmittal_name:
              type: string
            transmittal_number:
              type: string
            wbs_id:
              type: integer
          type: object
      responses:
        200:
          description: Updated transmittal
          schema:
            type: object
        400:
          description: Invalid request data or transmittal already sent
        403:
          description: Workspace or project access forbidden
        404:
          description: Transmittal not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update transmittal
      tags:
      - Transmittals
  /v2/workspaces/{workspaceId}/projects/{projectId}/transmittals/{transmittalId}/activity:
    get:
      description: Retrieve download activity log for the transmittal
      operationId: v2_getTransmittalActivity
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Transmittal unique identifier
        in: path
        name: transmittalId
        required: true
        type: string
      responses:
        200:
          description: Transmittal activity log
          schema:
            properties:
              activity:
                items:
                  type: object
                type: array
              transmittal_id:
                type: string
            type: object
        403:
          description: Workspace or project access forbidden
        404:
          description: Transmittal not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get transmittal activity
      tags:
      - Transmittals
  /v2/workspaces/{workspaceId}/projects/{projectId}/transmittals/{transmittalId}/documents:
    post:
      description: Add a CDE document to the transmittal package
      operationId: v2_addDocumentToTransmittal
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Transmittal unique identifier
        in: path
        name: transmittalId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_id:
              description: CDE document identifier
              type: string
          required:
          - cde_id
          type: object
      responses:
        200:
          description: Document added successfully
          schema:
            type: object
        400:
          description: Invalid CDE document or transmittal already sent
        403:
          description: Workspace or project access forbidden
        404:
          description: Transmittal not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Add document to transmittal
      tags:
      - Transmittals
  /v2/workspaces/{workspaceId}/projects/{projectId}/transmittals/{transmittalId}/documents/{cdeId}:
    delete:
      description: Remove a CDE document from the transmittal package
      operationId: v2_removeDocumentFromTransmittal
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Transmittal unique identifier
        in: path
        name: transmittalId
        required: true
        type: string
      - description: CDE document identifier
        in: path
        name: cdeId
        required: true
        type: string
      responses:
        200:
          description: Document removed successfully
        400:
          description: Cannot remove - transmittal already sent
        403:
          description: Workspace or project access forbidden
        404:
          description: Transmittal or document not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Remove document from transmittal
      tags:
      - Transmittals
  /v2/workspaces/{workspaceId}/projects/{projectId}/transmittals/{transmittalId}/recipients:
    post:
      description: Add a recipient to the transmittal package
      operationId: v2_addRecipientToTransmittal
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Transmittal unique identifier
        in: path
        name: transmittalId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            company:
              description: Recipient company (optional)
              type: string
            email:
              description: Recipient email address
              type: string
            kinde_id:
              description: Kinde user identifier
              type: string
            name:
              description: Recipient name
              type: string
          required:
          - kinde_id
          - email
          - name
          type: object
      responses:
        200:
          description: Recipient added successfully
          schema:
            type: object
        400:
          description: Invalid data or transmittal already sent
        403:
          description: Workspace or project access forbidden
        404:
          description: Transmittal not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Add recipient to transmittal
      tags:
      - Transmittals
  /v2/workspaces/{workspaceId}/projects/{projectId}/transmittals/{transmittalId}/recipients/{kindeId}:
    delete:
      description: Remove a recipient from the transmittal package
      operationId: v2_removeRecipientFromTransmittal
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Transmittal unique identifier
        in: path
        name: transmittalId
        required: true
        type: string
      - description: Kinde user identifier
        in: path
        name: kindeId
        required: true
        type: string
      responses:
        200:
          description: Recipient removed successfully
        400:
          description: Cannot remove - transmittal already sent
        403:
          description: Workspace or project access forbidden
        404:
          description: Transmittal or recipient not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Remove recipient from transmittal
      tags:
      - Transmittals
  /v2/workspaces/{workspaceId}/projects/{projectId}/transmittals/{transmittalId}/send:
    post:
      description: Send the transmittal package (locks it with purpose)
      operationId: v2_sendTransmittal
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Transmittal unique identifier
        in: path
        name: transmittalId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            purpose:
              description: Purpose of transmittal
              enum:
              - For Construction
              - For Approval
              - For Information
              - For Review
              - For Comment
              - For Tender
              type: string
          required:
          - purpose
          type: object
      responses:
        200:
          description: Transmittal sent successfully
          schema:
            type: object
        400:
          description: Invalid request or transmittal already sent
        403:
          description: Workspace or project access forbidden
        404:
          description: Transmittal not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Send transmittal
      tags:
      - Transmittals
  /v2/workspaces/{workspaceId}/projects/{projectId}/transmittals/{transmittalId}/track-download:
    post:
      description: Record download activity when recipient downloads a document
      operationId: v2_trackTransmittalDownload
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Transmittal unique identifier
        in: path
        name: transmittalId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            cde_id:
              description: CDE document identifier
              type: string
            ip_address:
              description: Optional IP address of downloader
              type: string
            kinde_id:
              description: Downloader Kinde user identifier
              type: string
          required:
          - cde_id
          - kinde_id
          type: object
      responses:
        200:
          description: Download tracked successfully
        400:
          description: Invalid request
        403:
          description: Workspace or project access forbidden
        404:
          description: Transmittal or document not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Track document download
      tags:
      - Transmittals
  /v2/workspaces/{workspaceId}/projects/{projectId}/transmittals_v2:
    get:
      description: Get transmittals for a project with optional filters and pagination.
      operationId: v2_listTransmittalsV2
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - description: Filter by status
        enum:
        - draft
        - issued
        in: query
        name: status
        required: false
        type: string
      - description: Search by transmittal_id (exact match)
        in: query
        name: search
        required: false
        type: string
      - default: 50
        description: Items per page. 0 = no limit
        in: query
        maximum: 100
        minimum: 0
        name: limit
        required: false
        type: integer
      - description: Doc ID - get older items
        in: query
        name: after
        required: false
        type: string
      - description: Doc ID - get newer items
        in: query
        name: before
        required: false
        type: string
      - description: Sort order (asc or desc)
        enum:
        - asc
        - desc
        in: query
        name: sort_order
        required: false
        type: string
      responses:
        200:
          description: Successful Response
          schema:
            properties:
              next_cursor:
                description: Cursor for next page
                type: string
              page_size:
                type: integer
              prev_cursor:
                description: Cursor for previous page
                type: string
              results:
                items:
                  description: Transmittal for API responses.
                  properties:
                    cover_message:
                      description: Optional cover letter / notes included in the transmittal
                      type: string
                    created_at:
                      description: Timestamp when record was created
                      format: date-time
                      type: string
                    created_by:
                      description: Kinde ID of user who created the record
                      type: string
                    deleted_at:
                      description: Timestamp when record was soft-deleted
                      format: date-time
                      type: string
                    deleted_by:
                      description: Kinde ID of user who deleted the record
                      type: string
                    documents:
                      description: Registered documents included in this transmittal
                      items:
                        description: 'Denormalized reference to a registered document
                          included in a transmittal.


                          Document version metadata is immutable (a cde_id always
                          maps to the same

                          version/revision), so denormalization here carries no staleness
                          risk.'
                        properties:
                          cde_id:
                            description: Specific version ID transmitted
                            type: integer
                          discipline:
                            description: Discipline from register metadata
                            type: string
                          doc_number:
                            description: Document number from register metadata
                            type: string
                          document_series_id:
                            description: Document series (groups all versions)
                            type: string
                          revision:
                            description: Revision string (e.g. 'A', 'B', 'C1')
                            type: string
                          title:
                            description: Document title from register metadata
                            type: string
                          version:
                            description: Version number at time of transmittal
                            type: integer
                        required:
                        - document_series_id
                        - cde_id
                        - version
                        - revision
                        - doc_number
                        - title
                        type: object
                      type: array
                    id:
                      description: Firestore document ID
                      type: string
                    is_deleted:
                      default: false
                      description: Soft delete flag
                      type: boolean
                    issued_at:
                      description: Timestamp when transmittal was issued
                      format: date-time
                      type: string
                    issued_by:
                      description: Kinde ID of user who issued the transmittal
                      type: string
                    project_id:
                      description: Document Register is project-scoped
                      type: integer
                    recipients:
                      description: Companies receiving download access and their notification
                        users
                      items:
                        description: 'A company receiving document access, with optional
                          users for email notification.


                          Access is granted at company level. Notify users only determines
                          who gets

                          the email - all users in the company can download.'
                        properties:
                          company_id:
                            description: Company receiving download entitlement (global
                              company id)
                            type: integer
                          notify_user_ids:
                            description: Kinde IDs of users to email-notify (subset
                              of company members)
                            items:
                              type: string
                            type: array
                        required:
                        - company_id
                        type: object
                      type: array
                    status:
                      enum:
                      - draft
                      - issued
                      type: string
                    transmittal_id:
                      description: Project-scoped human-readable identifier (e.g.
                        'TR-2026-001'). Auto-generated by backend on creation.
                      type: string
                    updated_at:
                      description: Timestamp when record was last updated
                      format: date-time
                      type: string
                    updated_by:
                      description: Kinde ID of user who last updated the record
                      type: string
                    workspace_id:
                      type: string
                  required:
                  - created_at
                  - created_by
                  - updated_at
                  - updated_by
                  - transmittal_id
                  - workspace_id
                  - project_id
                  - id
                  type: object
                type: array
            required:
            - page_size
            type: object
        401:
          description: Unauthorized
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: List transmittals
      tags:
      - transmittals
    post:
      description: Create a new draft transmittal with recipients and documents.
      operationId: v2_createTransmittalV2
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          description: 'Input for creating a new draft transmittal.


            transmittal_id, status, issued_at/by are all backend-controlled.

            workspace_id and project_id come from the URL path.'
          properties:
            cover_message:
              description: Optional cover letter / notes
              type: string
            documents:
              description: Registered documents to include
              items:
                description: 'Denormalized reference to a registered document included
                  in a transmittal.


                  Document version metadata is immutable (a cde_id always maps to
                  the same

                  version/revision), so denormalization here carries no staleness
                  risk.'
                properties:
                  cde_id:
                    description: Specific version ID transmitted
                    type: integer
                  discipline:
                    description: Discipline from register metadata
                    type: string
                  doc_number:
                    description: Document number from register metadata
                    type: string
                  document_series_id:
                    description: Document series (groups all versions)
                    type: string
                  revision:
                    description: Revision string (e.g. 'A', 'B', 'C1')
                    type: string
                  title:
                    description: Document title from register metadata
                    type: string
                  version:
                    description: Version number at time of transmittal
                    type: integer
                required:
                - document_series_id
                - cde_id
                - version
                - revision
                - doc_number
                - title
                type: object
              type: array
            recipients:
              description: Companies receiving download access and their notification
                users
              items:
                description: 'A company receiving document access, with optional users
                  for email notification.


                  Access is granted at company level. Notify users only determines
                  who gets

                  the email - all users in the company can download.'
                properties:
                  company_id:
                    description: Company receiving download entitlement (global company
                      id)
                    type: integer
                  notify_user_ids:
                    description: Kinde IDs of users to email-notify (subset of company
                      members)
                    items:
                      type: string
                    type: array
                required:
                - company_id
                type: object
              type: array
          type: object
      responses:
        201:
          description: Successful Response
          schema:
            description: Transmittal for API responses.
            properties:
              cover_message:
                description: Optional cover letter / notes included in the transmittal
                type: string
              created_at:
                description: Timestamp when record was created
                format: date-time
                type: string
              created_by:
                description: Kinde ID of user who created the record
                type: string
              deleted_at:
                description: Timestamp when record was soft-deleted
                format: date-time
                type: string
              deleted_by:
                description: Kinde ID of user who deleted the record
                type: string
              documents:
                description: Registered documents included in this transmittal
                items:
                  description: 'Denormalized reference to a registered document included
                    in a transmittal.


                    Document version metadata is immutable (a cde_id always maps to
                    the same

                    version/revision), so denormalization here carries no staleness
                    risk.'
                  properties:
                    cde_id:
                      description: Specific version ID transmitted
                      type: integer
                    discipline:
                      description: Discipline from register metadata
                      type: string
                    doc_number:
                      description: Document number from register metadata
                      type: string
                    document_series_id:
                      description: Document series (groups all versions)
                      type: string
                    revision:
                      description: Revision string (e.g. 'A', 'B', 'C1')
                      type: string
                    title:
                      description: Document title from register metadata
                      type: string
                    version:
                      description: Version number at time of transmittal
                      type: integer
                  required:
                  - document_series_id
                  - cde_id
                  - version
                  - revision
                  - doc_number
                  - title
                  type: object
                type: array
              id:
                description: Firestore document ID
                type: string
              is_deleted:
                default: false
                description: Soft delete flag
                type: boolean
              issued_at:
                description: Timestamp when transmittal was issued
                format: date-time
                type: string
              issued_by:
                description: Kinde ID of user who issued the transmittal
                type: string
              project_id:
                description: Document Register is project-scoped
                type: integer
              recipients:
                description: Companies receiving download access and their notification
                  users
                items:
                  description: 'A company receiving document access, with optional
                    users for email notification.


                    Access is granted at company level. Notify users only determines
                    who gets

                    the email - all users in the company can download.'
                  properties:
                    company_id:
                      description: Company receiving download entitlement (global
                        company id)
                      type: integer
                    notify_user_ids:
                      description: Kinde IDs of users to email-notify (subset of company
                        members)
                      items:
                        type: string
                      type: array
                  required:
                  - company_id
                  type: object
                type: array
              status:
                enum:
                - draft
                - issued
                type: string
              transmittal_id:
                description: Project-scoped human-readable identifier (e.g. 'TR-2026-001').
                  Auto-generated by backend on creation.
                type: string
              updated_at:
                description: Timestamp when record was last updated
                format: date-time
                type: string
              updated_by:
                description: Kinde ID of user who last updated the record
                type: string
              workspace_id:
                type: string
            required:
            - created_at
            - created_by
            - updated_at
            - updated_by
            - transmittal_id
            - workspace_id
            - project_id
            - id
            type: object
        401:
          description: Unauthorized
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a draft transmittal
      tags:
      - transmittals
  /v2/workspaces/{workspaceId}/projects/{projectId}/transmittals_v2/{transmittal_doc_id}:
    delete:
      description: Soft delete a draft transmittal. Rejects if transmittal is issued.
      operationId: v2_deleteTransmittalV2
      parameters:
      - in: path
        name: transmittal_doc_id
        required: true
        type: string
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        204:
          description: Successful Response
        401:
          description: Unauthorized
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete a draft transmittal
      tags:
      - transmittals
    get:
      description: Get a single transmittal by its ID.
      operationId: v2_getTransmittalV2
      parameters:
      - in: path
        name: transmittal_doc_id
        required: true
        type: string
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful Response
          schema:
            description: Transmittal for API responses.
            properties:
              cover_message:
                description: Optional cover letter / notes included in the transmittal
                type: string
              created_at:
                description: Timestamp when record was created
                format: date-time
                type: string
              created_by:
                description: Kinde ID of user who created the record
                type: string
              deleted_at:
                description: Timestamp when record was soft-deleted
                format: date-time
                type: string
              deleted_by:
                description: Kinde ID of user who deleted the record
                type: string
              documents:
                description: Registered documents included in this transmittal
                items:
                  description: 'Denormalized reference to a registered document included
                    in a transmittal.


                    Document version metadata is immutable (a cde_id always maps to
                    the same

                    version/revision), so denormalization here carries no staleness
                    risk.'
                  properties:
                    cde_id:
                      description: Specific version ID transmitted
                      type: integer
                    discipline:
                      description: Discipline from register metadata
                      type: string
                    doc_number:
                      description: Document number from register metadata
                      type: string
                    document_series_id:
                      description: Document series (groups all versions)
                      type: string
                    revision:
                      description: Revision string (e.g. 'A', 'B', 'C1')
                      type: string
                    title:
                      description: Document title from register metadata
                      type: string
                    version:
                      description: Version number at time of transmittal
                      type: integer
                  required:
                  - document_series_id
                  - cde_id
                  - version
                  - revision
                  - doc_number
                  - title
                  type: object
                type: array
              id:
                description: Firestore document ID
                type: string
              is_deleted:
                default: false
                description: Soft delete flag
                type: boolean
              issued_at:
                description: Timestamp when transmittal was issued
                format: date-time
                type: string
              issued_by:
                description: Kinde ID of user who issued the transmittal
                type: string
              project_id:
                description: Document Register is project-scoped
                type: integer
              recipients:
                description: Companies receiving download access and their notification
                  users
                items:
                  description: 'A company receiving document access, with optional
                    users for email notification.


                    Access is granted at company level. Notify users only determines
                    who gets

                    the email - all users in the company can download.'
                  properties:
                    company_id:
                      description: Company receiving download entitlement (global
                        company id)
                      type: integer
                    notify_user_ids:
                      description: Kinde IDs of users to email-notify (subset of company
                        members)
                      items:
                        type: string
                      type: array
                  required:
                  - company_id
                  type: object
                type: array
              status:
                enum:
                - draft
                - issued
                type: string
              transmittal_id:
                description: Project-scoped human-readable identifier (e.g. 'TR-2026-001').
                  Auto-generated by backend on creation.
                type: string
              updated_at:
                description: Timestamp when record was last updated
                format: date-time
                type: string
              updated_by:
                description: Kinde ID of user who last updated the record
                type: string
              workspace_id:
                type: string
            required:
            - created_at
            - created_by
            - updated_at
            - updated_by
            - transmittal_id
            - workspace_id
            - project_id
            - id
            type: object
        401:
          description: Unauthorized
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get a transmittal
      tags:
      - transmittals
    patch:
      description: Partially update a draft transmittal. Only provided fields will
        be updated.
      operationId: v2_updateTransmittalV2
      parameters:
      - in: path
        name: transmittal_doc_id
        required: true
        type: string
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          description: 'Input for updating a draft transmittal. All fields optional.


            Only valid while status is ''draft''. Raises error if transmittal is issued.'
          properties:
            cover_message:
              type: string
            documents:
              items:
                description: 'Denormalized reference to a registered document included
                  in a transmittal.


                  Document version metadata is immutable (a cde_id always maps to
                  the same

                  version/revision), so denormalization here carries no staleness
                  risk.'
                properties:
                  cde_id:
                    description: Specific version ID transmitted
                    type: integer
                  discipline:
                    description: Discipline from register metadata
                    type: string
                  doc_number:
                    description: Document number from register metadata
                    type: string
                  document_series_id:
                    description: Document series (groups all versions)
                    type: string
                  revision:
                    description: Revision string (e.g. 'A', 'B', 'C1')
                    type: string
                  title:
                    description: Document title from register metadata
                    type: string
                  version:
                    description: Version number at time of transmittal
                    type: integer
                required:
                - document_series_id
                - cde_id
                - version
                - revision
                - doc_number
                - title
                type: object
              type: array
            recipients:
              items:
                description: 'A company receiving document access, with optional users
                  for email notification.


                  Access is granted at company level. Notify users only determines
                  who gets

                  the email - all users in the company can download.'
                properties:
                  company_id:
                    description: Company receiving download entitlement (global company
                      id)
                    type: integer
                  notify_user_ids:
                    description: Kinde IDs of users to email-notify (subset of company
                      members)
                    items:
                      type: string
                    type: array
                required:
                - company_id
                type: object
              type: array
          type: object
      responses:
        200:
          description: Successful Response
          schema:
            description: Transmittal for API responses.
            properties:
              cover_message:
                description: Optional cover letter / notes included in the transmittal
                type: string
              created_at:
                description: Timestamp when record was created
                format: date-time
                type: string
              created_by:
                description: Kinde ID of user who created the record
                type: string
              deleted_at:
                description: Timestamp when record was soft-deleted
                format: date-time
                type: string
              deleted_by:
                description: Kinde ID of user who deleted the record
                type: string
              documents:
                description: Registered documents included in this transmittal
                items:
                  description: 'Denormalized reference to a registered document included
                    in a transmittal.


                    Document version metadata is immutable (a cde_id always maps to
                    the same

                    version/revision), so denormalization here carries no staleness
                    risk.'
                  properties:
                    cde_id:
                      description: Specific version ID transmitted
                      type: integer
                    discipline:
                      description: Discipline from register metadata
                      type: string
                    doc_number:
                      description: Document number from register metadata
                      type: string
                    document_series_id:
                      description: Document series (groups all versions)
                      type: string
                    revision:
                      description: Revision string (e.g. 'A', 'B', 'C1')
                      type: string
                    title:
                      description: Document title from register metadata
                      type: string
                    version:
                      description: Version number at time of transmittal
                      type: integer
                  required:
                  - document_series_id
                  - cde_id
                  - version
                  - revision
                  - doc_number
                  - title
                  type: object
                type: array
              id:
                description: Firestore document ID
                type: string
              is_deleted:
                default: false
                description: Soft delete flag
                type: boolean
              issued_at:
                description: Timestamp when transmittal was issued
                format: date-time
                type: string
              issued_by:
                description: Kinde ID of user who issued the transmittal
                type: string
              project_id:
                description: Document Register is project-scoped
                type: integer
              recipients:
                description: Companies receiving download access and their notification
                  users
                items:
                  description: 'A company receiving document access, with optional
                    users for email notification.


                    Access is granted at company level. Notify users only determines
                    who gets

                    the email - all users in the company can download.'
                  properties:
                    company_id:
                      description: Company receiving download entitlement (global
                        company id)
                      type: integer
                    notify_user_ids:
                      description: Kinde IDs of users to email-notify (subset of company
                        members)
                      items:
                        type: string
                      type: array
                  required:
                  - company_id
                  type: object
                type: array
              status:
                enum:
                - draft
                - issued
                type: string
              transmittal_id:
                description: Project-scoped human-readable identifier (e.g. 'TR-2026-001').
                  Auto-generated by backend on creation.
                type: string
              updated_at:
                description: Timestamp when record was last updated
                format: date-time
                type: string
              updated_by:
                description: Kinde ID of user who last updated the record
                type: string
              workspace_id:
                type: string
            required:
            - created_at
            - created_by
            - updated_at
            - updated_by
            - transmittal_id
            - workspace_id
            - project_id
            - id
            type: object
        401:
          description: Unauthorized
        422:
          description: Validation Error
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update a draft transmittal
      tags:
      - transmittals
  /v2/workspaces/{workspaceId}/projects/{projectId}/users:
    get:
      description: Returns all users and user details for a project
      operationId: v2_getProjectUsers
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get users in a project
      tags:
      - Users
    post:
      description: Creates a user if not already exista and invites to project
      operationId: v2_postProjectUsers
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            email:
              description: The email of the user
              type: string
            isProjectManager:
              description: bool indicating whether the user is a project manager (default
                false)
              type: boolean
            isProjectViewer:
              description: bool indicating whether the user is a project viewer (default
                false)
              type: boolean
            isRevitUsers:
              description: bool indicating whether the user is a revit user (default
                false)
              type: boolean
            isWorkspaceDashboardViewer:
              description: bool indicating whether the user is a workspace viewer
                (default false)
              type: boolean
            isWorkspaceManager:
              description: bool indicating whether the user is a workspace manager
                (default false)
              type: boolean
            name:
              description: The name of the user like First Last
              type: string
            team_bim_id:
              description: The team id to add the user to on the project
              type: integer
          required:
          - email
          - name
          - team_bim_id
          type: object
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Invite user to a project
      tags:
      - Users
  /v2/workspaces/{workspaceId}/projects/{projectId}/users/email:
    post:
      description: Resends project invite notification to an existing user
      operationId: v2_postProjectUsersEmail
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            email:
              description: The email of the user to resend project invite to
              type: string
          required:
          - email
          type: object
      responses:
        200:
          description: Project invite notification resent successfully
          schema:
            properties:
              data:
                properties:
                  kinde_id:
                    description: The Kinde ID of the user
                    type: string
                  message:
                    description: Additional message about the resend operation
                    type: string
                type: object
              message:
                description: Success message
                type: string
            type: object
        400:
          description: Bad Request - Invalid email, user not found, or user doesn't
            have project viewer permission
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Resend invite email to user in project
      tags:
      - Users
  /v2/workspaces/{workspaceId}/projects/{projectId}/users/{userId}:
    delete:
      description: Remove's a user's permissions and team assignment from a project
      operationId: v2_deleteProjectUsers
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: userId
        required: true
        type: string
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Remove a user from a project
      tags:
      - Users
    get:
      description: Returns user and details for specified project
      operationId: v2_getProjectUser
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: userId
        required: true
        type: string
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get user in a project
      tags:
      - Users
    patch:
      description: Edit project-level attributes of a user
      operationId: v2_patchProjectUsers
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: path
        name: userId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            isProjectManager:
              description: bool indicating whether the user is a project manager (default
                false)
              type: boolean
            isProjectTeam:
              description: bool indicating whether the user is a project team member
                (default false)
              type: boolean
            isProjectViewer:
              description: bool indicating whether the user is a project viewer (default
                false)
              type: boolean
            isRevitUsers:
              description: bool indicating whether the user is a revit user (default
                false)
              type: boolean
            name:
              description: The name of the user like First Last
              type: string
            team_bim_id:
              description: The team id to add the user to on the project
              type: integer
          type: object
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit a user in a project
      tags:
      - Users
  /v2/workspaces/{workspaceId}/projects/{projectId}/wbs:
    delete:
      description: Delete a single WBS item by ID. Requires X-Horizon-Product header
        for Firestore-based deletion. Cannot delete WBS items that have children.
      operationId: v2_deleteWBS
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: WBS item ID to delete
        in: query
        name: wbsId
        required: true
        type: string
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      responses:
        200:
          description: WBS item deleted successfully
        400:
          description: Bad Request - WBS has children or invalid parameters
        401:
          description: Unauthorized
        404:
          description: WBS item not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete a WBS item
      tags:
      - WBS
      x-min-permissions: isProjectManager
    get:
      operationId: v2_getWBS
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get WBS
      tags:
      - Resources
    patch:
      operationId: v2_patchWBS
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            parent_wbs_id:
              description: The parent WBS id
              type: integer
            wbs_name:
              description: The name of the wbs
              type: string
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit a WBS
      tags:
      - WBS
      x-min-permissions: isProjectManager
    post:
      operationId: v2_postWBS
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: projectId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            parent_wbs_id:
              description: The parent WBS id
              type: integer
            wbs_name:
              description: The name of the wbs
              type: string
          required:
          - wbs_name
          type: object
      responses:
        200:
          description: Successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a WBS
      tags:
      - WBS
      x-min-permissions: isProjectManager
  /v2/workspaces/{workspaceId}/projects/{projectId}/wbs/lock:
    post:
      description: Performs full sync of WBS between Firestore and MySQL, then locks
        the project to Firestore-managed mode. Auto-matches items by name, parent,
        and cost code. After locking, all WBS edits should be done in Firestore with
        automatic sync to MySQL.
      operationId: v2_lockWbs
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      responses:
        200:
          description: WBS Sync & Lock completed
          schema:
            properties:
              message:
                type: string
              report:
                properties:
                  errors:
                    description: Sync errors
                    type: array
                  imported:
                    description: MySQL items imported to Firestore
                    type: array
                  linked:
                    description: Items already linked
                    type: array
                  locked:
                    description: Whether lock was successful
                    type: boolean
                  matched:
                    description: Items matched by name/code
                    type: array
                  pushed:
                    description: Firestore items pushed to MySQL
                    type: array
                  summary:
                    properties:
                      error_count:
                        type: integer
                      imported_count:
                        type: integer
                      linked_count:
                        type: integer
                      matched_count:
                        type: integer
                      pushed_count:
                        type: integer
                    type: object
                type: object
            type: object
        401:
          description: Unauthorized
        409:
          description: Conflict - Project WBS is already locked
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Sync & Lock project WBS
      tags:
      - WBS
      x-min-permissions: isProjectManager
  /v2/workspaces/{workspaceId}/projects/{projectId}/wbs/recalculate-dates:
    post:
      description: Manually trigger recalculation of start_date and end_date for all
        WBS items based on their children (tasks and nested WBS). WBS dates are calculated
        as earliest start and latest end among all descendants. Processes WBS hierarchy
        in bottom-up order for correct propagation.
      operationId: v2_recalculateWbsDates
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      responses:
        200:
          description: WBS dates recalculated successfully
          schema:
            properties:
              failed_count:
                description: Number of WBS items that failed to update
                type: integer
              failed_wbs_ids:
                description: IDs of WBS items that failed (if any)
                items:
                  type: string
                type: array
              message:
                description: Summary message
                type: string
              success:
                description: Whether recalculation succeeded
                type: boolean
              total_wbs:
                description: Total number of WBS items found
                type: integer
              updated_count:
                description: Number of WBS items updated
                type: integer
            type: object
        400:
          description: Bad Request - invalid parameters
        401:
          description: Unauthorized
        500:
          description: Internal Server Error - recalculation failed
      security:
      - JWT_v2: []
      summary: Recalculate all WBS dates for project
      tags:
      - WBS
      x-min-permissions: isProjectManager
  /v2/workspaces/{workspaceId}/projects/{projectId}/wbs/settings:
    get:
      description: Returns WBS settings for a project including lock status.
      operationId: v2_getWbsSettings
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      responses:
        200:
          description: WBS settings retrieved successfully
          schema:
            properties:
              data:
                properties:
                  allow_system_writes:
                    description: Whether direct MySQL writes are allowed when locked
                    type: boolean
                  project_id:
                    type: integer
                  wbs_locked:
                    description: Whether WBS is locked to Firestore management
                    type: boolean
                  wbs_locked_at:
                    description: When lock was applied
                    format: date-time
                    type: string
                  wbs_locked_by:
                    description: User who locked
                    type: string
                  workspace_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get project WBS settings
      tags:
      - WBS
    patch:
      description: Update WBS settings such as lock status. Use the /wbs/lock endpoint
        for initial sync & lock.
      operationId: v2_updateWbsSettings
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            allow_system_writes:
              description: Whether to allow direct MySQL writes when locked
              type: boolean
            wbs_locked:
              description: Set to true to lock, false to unlock
              type: boolean
          type: object
      responses:
        200:
          description: WBS settings updated successfully
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update project WBS settings
      tags:
      - WBS
      x-min-permissions: isProjectManager
  /v2/workspaces/{workspaceId}/projects/{projectId}/wbs/sync:
    post:
      description: Sync specified WBS items between systems. Supports import_from_mysql
        (create Firestore from MySQL), push_to_mysql (create/update MySQL from Firestore),
        and link (connect existing items).
      operationId: v2_syncWbsItems
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            items:
              description: Items to sync
              items:
                properties:
                  action:
                    description: Sync action to perform
                    enum:
                    - import_from_mysql
                    - push_to_mysql
                    - link
                    type: string
                  firestore_id:
                    description: Firestore document ID (for push_to_mysql, link)
                    type: string
                  mysql_wbs_id:
                    description: MySQL wbs_id (for import_from_mysql, link)
                    type: integer
                required:
                - action
                type: object
              type: array
          required:
          - items
          type: object
      responses:
        200:
          description: Sync completed
          schema:
            properties:
              message:
                type: string
              results:
                properties:
                  errors:
                    items:
                      type: object
                    type: array
                  success:
                    items:
                      type: object
                    type: array
                  total:
                    type: integer
                type: object
            type: object
        400:
          description: Bad Request
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Sync WBS items between Firestore and MySQL
      tags:
      - WBS
      x-min-permissions: isProjectManager
  /v2/workspaces/{workspaceId}/projects/{projectId}/wbs/unified:
    get:
      description: Returns merged WBS from both Firestore and MySQL with sync status
        for each item. Items are classified as 'synced', 'firestore_only', or 'mysql_only'.
      operationId: v2_getUnifiedWbs
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Project identifier
        in: path
        name: projectId
        required: true
        type: integer
      - description: Return as tree structure (default false)
        in: query
        name: treeStructure
        required: false
        type: boolean
      - description: Required header for Firestore-based endpoints
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: true
        type: string
      responses:
        200:
          description: Unified WBS retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    mysql_wbs_id:
                      description: MySQL wbs_id (null for firestore_only items)
                      type: integer
                    parent_wbs_id:
                      type: string
                    source:
                      enum:
                      - firestore
                      - mysql
                      type: string
                    sync_status:
                      enum:
                      - synced
                      - firestore_only
                      - mysql_only
                      type: string
                    wbs_id:
                      description: Firestore UUID (null for mysql_only items)
                      type: string
                    wbs_name:
                      type: string
                  type: object
                type: array
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get unified WBS with sync status
      tags:
      - WBS
  /v2/workspaces/{workspaceId}/reports/cost-forecast/projects:
    get:
      description: Returns cost forecast data with budget variance for all projects
        in workspace
      operationId: v2_getCostForecastProjects
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: List of cost forecast projects
          schema:
            properties:
              data:
                items:
                  properties:
                    contractValue:
                      type: number
                    costToComplete:
                      type: number
                    costToDate:
                      type: number
                    currentBudget:
                      type: number
                    forecastFinal:
                      type: number
                    id:
                      type: string
                    percentComplete:
                      type: number
                    projectName:
                      type: string
                    status:
                      type: string
                    variance:
                      type: number
                  type: object
                type: array
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Get cost forecast projects list
      tags:
      - Reports
  /v2/workspaces/{workspaceId}/reports/cost-forecast/summary:
    get:
      description: Returns aggregated cost-to-complete forecast metrics with budget
        variance across all projects
      operationId: v2_getCostForecastSummary
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: Cost forecast summary data
          schema:
            properties:
              data:
                properties:
                  costToComplete:
                    type: number
                  costToCompletePercentage:
                    type: number
                  forecastVariance:
                    type: number
                  forecastVariancePercentage:
                    type: number
                  totalCostToDate:
                    type: number
                  totalCostToDateBudget:
                    type: number
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Get cost forecast summary metrics for workspace
      tags:
      - Reports
  /v2/workspaces/{workspaceId}/reports/wip/projects:
    get:
      description: Returns Work in Progress data for all projects in workspace
      operationId: v2_getWIPProjects
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: List of WIP projects
          schema:
            properties:
              data:
                items:
                  properties:
                    certifiedPercentage:
                      type: number
                    certifiedToDate:
                      type: number
                    claimedPercentage:
                      type: number
                    claimedToDate:
                      type: number
                    contractValue:
                      type: number
                    costToComplete:
                      type: number
                    costToDate:
                      type: number
                    forecastFinal:
                      type: number
                    forecastMargin:
                      type: number
                    forecastMarginPercentage:
                      type: number
                    id:
                      type: string
                    percentageComplete:
                      type: number
                    projectName:
                      type: string
                  type: object
                type: array
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Get WIP projects list
      tags:
      - Reports
  /v2/workspaces/{workspaceId}/reports/wip/summary:
    get:
      description: Returns Work in Progress summary metrics aggregated across all
        projects in workspace
      operationId: v2_getWIPSummary
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: WIP summary data
          schema:
            properties:
              data:
                properties:
                  activeProjects:
                    type: integer
                  certifiedPercentage:
                    type: number
                  claimedPercentage:
                    type: number
                  costToComplete:
                    type: number
                  costToCompletePercentage:
                    type: number
                  totalCertified:
                    type: number
                  totalClaimed:
                    type: number
                  totalContractValue:
                    type: number
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Get WIP summary metrics for workspace
      tags:
      - Reports
  /v2/workspaces/{workspaceId}/resources:
    get:
      description: Retrieves resources for a specific workspace. Supports both legacy
        (MySQL/BigQuery) and Firestore implementations via X-Horizon-Product header.
      operationId: v2_getWorkspaceResources
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Optional header to enable Firestore-based implementation with
          enhanced features
        enum:
        - 'true'
        in: header
        name: X-Horizon-Product
        required: false
        type: string
      - description: Search query for resource name, type, or description (Firestore
          only)
        in: query
        name: q
        required: false
        type: string
      - description: Filter by resource type
        in: query
        name: resource_type
        required: false
        type: string
      - description: Filter by project ID
        in: query
        name: project_id
        required: false
        type: integer
      - default: 100
        description: Maximum number of resources to return (Firestore only)
        in: query
        maximum: 1000
        minimum: 1
        name: limit
        required: false
        type: integer
      - default: 0
        description: Number of resources to skip for pagination (Firestore only)
        in: query
        minimum: 0
        name: offset
        required: false
        type: integer
      responses:
        200:
          description: Resources retrieved successfully
        400:
          description: Invalid request parameters
        401:
          description: Unauthorized
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get resources for workspace
      tags:
      - Resources
  /v2/workspaces/{workspaceId}/roles:
    get:
      description: Retrieve all roles for the specified workspace
      operationId: v2_listWorkspaceRoles
      parameters:
      - description: Workspace identifier
        in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: List of roles
          schema:
            properties:
              data:
                properties:
                  items:
                    items:
                      properties:
                        createdAt:
                          description: Creation timestamp
                          type: string
                        createdBy:
                          description: User who created the role
                          type: string
                        description:
                          description: Role description
                          type: string
                        features:
                          description: Features and permissions
                          items:
                            type: object
                          type: array
                        id:
                          description: Role ID
                          type: string
                        name:
                          description: Role name
                          type: string
                        updatedAt:
                          description: Last update timestamp
                          type: string
                        workspaceId:
                          description: Workspace ID
                          type: string
                      type: object
                    type: array
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: List roles for workspace
      tags:
      - Roles
    post:
      operationId: v2_createWorkspaceRole
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            description:
              description: Role description
              type: string
            features:
              description: Features and permissions
              items:
                type: object
              type: array
            name:
              description: Role name
              type: string
          required:
          - name
          type: object
      responses:
        201:
          description: Role created
          schema:
            properties:
              data:
                properties:
                  createdBy:
                    description: User who created the role
                    type: string
                  description:
                    description: Role description
                    type: string
                  features:
                    description: Features and permissions
                    items:
                      type: object
                    type: array
                  id:
                    description: Role ID
                    type: string
                  name:
                    description: Role name
                    type: string
                  workspaceId:
                    description: Workspace ID
                    type: string
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Create a new role
      tags:
      - Roles
  /v2/workspaces/{workspaceId}/roles/{roleId}:
    delete:
      operationId: v2_deleteWorkspaceRole
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: roleId
        required: true
        type: string
      responses:
        200:
          description: Deleted
          schema:
            properties:
              data:
                properties:
                  deleted:
                    description: Deletion status
                    type: boolean
                  id:
                    description: Deleted role ID
                    type: string
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Delete role
      tags:
      - Roles
    get:
      operationId: v2_getWorkspaceRole
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: roleId
        required: true
        type: string
      responses:
        200:
          description: Role details
          schema:
            properties:
              data:
                properties:
                  createdAt:
                    description: Creation timestamp
                    type: string
                  createdBy:
                    description: User who created the role
                    type: string
                  description:
                    description: Role description
                    type: string
                  features:
                    description: Features and permissions
                    items:
                      type: object
                    type: array
                  id:
                    description: Role ID
                    type: string
                  name:
                    description: Role name
                    type: string
                  updatedAt:
                    description: Last update timestamp
                    type: string
                  workspaceId:
                    description: Workspace ID
                    type: string
                type: object
              ok:
                type: boolean
            type: object
        404:
          description: Role not found
      security:
      - JWT_v2: []
      summary: Get role by ID
      tags:
      - Roles
    patch:
      operationId: v2_updateWorkspaceRole
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: roleId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            description:
              description: Role description
              type: string
            features:
              description: Features and permissions
              items:
                type: object
              type: array
            name:
              description: Role name
              type: string
          type: object
      responses:
        200:
          description: Updated role
          schema:
            properties:
              data:
                properties:
                  createdAt:
                    description: Creation timestamp
                    type: string
                  createdBy:
                    description: User who created the role
                    type: string
                  description:
                    description: Role description
                    type: string
                  features:
                    description: Features and permissions
                    items:
                      type: object
                    type: array
                  id:
                    description: Role ID
                    type: string
                  name:
                    description: Role name
                    type: string
                  updatedAt:
                    description: Last update timestamp
                    type: string
                  workspaceId:
                    description: Workspace ID
                    type: string
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Update role
      tags:
      - Roles
  /v2/workspaces/{workspaceId}/signin-records:
    get:
      description: 'List signin records for a workspace with optional filtering.

        Results are ordered by created_at descending (newest first).

        '
      operationId: v2_v2_listSigninRecords
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Filter by project name
        in: query
        name: project
        type: string
      - description: Filter by status
        enum:
        - signed_in
        - signed_out
        in: query
        name: status
        type: string
      - description: Filter by mobile number (will be normalized)
        in: query
        name: mobile
        type: string
      - default: 1
        description: Page number (1-based)
        in: query
        name: page
        type: integer
      - default: 50
        description: Items per page
        in: query
        maximum: 100
        name: limit
        type: integer
      responses:
        200:
          description: Signin records retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    created_at:
                      format: date-time
                      type: string
                    deleted_at:
                      description: When the record was soft-deleted
                      format: date-time
                      type: string
                    ended_at:
                      description: When the worker signed out
                      format: date-time
                      type: string
                    first_name:
                      type: string
                    id:
                      description: Document ID ({workspaceId}_{normalizedMobile})
                      type: string
                    is_deleted:
                      type: boolean
                    last_name:
                      type: string
                    mobile:
                      description: Normalized mobile number
                      type: string
                    mobile_raw:
                      description: Original mobile number as entered
                      type: string
                    notes:
                      description: Optional notes
                      type: string
                    project:
                      description: Project name from DS Site form
                      type: string
                    source_account_id:
                      description: DS Site account ID
                      type: string
                    source_form_id:
                      description: DS Site sign-in form ID
                      type: string
                    source_signout_form_id:
                      description: DS Site sign-out form ID
                      type: string
                    started_at:
                      description: When the worker signed in
                      format: date-time
                      type: string
                    status:
                      description: Current status
                      enum:
                      - signed_in
                      - signed_out
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                    worker_name:
                      description: Combined first and last name
                      type: string
                    workspace_id:
                      type: string
                  type: object
                type: array
              message:
                type: string
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  total_count:
                    type: integer
                type: object
            type: object
        400:
          description: Bad request
        401:
          description: Unauthorized
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List signin records
      tags:
      - SigninRecords
  /v2/workspaces/{workspaceId}/signin-records/{recordId}:
    patch:
      description: 'Update a signin record. Only certain fields can be modified:

        - is_deleted: Soft delete the record

        - notes: Add notes to the record

        - status: Update status (e.g., "signed_out")

        - ended_at: Sign-out timestamp (auto-filled when status changes to "signed_out"
        if not provided)

        '
      operationId: v2_v2_updateSigninRecord
      parameters:
      - description: Workspace ID
        in: path
        name: workspaceId
        required: true
        type: string
      - description: Signin record ID ({workspaceId}_{normalizedMobile})
        in: path
        name: recordId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            ended_at:
              description: Sign-out timestamp (auto-filled when status changes to
                "signed_out" if not provided)
              format: date-time
              type: string
            is_deleted:
              description: Set to true to soft delete the record
              type: boolean
            notes:
              description: Notes to add to the record
              type: string
            status:
              description: New status
              enum:
              - signed_in
              - signed_out
              type: string
          type: object
      responses:
        200:
          description: Signin record updated successfully
          schema:
            properties:
              data:
                properties:
                  created_at:
                    format: date-time
                    type: string
                  deleted_at:
                    description: When the record was soft-deleted
                    format: date-time
                    type: string
                  ended_at:
                    description: When the worker signed out
                    format: date-time
                    type: string
                  first_name:
                    type: string
                  id:
                    type: string
                  is_deleted:
                    type: boolean
                  last_name:
                    type: string
                  mobile:
                    description: Normalized mobile number
                    type: string
                  mobile_raw:
                    description: Original mobile number as entered
                    type: string
                  notes:
                    type: string
                  project:
                    description: Project name from DS Site form
                    type: string
                  source_signout_form_id:
                    description: DS Site sign-out form ID
                    type: string
                  started_at:
                    format: date-time
                    type: string
                  status:
                    description: Current status
                    enum:
                    - signed_in
                    - signed_out
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  worker_name:
                    type: string
                  workspace_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - no valid fields to update
        401:
          description: Unauthorized
        404:
          description: Signin record not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update signin record
      tags:
      - SigninRecords
  /v2/workspaces/{workspaceId}/subcontractors:
    get:
      description: Retrieve all subcontractor extended metadata for a workspace with
        optional filtering
      operationId: v2_listSubcontractorDetails
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - description: Full-text search across trade specialties, service regions, and
          notes
        in: query
        name: search
        required: false
        type: string
      - description: Filter by status (preferred, active, under_review, blocked)
        in: query
        name: status
        required: false
        type: string
      - description: Filter by trade specialty
        in: query
        name: trade
        required: false
        type: string
      - description: Filter by service region
        in: query
        name: region
        required: false
        type: string
      - description: Comma separated list of tags to match (any match)
        in: query
        name: tags
        required: false
        type: string
      - default: false
        description: Include soft deleted records when true
        in: query
        name: includeDeleted
        required: false
        type: boolean
      - default: 1
        description: Result page to return
        in: query
        name: page
        required: false
        type: integer
      - default: 50
        description: Number of items per page
        in: query
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Subcontractor details list
          schema:
            properties:
              limit:
                type: integer
              page:
                type: integer
              subcontractors:
                items:
                  properties:
                    certifications:
                      description: List of certifications (e.g., ["ISO9001", "SafeWork"])
                      items:
                        type: string
                      type: array
                    communication_rating:
                      description: Communication performance rating (0-5)
                      maximum: 5
                      minimum: 0
                      type: number
                    company_size:
                      description: Company size classification
                      enum:
                      - small
                      - medium
                      - large
                      type: string
                    contracts:
                      description: Nested collection of contract references
                      items:
                        properties:
                          contract_id:
                            type: string
                          contract_value:
                            type: number
                          end_date:
                            format: date
                            type: string
                          project_id:
                            type: integer
                          project_name:
                            type: string
                          start_date:
                            format: date
                            type: string
                          status:
                            enum:
                            - active
                            - completed
                            - terminated
                            type: string
                        type: object
                      type: array
                    created_at:
                      format: date-time
                      type: string
                    created_by:
                      type: string
                    deleted_at:
                      format: date-time
                      type: string
                    deleted_by:
                      type: string
                    engagement_log:
                      description: Nested collection of engagement history
                      items:
                        properties:
                          date:
                            format: date-time
                            type: string
                          description:
                            type: string
                          engagement_id:
                            type: string
                          logged_by:
                            type: string
                          logged_by_id:
                            type: string
                          type:
                            enum:
                            - meeting
                            - email
                            - phone_call
                            - note
                            type: string
                        type: object
                      type: array
                    global_company_id:
                      type: integer
                    id:
                      description: Firestore document ID
                      type: string
                    insurance_expiry:
                      description: Insurance expiry date (ISO format)
                      format: date
                      type: string
                    is_deleted:
                      type: boolean
                    notes:
                      description: Internal notes about the subcontractor
                      type: string
                    overall_rating:
                      description: Overall performance rating (0-5)
                      maximum: 5
                      minimum: 0
                      type: number
                    performance_reviews:
                      description: Nested collection of performance reviews
                      items:
                        properties:
                          comments:
                            type: string
                          date:
                            format: date-time
                            type: string
                          overall_score:
                            maximum: 10
                            minimum: 0
                            type: number
                          project_id:
                            type: integer
                          quality_score:
                            maximum: 10
                            minimum: 0
                            type: number
                          review_id:
                            type: string
                          reviewer_id:
                            type: string
                          reviewer_name:
                            type: string
                          safety_score:
                            maximum: 10
                            minimum: 0
                            type: number
                          timeliness_score:
                            maximum: 10
                            minimum: 0
                            type: number
                        type: object
                      type: array
                    quality_rating:
                      description: Quality performance rating (0-5)
                      maximum: 5
                      minimum: 0
                      type: number
                    safety_rating:
                      description: Safety performance rating (0-5)
                      maximum: 5
                      minimum: 0
                      type: number
                    service_regions:
                      description: List of service regions (e.g., ["NSW", "VIC"])
                      items:
                        type: string
                      type: array
                    status:
                      description: Subcontractor status
                      enum:
                      - preferred
                      - active
                      - under_review
                      - blocked
                      type: string
                    tags:
                      description: Custom tags
                      items:
                        type: string
                      type: array
                    timeliness_rating:
                      description: Timeliness performance rating (0-5)
                      maximum: 5
                      minimum: 0
                      type: number
                    trade_specialties:
                      description: List of trade specialties (e.g., ["Electrical",
                        "HVAC"])
                      items:
                        type: string
                      type: array
                    updated_at:
                      format: date-time
                      type: string
                    updated_by:
                      type: string
                    workspace_id:
                      type: string
                  type: object
                type: array
              total_count:
                type: integer
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: List subcontractor extra details
      tags:
      - Subcontractor Extra Details
  /v2/workspaces/{workspaceId}/subcontractors/{globalCompanyId}/details:
    delete:
      description: Soft delete extended metadata for a subcontractor
      operationId: v2_deleteSubcontractorDetails
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: globalCompanyId
        required: true
        type: integer
      responses:
        200:
          description: Soft deleted subcontractor details
          schema:
            properties:
              deleted_at:
                format: date-time
                type: string
              deleted_by:
                type: string
              global_company_id:
                type: integer
              is_deleted:
                type: boolean
              workspace_id:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Subcontractor details not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Soft delete subcontractor extra details
      tags:
      - Subcontractor Extra Details
    get:
      description: Get extended metadata for a specific subcontractor. Auto-creates
        with defaults if not exists.
      operationId: v2_getSubcontractorDetails
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: globalCompanyId
        required: true
        type: integer
      responses:
        200:
          description: Existing subcontractor details
          schema:
            properties:
              certifications:
                description: List of certifications (e.g., ["ISO9001", "SafeWork"])
                items:
                  type: string
                type: array
              communication_rating:
                description: Communication performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              company_size:
                description: Company size classification
                enum:
                - small
                - medium
                - large
                type: string
              contracts:
                description: Nested collection of contract references
                items:
                  properties:
                    contract_id:
                      type: string
                    contract_value:
                      type: number
                    end_date:
                      format: date
                      type: string
                    project_id:
                      type: integer
                    project_name:
                      type: string
                    start_date:
                      format: date
                      type: string
                    status:
                      enum:
                      - active
                      - completed
                      - terminated
                      type: string
                  type: object
                type: array
              created_at:
                format: date-time
                type: string
              created_by:
                type: string
              deleted_at:
                format: date-time
                type: string
              deleted_by:
                type: string
              engagement_log:
                description: Nested collection of engagement history
                items:
                  properties:
                    date:
                      format: date-time
                      type: string
                    description:
                      type: string
                    engagement_id:
                      type: string
                    logged_by:
                      type: string
                    logged_by_id:
                      type: string
                    type:
                      enum:
                      - meeting
                      - email
                      - phone_call
                      - note
                      type: string
                  type: object
                type: array
              global_company_id:
                type: integer
              id:
                description: Firestore document ID
                type: string
              insurance_expiry:
                description: Insurance expiry date (ISO format)
                format: date
                type: string
              is_deleted:
                type: boolean
              notes:
                description: Internal notes about the subcontractor
                type: string
              overall_rating:
                description: Overall performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              performance_reviews:
                description: Nested collection of performance reviews
                items:
                  properties:
                    comments:
                      type: string
                    date:
                      format: date-time
                      type: string
                    overall_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    project_id:
                      type: integer
                    quality_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    review_id:
                      type: string
                    reviewer_id:
                      type: string
                    reviewer_name:
                      type: string
                    safety_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    timeliness_score:
                      maximum: 10
                      minimum: 0
                      type: number
                  type: object
                type: array
              quality_rating:
                description: Quality performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              safety_rating:
                description: Safety performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              service_regions:
                description: List of service regions (e.g., ["NSW", "VIC"])
                items:
                  type: string
                type: array
              status:
                description: Subcontractor status
                enum:
                - preferred
                - active
                - under_review
                - blocked
                type: string
              tags:
                description: Custom tags
                items:
                  type: string
                type: array
              timeliness_rating:
                description: Timeliness performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              trade_specialties:
                description: List of trade specialties (e.g., ["Electrical", "HVAC"])
                items:
                  type: string
                type: array
              updated_at:
                format: date-time
                type: string
              updated_by:
                type: string
              workspace_id:
                type: string
            type: object
        201:
          description: Auto-created subcontractor details (first access)
          schema:
            properties:
              certifications:
                description: List of certifications (e.g., ["ISO9001", "SafeWork"])
                items:
                  type: string
                type: array
              communication_rating:
                description: Communication performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              company_size:
                description: Company size classification
                enum:
                - small
                - medium
                - large
                type: string
              contracts:
                description: Nested collection of contract references
                items:
                  properties:
                    contract_id:
                      type: string
                    contract_value:
                      type: number
                    end_date:
                      format: date
                      type: string
                    project_id:
                      type: integer
                    project_name:
                      type: string
                    start_date:
                      format: date
                      type: string
                    status:
                      enum:
                      - active
                      - completed
                      - terminated
                      type: string
                  type: object
                type: array
              created_at:
                format: date-time
                type: string
              created_by:
                type: string
              deleted_at:
                format: date-time
                type: string
              deleted_by:
                type: string
              engagement_log:
                description: Nested collection of engagement history
                items:
                  properties:
                    date:
                      format: date-time
                      type: string
                    description:
                      type: string
                    engagement_id:
                      type: string
                    logged_by:
                      type: string
                    logged_by_id:
                      type: string
                    type:
                      enum:
                      - meeting
                      - email
                      - phone_call
                      - note
                      type: string
                  type: object
                type: array
              global_company_id:
                type: integer
              id:
                description: Firestore document ID
                type: string
              insurance_expiry:
                description: Insurance expiry date (ISO format)
                format: date
                type: string
              is_deleted:
                type: boolean
              notes:
                description: Internal notes about the subcontractor
                type: string
              overall_rating:
                description: Overall performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              performance_reviews:
                description: Nested collection of performance reviews
                items:
                  properties:
                    comments:
                      type: string
                    date:
                      format: date-time
                      type: string
                    overall_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    project_id:
                      type: integer
                    quality_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    review_id:
                      type: string
                    reviewer_id:
                      type: string
                    reviewer_name:
                      type: string
                    safety_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    timeliness_score:
                      maximum: 10
                      minimum: 0
                      type: number
                  type: object
                type: array
              quality_rating:
                description: Quality performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              safety_rating:
                description: Safety performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              service_regions:
                description: List of service regions (e.g., ["NSW", "VIC"])
                items:
                  type: string
                type: array
              status:
                description: Subcontractor status
                enum:
                - preferred
                - active
                - under_review
                - blocked
                type: string
              tags:
                description: Custom tags
                items:
                  type: string
                type: array
              timeliness_rating:
                description: Timeliness performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              trade_specialties:
                description: List of trade specialties (e.g., ["Electrical", "HVAC"])
                items:
                  type: string
                type: array
              updated_at:
                format: date-time
                type: string
              updated_by:
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Invalid global company ID
        401:
          description: Unauthorized
        403:
          description: Forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get subcontractor extra details
      tags:
      - Subcontractor Extra Details
    patch:
      description: Update extended metadata fields for a subcontractor
      operationId: v2_updateSubcontractorDetails
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: globalCompanyId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            certifications:
              items:
                type: string
              type: array
            communication_rating:
              maximum: 5
              minimum: 0
              type: number
            company_size:
              enum:
              - small
              - medium
              - large
              type: string
            contracts:
              items:
                properties:
                  contract_id:
                    type: string
                  contract_value:
                    type: number
                  end_date:
                    format: date
                    type: string
                  project_id:
                    type: integer
                  project_name:
                    type: string
                  start_date:
                    format: date
                    type: string
                  status:
                    enum:
                    - active
                    - completed
                    - terminated
                    type: string
                type: object
              type: array
            engagement_log:
              items:
                properties:
                  date:
                    format: date-time
                    type: string
                  description:
                    type: string
                  engagement_id:
                    type: string
                  logged_by:
                    type: string
                  logged_by_id:
                    type: string
                  type:
                    enum:
                    - meeting
                    - email
                    - phone_call
                    - note
                    type: string
                type: object
              type: array
            insurance_expiry:
              format: date
              type: string
            notes:
              type: string
            overall_rating:
              maximum: 5
              minimum: 0
              type: number
            performance_reviews:
              items:
                properties:
                  comments:
                    type: string
                  date:
                    format: date-time
                    type: string
                  overall_score:
                    maximum: 10
                    minimum: 0
                    type: number
                  project_id:
                    type: integer
                  quality_score:
                    maximum: 10
                    minimum: 0
                    type: number
                  review_id:
                    type: string
                  reviewer_id:
                    type: string
                  reviewer_name:
                    type: string
                  safety_score:
                    maximum: 10
                    minimum: 0
                    type: number
                  timeliness_score:
                    maximum: 10
                    minimum: 0
                    type: number
                type: object
              type: array
            quality_rating:
              maximum: 5
              minimum: 0
              type: number
            safety_rating:
              maximum: 5
              minimum: 0
              type: number
            service_regions:
              items:
                type: string
              type: array
            status:
              enum:
              - preferred
              - active
              - under_review
              - blocked
              type: string
            tags:
              items:
                type: string
              type: array
            timeliness_rating:
              maximum: 5
              minimum: 0
              type: number
            trade_specialties:
              items:
                type: string
              type: array
          type: object
      responses:
        200:
          description: Updated subcontractor details
          schema:
            properties:
              certifications:
                description: List of certifications (e.g., ["ISO9001", "SafeWork"])
                items:
                  type: string
                type: array
              communication_rating:
                description: Communication performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              company_size:
                description: Company size classification
                enum:
                - small
                - medium
                - large
                type: string
              contracts:
                description: Nested collection of contract references
                items:
                  properties:
                    contract_id:
                      type: string
                    contract_value:
                      type: number
                    end_date:
                      format: date
                      type: string
                    project_id:
                      type: integer
                    project_name:
                      type: string
                    start_date:
                      format: date
                      type: string
                    status:
                      enum:
                      - active
                      - completed
                      - terminated
                      type: string
                  type: object
                type: array
              created_at:
                format: date-time
                type: string
              created_by:
                type: string
              deleted_at:
                format: date-time
                type: string
              deleted_by:
                type: string
              engagement_log:
                description: Nested collection of engagement history
                items:
                  properties:
                    date:
                      format: date-time
                      type: string
                    description:
                      type: string
                    engagement_id:
                      type: string
                    logged_by:
                      type: string
                    logged_by_id:
                      type: string
                    type:
                      enum:
                      - meeting
                      - email
                      - phone_call
                      - note
                      type: string
                  type: object
                type: array
              global_company_id:
                type: integer
              id:
                description: Firestore document ID
                type: string
              insurance_expiry:
                description: Insurance expiry date (ISO format)
                format: date
                type: string
              is_deleted:
                type: boolean
              notes:
                description: Internal notes about the subcontractor
                type: string
              overall_rating:
                description: Overall performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              performance_reviews:
                description: Nested collection of performance reviews
                items:
                  properties:
                    comments:
                      type: string
                    date:
                      format: date-time
                      type: string
                    overall_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    project_id:
                      type: integer
                    quality_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    review_id:
                      type: string
                    reviewer_id:
                      type: string
                    reviewer_name:
                      type: string
                    safety_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    timeliness_score:
                      maximum: 10
                      minimum: 0
                      type: number
                  type: object
                type: array
              quality_rating:
                description: Quality performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              safety_rating:
                description: Safety performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              service_regions:
                description: List of service regions (e.g., ["NSW", "VIC"])
                items:
                  type: string
                type: array
              status:
                description: Subcontractor status
                enum:
                - preferred
                - active
                - under_review
                - blocked
                type: string
              tags:
                description: Custom tags
                items:
                  type: string
                type: array
              timeliness_rating:
                description: Timeliness performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              trade_specialties:
                description: List of trade specialties (e.g., ["Electrical", "HVAC"])
                items:
                  type: string
                type: array
              updated_at:
                format: date-time
                type: string
              updated_by:
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Validation error
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Subcontractor details not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Update subcontractor extra details
      tags:
      - Subcontractor Extra Details
    post:
      description: Explicitly create extended metadata for a subcontractor
      operationId: v2_createSubcontractorDetails
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: globalCompanyId
        required: true
        type: integer
      - in: body
        name: body
        required: true
        schema:
          properties:
            certifications:
              items:
                type: string
              type: array
            communication_rating:
              maximum: 5
              minimum: 0
              type: number
            company_size:
              enum:
              - small
              - medium
              - large
              type: string
            contracts:
              items:
                properties:
                  contract_id:
                    type: string
                  contract_value:
                    type: number
                  end_date:
                    format: date
                    type: string
                  project_id:
                    type: integer
                  project_name:
                    type: string
                  start_date:
                    format: date
                    type: string
                  status:
                    enum:
                    - active
                    - completed
                    - terminated
                    type: string
                type: object
              type: array
            engagement_log:
              items:
                properties:
                  date:
                    format: date-time
                    type: string
                  description:
                    type: string
                  engagement_id:
                    type: string
                  logged_by:
                    type: string
                  logged_by_id:
                    type: string
                  type:
                    enum:
                    - meeting
                    - email
                    - phone_call
                    - note
                    type: string
                type: object
              type: array
            insurance_expiry:
              format: date
              type: string
            notes:
              type: string
            overall_rating:
              maximum: 5
              minimum: 0
              type: number
            performance_reviews:
              items:
                properties:
                  comments:
                    type: string
                  date:
                    format: date-time
                    type: string
                  overall_score:
                    maximum: 10
                    minimum: 0
                    type: number
                  project_id:
                    type: integer
                  quality_score:
                    maximum: 10
                    minimum: 0
                    type: number
                  review_id:
                    type: string
                  reviewer_id:
                    type: string
                  reviewer_name:
                    type: string
                  safety_score:
                    maximum: 10
                    minimum: 0
                    type: number
                  timeliness_score:
                    maximum: 10
                    minimum: 0
                    type: number
                type: object
              type: array
            quality_rating:
              maximum: 5
              minimum: 0
              type: number
            safety_rating:
              maximum: 5
              minimum: 0
              type: number
            service_regions:
              items:
                type: string
              type: array
            status:
              enum:
              - preferred
              - active
              - under_review
              - blocked
              type: string
            tags:
              items:
                type: string
              type: array
            timeliness_rating:
              maximum: 5
              minimum: 0
              type: number
            trade_specialties:
              items:
                type: string
              type: array
          type: object
      responses:
        201:
          description: Created subcontractor details
          schema:
            properties:
              certifications:
                description: List of certifications (e.g., ["ISO9001", "SafeWork"])
                items:
                  type: string
                type: array
              communication_rating:
                description: Communication performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              company_size:
                description: Company size classification
                enum:
                - small
                - medium
                - large
                type: string
              contracts:
                description: Nested collection of contract references
                items:
                  properties:
                    contract_id:
                      type: string
                    contract_value:
                      type: number
                    end_date:
                      format: date
                      type: string
                    project_id:
                      type: integer
                    project_name:
                      type: string
                    start_date:
                      format: date
                      type: string
                    status:
                      enum:
                      - active
                      - completed
                      - terminated
                      type: string
                  type: object
                type: array
              created_at:
                format: date-time
                type: string
              created_by:
                type: string
              deleted_at:
                format: date-time
                type: string
              deleted_by:
                type: string
              engagement_log:
                description: Nested collection of engagement history
                items:
                  properties:
                    date:
                      format: date-time
                      type: string
                    description:
                      type: string
                    engagement_id:
                      type: string
                    logged_by:
                      type: string
                    logged_by_id:
                      type: string
                    type:
                      enum:
                      - meeting
                      - email
                      - phone_call
                      - note
                      type: string
                  type: object
                type: array
              global_company_id:
                type: integer
              id:
                description: Firestore document ID
                type: string
              insurance_expiry:
                description: Insurance expiry date (ISO format)
                format: date
                type: string
              is_deleted:
                type: boolean
              notes:
                description: Internal notes about the subcontractor
                type: string
              overall_rating:
                description: Overall performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              performance_reviews:
                description: Nested collection of performance reviews
                items:
                  properties:
                    comments:
                      type: string
                    date:
                      format: date-time
                      type: string
                    overall_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    project_id:
                      type: integer
                    quality_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    review_id:
                      type: string
                    reviewer_id:
                      type: string
                    reviewer_name:
                      type: string
                    safety_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    timeliness_score:
                      maximum: 10
                      minimum: 0
                      type: number
                  type: object
                type: array
              quality_rating:
                description: Quality performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              safety_rating:
                description: Safety performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              service_regions:
                description: List of service regions (e.g., ["NSW", "VIC"])
                items:
                  type: string
                type: array
              status:
                description: Subcontractor status
                enum:
                - preferred
                - active
                - under_review
                - blocked
                type: string
              tags:
                description: Custom tags
                items:
                  type: string
                type: array
              timeliness_rating:
                description: Timeliness performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              trade_specialties:
                description: List of trade specialties (e.g., ["Electrical", "HVAC"])
                items:
                  type: string
                type: array
              updated_at:
                format: date-time
                type: string
              updated_by:
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Validation error or already exists
        401:
          description: Unauthorized
        403:
          description: Forbidden
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Create subcontractor extra details
      tags:
      - Subcontractor Extra Details
  /v2/workspaces/{workspaceId}/subcontractors/{globalCompanyId}/details/restore:
    post:
      description: Restore soft deleted extended metadata for a subcontractor
      operationId: v2_restoreSubcontractorDetails
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: globalCompanyId
        required: true
        type: integer
      responses:
        200:
          description: Restored subcontractor details
          schema:
            properties:
              certifications:
                description: List of certifications (e.g., ["ISO9001", "SafeWork"])
                items:
                  type: string
                type: array
              communication_rating:
                description: Communication performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              company_size:
                description: Company size classification
                enum:
                - small
                - medium
                - large
                type: string
              contracts:
                description: Nested collection of contract references
                items:
                  properties:
                    contract_id:
                      type: string
                    contract_value:
                      type: number
                    end_date:
                      format: date
                      type: string
                    project_id:
                      type: integer
                    project_name:
                      type: string
                    start_date:
                      format: date
                      type: string
                    status:
                      enum:
                      - active
                      - completed
                      - terminated
                      type: string
                  type: object
                type: array
              created_at:
                format: date-time
                type: string
              created_by:
                type: string
              deleted_at:
                format: date-time
                type: string
              deleted_by:
                type: string
              engagement_log:
                description: Nested collection of engagement history
                items:
                  properties:
                    date:
                      format: date-time
                      type: string
                    description:
                      type: string
                    engagement_id:
                      type: string
                    logged_by:
                      type: string
                    logged_by_id:
                      type: string
                    type:
                      enum:
                      - meeting
                      - email
                      - phone_call
                      - note
                      type: string
                  type: object
                type: array
              global_company_id:
                type: integer
              id:
                description: Firestore document ID
                type: string
              insurance_expiry:
                description: Insurance expiry date (ISO format)
                format: date
                type: string
              is_deleted:
                type: boolean
              notes:
                description: Internal notes about the subcontractor
                type: string
              overall_rating:
                description: Overall performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              performance_reviews:
                description: Nested collection of performance reviews
                items:
                  properties:
                    comments:
                      type: string
                    date:
                      format: date-time
                      type: string
                    overall_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    project_id:
                      type: integer
                    quality_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    review_id:
                      type: string
                    reviewer_id:
                      type: string
                    reviewer_name:
                      type: string
                    safety_score:
                      maximum: 10
                      minimum: 0
                      type: number
                    timeliness_score:
                      maximum: 10
                      minimum: 0
                      type: number
                  type: object
                type: array
              quality_rating:
                description: Quality performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              safety_rating:
                description: Safety performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              service_regions:
                description: List of service regions (e.g., ["NSW", "VIC"])
                items:
                  type: string
                type: array
              status:
                description: Subcontractor status
                enum:
                - preferred
                - active
                - under_review
                - blocked
                type: string
              tags:
                description: Custom tags
                items:
                  type: string
                type: array
              timeliness_rating:
                description: Timeliness performance rating (0-5)
                maximum: 5
                minimum: 0
                type: number
              trade_specialties:
                description: List of trade specialties (e.g., ["Electrical", "HVAC"])
                items:
                  type: string
                type: array
              updated_at:
                format: date-time
                type: string
              updated_by:
                type: string
              workspace_id:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Deleted subcontractor details not found
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Restore subcontractor extra details
      tags:
      - Subcontractor Extra Details
  /v2/workspaces/{workspaceId}/tokens/{tokenId}:
    get:
      operationId: v2_getWorkpaceToken
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: tokenId
        required: true
        type: string
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get a token for a workspace
      tags:
      - Tokens
  /v2/workspaces/{workspaceId}/users:
    get:
      description: Returns all users and user details for a workspace
      operationId: v2_getWorkspaceUsers
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get users in a workspaces
      tags:
      - Users
    post:
      description: Creates user if not already exista and invites to workspace
      operationId: v2_postWorkspaceUsers
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            email:
              description: The email of the user
              type: string
            isWorkspaceDashboardViewer:
              description: bool indicating whether the user is a workspace viewer
                (default false)
              type: boolean
            isWorkspaceManager:
              description: bool indicating whether the user is a workspace manager
                (default false)
              type: boolean
            name:
              description: The name of the user like First Last
              type: string
            projects:
              description: array of project to add the user to in workspace
              items:
                properties:
                  isProjectManager:
                    description: bool indicating whether the user is a project manager
                      (default false)
                    type: boolean
                  isProjectViewer:
                    description: bool indicating whether the user is a project viewer
                      (default false)
                    type: boolean
                  isRevitUser:
                    description: bool indicating whether the user is a revit user
                      (default false)
                    type: boolean
                  team_bim_id:
                    description: The team id to add the user to on the project
                    type: integer
                required:
                - team_bim_id
                type: object
              type: array
          required:
          - email
          - name
          type: object
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Invite user to a workspace
      tags:
      - Users
  /v2/workspaces/{workspaceId}/users/email:
    post:
      description: Resends invite notification to an existing user in the workspace
      operationId: v2_postWorkspaceUsersEmail
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            email:
              description: The email of the user to resend invite to
              type: string
          required:
          - email
          type: object
      responses:
        200:
          description: Invite notification resent successfully
          schema:
            properties:
              data:
                properties:
                  kinde_id:
                    description: The Kinde ID of the user
                    type: string
                  message:
                    description: Additional message about the resend operation
                    type: string
                type: object
              message:
                description: Success message
                type: string
            type: object
        400:
          description: Bad Request - Invalid email, user not found, or user doesn't
            have workspace access
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Resend invite email to user in workspace
      tags:
      - Users
  /v2/workspaces/{workspaceId}/users/{userId}:
    patch:
      description: Edit workspace-level attributes of a user
      operationId: v2_patchWorkspaceUsers
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: userId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            isWorkspaceDashboardViewer:
              description: bool indicating whether the user isWorkspaceDashboardViewer
                (default false)
              type: boolean
            isWorkspaceManager:
              description: bool indicating whether the user isWorkspaceManager (default
                false)
              type: boolean
          type: object
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Edit a user in a workspace
      tags:
      - Users
    post:
      operationId: v2_postWorkspaceUserId
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: userId
        required: true
        type: string
      responses:
        200:
          description: A successful response
        401:
          description: Unauthorized
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Resend invite email to user in workspace
      tags:
      - Users
  /v2/workspaces/{workspaceId}/users_hz:
    get:
      description: Returns extended Horizon user records for the workspace (role assignment,
        department, status, etc.)
      operationId: v2_listHorizonUsers
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      responses:
        200:
          description: List of Horizon users
          schema:
            properties:
              data:
                properties:
                  items:
                    items:
                      properties:
                        department:
                          type: string
                        email:
                          type: string
                        full_name:
                          type: string
                        id:
                          description: Horizon user ID (typically kinde_id)
                          type: string
                        notes:
                          type: string
                        phone:
                          type: string
                        position:
                          type: string
                        require_2fa:
                          type: boolean
                        role_id:
                          type: string
                        status:
                          type: string
                      type: object
                    type: array
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: List Horizon users (extended user records) for a workspace
      tags:
      - Horizon Users
    post:
      operationId: v2_createHorizonUser
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            department:
              type: string
            email:
              type: string
            full_name:
              type: string
            id:
              description: Kinde user id (or unique user id) for the record
              type: string
            notes:
              type: string
            phone:
              type: string
            position:
              type: string
            require_2fa:
              type: boolean
            role_id:
              type: string
            status:
              type: string
          type: object
      responses:
        201:
          description: Horizon user created
          schema:
            properties:
              data:
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Create a Horizon user record
      tags:
      - Horizon Users
  /v2/workspaces/{workspaceId}/users_hz/{userId}:
    delete:
      operationId: v2_deleteHorizonUser
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: userId
        required: true
        type: string
      responses:
        200:
          description: Deleted
          schema:
            properties:
              data:
                properties:
                  deleted:
                    type: boolean
                  id:
                    type: string
                type: object
              ok:
                type: boolean
            type: object
      security:
      - JWT_v2: []
      summary: Delete (soft delete) Horizon user record
      tags:
      - Horizon Users
    get:
      operationId: v2_getHorizonUser
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: userId
        required: true
        type: string
      responses:
        200:
          description: Horizon user record
          schema:
            properties:
              data:
                type: object
              ok:
                type: boolean
            type: object
        404:
          description: Not found
      security:
      - JWT_v2: []
      summary: Get Horizon user record by ID
      tags:
      - Horizon Users
    patch:
      operationId: v2_updateHorizonUser
      parameters:
      - in: path
        name: workspaceId
        required: true
        type: string
      - in: path
        name: userId
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          description: Partial fields to update
          type: object
      responses:
        200:
          description: Updated Horizon user
      security:
      - JWT_v2: []
      summary: Update Horizon user record
      tags:
      - Horizon Users
  /v2/workspaces/{workspace_id}/case-variables/{entity_type}/{entity_id}:
    get:
      description: 'Resolves and returns variable values for a specific entity. Fetches
        the entity from Firestore and resolves all template variable values. Requires
        workspace authentication.

        **Integration with Document Templates:** Document sections and templates have
        a `case_entity_types` field that specifies which entity types are applicable.
        The backend uses this field to automatically resolve case variables when sending
        document templates via email, without requiring explicit `{"entity_type":
        "entity_id"}` mappings from the frontend.

        '
      operationId: v2_getHzNotificationCaseVariables
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - description: Type of entity (e.g., 'head_contract_claim')
        in: path
        name: entity_type
        required: true
        type: string
      - description: ID of the entity
        in: path
        name: entity_id
        required: true
        type: string
      responses:
        200:
          description: Variables resolved successfully
          schema:
            properties:
              data:
                additionalProperties: true
                description: Resolved variable values as key-value pairs
                type: object
              entity_id:
                description: ID of the entity
                type: string
              entity_type:
                description: Type of entity (e.g., head_contract_claim)
                type: string
              message:
                type: string
            type: object
        400:
          description: Bad request - invalid entity type or ID
        401:
          description: Unauthorized
        500:
          description: Internal server error
      security:
      - JWT_v2: []
      summary: Get Resolved Case Variables
      tags:
      - HzNotificationSenderV2
  /v2/workspaces/{workspace_id}/hz-document-templates:
    get:
      operationId: v2_listHzDocumentTemplates
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - default: 1
        description: Page number (1-indexed)
        in: query
        name: page
        type: integer
      - default: 50
        description: Items per page (max 100)
        in: query
        name: limit
        type: integer
      - description: Filter by category
        in: query
        name: category
        type: string
      - description: Filter by type
        in: query
        name: type
        type: string
      - description: Filter by status
        enum:
        - Draft
        - Published
        in: query
        name: status
        type: string
      - description: Search in title and tags
        in: query
        name: search
        type: string
      responses:
        200:
          description: Document templates retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    case_entity_types:
                      description: Entity types that can provide variables for this
                        template
                      items:
                        type: string
                      type: array
                    category:
                      type: string
                    content:
                      description: HTML content
                      type: string
                    created_at:
                      format: date-time
                      type: string
                    created_by:
                      type: string
                    id:
                      type: string
                    required_fields:
                      items:
                        type: string
                      type: array
                    status:
                      enum:
                      - Draft
                      - Published
                      type: string
                    tags:
                      items:
                        type: string
                      type: array
                    title:
                      type: string
                    type:
                      type: string
                    updated_at:
                      format: date-time
                      type: string
                    version:
                      type: string
                    workspace_id:
                      type: string
                  type: object
                type: array
              message:
                type: string
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  total_count:
                    type: integer
                  total_pages:
                    type: integer
                type: object
            type: object
        400:
          description: Bad request
        401:
          description: Unauthorized
      security:
      - JWT_v2: []
      summary: List all document templates for a workspace
      tags:
      - HzDocumentTemplates
    post:
      operationId: v2_createHzDocumentTemplate
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            case_entity_types:
              description: Entity types that can provide variables for this template
              items:
                type: string
              type: array
            category:
              description: Category name
              type: string
            content:
              description: HTML content
              type: string
            status:
              default: Draft
              description: Template status
              enum:
              - Draft
              - Published
              type: string
            tags:
              description: Searchable tags
              items:
                type: string
              type: array
            title:
              description: Template title
              type: string
            type:
              description: Type name
              type: string
            version:
              default: v1
              description: Version string
              type: string
          required:
          - title
          - category
          - type
          - content
          type: object
      responses:
        201:
          description: Document template created successfully
          schema:
            properties:
              data:
                properties:
                  case_entity_types:
                    items:
                      type: string
                    type: array
                  category:
                    type: string
                  content:
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  created_by:
                    type: string
                  id:
                    type: string
                  required_fields:
                    items:
                      type: string
                    type: array
                  status:
                    type: string
                  tags:
                    items:
                      type: string
                    type: array
                  title:
                    type: string
                  type:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  version:
                    type: string
                  workspace_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - validation failed
        401:
          description: Unauthorized
      security:
      - JWT_v2: []
      summary: Create a new document template
      tags:
      - HzDocumentTemplates
  /v2/workspaces/{workspace_id}/hz-document-templates/{template_id}:
    delete:
      operationId: v2_deleteHzDocumentTemplate
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - description: Document template ID
        in: path
        name: template_id
        required: true
        type: string
      responses:
        200:
          description: Document template deleted successfully
          schema:
            properties:
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden - workspace mismatch
        404:
          description: Document template not found
      security:
      - JWT_v2: []
      summary: Delete a document template (soft delete)
      tags:
      - HzDocumentTemplates
    get:
      operationId: v2_getHzDocumentTemplate
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - description: Document template ID
        in: path
        name: template_id
        required: true
        type: string
      responses:
        200:
          description: Document template retrieved successfully
          schema:
            properties:
              data:
                properties:
                  case_entity_types:
                    items:
                      type: string
                    type: array
                  category:
                    type: string
                  content:
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  created_by:
                    type: string
                  id:
                    type: string
                  required_fields:
                    items:
                      type: string
                    type: array
                  status:
                    type: string
                  tags:
                    items:
                      type: string
                    type: array
                  title:
                    type: string
                  type:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  version:
                    type: string
                  workspace_id:
                    type: string
                type: object
              message:
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Forbidden - workspace mismatch
        404:
          description: Document template not found
      security:
      - JWT_v2: []
      summary: Get a specific document template
      tags:
      - HzDocumentTemplates
    put:
      operationId: v2_updateHzDocumentTemplate
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - description: Document template ID
        in: path
        name: template_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            case_entity_types:
              description: Entity types that can provide variables
              items:
                type: string
              type: array
            category:
              description: Category name
              type: string
            content:
              description: HTML content
              type: string
            status:
              description: Template status
              enum:
              - Draft
              - Published
              type: string
            tags:
              description: Searchable tags
              items:
                type: string
              type: array
            title:
              description: Template title
              type: string
            type:
              description: Type name
              type: string
            version:
              description: Version string
              type: string
          type: object
      responses:
        200:
          description: Document template updated successfully
          schema:
            properties:
              data:
                properties:
                  case_entity_types:
                    items:
                      type: string
                    type: array
                  category:
                    type: string
                  content:
                    type: string
                  id:
                    type: string
                  required_fields:
                    items:
                      type: string
                    type: array
                  status:
                    type: string
                  tags:
                    items:
                      type: string
                    type: array
                  title:
                    type: string
                  type:
                    type: string
                  updated_at:
                    format: date-time
                    type: string
                  version:
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - validation failed
        401:
          description: Unauthorized
        403:
          description: Forbidden - workspace mismatch
        404:
          description: Document template not found
      security:
      - JWT_v2: []
      summary: Update a document template
      tags:
      - HzDocumentTemplates
  /v2/workspaces/{workspace_id}/hz-document-templates/{template_id}/send:
    post:
      description: 'Queue a document template to be sent as a PDF attachment via email.
        Uses the template''s category and type to look up the corresponding email
        template for subject and body content. The document template is converted
        to PDF and attached.

        '
      operationId: v2_sendHzDocumentTemplate
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - description: Document template ID
        in: path
        name: template_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            bcc_recipients:
              description: BCC recipients
              items:
                properties:
                  email:
                    type: string
                  name:
                    type: string
                type: object
              type: array
            cc_recipients:
              description: CC recipients
              items:
                properties:
                  email:
                    type: string
                  name:
                    type: string
                type: object
              type: array
            pdf_filename:
              description: Filename for the generated PDF
              type: string
            template_variables:
              additionalProperties: true
              description: Variables to substitute in template content
              type: object
            to_recipients:
              description: Primary recipients
              items:
                properties:
                  email:
                    description: Email address
                    type: string
                  name:
                    description: Display name
                    type: string
                required:
                - email
                type: object
              type: array
          required:
          - to_recipients
          - pdf_filename
          type: object
      responses:
        201:
          description: Document template email queued successfully
          schema:
            properties:
              data:
                properties:
                  category:
                    description: Template category (used for email template lookup)
                    type: string
                  created_at:
                    format: date-time
                    type: string
                  queue_id:
                    description: Queue item ID for tracking
                    type: string
                  recipient_count:
                    properties:
                      bcc:
                        type: integer
                      cc:
                        type: integer
                      to:
                        type: integer
                      total:
                        type: integer
                    type: object
                  status:
                    enum:
                    - pending
                    type: string
                  template_id:
                    description: Document template ID
                    type: string
                  template_title:
                    description: Title of the document template
                    type: string
                  type:
                    description: Template type (used for email template lookup)
                    type: string
                type: object
              message:
                type: string
            type: object
        400:
          description: Bad request - validation failed
        401:
          description: Unauthorized
        403:
          description: Forbidden - workspace mismatch
        404:
          description: Document template not found
      security:
      - JWT_v2: []
      summary: Send a document template via email
      tags:
      - HzDocumentTemplates
  /v2/workspaces/{workspace_id}/hz-form-links:
    get:
      operationId: v2_listFormLinks
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - description: Filter links by category
        enum:
        - HSEQ
        - Delivery
        in: query
        name: category
        required: false
        type: string
      - description: Filter links by form alias
        in: query
        name: form_alias
        required: false
        type: string
      - description: Text search across form_alias, display_label, description, and
          category
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of items per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Form links retrieved successfully
          schema:
            properties:
              items:
                items:
                  properties:
                    category:
                      enum:
                      - HSEQ
                      - Delivery
                      example: HSEQ
                      type: string
                    created_at:
                      example: '2025-11-03T10:30:00.123456Z'
                      format: date-time
                      type: string
                    created_by_user_id:
                      example: user_abc123
                      type: string
                    description:
                      example: Use this form to report safety incidents on site
                      type: string
                    display_label:
                      example: Incident Report Form
                      type: string
                    form_alias:
                      example: incident_report
                      type: string
                    id:
                      example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                      type: string
                    is_deleted:
                      example: false
                      type: boolean
                    updated_at:
                      example: '2025-11-03T10:30:00.123456Z'
                      format: date-time
                      type: string
                    workspace_id:
                      example: your-workspace-id
                      type: string
                  type: object
                type: array
              limit:
                example: 25
                type: integer
              page:
                example: 1
                type: integer
              source:
                example: firestore
                type: string
              total_count:
                example: 5
                type: integer
            type: object
        400:
          description: Bad request - invalid parameters
        401:
          description: Unauthorized
        403:
          description: Workspace ID mismatch
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: List all form links for a workspace
      tags:
      - HzFormLinks
    post:
      operationId: v2_createFormLink
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            category:
              description: Category for organizing form links
              enum:
              - HSEQ
              - Delivery
              example: HSEQ
              type: string
            description:
              description: Optional description
              example: Use this form to report safety incidents on site
              type: string
            display_label:
              description: User-friendly display name
              example: Incident Report Form
              type: string
            form_alias:
              description: DS Site form alias
              example: incident_report
              type: string
          required:
          - category
          - form_alias
          - display_label
          type: object
      responses:
        201:
          description: Form link created successfully
          schema:
            properties:
              category:
                enum:
                - HSEQ
                - Delivery
                example: HSEQ
                type: string
              created_at:
                example: '2025-11-03T10:30:00.123456Z'
                format: date-time
                type: string
              created_by:
                example: user_abc123
                type: string
              created_by_user_id:
                example: user_abc123
                type: string
              description:
                example: Use this form to report safety incidents on site
                type: string
              display_label:
                example: Incident Report Form
                type: string
              doc_type:
                example: hz_ds_site_form_links
                type: string
              form_alias:
                example: incident_report
                type: string
              id:
                example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                type: string
              is_deleted:
                example: false
                type: boolean
              updated_at:
                example: '2025-11-03T10:30:00.123456Z'
                format: date-time
                type: string
              workspace_id:
                example: your-workspace-id
                type: string
            type: object
        400:
          description: Bad request - missing required fields or invalid category
          schema:
            properties:
              message:
                example: Missing required fields
                type: string
              missing:
                example:
                - form_alias
                - category
                items:
                  type: string
                type: array
            type: object
        401:
          description: Unauthorized
        403:
          description: Workspace ID mismatch
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a new form link
      tags:
      - HzFormLinks
  /v2/workspaces/{workspace_id}/hz-form-links/{link_id}:
    delete:
      operationId: v2_deleteFormLink
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - description: Form link ID
        in: path
        name: link_id
        required: true
        type: string
      responses:
        200:
          description: Form link deleted successfully
          schema:
            properties:
              message:
                example: Form link deleted successfully
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Workspace ID mismatch
        404:
          description: Form link not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Delete a form link (soft delete)
      tags:
      - HzFormLinks
    get:
      operationId: v2_getFormLink
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - description: Form link ID
        in: path
        name: link_id
        required: true
        type: string
      responses:
        200:
          description: Form link retrieved successfully
          schema:
            properties:
              category:
                enum:
                - HSEQ
                - Delivery
                example: HSEQ
                type: string
              created_at:
                example: '2025-11-03T10:30:00.123456Z'
                format: date-time
                type: string
              created_by_user_id:
                example: user_abc123
                type: string
              description:
                example: Use this form to report safety incidents on site
                type: string
              display_label:
                example: Incident Report Form
                type: string
              form_alias:
                example: incident_report
                type: string
              id:
                example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                type: string
              is_deleted:
                example: false
                type: boolean
              updated_at:
                example: '2025-11-03T10:30:00.123456Z'
                format: date-time
                type: string
              workspace_id:
                example: your-workspace-id
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Workspace ID mismatch
        404:
          description: Form link not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get a specific form link by ID
      tags:
      - HzFormLinks
    put:
      operationId: v2_updateFormLink
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - description: Form link ID
        in: path
        name: link_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            category:
              enum:
              - HSEQ
              - Delivery
              example: HSEQ
              type: string
            description:
              example: Updated description
              type: string
            display_label:
              example: Updated Incident Report Form
              type: string
            form_alias:
              example: incident_report
              type: string
          type: object
      responses:
        200:
          description: Form link updated successfully
          schema:
            properties:
              category:
                enum:
                - HSEQ
                - Delivery
                example: HSEQ
                type: string
              created_at:
                example: '2025-11-03T10:30:00.123456Z'
                format: date-time
                type: string
              created_by_user_id:
                example: user_abc123
                type: string
              description:
                example: Updated description
                type: string
              display_label:
                example: Updated Incident Report Form
                type: string
              form_alias:
                example: incident_report
                type: string
              id:
                example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
                type: string
              is_deleted:
                example: false
                type: boolean
              updated_at:
                example: '2025-11-03T11:45:00.123456Z'
                format: date-time
                type: string
              updated_by:
                example: user_abc123
                type: string
              workspace_id:
                example: your-workspace-id
                type: string
            type: object
        400:
          description: Bad request - invalid request body
        401:
          description: Unauthorized
        403:
          description: Workspace ID mismatch
        404:
          description: Form link not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update an existing form link
      tags:
      - HzFormLinks
  /v2/workspaces/{workspace_id}/hz-sub-form-links:
    get:
      operationId: v2_listSubFormLinks
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - description: Filter links by father type (parent form type)
        in: query
        name: father_type
        required: false
        type: string
      - description: Filter links by form alias
        in: query
        name: form_alias
        required: false
        type: string
      - description: Filter links by active status
        in: query
        name: is_active
        required: false
        type: boolean
      - description: Text search across father_type and form_alias
        in: query
        name: q
        required: false
        type: string
      - default: 1
        description: Page number for pagination
        in: query
        minimum: 1
        name: page
        required: false
        type: integer
      - default: 25
        description: Number of items per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Sub-form links retrieved successfully
          schema:
            properties:
              items:
                items:
                  properties:
                    created_at:
                      example: '2025-11-03T10:30:00.123456Z'
                      format: date-time
                      type: string
                    created_by_user_id:
                      example: user_abc123
                      type: string
                    father_type:
                      example: incident_report
                      type: string
                    form_alias:
                      example: injury_details
                      type: string
                    id:
                      example: b2c3d4e5-f6g7-8901-bcde-fg2345678901
                      type: string
                    is_active:
                      example: true
                      type: boolean
                    is_deleted:
                      example: false
                      type: boolean
                    updated_at:
                      example: '2025-11-03T10:30:00.123456Z'
                      format: date-time
                      type: string
                    workspace_id:
                      example: your-workspace-id
                      type: string
                  type: object
                type: array
              limit:
                example: 25
                type: integer
              page:
                example: 1
                type: integer
              source:
                example: firestore
                type: string
              total_count:
                example: 3
                type: integer
            type: object
        400:
          description: Bad request - invalid parameters
        401:
          description: Unauthorized
        403:
          description: Workspace ID mismatch
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: List all sub-form links for a workspace
      tags:
      - HzSubFormLinks
    post:
      operationId: v2_createSubFormLink
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            father_type:
              description: Parent form type that contains this sub-form
              example: incident_report
              type: string
            form_alias:
              description: DS Site sub-form alias
              example: injury_details
              type: string
            is_active:
              description: Whether this sub-form link is active (defaults to true)
              example: true
              type: boolean
          required:
          - father_type
          - form_alias
          type: object
      responses:
        201:
          description: Sub-form link created successfully
          schema:
            properties:
              created_at:
                example: '2025-11-03T10:30:00.123456Z'
                format: date-time
                type: string
              created_by:
                example: user_abc123
                type: string
              created_by_user_id:
                example: user_abc123
                type: string
              doc_type:
                example: hz_ds_site_sub_form_links
                type: string
              father_type:
                example: incident_report
                type: string
              form_alias:
                example: injury_details
                type: string
              id:
                example: b2c3d4e5-f6g7-8901-bcde-fg2345678901
                type: string
              is_active:
                example: true
                type: boolean
              is_deleted:
                example: false
                type: boolean
              updated_at:
                example: '2025-11-03T10:30:00.123456Z'
                format: date-time
                type: string
              workspace_id:
                example: your-workspace-id
                type: string
            type: object
        400:
          description: Bad request - missing required fields
          schema:
            properties:
              message:
                example: Missing required fields
                type: string
              missing:
                example:
                - form_alias
                - father_type
                items:
                  type: string
                type: array
            type: object
        401:
          description: Unauthorized
        403:
          description: Workspace ID mismatch
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Create a new sub-form link
      tags:
      - HzSubFormLinks
  /v2/workspaces/{workspace_id}/hz-sub-form-links/{link_id}:
    get:
      operationId: v2_getSubFormLink
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - description: Sub-form link ID
        in: path
        name: link_id
        required: true
        type: string
      responses:
        200:
          description: Sub-form link retrieved successfully
          schema:
            properties:
              created_at:
                example: '2025-11-03T10:30:00.123456Z'
                format: date-time
                type: string
              created_by_user_id:
                example: user_abc123
                type: string
              father_type:
                example: incident_report
                type: string
              form_alias:
                example: injury_details
                type: string
              id:
                example: b2c3d4e5-f6g7-8901-bcde-fg2345678901
                type: string
              is_active:
                example: true
                type: boolean
              is_deleted:
                example: false
                type: boolean
              updated_at:
                example: '2025-11-03T10:30:00.123456Z'
                format: date-time
                type: string
              workspace_id:
                example: your-workspace-id
                type: string
            type: object
        401:
          description: Unauthorized
        403:
          description: Workspace ID mismatch
        404:
          description: Sub-form link not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Get a specific sub-form link by ID
      tags:
      - HzSubFormLinks
    put:
      operationId: v2_updateSubFormLink
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - description: Sub-form link ID
        in: path
        name: link_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            father_type:
              example: incident_report
              type: string
            form_alias:
              example: injury_details
              type: string
            is_active:
              example: false
              type: boolean
          type: object
      responses:
        200:
          description: Sub-form link updated successfully
          schema:
            properties:
              created_at:
                example: '2025-11-03T10:30:00.123456Z'
                format: date-time
                type: string
              created_by_user_id:
                example: user_abc123
                type: string
              father_type:
                example: incident_report
                type: string
              form_alias:
                example: injury_details
                type: string
              id:
                example: b2c3d4e5-f6g7-8901-bcde-fg2345678901
                type: string
              is_active:
                example: false
                type: boolean
              is_deleted:
                example: false
                type: boolean
              updated_at:
                example: '2025-11-03T11:45:00.123456Z'
                format: date-time
                type: string
              updated_by:
                example: user_abc123
                type: string
              workspace_id:
                example: your-workspace-id
                type: string
            type: object
        400:
          description: Bad request - invalid request body
        401:
          description: Unauthorized
        403:
          description: Workspace ID mismatch
        404:
          description: Sub-form link not found
        500:
          description: Internal Server Error
      security:
      - JWT_v2: []
      summary: Update an existing sub-form link
      tags:
      - HzSubFormLinks
  /v2/workspaces/{workspace_id}/invoice-reconciliation/email-accounts:
    get:
      operationId: v2_listInvoiceEmailAccounts
      parameters:
      - in: path
        name: workspace_id
        required: true
        type: string
      responses:
        200:
          description: Provider statuses retrieved
          schema:
            properties:
              google:
                type: object
              microsoft:
                type: object
            type: object
        403:
          description: Unauthorized - workspace access required
      security:
      - JWT_v2: []
      summary: List all email provider connection statuses
      tags:
      - InvoiceReconciliation
  /v2/workspaces/{workspace_id}/invoice-reconciliation/email-accounts/auth-url:
    get:
      operationId: v2_getInvoiceEmailAuthUrl
      parameters:
      - in: path
        name: workspace_id
        required: true
        type: string
      - enum:
        - google
        - microsoft
        in: query
        name: provider
        required: true
        type: string
      - in: query
        name: redirect_uri
        required: true
        type: string
      responses:
        200:
          description: Authorization URL generated
          schema:
            properties:
              auth_url:
                type: string
              provider:
                type: string
              state:
                type: string
            type: object
        400:
          description: Bad request
        403:
          description: Unauthorized - workspace access required
      security:
      - JWT_v2: []
      summary: Get OAuth authorization URL for email provider
      tags:
      - InvoiceReconciliation
  /v2/workspaces/{workspace_id}/invoice-reconciliation/email-accounts/callback:
    post:
      operationId: v2_invoiceEmailCallback
      parameters:
      - in: path
        name: workspace_id
        required: true
        type: string
      - in: body
        name: body
        required: true
        schema:
          properties:
            code:
              type: string
            provider:
              enum:
              - google
              - microsoft
              type: string
            redirect_uri:
              type: string
            state:
              type: string
          required:
          - provider
          - code
          - redirect_uri
          type: object
      responses:
        200:
          description: Email account connected
        400:
          description: Bad request
        403:
          description: Unauthorized - workspace access required
      security:
      - JWT_v2: []
      summary: OAuth callback handler
      tags:
      - InvoiceReconciliation
  /v2/workspaces/{workspace_id}/invoice-reconciliation/email-accounts/{provider}:
    delete:
      operationId: v2_disconnectInvoiceEmailProvider
      parameters:
      - in: path
        name: workspace_id
        required: true
        type: string
      - enum:
        - google
        - microsoft
        in: path
        name: provider
        required: true
        type: string
      responses:
        200:
          description: Provider disconnected
        403:
          description: Unauthorized - workspace access required
      security:
      - JWT_v2: []
      summary: Disconnect email provider
      tags:
      - InvoiceReconciliation
    get:
      operationId: v2_getInvoiceEmailProvider
      parameters:
      - in: path
        name: workspace_id
        required: true
        type: string
      - enum:
        - google
        - microsoft
        in: path
        name: provider
        required: true
        type: string
      responses:
        200:
          description: Provider status retrieved
        403:
          description: Unauthorized - workspace access required
      security:
      - JWT_v2: []
      summary: Get specific provider status
      tags:
      - InvoiceReconciliation
  /v2/workspaces/{workspace_id}/invoice-reconciliation/email-accounts/{provider}/primary:
    patch:
      operationId: v2_setInvoiceEmailPrimary
      parameters:
      - in: path
        name: workspace_id
        required: true
        type: string
      - enum:
        - google
        - microsoft
        in: path
        name: provider
        required: true
        type: string
      responses:
        200:
          description: Provider set as primary
        403:
          description: Unauthorized - workspace access required
      security:
      - JWT_v2: []
      summary: Set email provider as primary
      tags:
      - InvoiceReconciliation
  /v2/workspaces/{workspace_id}/invoice-reconciliation/email-inbox:
    get:
      description: Returns paginated list of synced invoice emails with filtering
      operationId: v2_listInvoiceEmails
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - default: 1
        description: Page number (1-indexed)
        in: query
        name: page
        required: false
        type: integer
      - default: 50
        description: Items per page
        in: query
        maximum: 100
        name: limit
        required: false
        type: integer
      - description: Filter by sender email address
        in: query
        name: from_address
        required: false
        type: string
      - description: Filter by subject (contains)
        in: query
        name: subject
        required: false
        type: string
      - description: Filter emails received on or after this date (ISO-8601)
        format: date-time
        in: query
        name: start_date
        required: false
        type: string
      - description: Filter emails received on or before this date (ISO-8601)
        format: date-time
        in: query
        name: end_date
        required: false
        type: string
      - default: true
        description: Include full attachment details (filename, size, signed URLs)
          instead of just attachment IDs
        in: query
        name: include_attachments
        required: false
        type: boolean
      responses:
        200:
          description: Email list retrieved
          schema:
            properties:
              data:
                items:
                  properties:
                    attachment_count:
                      type: integer
                    attachment_ids:
                      items:
                        type: string
                      type: array
                    attachments:
                      description: Full attachment details (only present if include_attachments=true)
                      items:
                        properties:
                          content_type:
                            type: string
                          file_extension:
                            type: string
                          file_size:
                            type: integer
                          filename:
                            type: string
                          id:
                            type: string
                          is_inline:
                            type: boolean
                          signed_url:
                            type: string
                          signed_url_expires_at:
                            format: date-time
                            type: string
                          upload_status:
                            type: string
                        type: object
                      type: array
                    email_id:
                      type: string
                    from_address:
                      type: string
                    from_name:
                      type: string
                    has_attachments:
                      type: boolean
                    id:
                      type: string
                    provider:
                      enum:
                      - google
                      - microsoft
                      type: string
                    received_datetime:
                      format: date-time
                      type: string
                    subject:
                      type: string
                  type: object
                type: array
              pagination:
                properties:
                  limit:
                    type: integer
                  page:
                    type: integer
                  total_count:
                    type: integer
                  total_pages:
                    type: integer
                type: object
              status:
                example: success
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Invalid parameters
        403:
          description: Unauthorized - workspace access required
        500:
          description: Failed to list emails
      security:
      - JWT_v2: []
      summary: List synced emails for workspace
      tags:
      - InvoiceReconciliation
  /v2/workspaces/{workspace_id}/invoice-reconciliation/email-inbox/batch-ai-process:
    post:
      description: Process all unprocessed emails in the workspace with AI to extract
        invoice data. Uses Vertex AI for parallel processing.
      operationId: v2_batchAiProcessInvoiceEmails
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - default: 8
        description: Number of concurrent workers for batch AI processing
        in: query
        maximum: 20
        minimum: 1
        name: max_workers
        required: false
        type: integer
      responses:
        200:
          description: Batch processing completed
          schema:
            properties:
              failed:
                description: Failed emails
                type: integer
              message:
                example: Processed 25 unprocessed emails
                type: string
              status:
                example: success
                type: string
              successful:
                description: Successfully processed emails
                type: integer
              total:
                description: Total emails processed
                type: integer
            type: object
        403:
          description: Unauthorized - workspace access required
        500:
          description: Batch processing failed
      security:
      - JWT_v2: []
      summary: Batch AI process all unprocessed emails in workspace
      tags:
      - InvoiceReconciliation
  /v2/workspaces/{workspace_id}/invoice-reconciliation/email-inbox/debug:
    get:
      description: Returns raw Firestore query results for debugging purposes
      operationId: v2_debugInvoiceEmailFirestore
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      responses:
        200:
          description: Debug information retrieved
          schema:
            properties:
              debug_info:
                type: object
              email_account:
                type: object
              status:
                type: string
              sync_state:
                type: object
              workspace_id:
                type: string
            type: object
        403:
          description: Unauthorized - workspace access required
        500:
          description: Debug operation failed
      security:
      - JWT_v2: []
      summary: Debug endpoint - Check Firestore data (development only)
      tags:
      - InvoiceReconciliation
  /v2/workspaces/{workspace_id}/invoice-reconciliation/email-inbox/fetch-direct:
    get:
      description: Synchronously fetches emails from Gmail/Outlook, stores to Firestore,
        and returns data immediately. Ideal for local testing, user-initiated refreshes,
        and debugging without Cloud Tasks infrastructure.
      operationId: v2_fetchInvoiceEmailsDirect
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - default: all
        description: Which provider(s) to fetch from
        enum:
        - google
        - microsoft
        - all
        in: query
        name: provider
        required: false
        type: string
      - default: incremental
        description: Incremental uses cursors, full re-fetches all emails since connection
        enum:
        - incremental
        - full
        in: query
        name: sync_type
        required: false
        type: string
      - default: 50
        description: Max emails to fetch per provider
        in: query
        maximum: 100
        minimum: 1
        name: limit
        required: false
        type: integer
      responses:
        200:
          description: Emails fetched and stored successfully
          schema:
            properties:
              execution_time_ms:
                description: Total execution time in milliseconds
                type: integer
              results:
                description: Per-provider results
                properties:
                  google:
                    properties:
                      attachments_count:
                        type: integer
                      emails:
                        description: Array of fetched emails with metadata
                        items:
                          type: object
                        type: array
                      new_emails_count:
                        type: integer
                      provider:
                        type: string
                      skipped_duplicates:
                        type: integer
                      status:
                        type: string
                      stored_count:
                        type: integer
                      total_fetched:
                        type: integer
                    type: object
                  microsoft:
                    type: object
                type: object
              status:
                description: Overall operation status
                enum:
                - success
                - partial_success
                - error
                type: string
              summary:
                properties:
                  providers_failed:
                    type: integer
                  providers_succeeded:
                    type: integer
                  total_attachments:
                    type: integer
                  total_fetched:
                    type: integer
                  total_stored:
                    type: integer
                type: object
              sync_batch_id:
                description: UUID for this sync batch
                type: string
              sync_type:
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Invalid parameters or no accounts connected
          schema:
            properties:
              message:
                type: string
              status:
                type: string
            type: object
        403:
          description: Unauthorized - workspace access required
        500:
          description: Fetch failed
          schema:
            properties:
              error:
                type: string
              message:
                type: string
              status:
                type: string
            type: object
      security:
      - JWT_v2: []
      summary: Fetch emails synchronously without Cloud Tasks
      tags:
      - InvoiceReconciliation
  /v2/workspaces/{workspace_id}/invoice-reconciliation/email-inbox/sync:
    get:
      description: Dispatches a Cloud Task to sync emails from connected Gmail/Outlook
        accounts
      operationId: v2_triggerInvoiceEmailSync
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - default: incremental
        description: Type of sync (incremental uses delta/history, full re-syncs all)
        enum:
        - incremental
        - full
        in: query
        name: sync_type
        required: false
        type: string
      responses:
        200:
          description: Sync task queued successfully
          schema:
            properties:
              message:
                example: Email sync initiated
                type: string
              status:
                example: queued
                type: string
              sync_type:
                type: string
              task_id:
                description: Cloud Tasks task ID
                type: string
              workspace_id:
                type: string
            type: object
        400:
          description: Invalid sync_type parameter
        403:
          description: Unauthorized - workspace access required
        500:
          description: Failed to initiate sync
      security:
      - JWT_v2: []
      summary: Trigger manual email sync for workspace
      tags:
      - InvoiceReconciliation
  /v2/workspaces/{workspace_id}/invoice-reconciliation/email-inbox/sync-status:
    get:
      description: Returns sync state including last sync time, status, and email
        counts
      operationId: v2_getInvoiceEmailSyncStatus
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      responses:
        200:
          description: Sync status retrieved
          schema:
            properties:
              has_synced:
                type: boolean
              providers:
                properties:
                  google:
                    properties:
                      emails_synced_total:
                        type: integer
                      has_synced:
                        type: boolean
                      is_enabled:
                        type: boolean
                      last_sync_at:
                        format: date-time
                        type: string
                      last_sync_status:
                        type: string
                    type: object
                  microsoft:
                    type: object
                type: object
              status:
                example: success
                type: string
              workspace_id:
                type: string
            type: object
        403:
          description: Unauthorized - workspace access required
        500:
          description: Failed to get sync status
      security:
      - JWT_v2: []
      summary: Get email sync status for workspace
      tags:
      - InvoiceReconciliation
  /v2/workspaces/{workspace_id}/invoice-reconciliation/email-inbox/{email_id}/ai-process:
    post:
      description: Process a single email with AI (Vertex AI) to extract invoice information
        including invoice number, date, vendor, amounts, and line items.
      operationId: v2_aiProcessInvoiceEmail
      parameters:
      - description: Workspace ID
        in: path
        name: workspace_id
        required: true
        type: string
      - description: Email document ID
        in: path
        name: email_id
        required: true
        type: string
      responses:
        200:
          description: AI processing completed
          schema:
            properties:
              data:
                description: Extracted invoice data
                properties:
                  amount:
                    type: number
                  confidence_score:
                    maximum: 1
                    minimum: 0
                    type: number
                  currency:
                    type: string
                  due_date:
                    format: date
                    type: string
                  invoice_date:
                    format: date
                    type: string
                  invoice_number:
                    type: string
                  line_items:
                    items:
                      type: object
                    type: array
                  payment_terms:
                    type: string
                  processing_notes:
                    type: string
                  tax_amount:
                    type: number
                  vendor_abn:
                    type: string
                  vendor_name:
                    type: string
                type: object
              status:
                example: success
                type: string
            type: object
        403:
          description: Unauthorized - workspace access required
        404:
          description: Email not found
        500:
          description: AI processing failed
      security:
      - JWT_v2: []
      summary: AI process single email to extract invoice data
      tags:
      - InvoiceReconciliation
schemes:
- https
securityDefinitions:
  JWT_v2:
    authorizationUrl: ''
    flow: implicit
    type: oauth2
swagger: '2.0'
